/* eslint-disable */
(function (global, factory) {
typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, require('@angular/common'), require('@angular/core'), require('@angular/forms'), require('@angular/platform-browser')) :
typeof define === 'function' && define.amd ? define(['exports', '@angular/common', '@angular/core', '@angular/forms', '@angular/platform-browser'], factory) :
(global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory(global.mobiscroll = {}, global.angularCommon, global.angularCore, global.angularForms, global.angularPlatformBrowser));
}(this, (function (exports, common, core, forms, platformBrowser) { 'use strict';

/* eslint-disable */
var remote={apiKey:"eaa2ad89",apiUrl:"https://trial.mobiscroll.com/"};var extendStatics=function(d,b){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b;}||function(d,b){for(var p in b)if(Object.prototype.hasOwnProperty.call(b,p))d[p]=b[p];};return extendStatics(d,b)};function __extends(d,b){if(typeof b!=="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d;}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __);}var __assign=function(){__assign=Object.assign||function __assign(t){for(var s,i=1,n=arguments.length;i<n;i++){s=arguments[i];for(var p in s)if(Object.prototype.hasOwnProperty.call(s,p))t[p]=s[p];}return t};return __assign.apply(this,arguments)};function __rest(s,e){var t={};for(var p in s)if(Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0)t[p]=s[p];if(s!=null&&typeof Object.getOwnPropertySymbols==="function")for(var i=0,p=Object.getOwnPropertySymbols(s);i<p.length;i++){if(e.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i]))t[p[i]]=s[p[i]];}return t}function __decorate(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)if(d=decorators[i])r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r;return c>3&&r&&Object.defineProperty(target,key,r),r}var Observable=/*#__PURE__*/function(){function Observable(){this.nr=0;this.keys=1;this.subscribers={};}Observable.prototype.subscribe=function(handler){var key=this.keys++;this.subscribers[key]=handler;this.nr++;return key};Observable.prototype.unsubscribe=function(key){this.nr--;delete this.subscribers[key];};Observable.prototype.next=function(value){var subscribers=this.subscribers;for(var key in subscribers){if(subscribers.hasOwnProperty(key)){subscribers[key](value);}}};return Observable}();exports.ɵy = void 0;var vers;exports.ɵz = void 0;exports.ɵba = void 0;var version=[];var touchUi=false;var isBrowser=typeof window!=="undefined";var isDarkQuery=isBrowser&&window.matchMedia&&window.matchMedia("(prefers-color-scheme:dark)");var userAgent=isBrowser?navigator.userAgent:"";var platform=isBrowser?navigator.platform:"";var maxTouchPoints=isBrowser?navigator.maxTouchPoints:0;var device=userAgent&&userAgent.match(/Android|iPhone|iPad|iPod|Windows Phone|Windows|MSIE/i);var isSafari=userAgent&&/Safari/.test(userAgent);if(/Android/i.test(device)){exports.ɵy="android";vers=userAgent.match(/Android\s+([\d.]+)/i);touchUi=true;if(vers){version=vers[0].replace("Android ","").split(".");}}else if(/iPhone|iPad|iPod/i.test(device)||/iPhone|iPad|iPod/i.test(platform)||platform==="MacIntel"&&maxTouchPoints>1){exports.ɵy="ios";vers=userAgent.match(/OS\s+([\d_]+)/i);touchUi=true;if(vers){version=vers[0].replace(/_/g,".").replace("OS ","").split(".");}}else if(/Windows Phone/i.test(device)){exports.ɵy="wp";touchUi=true;}else if(/Windows|MSIE/i.test(device)){exports.ɵy="windows";}exports.ɵz=+version[0];exports.ɵba=+version[1];var options={};var util={};var themes={};var autoDetect={};var globalChanges=new Observable;function getAutoTheme(){var autoTheme="";var theme="";var firstTheme="";if(exports.ɵy==="android"){theme="material";}else if(exports.ɵy==="wp"||exports.ɵy==="windows"){theme="windows";}else {theme="ios";}for(var key in themes){if(themes[key].baseTheme===theme&&themes[key].auto!==false&&key!==theme+"-dark"){autoTheme=key;break}else if(key===theme){autoTheme=key;}else if(!firstTheme){firstTheme=key;}}return autoTheme||firstTheme}function setOptions(local){for(var k in local){if(local.hasOwnProperty(k)){options[k]=local[k];}}globalChanges.next(options);}function createCustomTheme(name,baseTheme,auto){var base=themes[baseTheme];themes[name]=__assign({},base,{auto:auto,baseTheme:baseTheme});autoDetect.theme=getAutoTheme();}var platform$1={majorVersion:exports.ɵz,minorVersion:exports.ɵba,name:exports.ɵy};var arrowBack='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M217.9 256L345 129c9.4-9.4 9.4-24.6 0-33.9-9.4-9.4-24.6-9.3-34 0L167 239c-9.1 9.1-9.3 23.7-.7 33.1L310.9 417c4.7 4.7 10.9 7 17 7s12.3-2.3 17-7c9.4-9.4 9.4-24.6 0-33.9L217.9 256z"/></svg>';var arrowDown='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M256 294.1L383 167c9.4-9.4 24.6-9.4 33.9 0s9.3 24.6 0 34L273 345c-9.1 9.1-23.7 9.3-33.1.7L95 201.1c-4.7-4.7-7-10.9-7-17s2.3-12.3 7-17c9.4-9.4 24.6-9.4 33.9 0l127.1 127z"/></svg>';var arrowForward='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M294.1 256L167 129c-9.4-9.4-9.4-24.6 0-33.9s24.6-9.3 34 0L345 239c9.1 9.1 9.3 23.7.7 33.1L201.1 417c-4.7 4.7-10.9 7-17 7s-12.3-2.3-17-7c-9.4-9.4-9.4-24.6 0-33.9l127-127.1z"/></svg>';var arrowUp='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M256 217.9L383 345c9.4 9.4 24.6 9.4 33.9 0 9.4-9.4 9.3-24.6 0-34L273 167c-9.1-9.1-23.7-9.3-33.1-.7L95 310.9c-4.7 4.7-7 10.9-7 17s2.3 12.3 7 17c9.4 9.4 24.6 9.4 33.9 0l127.1-127z"/></svg>';var clear='<svg xmlns="http://www.w3.org/2000/svg" height="17" viewBox="0 0 17 17" width="17"><path d="M8.5 0a8.5 8.5 0 110 17 8.5 8.5 0 010-17zm3.364 5.005a.7.7 0 00-.99 0l-2.44 2.44-2.439-2.44-.087-.074a.7.7 0 00-.903 1.064l2.44 2.439-2.44 2.44-.074.087a.7.7 0 001.064.903l2.439-2.441 2.44 2.441.087.074a.7.7 0 00.903-1.064l-2.441-2.44 2.441-2.439.074-.087a.7.7 0 00-.074-.903z" fill="currentColor" fill-rule="evenodd"/></svg>';var textFieldOpt={clearIcon:clear,labelStyle:"inline"};themes.ios={Calendar:{nextIconH:arrowForward,nextIconV:arrowDown,prevIconH:arrowBack,prevIconV:arrowUp},Checkbox:{position:"end"},Datepicker:{clearIcon:clear,display:"bottom"},Dropdown:textFieldOpt,Eventcalendar:{chevronIconDown:arrowDown,nextIconH:arrowForward,nextIconV:arrowDown,prevIconH:arrowBack,prevIconV:arrowUp},Input:textFieldOpt,Radio:{position:"end"},Scroller:{display:"bottom",itemHeight:34,minWheelWidth:55,rows:5,scroll3d:true},SegmentedGroup:{drag:true},Select:{clearIcon:clear},Textarea:textFieldOpt};createCustomTheme("ios-dark","ios");var arrowDropDown='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M7 10l5 5 5-5z"/><path d="M0 0h24v24H0z" fill="none"/></svg>';var arrowDropUp='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M7 14l5-5 5 5z"/><path d="M0 0h24v24H0z" fill="none"/></svg>';var chevronLeft='<svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 36 36"><path d="M23.12 11.12L21 9l-9 9 9 9 2.12-2.12L16.24 18z"/></svg>';var chevronRight='<svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 36 36"><path d="M15 9l-2.12 2.12L19.76 18l-6.88 6.88L15 27l9-9z"/></svg>';var clear$1='<svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" width="24"><path d="M0 0h24v24H0z" fill="none"/><path d="M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z"/></svg>';var keyboardArrowDown='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M7.41 8.59L12 13.17l4.59-4.58L18 10l-6 6-6-6 1.41-1.41z"/><path fill="none" d="M0 0h24v24H0V0z"/></svg>';var keyboardArrowUp='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"/><path d="M0 0h24v24H0z" fill="none"/></svg>';var textFieldOpt$1={clearIcon:clear$1,dropdownIcon:arrowDropDown,inputStyle:"box",labelStyle:"floating",notch:true,ripple:true};themes.material={Button:{ripple:true},Calendar:{downIcon:arrowDropDown,nextIconH:chevronRight,nextIconV:keyboardArrowDown,prevIconH:chevronLeft,prevIconV:keyboardArrowUp,upIcon:arrowDropUp},Datepicker:{clearIcon:clear$1,display:"center"},Dropdown:textFieldOpt$1,Eventcalendar:{chevronIconDown:keyboardArrowDown,colorEventList:true,downIcon:arrowDropDown,nextIconH:chevronRight,nextIconV:keyboardArrowDown,prevIconH:chevronLeft,prevIconV:keyboardArrowUp,upIcon:arrowDropUp},Input:textFieldOpt$1,ListItem:{ripple:true},Scroller:{display:"center",rows:3},Select:{clearIcon:clear$1,rows:3},Textarea:textFieldOpt$1};createCustomTheme("material-dark","material");var angleDown='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M4.22 10.78l-1.44 1.44 12.5 12.5.72.686.72-.687 12.5-12.5-1.44-1.44L16 22.564 4.22 10.78z"/></svg>';var angleLeft='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M19.03 4.28l-11 11-.686.72.687.72 11 11 1.44-1.44L10.187 16l10.28-10.28-1.437-1.44z"/></svg>';var angleRight='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M12.97 4.28l-1.44 1.44L21.814 16 11.53 26.28l1.44 1.44 11-11 .686-.72-.687-.72-11-11z"/></svg>';var angleUp='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M16 6.594l-.72.687-12.5 12.5 1.44 1.44L16 9.437l11.78 11.78 1.44-1.437-12.5-12.5-.72-.686z"/></svg>';themes.mobiscroll={Calendar:{nextIconH:angleRight,nextIconV:angleDown,prevIconH:angleLeft,prevIconV:angleUp},Eventcalendar:{nextIconH:angleRight,nextIconV:angleDown,prevIconH:angleLeft,prevIconV:angleUp},Input:{notch:true,ripple:true}};createCustomTheme("mobiscroll-dark","mobiscroll");var arrowDown$1='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M15 4v20.063L8.22 17.28l-1.44 1.44 8.5 8.5.72.686.72-.687 8.5-8.5-1.44-1.44L17 24.063V4h-2z"/></svg>';var arrowUp$1='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M16 4.094l-.72.687-8.5 8.5 1.44 1.44L15 7.936V28h2V7.937l6.78 6.782 1.44-1.44-8.5-8.5-.72-.686z"/></svg>';var close='<svg fill="#000000" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32" width="32px" height="32px"><path d="M 7.21875 5.78125 L 5.78125 7.21875 L 14.5625 16 L 5.78125 24.78125 L 7.21875 26.21875 L 16 17.4375 L 24.78125 26.21875 L 26.21875 24.78125 L 17.4375 16 L 26.21875 7.21875 L 24.78125 5.78125 L 16 14.5625 Z"/></svg>';var textFieldOpt$2={clearIcon:close,inputStyle:"box",labelStyle:"stacked"};themes.windows={Calendar:{nextIconH:angleRight,nextIconV:arrowDown$1,prevIconH:angleLeft,prevIconV:arrowUp$1},Checkbox:{position:"start"},Datepicker:{clearIcon:close,display:"center"},Dropdown:textFieldOpt$2,Eventcalendar:{chevronIconDown:angleDown,nextIconH:angleRight,nextIconV:arrowDown$1,prevIconH:angleLeft,prevIconV:arrowUp$1},Input:textFieldOpt$2,Scroller:{display:"center",itemHeight:44,minWheelWidth:88,rows:6},Select:{clearIcon:close,rows:6},Textarea:textFieldOpt$2};createCustomTheme("windows-dark","windows");autoDetect.theme=getAutoTheme();var ar={rtl:true,setText:"تعيين",cancelText:"إلغاء",clearText:"مسح",closeText:"إغلاق",selectedText:"{count} المحدد",dateFormat:"DD/MM/YYYY",dateFormatLong:"DD/MM/YYYY",dateWheelFormat:"|DDD D MMM|",dayNames:["الأحد","الاثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"],dayNamesShort:["أحد","اثنين","ثلاثاء","أربعاء","خميس","جمعة","سبت"],dayNamesMin:["ح","ن","ث","ر","خ","ج","س"],fromText:"يبدا",monthNames:["يناير","فبراير","مارس","ابريل","مايو","يونيو","يوليو","أغسطس","سبتمبر","أكتوبر","نوفمبر","ديسمبر"],monthNamesShort:["يناير","فبراير","مارس","ابريل","مايو","يونيو","يوليو","أغسطس","سبتمبر","أكتوبر","نوفمبر","ديسمبر"],amText:"ص",pmText:"م",timeFormat:"hh:mm A",timeWheels:"Ammhh",toText:"ينتهي",nowText:"الآن",firstDay:0,dateText:"تاريخ",timeText:"وقت",todayText:"اليوم",prevMonthText:"الشهر السابق",nextMonthText:"الشهر القادم",prevYearText:"السنه السابقة",nextYearText:"العام القادم",allDayText:"اليوم كله",noEventsText:"لا توجد احداث",eventText:"الحدث",eventsText:"أحداث",moreEventsText:"واحد آخر",moreEventsPluralText:"اثنان آخران {count}",weekText:"أسبوع {count}",rangeEndHelp:"أختر",rangeEndLabel:"ينتهي",rangeStartHelp:"أختر",rangeStartLabel:"يبدا",filterEmptyText:"لا نتيجة",filterPlaceholderText:"بحث"};var bg={setText:"Задаване",cancelText:"Отмяна",clearText:"Изчистване",closeText:"затвори",selectedText:"{count} подбран",dateFormat:"DD.MM.YYYY",dateFormatLong:"DD.MM.YYYY",dateWheelFormat:"|DDD MM.DD|",dayNames:["Неделя","Понеделник","Вторник","Сряда","Четвъртък","Петък","Събота"],dayNamesShort:["Нед","Пон","Вто","Сря","Чет","Пет","Съб"],dayNamesMin:["Не","По","Вт","Ср","Че","Пе","Съ"],fromText:"ОТ",monthNames:["Януари","Февруари","Март","Април","Май","Юни","Юли","Август","Септември","Октомври","Ноември","Декември"],monthNamesShort:["Яну","Фев","Мар","Апр","Май","Юни","Юли","Авг","Сеп","Окт","Нов","Дек"],timeFormat:"H:mm",toText:"ДО",nowText:"Сега",pmText:"pm",amText:"am",firstDay:1,dateText:"Дата",timeText:"път",todayText:"днес",prevMonthText:"Предишния месец",nextMonthText:"Следващият месец",prevYearText:"Предходната година",nextYearText:"Следващата година",eventText:"Събитие",eventsText:"Събития",allDayText:"Цял ден",noEventsText:"Няма събития",moreEventsText:"Още {count}",weekText:"Седмица {count}",rangeStartLabel:"ОТ",rangeEndLabel:"ДО",rangeStartHelp:"Избирам",rangeEndHelp:"Избирам",filterEmptyText:"Без резултат",filterPlaceholderText:"Търсене"};var ca={setText:"Acceptar",cancelText:"Cancel·lar",clearText:"Esborrar",closeText:"Tancar",selectedText:"{count} seleccionat",selectedPluralText:"{count} seleccionats",dateFormat:"DD/MM/YYYY",dateFormatLong:"DDD, D MMM YYYY",dateWheelFormat:"|DDD D MMM|",dayNames:["Diumenge","Dilluns","Dimarts","Dimecres","Dijous","Divendres","Dissabte"],dayNamesShort:["Dg","Dl","Dt","Dc","Dj","Dv","Ds"],dayNamesMin:["Dg","Dl","Dt","Dc","Dj","Dv","Ds"],fromText:"Iniciar",monthNames:["Gener","Febrer","Març","Abril","Maig","Juny","Juliol","Agost","Setembre","Octubre","Novembre","Desembre"],monthNamesShort:["Gen","Feb","Mar","Abr","Mai","Jun","Jul","Ago","Set","Oct","Nov","Des"],timeFormat:"H:mm",toText:"Final",nowText:"Ara",pmText:"pm",amText:"am",todayText:"Avui",firstDay:1,dateText:"Data",timeText:"Temps",allDayText:"Tot el dia",noEventsText:"Cap esdeveniment",eventText:"Esdeveniments",eventsText:"Esdeveniments",moreEventsText:"{count} més",weekText:"Setmana {count}",rangeStartLabel:"Iniciar",rangeEndLabel:"Final",rangeStartHelp:"Seleccionar",rangeEndHelp:"Seleccionar",filterEmptyText:"Cap resultat",filterPlaceholderText:"Buscar"};var cs={setText:"Zadej",cancelText:"Storno",clearText:"Vymazat",closeText:"Zavřít",selectedText:"Označený: {count}",dateFormat:"DD.MM.YYYY",dateFormatLong:"DDD, D.M.YYYY",dateWheelFormat:"|DDD D. M.|",dayNames:["Neděle","Pondělí","Úterý","Středa","Čtvrtek","Pátek","Sobota"],dayNamesShort:["Ne","Po","Út","St","Čt","Pá","So"],dayNamesMin:["N","P","Ú","S","Č","P","S"],fromText:"Začátek",monthNames:["Leden","Únor","Březen","Duben","Květen","Červen","Červenec","Srpen","Září","Říjen","Listopad","Prosinec"],monthNamesShort:["Led","Úno","Bře","Dub","Kvě","Čer","Čvc","Spr","Zář","Říj","Lis","Pro"],timeFormat:"H:mm",toText:"Konec",nowText:"Teď",amText:"am",pmText:"pm",todayText:"Dnes",firstDay:1,dateText:"Datum",timeText:"Čas",allDayText:"Celý den",noEventsText:"Žádné události",eventText:"Událostí",eventsText:"Události",moreEventsText:"{count} další",weekText:"{count}. týden",rangeStartLabel:"Začátek",rangeEndLabel:"Konec",rangeStartHelp:"Vybrat",rangeEndHelp:"Vybrat",filterEmptyText:"Žádné výsledky",filterPlaceholderText:"Hledat"};var da={setText:"Sæt",cancelText:"Annuller",clearText:"Ryd",closeText:"Luk",selectedText:"{count} valgt",selectedPluralText:"{count} valgt",dateFormat:"DD/MM/YYY",dateFormatLong:"DDD. D. MMM. YYYY.",dateWheelFormat:"|DDD. D. MMM.|",dayNames:["Søndag","Mandag","Tirsdag","Onsdag","Torsdag","Fredag","Lørdag"],dayNamesShort:["Søn","Man","Tir","Ons","Tor","Fre","Lør"],dayNamesMin:["S","M","T","O","T","F","L"],fromText:"Start",monthNames:["Januar","Februar","Marts","April","Maj","Juni","Juli","August","September","Oktober","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","Maj","Jun","Jul","Aug","Sep","Okt","Nov","Dec"],amText:"am",pmText:"pm",timeFormat:"HH.mm",toText:"Slut",nowText:"Nu",todayText:"I dag",firstDay:1,dateText:"Dato",timeText:"Tid",allDayText:"Hele dagen",noEventsText:"Ingen begivenheder",eventText:"Begivenheder",eventsText:"Begivenheder",moreEventsText:"{count} mere",weekText:"Uge {count}",rangeStartLabel:"Start",rangeEndLabel:"Slut",rangeStartHelp:"Vælg",rangeEndHelp:"Vælg",filterEmptyText:"Ingen resultater",filterPlaceholderText:"Søg"};var de={setText:"OK",cancelText:"Abbrechen",clearText:"Löschen",closeText:"Schließen",selectedText:"{count} ausgewählt",dateFormat:"DD.MM.YYYY",dateFormatLong:"DDD. D. MMM. YYYY.",dateWheelFormat:"|DDD. D. MMM.|",dayNames:["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"],dayNamesShort:["So","Mo","Di","Mi","Do","Fr","Sa"],dayNamesMin:["S","M","D","M","D","F","S"],fromText:"Von",monthNames:["Januar","Februar","März","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"],monthNamesShort:["Jan","Feb","Mär","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Dez"],timeFormat:"HH:mm",nowText:"Jetzt",pmText:"pm",amText:"am",todayText:"Heute",toText:"Bis",firstDay:1,dateText:"Datum",timeText:"Zeit",allDayText:"Ganztägig",noEventsText:"Keine Ereignisse",eventText:"Ereignis",eventsText:"Ereignisse",moreEventsText:"{count} weiteres Element",moreEventsPluralText:"{count} weitere Elemente",weekText:"Woche {count}",rangeStartLabel:"Von",rangeEndLabel:"Bis",rangeStartHelp:"Auswählen",rangeEndHelp:"Auswählen",filterEmptyText:"Keine Treffer",filterPlaceholderText:"Suchen"};var el={setText:"Ορισμος",cancelText:"Ακυρωση",clearText:"Διαγραφη",closeText:"Κλείσιμο",selectedText:"{count} επιλεγμένα",dateFormat:"DD/MM/YYYY",dateFormatLong:"DDD, D MMM YYYY",dateWheelFormat:"|DDD D MMM|",dayNames:["Κυριακή","Δευτέρα","Τρίτη","Τετάρτη","Πέμπτη","Παρασκευή","Σάββατο"],dayNamesShort:["Κυρ","Δευ","Τρι","Τετ","Πεμ","Παρ","Σαβ"],dayNamesMin:["Κυ","Δε","Τρ","Τε","Πε","Πα","Σα"],fromText:"Αρχή",monthNames:["Ιανουάριος","Φεβρουάριος","Μάρτιος","Απρίλιος","Μάιος","Ιούνιος","Ιούλιος","Αύγουστος","Σεπτέμβριος","Οκτώβριος","Νοέμβριος","Δεκέμβριος"],monthNamesShort:["Ιαν","Φεβ","Μαρ","Απρ","Μαι","Ιουν","Ιουλ","Αυγ","Σεπ","Οκτ","Νοε","Δεκ"],timeFormat:"H:mm",toText:"Τέλος",nowText:"τώρα",pmText:"μμ",amText:"πμ",firstDay:1,dateText:"Ημερομηνία",timeText:"φορά",todayText:"Σήμερα",prevMonthText:"Προηγούμενο μήνα",nextMonthText:"Επόμενο μήνα",prevYearText:"Προηγούμενο έτος",nextYearText:"Επόμενο έτος",eventText:"Γεγονότα",eventsText:"Γεγονότα",allDayText:"Ολοήμερο",noEventsText:"Δεν υπάρχουν γεγονότα",moreEventsText:"{count} ακόμη",weekText:"Εβδομάδα {count}",rangeStartLabel:"Αρχή",rangeEndLabel:"Τέλος",rangeStartHelp:"Επιλογή",rangeEndHelp:"Επιλογή",filterEmptyText:"Κανένα αποτέλεσμα",filterPlaceholderText:"Αναζήτηση"};var enGB={dateFormat:"DD/MM/YYYY",dateWheelFormat:"|DDD D MMM|",timeFormat:"H:mm"};var es={setText:"Aceptar",cancelText:"Cancelar",clearText:"Borrar",closeText:"Cerrar",selectedText:"{count} seleccionado",selectedPluralText:"{count} seleccionados",dateFormat:"DD/MM/YYYY",dateFormatLong:"DDD, MMM. D. YYYY",dateWheelFormat:"|DDD D MMM|",dayNames:["Domingo","Lunes","Martes","Miércoles","Jueves","Viernes","Sábado"],dayNamesShort:["Do","Lu","Ma","Mi","Ju","Vi","Sá"],dayNamesMin:["D","L","M","M","J","V","S"],fromText:"Iniciar",monthNames:["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],monthNamesShort:["Ene","Feb","Mar","Abr","May","Jun","Jul","Ago","Sep","Oct","Nov","Dic"],timeFormat:"H:mm",toText:"Final",nowText:"Ahora",pmText:"pm",amText:"am",todayText:"Hoy",firstDay:1,dateText:"Fecha",timeText:"Tiempo",allDayText:"Todo el día",noEventsText:"No hay eventos",eventText:"Evento",eventsText:"Eventos",moreEventsText:"{count} más",weekText:"Semana {count}",rangeStartLabel:"Iniciar",rangeEndLabel:"Final",rangeStartHelp:"Seleccionar",rangeEndHelp:"Seleccionar",filterEmptyText:"Sin resultados",filterPlaceholderText:"Buscar"};var UNDEFINED=undefined;getArray(3);getArray(4);var ARRAY7=getArray(7);var ARRAY24=getArray(24);function constrain(val,min,max){return Math.max(min,Math.min(val,max))}function isArray(obj){return Array.isArray(obj)}function isNumeric(a){return a-parseFloat(a)>=0}function isNumber(a){return typeof a==="number"}function isString(s){return typeof s==="string"}function isEmpty(v){return v===UNDEFINED||v===null||v===""}function isUndefined(v){return typeof v==="undefined"}function isObject(v){return typeof v==="object"}function emptyOrTrue(value){return value!==null&&value!==UNDEFINED&&""+value!=="false"}function getArray(nr){return Array.apply(0,Array(Math.max(0,nr)))}function addPixel(value){return value!==UNDEFINED?value+(isNumeric(value)?"px":""):""}function noop(){return}function pad(num,size){if(size===void 0){size=2;}var str=num+"";while(str.length<size){str="0"+str;}return str}function round(nr){return Math.round(nr)}function step(value,st){return floor(value/st)*st}function floor(nr){return Math.floor(nr)}function throttle(fn,threshhold){if(threshhold===void 0){threshhold=100;}var last;var timer;return function(){var args=[];for(var _i=0;_i<arguments.length;_i++){args[_i]=arguments[_i];}var now=+new Date;if(last&&now<last+threshhold){clearTimeout(timer);timer=setTimeout((function(){last=now;fn.apply(void 0,args);}),threshhold);}else {last=now;fn.apply(void 0,args);}}}function debounce(fn,threshhold){if(threshhold===void 0){threshhold=100;}var timer;return function(){var args=[];for(var _i=0;_i<arguments.length;_i++){args[_i]=arguments[_i];}clearTimeout(timer);timer=setTimeout((function(){fn.apply(void 0,args);}),threshhold);}}function arrayContentEquals(arr1,arr2){if(arr1===arr2){return true}if(arr1&&!arr2||arr2&&!arr1){return false}if(arr1.length!==arr2.length){return false}for(var i=0;i<arr1.length;i++){if(arr1[i]!==arr2[i]){return false}}return true}function ngSetTimeout(inst,cb){if(inst._cdr){setTimeout(cb);}else {cb();}}function find(arr,fn){return findItemOrIndex(arr,fn)}function findIndex(arr,fn){return findItemOrIndex(arr,fn,true)}function findItemOrIndex(arr,fn,index){var len=arr.length;for(var i=0;i<len;i++){var item=arr[i];if(fn(item,i)){return index?i:item}}return index?-1:UNDEFINED}function map(v,fn){if(isArray(v)){return v.map(fn)}else {return fn(v,0,[v])}}function toArray(m){var arr=[];if(m){for(var _i=0,_a=Object.keys(m);_i<_a.length;_i++){var key=_a[_i];arr.push(m[key]);}}return arr}var gDaysInMonth=[31,28,31,30,31,30,31,31,30,31,30,31];var jDaysInMonth=[31,31,31,31,31,31,30,30,30,30,30,29];function jalaliToGregorian(jY,jM,jD){var i;var jy=jY-979;var jm=jM-1;var jd=jD-1;var jDayNo=365*jy+floor(jy/33)*8+floor((jy%33+3)/4);for(i=0;i<jm;++i){jDayNo+=jDaysInMonth[i];}jDayNo+=jd;var gDayNo=jDayNo+79;var gy=1600+400*floor(gDayNo/146097);gDayNo=gDayNo%146097;var leap=true;if(gDayNo>=36525){gDayNo--;gy+=100*floor(gDayNo/36524);gDayNo=gDayNo%36524;if(gDayNo>=365){gDayNo++;}else {leap=false;}}gy+=4*floor(gDayNo/1461);gDayNo%=1461;if(gDayNo>=366){leap=false;gDayNo--;gy+=floor(gDayNo/365);gDayNo=gDayNo%365;}for(i=0;gDayNo>=gDaysInMonth[i]+(i===1&&leap?1:0);i++){gDayNo-=gDaysInMonth[i]+(i===1&&leap?1:0);}var gm=i+1;var gd=gDayNo+1;return [gy,gm,gd]}function checkDate(jY,jM,jD){return !(jY<0||jY>32767||jM<1||jM>12||jD<1||jD>jDaysInMonth[jM-1]+(jM===12&&(jY-979)%33%4===0?1:0))}function gregorianToJalali(gY,gM,gD){var i;var gy=gY-1600;var gm=gM-1;var gd=gD-1;var gDayNo=365*gy+floor((gy+3)/4)-floor((gy+99)/100)+floor((gy+399)/400);for(i=0;i<gm;++i){gDayNo+=gDaysInMonth[i];}if(gm>1&&(gy%4===0&&gy%100!==0||gy%400===0)){++gDayNo;}gDayNo+=gd;var jDayNo=gDayNo-79;var jNp=floor(jDayNo/12053);jDayNo%=12053;var jy=979+33*jNp+4*floor(jDayNo/1461);jDayNo%=1461;if(jDayNo>=366){jy+=floor((jDayNo-1)/365);jDayNo=(jDayNo-1)%365;}for(i=0;i<11&&jDayNo>=jDaysInMonth[i];++i){jDayNo-=jDaysInMonth[i];}var jm=i+1;var jd=jDayNo+1;return [jy,jm,jd]}var jalaliCalendar={getYear:function(date){return gregorianToJalali(date.getFullYear(),date.getMonth()+1,date.getDate())[0]},getMonth:function(date){return --gregorianToJalali(date.getFullYear(),date.getMonth()+1,date.getDate())[1]},getDay:function(date){return gregorianToJalali(date.getFullYear(),date.getMonth()+1,date.getDate())[2]},getDate:function(y,m,d,h,i,s,u){if(m<0){y+=floor(m/12);m=m%12?12+m%12:0;}if(m>11){y+=floor(m/12);m=m%12;}var gregorianDate=jalaliToGregorian(y,+m+1,d);return new Date(gregorianDate[0],gregorianDate[1]-1,gregorianDate[2],h||0,i||0,s||0,u||0)},getMaxDayOfMonth:function(y,m){var maxdays=31;if(m<0){y+=floor(m/12);m=m%12?12+m%12:0;}if(m>11){y+=floor(m/12);m=m%12;}while(checkDate(y,m+1,maxdays)===false){maxdays--;}return maxdays}};var fa={setText:"تاييد",cancelText:"انصراف",clearText:"واضح ",closeText:"نزدیک",selectedText:"{count} منتخب",rtl:true,calendarSystem:jalaliCalendar,dateFormat:"YYYY/MM/DD",dateFormatLong:"YYYY/MM/DD",dateWheelFormat:"|DDDD MMM D|",dayNames:["يکشنبه","دوشنبه","سه‌شنبه","چهارشنبه","پنج‌شنبه","جمعه","شنبه"],dayNamesShort:["ی","د","س","چ","پ","ج","ش"],dayNamesMin:["ی","د","س","چ","پ","ج","ش"],fromText:"شروع ",monthNames:["فروردين","ارديبهشت","خرداد","تير","مرداد","شهريور","مهر","آبان","آذر","دی","بهمن","اسفند"],monthNamesShort:["فروردين","ارديبهشت","خرداد","تير","مرداد","شهريور","مهر","آبان","آذر","دی","بهمن","اسفند"],timeFormat:"HH:mm",timeWheels:"mmHH",toText:"پایان",nowText:"اکنون",amText:"ب",pmText:"ص",todayText:"امروز",firstDay:6,dateText:"تاریخ ",timeText:"زمان ",allDayText:"تمام روز",noEventsText:"هیچ رویداد",eventText:"رویداد",eventsText:"رویدادها",moreEventsText:"{count} مورد دیگر",weekText:"{count} هفته",rangeStartLabel:"شروع ",rangeEndLabel:"پایان",rangeStartHelp:"انتخاب کنید",rangeEndHelp:"انتخاب کنید",filterEmptyText:"نتیجه ای ندارد",filterPlaceholderText:"جستجو کردن"};var fi={setText:"Aseta",cancelText:"Peruuta",clearText:"Tyhjennä",closeText:"Sulje",selectedText:"{count} valita",dateFormat:"D. MMMM YYYY",dateFormatLong:"DDD, D. MMMM, YYYY",dateWheelFormat:"|DDD D. M.|",dayNames:["Sunnuntai","Maanantai","Tiistai","Keskiviiko","Torstai","Perjantai","Lauantai"],dayNamesShort:["Su","Ma","Ti","Ke","To","Pe","La"],dayNamesMin:["S","M","T","K","T","P","L"],fromText:"Alkaa",monthNames:["Tammikuu","Helmikuu","Maaliskuu","Huhtikuu","Toukokuu","Kesäkuu","Heinäkuu","Elokuu","Syyskuu","Lokakuu","Marraskuu","Joulukuu"],monthNamesShort:["Tam","Hel","Maa","Huh","Tou","Kes","Hei","Elo","Syy","Lok","Mar","Jou"],timeFormat:"H:mm",toText:"Päättyy",nowText:"Nyt",pmText:"pm",amText:"am",firstDay:1,dateText:"Päiväys",timeText:"Aika",todayText:"Tänään",prevMonthText:"Edellinen kuukausi",nextMonthText:"Ensi kuussa",prevYearText:"Edellinen vuosi",nextYearText:"Ensi vuosi",eventText:"Tapahtumia",eventsText:"Tapahtumia",allDayText:"Koko päivä",noEventsText:"Ei tapahtumia",moreEventsText:"{count} muu",moreEventsPluralText:"{count} muuta",weekText:"Viikko {count}",rangeStartLabel:"Alkaa",rangeEndLabel:"Päättyy",rangeStartHelp:"Valitse",rangeEndHelp:"Valitse",filterEmptyText:"Ei tuloksia",filterPlaceholderText:"Haku"};var fr={setText:"Terminer",cancelText:"Annuler",clearText:"Effacer",closeText:"Fermer",selectedText:"{count} sélectionné",selectedPluralText:"{count} sélectionnés",dateFormat:"DD/MM/YYYY",dateFormatLong:"DD/MM/YYYY",dateWheelFormat:"|DDD D MMM|",dayNames:["Dimanche","Lundi","Mardi","Mercredi","Jeudi","Vendredi","Samedi"],dayNamesShort:["Dim.","Lun.","Mar.","Mer.","Jeu.","Ven.","Sam."],dayNamesMin:["D","L","M","M","J","V","S"],fromText:"Démarrer",monthNames:["Janvier","Février","Mars","Avril","Mai","Juin","Juillet","Août","Septembre","Octobre","Novembre","Décembre"],monthNamesShort:["Janv.","Févr.","Mars","Avril","Mai","Juin","Juil.","Août","Sept.","Oct.","Nov.","Déc."],timeFormat:"HH:mm",toText:"Fin",nowText:"Maintenant",pmText:"pm",amText:"am",todayText:"Aujourd'hui",firstDay:1,dateText:"Date",timeText:"Heure",allDayText:"Toute la journée",noEventsText:"Aucun événement",eventText:"Événement",eventsText:"Événements",moreEventsText:"{count} autre",moreEventsPluralText:"{count} autres",weekText:"Semaine {count}",rangeStartLabel:"Démarrer",rangeEndLabel:"Fin",rangeStartHelp:"Choisir",rangeEndHelp:"Choisir",filterEmptyText:"Aucun résultat",filterPlaceholderText:"Rechercher"};var he={rtl:true,setText:"שמירה",cancelText:"ביטול",clearText:"נקה",closeText:"סגירה",selectedText:"{count} נבחר",selectedPluralText:"{count} נבחרו",dateFormat:"DD/MM/YYYY",dateFormatLong:"DD/MM/YYYY",dateWheelFormat:"|DDD D MMM|",dayNames:["ראשון","שני","שלישי","רביעי","חמישי","שישי","שבת"],dayNamesShort:["א'","ב'","ג'","ד'","ה'","ו'","ש'"],dayNamesMin:["א","ב","ג","ד","ה","ו","ש"],fromText:"התחלה",monthNames:["ינואר","פברואר","מרץ","אפריל","מאי","יוני","יולי","אוגוסט","ספטמבר","אוקטובר","נובמבר","דצמבר"],monthNamesShort:["ינו","פבר","מרץ","אפר","מאי","יונ","יול","אוג","ספט","אוק","נוב","דצמ"],amText:"am",pmText:"pm",timeFormat:"H:mm",timeWheels:"mmH",toText:"סיום",nowText:"עכשיו",firstDay:0,dateText:"תאריך",timeText:"זמן",todayText:"היום",allDayText:"כל היום",noEventsText:"אין אירועים",eventText:"מִקרֶה",eventsText:"מִקרֶה",moreEventsText:"אירוע אחד נוסף",moreEventsPluralText:"{count} אירועים נוספים",weekText:"{count} שבוע",rangeStartLabel:"התחלה",rangeEndLabel:"סיום",rangeStartHelp:"בחר",rangeEndHelp:"בחר",filterEmptyText:"אין תוצאוה",filterPlaceholderText:"לחפש"};var hi={setText:"सैट करें",cancelText:"रद्द करें",clearText:"साफ़ को",closeText:"बंद",selectedText:"{count} चयनित",dateFormat:"DD/MM/YYYY",dateFormatLong:"DD/MM/YYYY",dateWheelFormat:"|DDD D MMM|",dayNames:["रविवा���","सोमवार","मंगलवार","बुधवार","गुरुवार","शुक्रवार","शनिवार"],dayNamesShort:["रवि","सोम","मंगल","बुध","गुरु","शुक्र","शनि"],dayNamesMin:["रवि","सोम","मंगल","बुध","गुरु","शुक्र","शनि"],fromText:"से",monthNames:["जनवरी ","फरवरी","मार्च","अप्रेल","मई","जून","जूलाई","अगस्त ","सितम्बर","अक्टूबर","नवम्बर","दिसम्बर"],monthNamesShort:["जन","फर","मार्च","अप्रेल","मई","जून","जूलाई","अग","सित","अक्ट","नव","दि"],timeFormat:"H:mm",toText:"तक",nowText:"अब",pmText:"अपराह्न",amText:"पूर्वाह्न",firstDay:1,dateText:"तिथि",timeText:"समय",todayText:"आज",prevMonthText:"पिछ्ला महिना",nextMonthText:"अगले महीने",prevYearText:"पिछला साल",nextYearText:"अगले वर्ष",eventText:"इवेट३",eventsText:"इवेट३",allDayText:"पूरे दिन",noEventsText:"Ei tapahtumia",moreEventsText:"{count} और",weekText:"सप्ताह {count}",rangeStartLabel:"से",rangeEndLabel:"तक",rangeStartHelp:"चुनें",rangeEndHelp:"चुनें",filterEmptyText:"कोई परिणाम नही",filterPlaceholderText:"खोज"};var hr={setText:"Postavi",cancelText:"Izlaz",clearText:"Izbriši",closeText:"Zatvori",selectedText:"{count} odabran",dateFormat:"DD.MM.YYYY",dateFormatLong:"DDD, D. MMM. YYYY.",dateWheelFormat:"|DDD D MMM|",dayNames:["Nedjelja","Ponedjeljak","Utorak","Srijeda","Četvrtak","Petak","Subota"],dayNamesShort:["Ned","Pon","Uto","Sri","Čet","Pet","Sub"],dayNamesMin:["Ne","Po","Ut","Sr","Če","Pe","Su"],fromText:"Počinje",monthNames:["Siječanj","Veljača","Ožujak","Travanj","Svibanj","Lipanj","Srpanj","Kolovoz","Rujan","Listopad","Studeni","Prosinac"],monthNamesShort:["Sij","Velj","Ožu","Tra","Svi","Lip","Srp","Kol","Ruj","Lis","Stu","Pro"],timeFormat:"H:mm",toText:"Završava",nowText:"Sada",pmText:"pm",amText:"am",firstDay:1,dateText:"Datum",timeText:"Vrijeme",todayText:"Danas",prevMonthText:"Prethodni mjesec",nextMonthText:"Sljedeći mjesec",prevYearText:"Prethodni godina",nextYearText:"Slijedeće godine",eventText:"Događaj",eventsText:"događaja",allDayText:"Cijeli dan",noEventsText:"Bez događaja",moreEventsText:"Još {count}",weekText:"{count}. tjedan",rangeStartLabel:"Počinje",rangeEndLabel:"Završava",rangeStartHelp:"Odaberite",rangeEndHelp:"Odaberite",filterEmptyText:"Bez rezultata",filterPlaceholderText:"Traži"};var hu={setText:"OK",cancelText:"Mégse",clearText:"Törlés",closeText:"Bezár",selectedText:"{count} kiválasztva",dateFormat:"YYYY.MM.DD.",dateFormatLong:"YYYY. MMM. D., DDD",dateWheelFormat:"|MMM. D. DDD|",dayNames:["Vasárnap","Hétfő","Kedd","Szerda","Csütörtök","Péntek","Szombat"],dayNamesShort:["Va","Hé","Ke","Sze","Csü","Pé","Szo"],dayNamesMin:["V","H","K","Sz","Cs","P","Sz"],fromText:"Eleje",monthNames:["Január","Február","Március","Április","Május","Június","Július","Augusztus","Szeptember","Október","November","December"],monthNamesShort:["Jan","Feb","Már","Ápr","Máj","Jún","Júl","Aug","Szep","Okt","Nov","Dec"],timeFormat:"H:mm",toText:"Vége",nowText:"Most",pmText:"pm",amText:"am",firstDay:1,dateText:"Dátum",timeText:"Idő",todayText:"Ma",prevMonthText:"Előző hónap",nextMonthText:"Következő hónap",prevYearText:"Előző év",nextYearText:"Következő év",eventText:"esemény",eventsText:"esemény",allDayText:"Egész nap",noEventsText:"Nincs esemény",moreEventsText:"{count} további",weekText:"{count}. hét",rangeStartLabel:"Eleje",rangeEndLabel:"Vége",rangeStartHelp:"Válasszon",rangeEndHelp:"Válasszon",filterEmptyText:"Nincs találat",filterPlaceholderText:"Keresés"};var it={setText:"OK",cancelText:"Annulla",clearText:"Chiarire",closeText:"Chiudere",selectedText:"{count} selezionato",selectedPluralText:"{count} selezionati",dateFormat:"DD/MM/YYYY",dateFormatLong:"DD/MM/YYYY",dateWheelFormat:"|DDD D MMM|",dayNames:["Domenica","Lunedì","Martedì","Mercoledì","Giovedì","Venerdì","Sabato"],dayNamesShort:["Do","Lu","Ma","Me","Gi","Ve","Sa"],dayNamesMin:["D","L","M","M","G","V","S"],fromText:"Inizio",monthNames:["Gennaio","Febbraio","Marzo","Aprile","Maggio","Giugno","Luglio","Agosto","Settembre","Ottobre","Novembre","Dicembre"],monthNamesShort:["Gen","Feb","Mar","Apr","Mag","Giu","Lug","Ago","Set","Ott","Nov","Dic"],timeFormat:"HH:mm",toText:"Fine",nowText:"Ora",pmText:"pm",amText:"am",todayText:"Oggi",firstDay:1,dateText:"Data",timeText:"Volta",allDayText:"Tutto il giorno",noEventsText:"Nessun evento",eventText:"Evento",eventsText:"Eventi",moreEventsText:"{count} altro",moreEventsPluralText:"altri {count}",weekText:"Settimana {count}",rangeStartLabel:"Inizio",rangeEndLabel:"Fine",rangeStartHelp:"Scegli",rangeEndHelp:"Scegli",filterEmptyText:"Nessun risultato",filterPlaceholderText:"Cerca"};var ja={setText:"セット",cancelText:"キャンセル",clearText:"クリア",closeText:"クローズ",selectedText:"{count} 選択",dateFormat:"YYYY年MM月DD日",dateFormatLong:"YYYY年MM月DD日",dateWheelFormat:"|M月D日 DDD|",dayNames:["日","月","火","水","木","金","土"],dayNamesShort:["日","月","火","水","木","金","土"],dayNamesMin:["日","月","火","水","木","金","土"],fromText:"開始",monthNames:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],monthNamesShort:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],timeFormat:"H:mm",toText:"終わり",nowText:"今",pmText:"午後",amText:"午前",yearSuffix:"年",monthSuffix:"月",daySuffix:"日",todayText:"今日",dateText:"日付",timeText:"時間",allDayText:"終日",noEventsText:"イベントはありません",eventText:"イベント",eventsText:"イベント",moreEventsText:"他 {count} 件",weekText:"{count}週目",rangeStartLabel:"開始",rangeEndLabel:"終わり",rangeStartHelp:"選択",rangeEndHelp:"選択",filterEmptyText:"検索結果はありません",filterPlaceholderText:"探す"};var ko={setText:"설정",cancelText:"취소",clearText:"삭제",closeText:"닫기",selectedText:"{count} 선택된",dateFormat:"YYYY년MM월DD일",dateFormatLong:"YYYY년MM월DD일",dateWheelFormat:"|M월 D일 DDD|",dayNames:["일요일","월요일","화요일","수요일","목요일","금요일","토요일"],dayNamesShort:["일","월","화","수","목","금","토"],dayNamesMin:["일","월","화","수","목","금","토"],fromText:"시작",monthNames:["1월","2월","3월","4월","5월","6월","7월","8월","9월","10월","11월","12월"],monthNamesShort:["1월","2월","3월","4월","5월","6월","7월","8월","9월","10월","11월","12월"],timeFormat:"H:mm",toText:"종료",nowText:"지금",pmText:"오후",amText:"오전",yearSuffix:"년",monthSuffix:"월",daySuffix:"일",firstDay:0,dateText:"날짜",timeText:"시간",todayText:"오늘",prevMonthText:"이전 달",nextMonthText:"다음 달",prevYearText:"이전 년",nextYearText:"다음 년",eventText:"이벤트",eventsText:"이벤트",allDayText:"종일",noEventsText:"이벤트 없음",moreEventsText:"{count}개 더보기",weekText:"{count}주차",rangeStartLabel:"시작",rangeEndLabel:"종료",rangeStartHelp:"선택",rangeEndHelp:"선택",filterEmptyText:"결과가 없다",filterPlaceholderText:"찾다"};var lt={setText:"OK",cancelText:"Atšaukti",clearText:"Išvalyti",closeText:"Uždaryti",selectedText:"Pasirinktas {count}",selectedPluralText:"Pasirinkti {count}",dateFormat:"YYYY-MM-DD",dateFormatLong:"YYYY-MM-DD",dateWheelFormat:"|MM-DD DDD|",dayNames:["Sekmadienis","Pirmadienis","Antradienis","Trečiadienis","Ketvirtadienis","Penktadienis","Šeštadienis"],dayNamesShort:["S","Pr","A","T","K","Pn","Š"],dayNamesMin:["S","Pr","A","T","K","Pn","Š"],fromText:"Nuo",monthNames:["Sausis","Vasaris","Kovas","Balandis","Gegužė","Birželis","Liepa","Rugpjūtis","Rugsėjis","Spalis","Lapkritis","Gruodis"],monthNamesShort:["Sau","Vas","Kov","Bal","Geg","Bir","Lie","Rugp","Rugs","Spa","Lap","Gruo"],amText:"am",pmText:"pm",timeFormat:"HH:mm",toText:"Iki",nowText:"Dabar",todayText:"Šiandien",firstDay:1,dateText:"Data",timeText:"Laikas",allDayText:"Visą dieną",noEventsText:"Nėra įvykių",eventText:"Įvykių",eventsText:"Įvykiai",moreEventsText:"Dar {count}",weekText:"{count} savaitė",rangeStartLabel:"Nuo",rangeEndLabel:"Iki",rangeStartHelp:"Pasirinkti",rangeEndHelp:"Pasirinkti",filterEmptyText:"Nėra rezultatų",filterPlaceholderText:"Paieška"};var nl={setText:"Instellen",cancelText:"Annuleren",clearText:"Leegmaken",closeText:"Sluiten",selectedText:"{count} gekozen",dateFormat:"DD-MM-YYYY",dateFormatLong:"DD-MM-YYYY",dateWheelFormat:"|DDD D MMM|",dayNames:["Zondag","Maandag","Dinsdag","Woensdag","Donderdag","Vrijdag","Zaterdag"],dayNamesShort:["Zo","Ma","Di","Wo","Do","Vr","Za"],dayNamesMin:["Z","M","D","W","D","V","Z"],fromText:"Start",monthNames:["Januari","Februari","Maart","April","Mei","Juni","Juli","Augustus","September","Oktober","November","December"],monthNamesShort:["Jan","Feb","Mrt","Apr","Mei","Jun","Jul","Aug","Sep","Okt","Nov","Dec"],timeFormat:"HH:mm",toText:"Einde",nowText:"Nu",pmText:"pm",amText:"am",todayText:"Vandaag",firstDay:1,dateText:"Datum",timeText:"Tijd",allDayText:"Hele dag",noEventsText:"Geen activiteiten",eventText:"Activiteit",eventsText:"Activiteiten",moreEventsText:"nog {count}",weekText:"Week {count}",rangeStartLabel:"Start",rangeEndLabel:"Einde",rangeStartHelp:"Kies",rangeEndHelp:"Kies",filterEmptyText:"Niets gevonden",filterPlaceholderText:"Zoek"};var no={setText:"OK",cancelText:"Avbryt",clearText:"Tømme",closeText:"Lukk",selectedText:"{count} valgt",dateFormat:"DD.MM.YYY",dateFormatLong:"DDD. D. MMM. YYYY",dateWheelFormat:"|DDD. D. MMM.|",dayNames:["Søndag","Mandag","Tirsdag","Onsdag","Torsdag","Fredag","Lørdag"],dayNamesShort:["Sø","Ma","Ti","On","To","Fr","Lø"],dayNamesMin:["S","M","T","O","T","F","L"],fromText:"Start",monthNames:["Januar","Februar","Mars","April","Mai","Juni","Juli","August","September","Oktober","November","Desember"],monthNamesShort:["Jan","Feb","Mar","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Des"],timeFormat:"HH:mm",toText:"End",nowText:"Nå",pmText:"pm",amText:"am",todayText:"I dag",firstDay:1,dateText:"Dato",timeText:"Tid",allDayText:"Hele dagen",noEventsText:"Ingen hendelser",eventText:"Hendelse",eventsText:"Hendelser",moreEventsText:"{count} mere",weekText:"Uke {count}",rangeStartLabel:"Start",rangeEndLabel:"End",rangeStartHelp:"Velg",rangeEndHelp:"Velg",filterEmptyText:"Ingen treff",filterPlaceholderText:"Søk"};var pl={setText:"Zestaw",cancelText:"Anuluj",clearText:"Oczyścić",closeText:"Zakończenie",selectedText:"Wybór: {count}",dateFormat:"YYYY-MM-DD",dateFormatLong:"DDD, D.MM.YYYY",dateWheelFormat:"|DDD D.MM|",dayNames:["Niedziela","Poniedziałek","Wtorek","Środa","Czwartek","Piątek","Sobota"],dayNamesShort:["Niedz.","Pon.","Wt.","Śr.","Czw.","Pt.","Sob."],dayNamesMin:["N","P","W","Ś","C","P","S"],fromText:"Rozpoczęcie",monthNames:["Styczeń","Luty","Marzec","Kwiecień","Maj","Czerwiec","Lipiec","Sierpień","Wrzesień","Październik","Listopad","Grudzień"],monthNamesShort:["Sty","Lut","Mar","Kwi","Maj","Cze","Lip","Sie","Wrz","Paź","Lis","Gru"],timeFormat:"HH:mm",toText:"Koniec",nowText:"Teraz",amText:"am",pmText:"pm",todayText:"Dzisiaj",firstDay:1,dateText:"Data",timeText:"Czas",allDayText:"Cały dzień",noEventsText:"Brak wydarzeń",eventText:"Wydarzeń",eventsText:"Wydarzenia",moreEventsText:"Jeszcze {count}",weekText:"Tydzień {count}",rangeStartLabel:"Rozpoczęcie",rangeEndLabel:"Koniec",rangeStartHelp:"Wybierz",rangeEndHelp:"Wybierz",filterEmptyText:"Brak wyników",filterPlaceholderText:"Szukaj"};var ptPT={setText:"Seleccionar",cancelText:"Cancelar",clearText:"Claro",closeText:"Fechar",selectedText:"{count} selecionado",selectedPluralText:"{count} selecionados",dateFormat:"DD-MM-YYYY",dateFormatLong:"DDD, D MMM, YYYY",dateWheelFormat:"|DDD D de MMM|",dayNames:["Domingo","Segunda-feira","Terça-feira","Quarta-feira","Quinta-feira","Sexta-feira","Sábado"],dayNamesShort:["Dom","Seg","Ter","Qua","Qui","Sex","Sáb"],dayNamesMin:["D","S","T","Q","Q","S","S"],fromText:"Início",monthNames:["Janeiro","Fevereiro","Março","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],monthNamesShort:["Jan","Fev","Mar","Abr","Mai","Jun","Jul","Ago","Set","Out","Nov","Dez"],timeFormat:"HH:mm",toText:"Fim",nowText:"Actualizar",pmText:"pm",amText:"am",todayText:"Hoje",firstDay:1,dateText:"Data",timeText:"Tempo",allDayText:"Todo o dia",noEventsText:"Nenhum evento",eventText:"Evento",eventsText:"Eventos",moreEventsText:"Mais {count}",weekText:"Semana {count}",rangeStartLabel:"Início",rangeEndLabel:"Fim",rangeStartHelp:"Escolha",rangeEndHelp:"Escolha",filterEmptyText:"Nenhum resultado",filterPlaceholderText:"Pesquisa"};var ptBR=__assign({},ptPT,{setText:"Selecionar",dateFormat:"DD/MM/YYYY",nowText:"Agora",allDayText:"Dia inteiro",filterPlaceholderText:"Buscar"});var ro={setText:"Setare",cancelText:"Anulare",clearText:"Ştergere",closeText:"Închidere",selectedText:"{count} selectat",selectedPluralText:"{count} selectate",dateFormat:"DD.MM.YYYY",dateFormatLong:"DDD., D MMM YYYY",dateWheelFormat:"|DDD. D MMM|",dayNames:["Duminică","Luni","Marți","Miercuri","Joi","Vineri","Sâmbătă"],dayNamesShort:["Du","Lu","Ma","Mi","Jo","Vi","Sâ"],dayNamesMin:["D","L","M","M","J","V","S"],fromText:"Start",monthNames:["Ianuarie","Februarie","Martie","Aprilie","Mai","Iunie","Iulie","August","Septembrie","Octombrie","Noiembrie","Decembrie"],monthNamesShort:["Ian.","Feb.","Mar.","Apr.","Mai","Iun.","Iul.","Aug.","Sept.","Oct.","Nov.","Dec."],timeFormat:"HH:mm",toText:"Final",nowText:"Acum",amText:"am",pmText:"pm",todayText:"Astăzi",prevMonthText:"Luna anterioară",nextMonthText:"Luna următoare",prevYearText:"Anul anterior",nextYearText:"Anul următor",eventText:"Eveniment",eventsText:"Evenimente",allDayText:"Toată ziua",noEventsText:"Niciun eveniment",moreEventsText:"Încă unul",moreEventsPluralText:"Încă {count}",firstDay:1,dateText:"Data",timeText:"Ora",weekText:"Săptămâna {count}",rangeStartLabel:"Start",rangeEndLabel:"Final",rangeStartHelp:"Selectare",rangeEndHelp:"Selectare",filterEmptyText:"Niciun rezultat",filterPlaceholderText:"Căutare"};var ru={setText:"Установить",cancelText:"Отмена",clearText:"Очистить",closeText:"Закрыть",selectedText:"{count} Выбрать",dateFormat:"DD.MM.YYYY",dateFormatLong:"DDD, D MMM YYYY",dateWheelFormat:"|DDD D MMM|",dayNames:["воскресенье","понедельник","вторник","среда","четверг","пятница","суббота"],dayNamesShort:["вс","пн","вт","ср","чт","пт","сб"],dayNamesMin:["в","п","в","с","ч","п","с"],fromText:"Начало",monthNames:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],monthNamesShort:["Янв","Фев","Мар","Апр","Май","Июн","Июл","Авг","Сен","Окт","Ноя","Дек"],timeFormat:"HH:mm",toText:"Конец",nowText:"Сейчас",amText:"am",pmText:"pm",todayText:"Cегодня",firstDay:1,dateText:"Дата",timeText:"Время",allDayText:"Весь день",noEventsText:"Нет событий",eventText:"Мероприятия",eventsText:"Мероприятия",moreEventsText:"Ещё {count}",weekText:"Неделя {count}",rangeStartLabel:"Начало",rangeEndLabel:"Конец",rangeStartHelp:"выбирать",rangeEndHelp:"выбирать",filterEmptyText:"Нет результатов",filterPlaceholderText:"Поиск"};var ruUA=__assign({},ru,{cancelText:"Отменить",clearText:"Очиститьr",selectedText:"{count} Вібрать",monthNamesShort:["Янв.","Февр.","Март","Апр.","Май","Июнь","Июль","Авг.","Сент.","Окт.","Нояб.","Дек."],filterEmptyText:"Ніякага выніку",filterPlaceholderText:"Пошук"});var sk={setText:"Zadaj",cancelText:"Zrušiť",clearText:"Vymazať",closeText:"Zavrieť",selectedText:"Označený: {count}",dateFormat:"D.M.YYYY",dateFormatLong:"DDD D. MMM YYYY",dateWheelFormat:"|DDD D. MMM|",dayNames:["Nedeľa","Pondelok","Utorok","Streda","Štvrtok","Piatok","Sobota"],dayNamesShort:["Ne","Po","Ut","St","Št","Pi","So"],dayNamesMin:["N","P","U","S","Š","P","S"],fromText:"Začiatok",monthNames:["Január","Február","Marec","Apríl","Máj","Jún","Júl","August","September","Október","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","Máj","Jún","Júl","Aug","Sep","Okt","Nov","Dec"],timeFormat:"H:mm",toText:"Koniec",nowText:"Teraz",amText:"am",pmText:"pm",todayText:"Dnes",firstDay:1,dateText:"Datum",timeText:"Čas",allDayText:"Celý deň",noEventsText:"Žiadne udalosti",eventText:"Udalostí",eventsText:"Udalosti",moreEventsText:"{count} ďalšia",moreEventsPluralText:"{count} ďalšie",weekText:"{count}. týždeň",rangeStartLabel:"Začiatok",rangeEndLabel:"Koniec",rangeStartHelp:"Vybrať",rangeEndHelp:"Vybrať",filterEmptyText:"Žiadne výsledky",filterPlaceholderText:"Vyhľadávanie"};var sr={setText:"Постави",cancelText:"Откажи",clearText:"Обриши",selectedText:"{count} изабрана",dateFormat:"DD.MM.YYYY",dateFormatLong:"DD.MM.YYYY",dateWheelFormat:"|DDD D. MMM|",dayNames:["Недеља","Понедељак","Уторак","Среда","Четвртак","Петак","Субота"],dayNamesShort:["Нед","Пон","Уто","Сре","Чет","Пет","Суб"],dayNamesMin:["Не","По","Ут","Ср","Че","Пе","Су"],fromText:"Од",monthNames:["Јануар","Фебруар","Март","Април","Мај","Јун","Јул","Август","Септембар","Октобар","Новембар","Децембар"],monthNamesShort:["Јан","Феб","Мар","Апр","Мај","Јун","Јул","Авг","Сеп","Окт","Нов","Дец"],timeFormat:"HH:mm",toText:"До",nowText:"сада",pmText:"pm",amText:"am",firstDay:1,dateText:"Датум",timeText:"време",todayText:"Данас",prevMonthText:"Претходни мјесец",nextMonthText:"Следећег месеца",prevYearText:"Претходна године",nextYearText:"Следеће године",closeText:"Затвори",eventText:"Догађај",eventsText:"Догађаји",allDayText:"Цео дан",noEventsText:"Нема догађаја",moreEventsText:"Још {count}",weekText:"{count}. недеља",rangeStartLabel:"Од",rangeEndLabel:"До",rangeStartHelp:"Изаберите",rangeEndHelp:"Изаберите",filterEmptyText:"Без резултата",filterPlaceholderText:"Претрага"};var sv={setText:"OK",cancelText:"Avbryt",clearText:"Klara",closeText:"Stäng",selectedText:"{count} vald",dateFormat:"YYYY-MM-DD",dateFormatLong:"DDD D MMM. YYYY",dateWheelFormat:"|DDD D MMM|",dayNames:["Söndag","Måndag","Tisdag","Onsdag","Torsdag","Fredag","Lördag"],dayNamesShort:["Sö","Må","Ti","On","To","Fr","Lö"],dayNamesMin:["S","M","T","O","T","F","L"],fromText:"Start",monthNames:["Januari","Februari","Mars","April","Maj","Juni","Juli","Augusti","September","Oktober","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","Maj","Jun","Jul","Aug","Sep","Okt","Nov","Dec"],timeFormat:"HH:mm",toText:"Slut",nowText:"Nu",pmText:"pm",amText:"am",todayText:"I dag",firstDay:1,dateText:"Datum",timeText:"Tid",allDayText:"Heldag",noEventsText:"Inga aktiviteter",eventText:"Händelse",eventsText:"Händelser",moreEventsText:"{count} till",weekText:"Vecka {count}",rangeStartLabel:"Start",rangeEndLabel:"Slut",rangeStartHelp:"Välj",rangeEndHelp:"Välj",filterEmptyText:"Inga träffar",filterPlaceholderText:"Sök"};var th={setText:"ตั้งค่า",cancelText:"ยกเลิก",clearText:"ล้าง",closeText:"ปิด",selectedText:"{count} เลือก",dateFormat:"DD/MM/YYYY",dateFormatLong:"DD/MM/YYYY",dateWheelFormat:"|DDD D MMM|",dayNames:["อาทิตย์","จันทร์","อังคาร","พุธ","พฤหัสบดี","ศุกร์","เสาร์"],dayNamesShort:["อา.","จ.","อ.","พ.","พฤ.","ศ.","ส."],dayNamesMin:["อา.","จ.","อ.","พ.","พฤ.","ศ.","ส."],fromText:"จาก",monthNames:["มกราคม","กุมภาพันธ์","มีนาคม","เมษายน","พฤษภาคม","มิถุนายน","กรกฎาคม","สิงหาคม","กันยายน","ตุลาคม","พฤศจิกายน","ธันวาคม"],monthNamesShort:["ม.ค.","ก.พ.","มี.ค.","เม.ย.","พ.ค.","มิ.ย.","ก.ค.","ส.ค.","ก.ย.","ต.ค.","พ.ย.","ธ.ค."],timeFormat:"HH:mm",toText:"ถึง",nowText:"ตอนนี้",pmText:"pm",amText:"am",firstDay:0,dateText:"วัน",timeText:"เวลา",todayText:"วันนี้",prevMonthText:"เดือนก่อนหน้า",nextMonthText:"เดือนถัดไป",prevYearText:"ปีก่อนหน้า",nextYearText:"ปีถัดไป",eventText:"เหตุการณ์",eventsText:"เหตุการณ์",allDayText:"ตลอดวัน",noEventsText:"ไม่มีกิจกรรม",moreEventsText:"อีก {count} กิจกรรม",weekText:"สัปดาห์ที่ {count}",rangeStartLabel:"จาก",rangeEndLabel:"ถึง",rangeStartHelp:"เลือก",rangeEndHelp:"เลือก",filterEmptyText:"ไม่มีผลลัพธ์",filterPlaceholderText:"ค้นหา"};var tr={setText:"Seç",cancelText:"İptal",clearText:"Temizleyin",closeText:"Kapatmak",selectedText:"{count} seçilmiş",dateFormat:"DD.MM.YYYY",dateFormatLong:"D MMMM DDD, YYYY",dateWheelFormat:"|D MMM DDD|",dayNames:["Pazar","Pazartesi","Salı","Çarşamba","Perşembe","Cuma","Cumartesi"],dayNamesShort:["Paz","Pzt","Sal","Çar","Per","Cum","Cmt"],dayNamesMin:["P","P","S","Ç","P","C","C"],fromText:"Başla",monthNames:["Ocak","Şubat","Mart","Nisan","Mayıs","Haziran","Temmuz","Ağustos","Eylül","Ekim","Kasım","Aralık"],monthNamesShort:["Oca","Şub","Mar","Nis","May","Haz","Tem","Ağu","Eyl","Eki","Kas","Ara"],timeFormat:"HH:mm",toText:"Son",nowText:"Şimdi",pmText:"pm",amText:"am",todayText:"Bugün",firstDay:1,dateText:"Tarih",timeText:"Zaman",allDayText:"Tüm gün",noEventsText:"Etkinlik Yok",eventText:"Etkinlik",eventsText:"Etkinlikler",moreEventsText:"{count} tane daha",weekText:"{count}. Hafta",rangeStartLabel:"Başla",rangeEndLabel:"Son",rangeStartHelp:"Seç",rangeEndHelp:"Seç",filterEmptyText:"Sonuç Yok",filterPlaceholderText:"Arayın"};var ua={setText:"встановити",cancelText:"відміна",clearText:"очистити",closeText:"Закрити",selectedText:"{count} вибрані",dateFormat:"DD.MM.YYYY",dateFormatLong:"DDD, D MMM. YYYY",dateWheelFormat:"|DDD D MMM.|",dayNames:["неділя","понеділок","вівторок","середа","четвер","п’ятниця","субота"],dayNamesShort:["нед","пнд","вів","срд","чтв","птн","сбт"],dayNamesMin:["Нд","Пн","Вт","Ср","Чт","Пт","Сб"],fromText:"від",monthNames:["Січень","Лютий","Березень","Квітень","Травень","Червень","Липень","Серпень","Вересень","Жовтень","Листопад","Грудень"],monthNamesShort:["Січ","Лют","Бер","Кві","Тра","Чер","Лип","Сер","Вер","Жов","Лис","Гру"],timeFormat:"H:mm",toText:"кінець",nowText:"Зараз",pmText:"pm",amText:"am",firstDay:1,dateText:"дата",timeText:"Час",todayText:"Сьогодні",prevMonthText:"Попередній місяць",nextMonthText:"Наступного місяця",prevYearText:"Попередній рік",nextYearText:"Наступного року",eventText:"подія",eventsText:"події",allDayText:"Увесь день",noEventsText:"Жодної події",moreEventsText:"та ще {count}",weekText:"{count} тиждень",rangeStartLabel:"від",rangeEndLabel:"кінець",rangeEndHelp:"Обрати",rangeStartHelp:"Обрати",filterEmptyText:"Ніякого результату",filterPlaceholderText:"Пошук"};var vi={setText:"Đặt",cancelText:"Hủy bò",clearText:"Xóa",closeText:"Đóng",selectedText:"{count} chọn",dateFormat:"DD/MM/YYYY",dateFormatLong:"DDD D, MMM YYYY",dateWheelFormat:"|DDD D MMM|",dayNames:["Chủ Nhật","Thứ Hai","Thứ Ba","Thứ Tư","Thứ Năm","Thứ Sáu","Thứ Bảy"],dayNamesShort:["CN","T2","T3","T4","T5","T6","T7"],dayNamesMin:["CN","T2","T3","T4","T5","T6","T7"],fromText:"Từ",monthNames:["Tháng Một","Tháng Hai","Tháng Ba","Tháng Tư","Tháng Năm","Tháng Sáu","Tháng Bảy","Tháng Tám","Tháng Chín","Tháng Mười","Tháng Mười Một","Tháng Mười Hai"],monthNamesShort:["Tháng 1","Tháng 2","Tháng 3","Tháng 4","Tháng 5","Tháng 6","Tháng 7","Tháng 8","Tháng 9","Tháng 10","Tháng 11","Tháng 12"],timeFormat:"H:mm",toText:"Tới",nowText:"Bây giờ",pmText:"pm",amText:"am",firstDay:0,dateText:"Ngày",timeText:"Hồi",todayText:"Hôm nay",prevMonthText:"Tháng trước",nextMonthText:"Tháng tới",prevYearText:"Măm trước",nextYearText:"Năm tới",eventText:"Sự kiện",eventsText:"Sự kiện",allDayText:"Cả ngày",noEventsText:"Không có sự kiện",moreEventsText:"{count} thẻ khác",weekText:"Tuần {count}",rangeStartLabel:"Từ",rangeEndLabel:"Tới",rangeStartHelp:"Chọn",rangeEndHelp:"Chọn",filterEmptyText:"Không kết quả",filterPlaceholderText:"Tìm kiếm"};var zh={setText:"确定",cancelText:"取消",clearText:"明确",closeText:"关闭",selectedText:"{count} 选",dateFormat:"YYYY年M月D日",dateFormatLong:"YYYY年M月D日",dateWheelFormat:"|M月D日 DDD|",dayNames:["周日","周一","周二","周三","周四","周五","周六"],dayNamesShort:["日","一","二","三","四","五","六"],dayNamesMin:["日","一","二","三","四","五","六"],fromText:"开始时间",monthNames:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],monthNamesShort:["一","二","三","四","五","六","七","八","九","十","十一","十二"],timeFormat:"H:mm",toText:"结束时间",nowText:"当前",pmText:"下午",amText:"上午",yearSuffix:"年",monthSuffix:"月",daySuffix:"日",todayText:"今天",dateText:"日",timeText:"时间",allDayText:"全天",noEventsText:"无事件",eventText:"活动",eventsText:"活动",moreEventsText:"他 {count} 件",weekText:"第 {count} 週",rangeStartLabel:"开始时间",rangeEndLabel:"结束时间",rangeStartHelp:"选取",rangeEndHelp:"选取",filterEmptyText:"没有结果",filterPlaceholderText:"搜索"};function intPart(floatNum){if(floatNum<-1e-7){return Math.ceil(floatNum-1e-7)}return Math.floor(floatNum+1e-7)}function hijriToGregorian(hY,hM,hD){var l;var j;var n;var i;var k;var gregDate=new Array(3);var jd=intPart((11*hY+3)/30)+354*hY+30*hM-intPart((hM-1)/2)+hD+1948440-385;if(jd>2299160){l=jd+68569;n=intPart(4*l/146097);l=l-intPart((146097*n+3)/4);i=intPart(4e3*(l+1)/1461001);l=l-intPart(1461*i/4)+31;j=intPart(80*l/2447);hD=l-intPart(2447*j/80);l=intPart(j/11);hM=j+2-12*l;hY=100*(n-49)+i+l;}else {j=jd+1402;k=intPart((j-1)/1461);l=j-1461*k;n=intPart((l-1)/365)-intPart(l/1461);i=l-365*n+30;j=intPart(80*i/2447);hD=i-intPart(2447*j/80);i=intPart(j/11);hM=j+2-12*i;hY=4*k+n+i-4716;}gregDate[2]=hD;gregDate[1]=hM;gregDate[0]=hY;return gregDate}function gregorianToHijri(gY,gM,gD){var jd;var l;var j;var n;var hijriDate=[0,0,0];if(gY>1582||gY===1582&&gM>10||gY===1582&&gM===10&&gD>14){jd=intPart(1461*(gY+4800+intPart((gM-14)/12))/4)+intPart(367*(gM-2-12*intPart((gM-14)/12))/12)-intPart(3*intPart((gY+4900+intPart((gM-14)/12))/100)/4)+gD-32075;}else {jd=367*gY-intPart(7*(gY+5001+intPart((gM-9)/7))/4)+intPart(275*gM/9)+gD+1729777;}l=jd-1948440+10632;n=intPart((l-1)/10631);l=l-10631*n+354;j=intPart((10985-l)/5316)*intPart(50*l/17719)+intPart(l/5670)*intPart(43*l/15238);l=l-intPart((30-j)/15)*intPart(17719*j/50)-intPart(j/16)*intPart(15238*j/43)+29;gM=intPart(24*l/709);gD=l-intPart(709*gM/24);gY=30*n+j-30;hijriDate[2]=gD;hijriDate[1]=gM;hijriDate[0]=gY;return hijriDate}var hijriCalendar={getYear:function(date){return gregorianToHijri(date.getFullYear(),date.getMonth()+1,date.getDate())[0]},getMonth:function(date){return --gregorianToHijri(date.getFullYear(),date.getMonth()+1,date.getDate())[1]},getDay:function(date){return gregorianToHijri(date.getFullYear(),date.getMonth()+1,date.getDate())[2]},getDate:function(y,m,d,h,i,s,u){if(m<0){y+=Math.floor(m/12);m=m%12?12+m%12:0;}if(m>11){y+=Math.floor(m/12);m=m%12;}var gregorianDate=hijriToGregorian(y,+m+1,d);return new Date(gregorianDate[0],gregorianDate[1]-1,gregorianDate[2],h||0,i||0,s||0,u||0)},getMaxDayOfMonth:function(hY,hM){if(hM<0){hY+=Math.floor(hM/12);hM=hM%12?12+hM%12:0;}if(hM>11){hY+=Math.floor(hM/12);hM=hM%12;}var daysPerMonth=[30,29,30,29,30,29,30,29,30,29,30,29];var leapYear=(hY*11+14)%30<11;return daysPerMonth[hM]+(hM===11&&leapYear?1:0)}};var localeEn={};var locale={ar:ar,bg:bg,ca:ca,cs:cs,da:da,de:de,el:el,en:localeEn,"en-GB":enGB,es:es,fa:fa,fi:fi,fr:fr,he:he,hi:hi,hr:hr,hu:hu,it:it,ja:ja,ko:ko,lt:lt,nl:nl,no:no,pl:pl,"pt-BR":ptBR,"pt-PT":ptPT,ro:ro,ru:ru,"ru-UA":ruUA,sk:sk,sr:sr,sv:sv,th:th,tr:tr,ua:ua,vi:vi,zh:zh};var MBSC_OPTIONS=new core.InjectionToken("MbscOptions");var MbscOptionsService=/*#__PURE__*/function(){function MbscOptionsService(_staticOptions,_parentService){this._staticOptions=_staticOptions;this._parentService=_parentService;this.change=new Observable;this._options={};}Object.defineProperty(MbscOptionsService.prototype,"options",{get:function(){return this._options},enumerable:true,configurable:true});MbscOptionsService.prototype.setOptions=function(newOptions){this._options=this._parentService?__assign({},this._staticOptions,this._parentService.options,newOptions):__assign({},this._staticOptions,newOptions);this.change.next(this.options);};MbscOptionsService.decorators=[{type:core.Injectable}];MbscOptionsService.ctorParameters=function(){return [{type:undefined,decorators:[{type:core.Optional},{type:core.Inject,args:[MBSC_OPTIONS]}]},{type:MbscOptionsService,decorators:[{type:core.Optional},{type:core.SkipSelf},{type:core.Inject,args:[core.forwardRef((function(){return MbscOptionsService}))]}]}]};return MbscOptionsService}();function updateValue(inst,val){inst._val=val;if(inst._onValueChange){inst._onValueChange(val);}inst.setState({value:val});}var Base=/*#__PURE__*/function(){function Base(_cdr,_elr,_zone,_sanitizer,_injector,_vcf,_ctrl,_optp,_globals){var _this=this;this._cdr=_cdr;this._elr=_elr;this._zone=_zone;this._sanitizer=_sanitizer;this._injector=_injector;this._vcf=_vcf;this._ctrl=_ctrl;this._optp=_optp;this.state={};this.props={};this.valueChange=new core.EventEmitter;this.onDestroy=new core.EventEmitter;this.onInit=new core.EventEmitter;this._onFormChange=noop;this._onFormTouch=noop;if(_optp){this._opt=_optp.options;this._ctxChange=_optp.change.subscribe((function(nextOptions){_this._opt=nextOptions;_this.forceUpdate();}));}else if(_globals){this._opt=_globals;}if(_ctrl){_ctrl.valueAccessor=this;}this._ctor();}Object.defineProperty(Base.prototype,"value",{get:function(){return this._val},set:function(val){if(this._val!==val){updateValue(this,val);this._onFormChange(val);this.valueChange.emit(val);}},enumerable:true,configurable:true});Base.prototype.ngOnChanges=function(changes){if(changes.options){var opt=changes.options.currentValue;if(opt){for(var _i=0,_a=Object.keys(opt);_i<_a.length;_i++){var key=_a[_i];this.props[key]=opt[key];}}}for(var _b=0,_c=Object.keys(changes);_b<_c.length;_b++){var key=_c[_b];this.props[key]=changes[key].currentValue;}this._doCheck=true;};Base.prototype.ngDoCheck=function(){if(this._doCheck){this._willUpdate();}};Base.prototype.ngAfterViewChecked=function(){if(this._doCheck){this._updated();}this._doCheck=false;};Base.prototype.ngOnInit=function(){this._doCheck=true;this.__init();this._init();};Base.prototype.ngAfterViewInit=function(){this._el=this._el||this._elr.nativeElement;this._mounted();};Base.prototype.ngOnDestroy=function(){if(this._optp){this._optp.change.unsubscribe(this._ctxChange);}this._destroy();this.__destroy();};Base.prototype._getKey=function(index){return index};Base.prototype.forceUpdate=function(){var _this=this;if(core.NgZone.isInAngularZone()){this._doCheck=true;this._cdr.markForCheck();}else {this._zone.run((function(){_this._doCheck=true;_this._cdr.markForCheck();}));}};Base.prototype.setState=function(newState){var changed;for(var _i=0,_a=Object.keys(newState);_i<_a.length;_i++){var key=_a[_i];if(this.state[key]!==newState[key]){this.state[key]=newState[key];changed=true;}}if(changed){this.forceUpdate();}};Base.prototype._emit=function(name,args){var emitter=this[name];if(emitter&&emitter instanceof core.EventEmitter){emitter.emit(args);}};Base.prototype._safeHtml=function(html){return this._sanitizer.bypassSecurityTrustHtml(html)};Base.prototype._ctor=function(){};Base.prototype._init=function(){};Base.prototype.__init=function(){};Base.prototype._mounted=function(){};Base.prototype._updated=function(){};Base.prototype._destroy=function(){};Base.prototype.__destroy=function(){};Base.prototype._willUpdate=function(){};Base.decorators=[{type:core.Directive,args:[{selector:"[mbsc-b]"}]}];Base.ctorParameters=function(){return [{type:core.ChangeDetectorRef},{type:core.ElementRef},{type:core.NgZone},{type:platformBrowser.DomSanitizer},{type:core.Injector},{type:core.ViewContainerRef},{type:forms.NgControl,decorators:[{type:core.Optional},{type:core.Self}]},{type:MbscOptionsService,decorators:[{type:core.Optional}]},{type:undefined,decorators:[{type:core.Optional},{type:core.Inject,args:[MBSC_OPTIONS]}]}]};Base.propDecorators={class:[{type:core.Input}],context:[{type:core.Input}],locale:[{type:core.Input}],modules:[{type:core.Input}],options:[{type:core.Input}],responsive:[{type:core.Input}],rtl:[{type:core.Input}],theme:[{type:core.Input}],themeVariant:[{type:core.Input}],touchUi:[{type:core.Input}],value:[{type:core.Input}],valueChange:[{type:core.Output}],onDestroy:[{type:core.Output}],onInit:[{type:core.Output}]};return Base}();var doc=isBrowser?document:UNDEFINED;var win=isBrowser?window:UNDEFINED;var prefixes=["Webkit","Moz"];var elem=doc&&doc.createElement("div").style;var canvas=doc&&doc.createElement("canvas");var ctx=canvas&&canvas.getContext&&canvas.getContext("2d");var css=win&&win.CSS;var cssSupports=css&&css.supports;var textColors={};var raf=win&&win.requestAnimationFrame||function(func){return setTimeout(func,20)};var rafc=win&&win.cancelAnimationFrame||function(id){clearTimeout(id);};var hasAnimation=elem&&elem.animationName!==UNDEFINED;var isWebView=exports.ɵy==="ios"&&!isSafari;var isWkWebView=isWebView&&win&&win.webkit&&win.webkit.messageHandlers;var hasGhostClick=elem&&elem.touchAction===UNDEFINED||isWebView&&!isWkWebView;var jsPrefix=getPrefix();var cssPrefix=jsPrefix?"-"+jsPrefix.toLowerCase()+"-":"";var has3d=cssSupports&&cssSupports("(transform-style: preserve-3d)");var hasSticky=cssSupports&&(cssSupports("position","sticky")||cssSupports("position","-webkit-sticky"));function getPrefix(){if(!elem||elem.transform!==UNDEFINED){return ""}for(var _i=0,prefixes_1=prefixes;_i<prefixes_1.length;_i++){var prefix=prefixes_1[_i];if(elem[prefix+"Transform"]!==UNDEFINED){return prefix}}return ""}function listen(el,event,handler,opt){if(el){el.addEventListener(event,handler,opt);}}function unlisten(el,event,handler,opt){if(el){el.removeEventListener(event,handler,opt);}}function getDocument(el){if(!isBrowser){return UNDEFINED}return el&&el.ownerDocument?el.ownerDocument:doc}function getDimension(el,property){return parseFloat(getComputedStyle(el)[property]||"0")}function getScrollLeft(el){return el.scrollLeft!==UNDEFINED?el.scrollLeft:el.pageXOffset}function getScrollTop(el){return el.scrollTop!==UNDEFINED?el.scrollTop:el.pageYOffset}function setScrollLeft(el,val){if(el.scrollTo){el.scrollTo(val,el.scrollY);}else {el.scrollLeft=val;}}function setScrollTop(el,val){if(el.scrollTo){el.scrollTo(el.scrollX,val);}else {el.scrollTop=val;}}function getWindow(el){if(!isBrowser){return UNDEFINED}return el&&el.ownerDocument&&el.ownerDocument.defaultView?el.ownerDocument.defaultView:win}function getPosition(el,vertical){var style=getComputedStyle(el);var transform=jsPrefix?style[jsPrefix+"Transform"]:style.transform;var matrix=transform.split(")")[0].split(", ");var px=vertical?matrix[13]||matrix[5]:matrix[12]||matrix[4];return +px||0}function getTextColor(color){if(textColors[color]){return textColors[color]}if(!ctx){return "#fff"}ctx.fillStyle=color;ctx.fillRect(0,0,1,1);var img=ctx.getImageData(0,0,1,1);var rgb=img?img.data:[0,0,0];var delta=+rgb[0]*.299+ +rgb[1]*.587+ +rgb[2]*.114;var textColor=delta<130?"#fff":"#000";textColors[color]=textColor;return textColor}function scrollStep(elm,startTime,fromX,fromY,toX,toY,callback){var elapsed=Math.min(1,(+new Date-startTime)/468);var eased=.5*(1-Math.cos(Math.PI*elapsed));var currentX;var currentY;if(toX!==UNDEFINED){currentX=round(fromX+(toX-fromX)*eased);elm.scrollLeft=currentX;}if(toY!==UNDEFINED){currentY=round(fromY+(toY-fromY)*eased);elm.scrollTop=currentY;}if(currentX!==toX||currentY!==toY){raf((function(){scrollStep(elm,startTime,fromX,fromY,toX,toY,callback);}));}else if(callback){callback();}}function smoothScroll(elm,toX,toY,animate,rtl,callback){if(toX!==UNDEFINED){toX=Math.max(0,round(toX));}if(toY!==UNDEFINED){toY=Math.max(0,round(toY));}if(rtl&&toX!==UNDEFINED){toX=-toX;}if(animate){scrollStep(elm,+new Date,elm.scrollLeft,elm.scrollTop,toX,toY,callback);}else {if(toX!==UNDEFINED){elm.scrollLeft=toX;}if(toY!==UNDEFINED){elm.scrollTop=toY;}if(callback){callback();}}}function htmlToText(htmlString){if(doc&&htmlString){var tempElm=doc.createElement("div");tempElm.innerHTML=htmlString;return tempElm.textContent.trim()}return htmlString||""}function getOffset(el){var bRect=el.getBoundingClientRect();var ret={left:bRect.left,top:bRect.top};var window=getWindow(el);if(window!==UNDEFINED){ret.top+=getScrollTop(window);ret.left+=getScrollLeft(window);}return ret}function matches(elm,selector){var matchesSelector=elm&&(elm.matches||elm.msMatchesSelector);return matchesSelector&&matchesSelector.call(elm,selector)}function closest(elm,selector,context){while(elm&&!matches(elm,selector)){if(elm===context||elm.nodeType===elm.DOCUMENT_NODE){return null}elm=elm.parentNode;}return elm}function trigger(elm,name,data){var evt;try{evt=new CustomEvent(name,{bubbles:true,cancelable:true,detail:data});}catch(e){evt=document.createEvent("Event");evt.initEvent(name,true,true);evt.detail=data;}elm.dispatchEvent(evt);}function forEach(items,func){for(var i=0;i<items.length;i++){func(items[i],i);}}var REF_DATE=new Date(1970,0,1);var ONE_MIN=6e4;var ONE_HOUR=60*ONE_MIN;var ONE_DAY=24*ONE_HOUR;function isMBSCDate(d){return !!d._mbsc}function convertTimezone(d,s){var timezone=s.dataTimezone||s.displayTimezone;var timezonePlugin=s.timezonePlugin;if(timezone&&timezonePlugin&&isMBSCDate(d)){var clone=d.clone();clone.setTimezone(timezone);return clone.toISOString()}return d}var dateTimeLocale={amText:"am",dateFormat:"MM/DD/YYYY",dateFormatLong:"D DDD MMM YYYY",dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesMin:["S","M","T","W","T","F","S"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],daySuffix:"",firstDay:0,fromText:"Start",getDate:adjustedDate,monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],monthSuffix:"",pmText:"pm",separator:" ",shortYearCutoff:"+10",timeFormat:"h:mm A",toText:"End",todayText:"Today",weekText:"Week {count}",yearSuffix:"",getMonth:function(d){return d.getMonth()},getDay:function(d){return d.getDate()},getYear:function(d){return d.getFullYear()},getMaxDayOfMonth:function(y,m){return 32-new Date(y,m,32,12).getDate()},getWeekNumber:function(dt){var d=new Date(+dt);d.setHours(0,0,0);d.setDate(d.getDate()+4-(d.getDay()||7));var yearStart=new Date(d.getFullYear(),0,1);return Math.ceil(((d-yearStart)/864e5+1)/7)}};var ISO_8601_FULL=/^(\d{4}|[+-]\d{6})(?:-?(\d{2})(?:-?(\d{2}))?)?(?:[T\s](\d{2}):?(\d{2})(?::?(\d{2})(?:\.(\d{3}))?)?((Z)|([+-])(\d{2})(?::?(\d{2}))?)?)?$/;var ISO_8601_TIME=/^((\d{2}):(\d{2})(?::(\d{2})(?:\.(\d{3}))?)?(?:(Z)|([+-])(\d{2})(?::?(\d{2}))?)?)?$/;function setISOParts(parsed,offset,parts){var part;var v;var p={y:1,m:2,d:3,h:4,i:5,s:6,u:7,tz:8};if(parts){for(part in p){if(p.hasOwnProperty(part)){v=parsed[p[part]-offset];if(v){parts[part]=part==="tz"?v:1;}}}}}function getISOString(d,parts){var ret="";var time="";if(d){if(parts.h){time+=pad(d.getHours())+":"+pad(d.getMinutes());if(parts.s){time+=":"+pad(d.getSeconds());}if(parts.u){time+="."+pad(d.getMilliseconds(),3);}if(parts.tz){time+=parts.tz;}}if(parts.y){ret+=d.getFullYear();if(parts.m){ret+="-"+pad(d.getMonth()+1);if(parts.d){ret+="-"+pad(d.getDate());}if(parts.h){ret+="T"+time;}}}else if(parts.h){ret=time;}}return ret}function getDayMilliseconds(d){var dd=new Date(1970,0,1,d.getHours(),d.getMinutes(),d.getSeconds(),d.getMilliseconds());return +dd-+REF_DATE}function checkDateRangeOverlap(start1,end1,start2,end2,adjust){var aStart=+start1;var bStart=+start2;var aEnd=adjust&&aStart===+end1?+end1+1:+end1;var bEnd=adjust&&bStart===+end2?+end2+1:+end2;return aStart<bEnd&&aEnd>bStart}function getDayStart(s,d){var newDate=createDate(s,d);newDate.setHours(0,0,0,0);return newDate}function getDayEnd(s,d){var newDate=createDate(s,d);newDate.setHours(23,59,59,999);return newDate}function getEndDate(s,allDay,start,end,isList){var exclusive=allDay||isList?s.exclusiveEndDates:true;var tzOpt=allDay?UNDEFINED:s;return exclusive&&start&&end&&start<end?createDate(tzOpt,+end-1):end}function getDateStr(d){return d.getFullYear()+"-"+pad(d.getMonth()+1)+"-"+pad(d.getDate())}function getDateOnly(d,nativeDate){if(isMBSCDate(d)&&!nativeDate){return d.createDate(d.getFullYear(),d.getMonth(),d.getDate())}else {return adjustedDate(d.getFullYear(),d.getMonth(),d.getDate())}}function getUTCDateOnly(d){return Date.UTC(d.getFullYear(),d.getMonth(),d.getDate())}function getDayDiff(d1,d2){return round((getUTCDateOnly(d2)-getUTCDateOnly(d1))/ONE_DAY)}function getGridDayDiff(from,to,startDay,endDay){var dayIndex=-1;for(var d=getDateOnly(from);d<=getDateOnly(to);d.setDate(d.getDate()+1)){if(isInWeek(d.getDay(),startDay,endDay)){dayIndex++;}}return dayIndex}function getFirstDayOfWeek(d,s,w){var y=d.getFullYear();var m=d.getMonth();var weekDay=d.getDay();var firstWeekDay=w===UNDEFINED?s.firstDay:w;var offset=firstWeekDay-weekDay>0?7:0;return new Date(y,m,firstWeekDay-offset-weekDay+d.getDate())}function isSameDay(d1,d2){return d1.getFullYear()===d2.getFullYear()&&d1.getMonth()===d2.getMonth()&&d1.getDate()===d2.getDate()}function isSameMonth(d1,d2,s){return s.getYear(d1)===s.getYear(d2)&&s.getMonth(d1)===s.getMonth(d2)}function adjustedDate(y,m,d,h,i,s,u){var date=new Date(y,m,d,h||0,i||0,s||0,u||0);if(date.getHours()===23&&(h||0)===0){date.setHours(date.getHours()+2);}return date}function isDate(d){return d.getTime}function isTime(d){return isString(d)&&ISO_8601_TIME.test(d)}function addTimezone(s,d){return createDate(s,d.getFullYear(),d.getMonth(),d.getDate(),d.getHours(),d.getMinutes(),d.getSeconds(),d.getMilliseconds())}function removeTimezone(d){if(!d){return d}else {return new Date(d.getFullYear(),d.getMonth(),d.getDate(),d.getHours(),d.getMinutes(),d.getSeconds(),d.getMilliseconds())}}function createDate(s,yearOrStamp,month,date,h,min,sec,ms){if(yearOrStamp===null){return null}if(yearOrStamp&&(isNumber(yearOrStamp)||isString(yearOrStamp))&&isUndefined(month)){return makeDate(yearOrStamp,s)}if(s&&s.timezonePlugin){return s.timezonePlugin.createDate(s,yearOrStamp,month,date,h,min,sec,ms)}if(isObject(yearOrStamp)){return new Date(yearOrStamp)}if(isUndefined(yearOrStamp)){return new Date}return new Date(yearOrStamp,month||0,date||1,h||0,min||0,sec||0,ms||0)}function makeDate(d,s,format,parts,skipTimezone){var parse;if(isString(d)){d=d.trim();}if(!d){return null}var plugin=s&&s.timezonePlugin;if(plugin&&!skipTimezone){var parsedDate=isMBSCDate(d)?d:plugin.parse(d,s);parsedDate.setTimezone(s.displayTimezone);return parsedDate}if(isDate(d)){return d}if(d._isAMomentObject){return d.toDate()}if(isNumber(d)){return new Date(d)}parse=ISO_8601_TIME.exec(d);if(parse){setISOParts(parse,2,parts);return new Date(1970,0,1,parse[2]?+parse[2]:0,parse[3]?+parse[3]:0,parse[4]?+parse[4]:0,parse[5]?+parse[5]:0)}parse=ISO_8601_FULL.exec(d);if(parse){setISOParts(parse,0,parts);return new Date(parse[1]?+parse[1]:1970,parse[2]?parse[2]-1:0,parse[3]?+parse[3]:1,parse[4]?+parse[4]:0,parse[5]?+parse[5]:0,parse[6]?+parse[6]:0,parse[7]?+parse[7]:0)}return parseDate(format,d,s)}function returnDate(d,s,displayFormat,isoParts,hasTimePart){var moment=isBrowser&&window.moment||s.moment;var timezone=s.timezonePlugin&&(s.dataTimezone||s.displayTimezone);var format=timezone?"iso8601":s.returnFormat;if(timezone&&hasTimePart){return convertTimezone(d,s)}if(d){if(format==="moment"&&moment){return moment(d)}if(format==="locale"){return formatDate(displayFormat,d,s)}if(format==="iso8601"){return getISOString(d,isoParts)}}return d}function formatDatePublic(format,date,options$1){var s=__assign({},dateTimeLocale,options.locale,options$1);return formatDate(format,date,s)}function formatDate(format,date,s){var i;var year;var output="";var literal=false;var c;var peekAhead=function(symbol){var nr=0;var j=i;while(j+1<format.length&&format.charAt(j+1)===symbol){nr++;j++;}return nr};var lookAhead=function(symbol){var nr=peekAhead(symbol);i+=nr;return nr};var formatNumber=function(symbol,val,len){var ret=""+val;if(lookAhead(symbol)){while(ret.length<len){ret="0"+ret;}}return ret};var formatName=function(symbol,val,short,long){return lookAhead(symbol)===3?long[val]:short[val]};for(i=0;i<format.length;i++){if(literal){if(format.charAt(i)==="'"&&!lookAhead("'")){literal=false;}else {output+=format.charAt(i);}}else {switch(format.charAt(i)){case"D":c=peekAhead("D");if(c>1){output+=formatName("D",date.getDay(),s.dayNamesShort,s.dayNames);}else {output+=formatNumber("D",s.getDay(date),2);}break;case"M":c=peekAhead("M");if(c>1){output+=formatName("M",s.getMonth(date),s.monthNamesShort,s.monthNames);}else {output+=formatNumber("M",s.getMonth(date)+1,2);}break;case"Y":year=s.getYear(date);output+=lookAhead("Y")===3?year:(year%100<10?"0":"")+year%100;break;case"h":var h=date.getHours();output+=formatNumber("h",h>12?h-12:h===0?12:h,2);break;case"H":output+=formatNumber("H",date.getHours(),2);break;case"m":output+=formatNumber("m",date.getMinutes(),2);break;case"s":output+=formatNumber("s",date.getSeconds(),2);break;case"a":output+=date.getHours()>11?s.pmText:s.amText;break;case"A":output+=date.getHours()>11?s.pmText.toUpperCase():s.amText.toUpperCase();break;case"'":if(lookAhead("'")){output+="'";}else {literal=true;}break;default:output+=format.charAt(i);}}}return output}function parseDate(format,value,options){var s=__assign({},dateTimeLocale,options);var def=makeDate(s.defaultValue||new Date);if(!value){return def}if(!format){format=s.dateFormat+s.separator+s.timeFormat;}var shortYearCutoff=s.shortYearCutoff;var year=s.getYear(def);var month=s.getMonth(def)+1;var day=s.getDay(def);var hours=def.getHours();var minutes=def.getMinutes();var seconds=0;var ampm=-1;var literal=false;var iValue=0;var iFormat;var peekAhead=function(symbol){var nr=0;var j=iFormat;while(j+1<format.length&&format.charAt(j+1)===symbol){nr++;j++;}return nr};var lookAhead=function(match){var matches=peekAhead(match);iFormat+=matches;return matches};var getNumber=function(match){var count=lookAhead(match);var size=count>=2?4:2;var digits=new RegExp("^\\d{1,"+size+"}");var num=value.substr(iValue).match(digits);if(!num){return 0}iValue+=num[0].length;return parseInt(num[0],10)};var getName=function(match,shortNames,longNames){var count=lookAhead(match);var names=count===3?longNames:shortNames;for(var i=0;i<names.length;i++){if(value.substr(iValue,names[i].length).toLowerCase()===names[i].toLowerCase()){iValue+=names[i].length;return i+1}}return 0};var checkLiteral=function(){iValue++;};for(iFormat=0;iFormat<format.length;iFormat++){if(literal){if(format.charAt(iFormat)==="'"&&!lookAhead("'")){literal=false;}else {checkLiteral();}}else {switch(format.charAt(iFormat)){case"Y":year=getNumber("Y");break;case"M":{var p=peekAhead("M");if(p<2){month=getNumber("M");}else {month=getName("M",s.monthNamesShort,s.monthNames);}break}case"D":{var p=peekAhead("D");if(p<2){day=getNumber("D");}else {getName("D",s.dayNamesShort,s.dayNames);}break}case"H":hours=getNumber("H");break;case"h":hours=getNumber("h");break;case"m":minutes=getNumber("m");break;case"s":seconds=getNumber("s");break;case"a":ampm=getName("a",[s.amText,s.pmText],[s.amText,s.pmText])-1;break;case"A":ampm=getName("A",[s.amText,s.pmText],[s.amText,s.pmText])-1;break;case"'":if(lookAhead("'")){checkLiteral();}else {literal=true;}break;default:checkLiteral();}}}if(year<100){var cutoffYear=void 0;if(!isString(shortYearCutoff)){cutoffYear=+shortYearCutoff;}else {cutoffYear=(new Date).getFullYear()%100+parseInt(shortYearCutoff,10);}var addedCentury=void 0;if(year<=cutoffYear){addedCentury=0;}else {addedCentury=-100;}year+=(new Date).getFullYear()-(new Date).getFullYear()%100+addedCentury;}hours=ampm===-1?hours:ampm&&hours<12?hours+12:!ampm&&hours===12?0:hours;var date=s.getDate(year,month-1,day,hours,minutes,seconds);if(s.getYear(date)!==year||s.getMonth(date)+1!==month||s.getDay(date)!==day){return def}return date}function dateValueEquals(v1,v2,s){if(v1===v2){return true}if(isArray(v1)&&!v1.length&&v2===null||isArray(v2)&&!v2.length&&v1===null){return true}if(v1===null||v2===null||v1===UNDEFINED||v2===UNDEFINED){return false}if(isString(v1)&&isString(v2)){return v1===v2}var dateFormat=s&&s.dateFormat;if(isArray(v1)||isArray(v2)){if(v1.length!==v2.length){return false}for(var i=0;i<v1.length;i++){var eq=true;var a=v1[i];var b=v2[i];if(isString(a)&&isString(b)){eq=a===b;}else {eq=+makeDate(a,s,dateFormat)===+makeDate(b,s,dateFormat);}if(!eq){return false}}return true}return +makeDate(v1,s,dateFormat)===+makeDate(v2,s,dateFormat)}function cloneDate(date){return isMBSCDate(date)?date.clone():new Date(date)}function addDays(date,days){var copy=cloneDate(date);copy.setDate(copy.getDate()+days);return copy}function isInWeek(day,startDay,endDay){return startDay>endDay?day<=endDay||day>=startDay:day>=startDay&&day<=endDay}function roundTime(date,step){var ms=ONE_MIN*step;var copy=cloneDate(date).setHours(0,0,0,0);var rounded=copy+Math.round((+date-+copy)/ms)*ms;return isMBSCDate(date)?date.createDate(rounded):new Date(rounded)}function constrainDate(date,min,max){return min&&date<min?new Date(min):max&&date>max?new Date(max):date}if(isBrowser&&typeof Symbol==="undefined"){window.Symbol={toPrimitive:"toPrimitive"};}util.datetime={formatDate:formatDatePublic,parseDate:parseDate};var w=win;var id=+new Date;var trialError;var logData={};var logTimer;var textParam={};function sendLog(comp){if(comp._logged||remote.apiKey==="mbscdemo"||!doc){return}comp._logged=true;logData.components=logData.components||[];logData.components.push(comp.constructor._name.toLowerCase());clearTimeout(logTimer);logTimer=setTimeout((function(){if(!remote.fwv){var vers=void 0;switch(remote.fw){case"angular":var vEl=doc.querySelector("[ng-version]");vers=vEl?vEl.getAttribute("ng-version"):"N/A";break;case"jquery":vers=w.$.fn&&w.$.fn.jquery;break}remote.fwv=vers||"N/A";}logData.demo=!!w.isMbscDemo;logData.fw=remote.fw;logData.fwv=remote.fwv;logData.theme=comp.s.theme;logData.trialCode=remote.apiKey;logData.v=comp._v.version;jsonp("log",null,logData,(function(){logData={};}));}),5e3);}function showMessage(notification){if(notification&&doc){var byId=doc.getElementById("trial-message");if(!byId){var div_1=doc.createElement("div");div_1.setAttribute("id","trial-message");div_1.setAttribute("style","position: absolute;width: 100%; bottom: 0;left: 0; padding: 10px;box-sizing: border-box;");div_1.setAttribute("class","mbsc-font");var innerDiv=doc.createElement("div");innerDiv.setAttribute("style","padding: 15px 25px; max-width: 400px; margin: 0 auto 10px auto; border-radius: 16px; line-height: 25px; background: #cacaca59; font-size: 15px; color: #151515;");innerDiv.innerHTML=notification.message+" ";var button=doc.createElement("a");button.innerHTML=notification.button.text;button.setAttribute("style","color: #FF4080;font-weight: 600;");button.setAttribute("href","https://mobiscroll.com/pricing?ref=trialapp");innerDiv.appendChild(button);div_1.appendChild(innerDiv);doc.body.appendChild(div_1);setTimeout((function(){doc.body.removeChild(div_1);}),6e3);}}}function jsonp(method,inst,data,callback,uniqueId,attempts){if(!win||!doc){callback({});return}var timer;var script=doc.createElement("script");var unique="mbsc_jsonp_"+(uniqueId?uniqueId:++id);unique=win[unique]?"mbsc_jsonp_"+ ++id:unique;var att=attempts||1;function onError(){if(win&&win[unique]){win[unique](null,true);}if(method==="remote"){if(att<4){jsonp(method,inst,data,callback,uniqueId,att+1);}else if(!trialError){trialError=true;sendError();}}}win[unique]=function(resp,error){clearTimeout(timer);script.parentNode.removeChild(script);delete win[unique];resp=resp?JSON.parse(resp,(function(key,value){if(typeof value!=="string"){return value}if(value.substring(0,9)==="function_"&&inst){return inst[value.replace("function_","")]}if(value.match(ISO_8601_FULL)){return makeDate(value)}return value})):{};if(method==="remote"){textParam.txt=resp.__e;delete resp.__e;}if(!error){callback(resp);}};timer=setTimeout(onError,6e3);script.onerror=onError;script.src=remote.apiUrl+remote.apiKey+"/"+method+"?callback="+unique+"&data="+encodeURIComponent(JSON.stringify(data));doc.body.appendChild(script);}function sendError(){var sessionID=doc.cookie.replace(/(?:(?:^|.*;\s*)ASP.NET_SessionId\s*=\s*([^;]*).*$)|^.*$/,"$1");doc.cookie="mobiscrollClientError=1; expires="+new Date((new Date).getTime()+1e3*60*60*24).toUTCString()+"; path=/; SameSite=Strict";try{win.name=(win.name||"")+";mobiscrollClientError";}catch(e){}jsonp("error",null,{sessionID:sessionID,trialCode:remote.apiKey},(function(){doc.cookie="mobiscrollClientError=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/";try{win.name=(win.name||"").replace(/;mobiscrollClientError/g,"");}catch(e){}}));}if(doc&&(doc.cookie.replace(/(?:(?:^|.*;\s*)mobiscrollClientError\s*=\s*([^;]*).*$)|^.*$/,"$1")||/mobiscrollClientError/.test(win.name||""))){doc.addEventListener("DOMContentLoaded",(function(){sendError();}));}var ɵ0=function(){function getKey(encryptKey){var a=encryptKey[0],i;for(i=0;i<16;++i){if(a*i%16==1){return [i,encryptKey[1]]}}}function affine(enc,str,a,b){var alfb="0123456789abcdef",newstr="",len=str.length,i;for(i=0;i<len;++i){newstr+=enc?alfb[(a*alfb.indexOf(str[i])+b)%16]:alfb[((a*alfb.indexOf(str[i])-a*b)%16+16)%16];}return newstr}function decrypt(str,encryptKey){var decryptKey=getKey(encryptKey),decryptedStr=affine(0,str,decryptKey[0],decryptKey[1]),len=decryptedStr.length,arr=[],i;for(i=0;i<len;i+=2){arr.push(decryptedStr[i]+decryptedStr[i+1]);}return arr}var a=decrypt("9a90939d9a4f9e9af64b904b470c944b42575b5d904f9a9f904c0ea74b9a4e0c904b4c4a41470e0352a74b9a4e0c474b9e0e560c565402960304040b9a4f9e9af64b904b470c9a9e9a5109524a439406959a93424f5700090d449f4c459a43414c0e4f039d944b90069a574f0c424f4c499a4e024c02905d994e43424f0e560b57579a039d9057a74b9a4e0c44424141900ea74b9a4e0c904b4c4a41470e03089a035d9a07575b5d4c574ffd9af75d4ffd9af7574ffd90f75d4ffd90f7574c97904f9a9f904c064f970efd099641434c9a4f90074f944f4c9a95584c414c4f0902094a439596424b9358404241454d0b43479641909a4b4c9a090209964195439a43414c584b409541429f9a4f0b43479641909a4b4c9a0902099a419658560b43479641909a4b4c9a090209424f449a58560b43479641909a4b4c9a09020940419a9a414758560b43479641909a4b4c9a0902099043494e9a58560b43479641909a4b4c9a090209474b9049434c58560b43479641909a4b4c9a090209964b4a4a434c4958560b43479641909a4b4c9a09020944414c9a079543984f585e969e0b43479641909a4b4c9a09020942434c4f074e4f43494e9a585b50969e0902099a4f9e9a074b4243494c58454f4c9a4f9009020941964b45439a9358090d0ea74b9a4e0c44424141900ea74b9a4e0c904b4c4a41470e0308505603015b56560d560c5e030d090b43479641909a4b4c9a09f7030c4841434c0e095d09030d09005cf29f56565f5af29f56565f50f29f56565a53f29f56565a5bf29f56565a4552014a43945c095809090397454b9a454e0e4f039d904f9a9f904c060909978",[5,6]),b="",l=a.length,c;for(c=0;c<l;c++){b+=String.fromCharCode(parseInt(a[c],16));}return b};var getText=new Function("textParam,p",ɵ0());var version$1="5.18.3";var guid=0;var BREAKPOINTS={large:992,medium:768,small:576,xlarge:1200,xsmall:0};var isDark;if(isDarkQuery){isDark=isDarkQuery.matches;isDarkQuery.addListener((function(ev){isDark=ev.matches;globalChanges.next();}));}var BaseComponent=/*#__PURE__*/function(_super){__extends(BaseComponent,_super);function BaseComponent(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.s={};_this.state={};_this._mbsc=true;_this._v={version:"5.18.3"};_this._uid=++guid;_this._textParamMulti={};_this.__getText=getText;return _this}Object.defineProperty(BaseComponent.prototype,"nativeElement",{get:function(){return this._el},enumerable:true,configurable:true});Object.defineProperty(BaseComponent.prototype,"__getTextParam",{get:function(){return textParam.val},enumerable:true,configurable:true});Object.defineProperty(BaseComponent.prototype,"textParam",{get:function(){if(this._textParam===undefined){this._textParam=this.__getText(textParam,.15);}return this._safeHtml(this._textParam)},enumerable:true,configurable:true});BaseComponent.prototype.textParamMulti=function(key){if(this._textParamMulti[key]===undefined){this._textParamMulti[key]=this.__getText(textParam,.15);}return this._safeHtml(this._textParamMulti[key])};BaseComponent.prototype.destroy=function(){};BaseComponent.prototype._hook=function(name,args){var s=this.s;args.inst=this;args.type=name;this._emit(name,args);if(s[name]){return s[name](args,this)}};BaseComponent.prototype.__init=function(){var _this=this;var self=this.constructor;if(self.defaults){this._optChange=globalChanges.subscribe((function(){_this.forceUpdate();}));var modules=this.props.modules;if(modules){for(var _i=0,modules_1=modules;_i<modules_1.length;_i++){var module=modules_1[_i];if(module.init){module.init(this);}}}}this._hook("onInit",{});};BaseComponent.prototype.__destroy=function(){if(this._optChange!==UNDEFINED){globalChanges.unsubscribe(this._optChange);}this._hook("onDestroy",{});};BaseComponent.prototype._render=function(s,state){return};BaseComponent.prototype._willUpdate=function(){this._merge();this._render(this.s,this.state);};BaseComponent.prototype._resp=function(s){var resp=s.responsive;var ret;var br=-1;var width=this.state.width;if(width===UNDEFINED){width=win?win.innerWidth:375;}if(resp&&width){for(var key in resp){if(resp.hasOwnProperty(key)){var value=resp[key];var breakpoint=value.breakpoint||BREAKPOINTS[key];if(width>=breakpoint&&breakpoint>br){ret=value;br=breakpoint;}}}}return ret};BaseComponent.prototype._merge=function(){var self=this.constructor;var defaults=self.defaults;var context=this._opt||{};var props={};var baseTheme;var s;var themeDef;this._prevS=this.s||{};if(defaults){for(var prop in this.props){if(this.props[prop]!==UNDEFINED){props[prop]=this.props[prop];}}var locale=props.locale||context.locale||options.locale||{};var calendarSystem=props.calendarSystem||locale.calendarSystem||context.calendarSystem||options.calendarSystem;var themeName=props.theme||context.theme||options.theme;var themeVariant=props.themeVariant||context.themeVariant||options.themeVariant;if(themeName==="auto"||!themeName){themeName=autoDetect.theme;}if((themeVariant==="dark"||isDark&&(themeVariant==="auto"||!themeVariant))&&themes[themeName+"-dark"]){themeName+="-dark";}props.theme=themeName;themeDef=themes[themeName];var theme=themeDef&&themes[themeName][self._name];s=__assign({},defaults,theme,locale,options,context,calendarSystem,props);var resp=this._resp(s);this._respProps=resp;if(resp){s=__assign({},s,resp);}}else {s=__assign({},this.props);themeDef=themes[s.theme];}baseTheme=themeDef&&themeDef.baseTheme;s.baseTheme=baseTheme;this.s=s;this._className=s.cssClass||s.class||s.className||"";this._rtl=" mbsc-"+(s.rtl?"rtl":"ltr");this._theme=" mbsc-"+s.theme+(baseTheme?" mbsc-"+baseTheme:"");this._touchUi=s.touchUi==="auto"||s.touchUi===UNDEFINED?touchUi:s.touchUi;this._hb=exports.ɵy==="ios"&&(s.theme==="ios"||baseTheme==="ios")?" mbsc-hb":"";};BaseComponent.defaults=UNDEFINED;BaseComponent._name="";BaseComponent.decorators=[{type:core.Directive,args:[{selector:"[mbsc-bc]"}]}];return BaseComponent}(Base);var labelGuid=1;var MONTH_VIEW="month";var YEAR_VIEW="year";var MULTI_YEAR_VIEW="multi-year";var PAGE_WIDTH=296;var calendarViewDefaults=__assign({},dateTimeLocale,{dateText:"Date",eventText:"event",eventsText:"events",moreEventsText:"{count} more",nextPageText:"Next page",prevPageText:"Previous page",showEventTooltip:true,showToday:true,timeText:"Time"});function getFirstPageDay(pageIndex,s){var refDate=s.refDate?makeDate(s.refDate):REF_DATE;var pageType=s.showCalendar?s.calendarType:s.eventRange;var pageSize=(s.showCalendar?pageType==="year"?1:pageType==="week"?s.weeks:s.size:s.eventRangeSize)||1;var getDate=s.getDate;var ref=pageType==="week"?getFirstDayOfWeek(refDate,s):refDate;var year=s.getYear(ref);var month=s.getMonth(ref);var day=s.getDay(ref);switch(pageType){case"year":return getDate(year+pageIndex*pageSize,0,1);case"week":return getDate(year,month,day+7*pageSize*pageIndex);case"day":return getDate(year,month,day+pageSize*pageIndex);default:return getDate(year,month+pageIndex*pageSize,1)}}function getPageIndex(d,s){var refDate=s.refDate?makeDate(s.refDate):REF_DATE;var getYear=s.getYear;var getMonth=s.getMonth;var pageType=s.showCalendar?s.calendarType:s.eventRange;var pageSize=(s.showCalendar?pageType==="year"?1:pageType==="week"?s.weeks:s.size:s.eventRangeSize)||1;var diff;switch(pageType){case"year":diff=getYear(d)-getYear(refDate);break;case"week":diff=getDayDiff(getFirstDayOfWeek(refDate,s),getFirstDayOfWeek(d,s))/7;break;case"day":diff=getDayDiff(refDate,d);break;case"month":diff=getMonth(d)-getMonth(refDate)+(getYear(d)-getYear(refDate))*12;break;default:return}return floor(diff/pageSize)}function getYearsIndex(d,s){var refDate=s.refDate?makeDate(s.refDate):REF_DATE;return floor((s.getYear(d)-s.getYear(refDate))/12)}function getYearIndex(d,s){var refDate=s.refDate?makeDate(s.refDate):REF_DATE;return s.getYear(d)-s.getYear(refDate)}function compareEvents(a,b){var start1=makeDate(a.start||a.date);var start2=makeDate(b.start||a.date);var text1=a.title||a.text;var text2=b.title||b.text;var weight1=!start1?0:+start1*(a.allDay?1:10);var weight2=!start2?0:+start2*(b.allDay?1:10);if(weight1===weight2){return text1>text2?1:-1}return weight1-weight2}function getPageNr(pages,width){return pages==="auto"?Math.max(1,Math.min(3,Math.floor(width?width/PAGE_WIDTH:1))):pages?+pages:1}function getLabels(s,labelsObj,start,end,maxLabels,days,allDayOnly,firstWeekDay,isMultiRow,eventOrder,noOuterDays,showLabelCount,moreEventsText,moreEventsPluralText){labelsObj=labelsObj||{};var dayLabels={};var eventRows={};var day=start;var uid=0;var max=maxLabels;var rowEnd=end;while(day<end){var dateKey=getDateStr(day);var weekDay=day.getDay();var monthDay=s.getDay(day);var lastDayOfMonth=noOuterDays&&s.getDate(s.getYear(day),s.getMonth(day)+1,0);var isRowStart=isMultiRow&&(weekDay===firstWeekDay||monthDay===1&&noOuterDays)||+day===+start;var firstDay=getFirstDayOfWeek(day,s);var events=sortEvents(labelsObj[dateKey]||[],eventOrder);var prevEvent=void 0;var prevIndex=void 0;var row=0;var displayed=0;var i=0;if(isRowStart){eventRows={};rowEnd=isMultiRow?addDays(firstDay,days):end;}if(allDayOnly){events=events.filter((function(ev){return ev.allDay}));}if(maxLabels===-1){max=events.length+1;}var eventsNr=events.length;var data=[];if(showLabelCount){data.push({id:"count_"+ +day,count:eventsNr,placeholder:eventsNr===0});row=max;}while(eventsNr&&row<max){prevEvent=null;for(var j=0;j<events.length;j++){if(eventRows[row]===events[j]){prevEvent=events[j];prevIndex=j;}}if(row===max-1&&(displayed<eventsNr-1||i===eventsNr&&!prevEvent)&&maxLabels!==-1){var nr=eventsNr-displayed;var moreText=moreEventsText||"";var text=(nr>1?moreEventsPluralText||moreText:moreText).replace(/{count}/,nr);if(nr){data.push({id:"more_"+ ++uid,more:text,label:text});}if(prevEvent){eventRows[row]=null;for(var _i=0,_a=prevEvent._days;_i<_a.length;_i++){var d=_a[_i];var t=moreText.replace(/{count}/,"1");dayLabels[getDateStr(d)].data[row]={id:"more_"+ ++uid,more:t,label:t};}}displayed++;row++;}else if(prevEvent){if(prevIndex===i){i++;}if(isSameDay(day,makeDate(prevEvent.end,prevEvent.allDay?UNDEFINED:s))){eventRows[row]=null;}data.push({id:prevEvent.occurrenceId||prevEvent.id,event:prevEvent});row++;displayed++;prevEvent._days.push(day);}else if(i<eventsNr){var event_1=events[i];var allDay=event_1.allDay;var startTime=event_1.start&&makeDate(event_1.start,allDay?UNDEFINED:s);if(!startTime||isSameDay(day,startTime)||isRowStart){var eventEnd=event_1.end&&makeDate(event_1.end,allDay?UNDEFINED:s);var endTime=getEndDate(s,allDay,startTime,eventEnd,true);var multiDay=endTime&&!isSameDay(startTime,endTime);var labelEnd=lastDayOfMonth&&lastDayOfMonth<endTime?lastDayOfMonth:endTime;var startStr=startTime?", "+s.fromText+": "+formatDate("DDDD, MMMM D, YYYY",startTime,s):"";var endStr=endTime?", "+s.toText+": "+formatDate("DDDD, MMMM D, YYYY",endTime,s):"";if(event_1.id===UNDEFINED){event_1.id="mbsc_"+labelGuid++;}if(multiDay){eventRows[row]=event_1;}event_1._days=[day];data.push({event:event_1,id:event_1.occurrenceId||event_1.id,label:(event_1.title||event_1.text||"")+startStr+endStr,lastDay:lastDayOfMonth?addDays(lastDayOfMonth,1):UNDEFINED,multiDay:multiDay,showText:true,width:multiDay?Math.min(getDayDiff(day,labelEnd)+1,getDayDiff(day,rowEnd))*100:100});row++;displayed++;}i++;}else {if(displayed<eventsNr){data.push({id:"ph_"+ ++uid,placeholder:true});}row++;}}dayLabels[dateKey]={data:data,events:events};day=getDateOnly(addDays(day,1));}return dayLabels}function sortEvents(events,eventOrder){return events&&events.slice(0).sort(eventOrder||compareEvents)}var ANIMATION_START="animationstart";var BLUR="blur";var CHANGE="change";var CLICK="click";var CONTEXTMENU="contextmenu";var DOUBLE_CLICK="dblclick";var FOCUS="focus";var FOCUS_IN="focusin";var INPUT="input";var KEY_DOWN="keydown";var MOUSE_DOWN="mousedown";var MOUSE_MOVE="mousemove";var MOUSE_UP="mouseup";var MOUSE_OVER="mousedown";var MOUSE_ENTER="mouseenter";var MOUSE_LEAVE="mouseleave";var MOUSE_WHEEL="mousewheel";var RESIZE="resize";var SCROLL="scroll";var TOUCH_START="touchstart";var TOUCH_MOVE="touchmove";var TOUCH_END="touchend";var TOUCH_CANCEL="touchcancel";var WHEEL="wheel";var BACKSPACE=8;var TAB=9;var ENTER=13;var ESC=27;var SPACE=32;var PAGE_UP=33;var PAGE_DOWN=34;var END=35;var HOME=36;var LEFT_ARROW=37;var UP_ARROW=38;var RIGHT_ARROW=39;var DOWN_ARROW=40;var DELETE=46;var markup='<div class="mbsc-resize"><div class="mbsc-resize-i mbsc-resize-x"></div></div>'+'<div class="mbsc-resize"><div class="mbsc-resize-i mbsc-resize-y"></div></div>';var observer;var count=0;function resizeObserver(el,callback,zone){var expand;var expandChild;var helper;var hiddenRafId;var rafId;var shrink;var stopCheck;var lastCheck=0;function reset(){expandChild.style.width="100000px";expandChild.style.height="100000px";expand.scrollLeft=1e5;expand.scrollTop=1e5;shrink.scrollLeft=1e5;shrink.scrollTop=1e5;}function checkHidden(){var now=+new Date;hiddenRafId=0;if(!stopCheck){if(now-lastCheck>200&&!expand.scrollTop&&!expand.scrollLeft){lastCheck=now;reset();}if(!hiddenRafId){hiddenRafId=raf(checkHidden);}}}function onScroll(){if(!rafId){rafId=raf(onResize);}}function onResize(){rafId=0;reset();callback();}if(win&&win.ResizeObserver){if(!observer){observer=new win.ResizeObserver((function(entries){if(!rafId){rafId=raf((function(){for(var _i=0,entries_1=entries;_i<entries_1.length;_i++){var entry=entries_1[_i];if(entry.target.__mbscResize){entry.target.__mbscResize();}}rafId=0;}));}}));}count++;el.__mbscResize=function(){if(zone){zone.run(callback);}else {callback();}};observer.observe(el);}else {helper=doc&&doc.createElement("div");}if(helper){helper.innerHTML=markup;helper.dir="ltr";shrink=helper.childNodes[1];expand=helper.childNodes[0];expandChild=expand.childNodes[0];el.appendChild(helper);listen(expand,"scroll",onScroll);listen(shrink,"scroll",onScroll);if(zone){zone.runOutsideAngular((function(){raf(checkHidden);}));}else {raf(checkHidden);}}return {detach:function(){if(observer){count--;delete el.__mbscResize;observer.unobserve(el);if(!count){observer=UNDEFINED;}}else {if(helper){unlisten(expand,"scroll",onScroll);unlisten(shrink,"scroll",onScroll);el.removeChild(helper);rafc(rafId);helper=UNDEFINED;}stopCheck=true;}}}}var activeModal;var EDITABLE="input,select,textarea,button";var ALLOW_ENTER='textarea,button,input[type="button"],input[type="submit"]';var FOCUSABLE=EDITABLE+',[tabindex="0"]';var MAX_WIDTH=600;var KEY_CODES={enter:ENTER,esc:ESC,space:SPACE};var needsFixed=isBrowser&&/(iphone|ipod)/i.test(userAgent)&&exports.ɵz>=7&&exports.ɵz<15;function processButtons(inst,buttons){var s=inst.s;var processedButtons=[];var predefinedButtons={cancel:{cssClass:"mbsc-popup-button-close",name:"cancel",text:s.cancelText},close:{cssClass:"mbsc-popup-button-close",name:"close",text:s.closeText},ok:{cssClass:"mbsc-popup-button-primary",keyCode:ENTER,name:"ok",text:s.okText},set:{cssClass:"mbsc-popup-button-primary",keyCode:ENTER,name:"set",text:s.setText}};if(buttons&&buttons.length){buttons.forEach((function(btn){var button=isString(btn)?predefinedButtons[btn]||{text:btn}:btn;if(!button.handler||isString(button.handler)){if(isString(button.handler)){button.name=button.handler;}button.handler=function(domEvent){inst._onButtonClick({domEvent:domEvent,button:button});};}processedButtons.push(button);}));return processedButtons}return}function getPrevActive(modal,i){if(i===void 0){i=0;}var prevModal=modal._prevModal;if(prevModal&&prevModal!==modal&&i<10){if(prevModal.isVisible()){return prevModal}return getPrevActive(prevModal,i+1)}return}var PopupBase=/*#__PURE__*/function(_super){__extends(PopupBase,_super);function PopupBase(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this._lastFocus=+new Date;_this._onOverlayClick=function(){if(_this._isOpen&&_this.s.closeOnOverlayClick&&!_this._preventClose){_this._close("overlay");}_this._preventClose=false;};_this._onDocClick=function(ev){if(!_this.s.showOverlay&&ev.target!==_this.s.focusElm&&activeModal===_this){_this._onOverlayClick();}};_this._onMouseDown=function(ev){if(!_this.s.showOverlay){_this._target=ev.target;}};_this._onMouseUp=function(ev){if(_this._target&&_this._popup&&_this._popup.contains(_this._target)&&!_this._popup.contains(ev.target)){_this._preventClose=true;}_this._target=false;};_this._onPopupClick=function(){if(!_this.s.showOverlay){_this._preventClose=true;}};_this._onAnimationEnd=function(ev){if(ev.target===_this._popup){if(_this._isClosing){_this._onClosed();_this._isClosing=false;if(_this.state.isReady){_this.setState({isReady:false});}else {_this.forceUpdate();}}if(_this._isOpening){_this._onOpened();_this._isOpening=false;_this.forceUpdate();}}};_this._onButtonClick=function(_a){var domEvent=_a.domEvent,button=_a.button;_this._hook("onButtonClick",{domEvent:domEvent,button:button});if(/cancel|close|ok|set/.test(button.name)){_this._close(button.name);}};_this._onFocus=function(ev){var now=+new Date;if(activeModal===_this&&ev.target.nodeType&&_this._ctx.contains(ev.target)&&!_this._popup.contains(ev.target)&&now-_this._lastFocus>100&&ev.target!==_this.s.focusElm){_this._lastFocus=now;_this._active.focus();}};_this._onKeyDown=function(ev){var s=_this.s;var keyCode=ev.keyCode;var focusElm=s.focusElm&&!s.focusOnOpen?s.focusElm:UNDEFINED;if(keyCode===SPACE&&!matches(ev.target,EDITABLE)||_this._lock&&(keyCode===UP_ARROW||keyCode===DOWN_ARROW)){ev.preventDefault();}if(s.focusTrap&&keyCode===TAB){var all=_this._popup.querySelectorAll(FOCUSABLE);var focusable_1=[];var end_1=-1;var target=0;var current_1=-1;var targetElm=UNDEFINED;forEach(all,(function(elm){if(!elm.disabled&&(elm.offsetHeight||elm.offsetWidth)){focusable_1.push(elm);end_1++;if(elm===_this._doc.activeElement){current_1=end_1;}}}));if(ev.shiftKey){target=end_1;end_1=0;}if(current_1===end_1){targetElm=focusElm||focusable_1[target];}else if(ev.target===focusElm){targetElm=focusable_1[target];}if(targetElm){targetElm.focus();ev.preventDefault();}}};_this._onContentScroll=function(ev){if(_this._lock&&(ev.type!==TOUCH_MOVE||ev.touches[0].touchType!=="stylus")){ev.preventDefault();}};_this._onScroll=function(ev){var s=_this.s;if(s.closeOnScroll){_this._close("scroll");}else if(_this._hasContext||s.display==="anchored"){_this.position();}};_this._onWndKeyDown=function(ev){var s=_this.s;var keyCode=ev.keyCode;if(activeModal===_this){_this._hook("onKeyDown",{keyCode:keyCode});if(s.closeOnEsc&&keyCode===ESC){_this._close("esc");}if(keyCode===ENTER&&matches(ev.target,ALLOW_ENTER)&&!ev.shiftKey){return}if(_this._buttons){for(var _i=0,_a=_this._buttons;_i<_a.length;_i++){var button=_a[_i];var buttonKeyCodes=isArray(button.keyCode)?button.keyCode:[button.keyCode];for(var _b=0,buttonKeyCodes_1=buttonKeyCodes;_b<buttonKeyCodes_1.length;_b++){var key=buttonKeyCodes_1[_b];if(!button.disabled&&key!==UNDEFINED&&(key===keyCode||KEY_CODES[key]===keyCode)){button.handler(ev);return}}}}}};_this._onResize=function(){var wrapper=_this._wrapper;var hasContext=_this._hasContext;_this._vpWidth=Math.min(wrapper.clientWidth,hasContext?Infinity:_this._win.innerWidth);_this._vpHeight=Math.min(wrapper.clientHeight,hasContext?Infinity:_this._win.innerHeight);_this._maxWidth=_this._limitator.offsetWidth;_this._maxHeight=_this.s.maxHeight!==UNDEFINED||_this._vpWidth<768||_this._vpHeight<650?_this._limitator.offsetHeight:600;_this._round=_this.s.touchUi===false||_this._popup.offsetWidth<_this._vpWidth&&_this._vpWidth>_this._maxWidth;var args={isLarge:_this._round,maxPopupHeight:_this._maxHeight,maxPopupWidth:_this._maxWidth,target:_this._wrapper,windowHeight:_this._vpHeight,windowWidth:_this._vpWidth};if(_this._hook("onResize",args)!==false&&!args.cancel){_this.position();}};return _this}PopupBase.prototype.open=function(){if(!this._isOpen){this.setState({isOpen:true});}};PopupBase.prototype.close=function(){this._close();};PopupBase.prototype.isVisible=function(){return !!this._isOpen};PopupBase.prototype.position=function(){if(!this._isOpen){return}var s=this.s;var state=this.state;var wrapper=this._wrapper;var popup=this._popup;var hasContext=this._hasContext;var anchor=s.anchor;var anchorAlign=s.anchorAlign;var rtl=s.rtl;var scrollTop=getScrollTop(this._scrollCont);var scrollLeft=getScrollLeft(this._scrollCont);var viewportWidth=this._vpWidth;var viewportHeight=this._vpHeight;var maxWidth=this._maxWidth;var maxHeight=this._maxHeight;var popupWidth=Math.min(popup.offsetWidth,maxWidth);var popupHeight=Math.min(popup.offsetHeight,maxHeight);var showArrow=s.showArrow;this._lock=s.scrollLock&&this._content.scrollHeight<=this._content.clientHeight;if(hasContext){wrapper.style.top=scrollTop+"px";wrapper.style.left=scrollLeft+"px";}var skip=this._hook("onPosition",{isLarge:this._round,maxPopupHeight:maxHeight,maxPopupWidth:maxWidth,target:this._wrapper,windowHeight:viewportHeight,windowWidth:viewportWidth})===false;if(s.display==="anchored"&&!skip){var ctxLeft=0;var ctxTop=0;var left=constrain(state.modalLeft||0,8,viewportWidth-popupWidth-8);var top_1=state.modalTop||8;var bubblePos="bottom";var arrowPos={};var arrowHeight=showArrow?16:4;var fullWidth=wrapper.offsetWidth;var fullHeight=wrapper.offsetHeight;var widthOffset=(fullWidth-viewportWidth)/2;var heightOffset=(fullHeight-viewportHeight)/2;if(hasContext){var ctxBox=this._ctx.getBoundingClientRect();ctxTop=ctxBox.top;ctxLeft=ctxBox.left;}if(anchor&&this._ctx.contains(anchor)){var box=anchor.getBoundingClientRect();var anchorTop=box.top-ctxTop;var anchorLeft=box.left-ctxLeft;var anchorWidth=anchor.offsetWidth;var anchorHeight=anchor.offsetHeight;if(anchorAlign==="start"&&!rtl||anchorAlign==="end"&&rtl){left=anchorLeft;}else if(anchorAlign==="end"&&!rtl||anchorAlign==="start"&&rtl){left=anchorLeft+anchorWidth-popupWidth;}else {left=anchorLeft-(popupWidth-anchorWidth)/2;}left=constrain(left,8,viewportWidth-popupWidth-8);top_1=anchorTop+anchorHeight+arrowHeight;arrowPos={left:constrain(anchorLeft+anchorWidth/2-left-widthOffset,30,popupWidth-30)+"px"};if(top_1+popupHeight+arrowHeight>viewportHeight){if(anchorTop-popupHeight-arrowHeight>0){bubblePos="top";top_1=anchorTop-popupHeight-arrowHeight;}else if(!s.disableLeftRight){var leftPos=anchorLeft-popupWidth-8>0;var rightPos=anchorLeft+anchorWidth+popupWidth+8<=viewportWidth;if(leftPos||rightPos){top_1=constrain(anchorTop-(popupHeight-anchorHeight)/2,8,viewportHeight-popupHeight-8);if(top_1+popupHeight+8>viewportHeight){top_1=Math.max(viewportHeight-popupHeight-8,0);}arrowPos={top:constrain(anchorTop+anchorHeight/2-top_1-heightOffset,30,popupHeight-30)+"px"};bubblePos=leftPos?"left":"right";left=leftPos?anchorLeft-popupWidth:anchorLeft+anchorWidth;}}}}if(bubblePos==="top"||bubblePos==="bottom"){if(top_1+popupHeight+arrowHeight>viewportHeight){top_1=Math.max(viewportHeight-popupHeight-arrowHeight,0);showArrow=false;}}this.setState({arrowPos:arrowPos,bubblePos:bubblePos,height:viewportHeight,isReady:true,modalLeft:left,modalTop:top_1,showArrow:showArrow,width:viewportWidth});}else {this.setState({height:viewportHeight,isReady:true,showArrow:showArrow,width:viewportWidth});}};PopupBase.prototype._render=function(s,state){if(s.display==="bubble"){s.display="anchored";}var animation=s.animation;var display=s.display;var prevProps=this._prevS;var hasPos=display==="anchored";var isModal=display!=="inline";var isFullScreen=s.fullScreen&&isModal;var isOpen=isModal?s.isOpen===UNDEFINED?state.isOpen:s.isOpen:false;if(isOpen&&(s.windowWidth!==prevProps.windowWidth||s.display!==prevProps.display||s.showArrow!==prevProps.showArrow||s.anchor!==prevProps.anchor&&s.display==="anchored")){this._shouldPosition=true;}this._limits={maxHeight:addPixel(s.maxHeight),maxWidth:addPixel(s.maxWidth)};this._style={height:isFullScreen?"100%":addPixel(s.height),left:hasPos&&state.modalLeft?state.modalLeft+"px":"",maxHeight:addPixel(this._maxHeight||s.maxHeight),maxWidth:addPixel(this._maxWidth||s.maxWidth),top:hasPos&&state.modalTop?state.modalTop+"px":"",width:isFullScreen?"100%":addPixel(s.width)};this._hasContext=s.context!=="body"&&s.context!==UNDEFINED;this._needsLock=needsFixed&&!this._hasContext&&display!=="anchored"&&s.scrollLock;this._isModal=isModal;this._flexButtons=display==="center"||!this._touchUi&&!isFullScreen&&(display==="top"||display==="bottom");if(animation!==UNDEFINED&&animation!==true){this._animation=isString(animation)?animation:"";}else {switch(display){case"bottom":this._animation="slide-up";break;case"top":this._animation="slide-down";break;default:this._animation="pop";}}if(s.buttons){if(s.buttons!==prevProps.buttons){this._buttons=processButtons(this,s.buttons);}}else {this._buttons=UNDEFINED;}if(s.headerText!==prevProps.headerText){this._headerText=s.headerText?this._safeHtml(s.headerText):UNDEFINED;}if(isOpen&&!this._isOpen){this._onOpen();}if(!isOpen&&this._isOpen){this._onClose();}this._isOpen=isOpen;this._isVisible=isOpen||this._isClosing;};PopupBase.prototype._updated=function(){var _this=this;var s=this.s;if(doc&&(s.context!==this._prevS.context||!this._ctx)){var ctx=isString(s.context)?doc.querySelector(s.context):s.context;if(!ctx){ctx=doc.body;}ctx.__mbscLock=ctx.__mbscLock||0;ctx.__mbscIOSLock=ctx.__mbscIOSLock||0;ctx.__mbscModals=ctx.__mbscModals||0;this._ctx=ctx;if(this._justOpened){ngSetTimeout(this,(function(){_this.forceUpdate();}));return}}if(this._justOpened){var ctx=this._ctx;var wrapper=this._wrapper;var hasContext=this._hasContext;var doc_1=this._doc=getDocument(wrapper);var win=this._win=getWindow(wrapper);var activeElm_1=doc_1.activeElement;if(!this._hasWidth&&s.responsive){var viewportWidth_1=Math.min(wrapper.clientWidth,hasContext?Infinity:win.innerWidth);var viewportHeight_1=Math.min(wrapper.clientHeight,hasContext?Infinity:win.innerHeight);this._hasWidth=true;if(viewportWidth_1!==this.state.width||viewportHeight_1!==this.state.height){ngSetTimeout(this,(function(){_this.setState({height:viewportHeight_1,width:viewportWidth_1});}));return}}this._scrollCont=hasContext?ctx:win;this._observer=resizeObserver(wrapper,this._onResize,this._zone);this._prevFocus=s.focusElm||activeElm_1;ctx.__mbscModals++;if(s.focusOnOpen&&activeElm_1){setTimeout((function(){activeElm_1.blur();}));}if(this._needsLock){if(!ctx.__mbscIOSLock){var scrollTop=getScrollTop(this._scrollCont);var scrollLeft=getScrollLeft(this._scrollCont);ctx.style.left=-scrollLeft+"px";ctx.style.top=-scrollTop+"px";ctx.__mbscScrollLeft=scrollLeft;ctx.__mbscScrollTop=scrollTop;ctx.classList.add("mbsc-popup-open-ios");ctx.parentNode.classList.add("mbsc-popup-open-ios");}ctx.__mbscIOSLock++;}if(hasContext){ctx.classList.add("mbsc-popup-ctx");}if(s.focusTrap){listen(win,FOCUS_IN,this._onFocus);}if(s.focusElm&&!s.focusOnOpen){listen(s.focusElm,KEY_DOWN,this._onKeyDown);}listen(this._scrollCont,TOUCH_MOVE,this._onContentScroll,{passive:false});listen(this._scrollCont,WHEEL,this._onContentScroll,{passive:false});listen(this._scrollCont,MOUSE_WHEEL,this._onContentScroll,{passive:false});setTimeout((function(){listen(doc_1,MOUSE_DOWN,_this._onMouseDown);listen(doc_1,MOUSE_UP,_this._onMouseUp);listen(doc_1,CLICK,_this._onDocClick);}));this._hook("onOpen",{target:this._wrapper});}if(this._shouldPosition){ngSetTimeout(this,(function(){_this._onResize();}));}this._justOpened=false;this._justClosed=false;this._shouldPosition=false;};PopupBase.prototype._destroy=function(){if(this._isOpen){this._onClosed();this._unlisten();if(activeModal===this){activeModal=getPrevActive(this);}}};PopupBase.prototype._onOpen=function(){var _this=this;if(hasAnimation&&this._animation){this._isOpening=true;this._isClosing=false;}else {this._onOpened();}this._justOpened=true;this._preventClose=false;if(activeModal!==this){setTimeout((function(){_this._prevModal=activeModal;activeModal=_this;}));}};PopupBase.prototype._onClose=function(){var _this=this;if(hasAnimation&&this._animation){this._isClosing=true;this._isOpening=false;}else {setTimeout((function(){_this._onClosed();_this.setState({isReady:false});}));}this._hasWidth=false;this._unlisten();};PopupBase.prototype._onOpened=function(){var s=this.s;if(s.focusOnOpen){var activeElm=s.activeElm;var active=activeElm?isString(activeElm)?this._popup.querySelector(activeElm)||this._active:activeElm:this._active;if(active&&active.focus){active.focus();}}listen(this._win,KEY_DOWN,this._onWndKeyDown);listen(this._scrollCont,SCROLL,this._onScroll);};PopupBase.prototype._onClosed=function(){var _this=this;var ctx=this._ctx;var shouldFocus=this._prevFocus&&this._prevFocus.focus&&this.s.focusOnClose;ctx.mbscModals--;this._justClosed=true;if(this._needsLock){ctx.__mbscIOSLock--;if(!ctx.__mbscIOSLock){ctx.classList.remove("mbsc-popup-open-ios");ctx.parentNode.classList.remove("mbsc-popup-open-ios");ctx.style.left="";ctx.style.top="";setScrollLeft(this._scrollCont,ctx.__mbscScrollLeft);setScrollTop(this._scrollCont,ctx.__mbscScrollTop);}}if(this._hasContext&&!ctx.mbscModals){ctx.classList.remove("mbsc-popup-ctx");}this._hook("onClosed",{focus:shouldFocus});if(shouldFocus){this._prevFocus.focus();}setTimeout((function(){if(activeModal===_this){activeModal=getPrevActive(_this);}}));};PopupBase.prototype._unlisten=function(){unlisten(this._win,KEY_DOWN,this._onWndKeyDown);unlisten(this._scrollCont,SCROLL,this._onScroll);unlisten(this._scrollCont,TOUCH_MOVE,this._onContentScroll,{passive:false});unlisten(this._scrollCont,WHEEL,this._onContentScroll,{passive:false});unlisten(this._scrollCont,MOUSE_WHEEL,this._onContentScroll,{passive:false});unlisten(this._doc,MOUSE_DOWN,this._onMouseDown);unlisten(this._doc,MOUSE_UP,this._onMouseUp);unlisten(this._doc,CLICK,this._onDocClick);if(this.s.focusTrap){unlisten(this._win,FOCUS_IN,this._onFocus);}if(this.s.focusElm){unlisten(this.s.focusElm,KEY_DOWN,this._onKeyDown);}if(this._observer){this._observer.detach();this._observer=null;}};PopupBase.prototype._close=function(source){if(this._isOpen){if(this.s.isOpen===UNDEFINED){this.setState({isOpen:false});}this._hook("onClose",{source:source});}};PopupBase.defaults={buttonVariant:"flat",cancelText:"Cancel",closeOnEsc:true,closeOnOverlayClick:true,closeText:"Close",contentPadding:true,display:"center",focusOnClose:true,focusOnOpen:true,focusTrap:true,maxWidth:MAX_WIDTH,okText:"Ok",scrollLock:true,setText:"Set",showArrow:true,showOverlay:true};PopupBase.decorators=[{type:core.Directive,args:[{selector:"[mbsc-popup-b]"}]}];return PopupBase}(BaseComponent);var tapped=0;var allowQuick;function getCoord(ev,axis,page){var prop=(page?"page":"client")+axis;if(ev.targetTouches&&ev.targetTouches[0]){return ev.targetTouches[0][prop]}if(ev.changedTouches&&ev.changedTouches[0]){return ev.changedTouches[0][prop]}return ev[prop]}function preventClick(){tapped++;setTimeout((function(){tapped--;}),500);}function triggerClick(ev,control){if(control.mbscClick){return}var touch=(ev.originalEvent||ev).changedTouches[0];var evt=document.createEvent("MouseEvents");evt.initMouseEvent("click",true,true,window,1,touch.screenX,touch.screenY,touch.clientX,touch.clientY,false,false,false,false,0,null);evt.isMbscTap=true;evt.isIonicTap=true;allowQuick=true;control.mbscChange=true;control.mbscClick=true;control.dispatchEvent(evt);allowQuick=false;preventClick();setTimeout((function(){delete control.mbscClick;}));}function bustClick(ev){if(tapped&&!allowQuick&&!ev.isMbscTap&&!(ev.target.nodeName==="TEXTAREA"&&ev.type===MOUSE_DOWN)){ev.stopPropagation();ev.preventDefault();}}if(isBrowser){[MOUSE_OVER,MOUSE_ENTER,MOUSE_DOWN,MOUSE_UP,CLICK].forEach((function(ev){doc.addEventListener(ev,bustClick,true);}));if(exports.ɵy==="android"&&exports.ɵz<5){doc.addEventListener(CHANGE,(function(ev){var target=ev.target;if(tapped&&target.type==="checkbox"&&!target.mbscChange){ev.stopPropagation();ev.preventDefault();}delete target.mbscChange;}),true);}}var wasTouched;function setFocusInvisible(ev){var win=getWindow(ev.target);win.__mbscFocusVisible=false;}function setFocusVisible(ev){var win=getWindow(ev.target);win.__mbscFocusVisible=true;}function onTouchMove(ev){var document=getDocument(ev.target);document.__mbscMoveObs.next(ev);}function addRipple(elm,x,y){var rect=elm.getBoundingClientRect();var left=x-rect.left;var top=y-rect.top;var width=Math.max(left,elm.offsetWidth-left);var height=Math.max(top,elm.offsetHeight-top);var size=2*Math.sqrt(Math.pow(width,2)+Math.pow(height,2));var ripple=doc.createElement("span");ripple.classList.add("mbsc-ripple");var style=ripple.style;style.backgroundColor=getComputedStyle(elm).color;style.width=size+"px";style.height=size+"px";style.top=y-rect.top-size/2+"px";style.left=x-rect.left-size/2+"px";elm.appendChild(ripple);setTimeout((function(){style.opacity=".2";style.transform="scale(1)";style.transition="opacity linear .1s, transform cubic-bezier(0, 0, 0.2, 1) .4s";}),30);return ripple}function removeRipple(r){if(r){setTimeout((function(){r.style.opacity="0";r.style.transition="opacity linear .4s";setTimeout((function(){if(r&&r.parentNode){r.parentNode.removeChild(r);}}),400);}),200);}}function gestureListener(elm,options){var args={};var win=getWindow(elm);var document=getDocument(elm);var active;var activeable;var activeTimer;var ripple;var hasFocus;var hasHover;var hasRipple;var moved;var moveId;var startX;var startY;var endX;var endY;var deltaX;var deltaY;var started;function skipMouseEvent(ev){if(ev.type===TOUCH_START){wasTouched=true;}else if(wasTouched){if(ev.type===MOUSE_DOWN){wasTouched=false;}return true}return false}function activate(){if(hasRipple){removeRipple(ripple);ripple=addRipple(elm,endX,endY);}options.onPress();active=true;}function deactivate(r,time){activeable=false;removeRipple(r);clearTimeout(activeTimer);activeTimer=setTimeout((function(){if(active){options.onRelease();active=false;}}),time);}function onStart(ev){if(skipMouseEvent(ev)){return}if(ev.type===MOUSE_DOWN&&(ev.button!==0||ev.ctrlKey)){return}startX=getCoord(ev,"X");startY=getCoord(ev,"Y");endX=startX;endY=startY;active=false;activeable=false;moved=false;started=true;args.moved=moved;args.startX=startX;args.startY=startY;args.endX=endX;args.endY=endY;args.deltaX=0;args.deltaY=0;args.domEvent=ev;args.isTouch=wasTouched;removeRipple(ripple);if(options.onStart){var ret=options.onStart(args);hasRipple=ret&&ret.ripple;}if(options.onPress){activeable=true;clearTimeout(activeTimer);activeTimer=setTimeout(activate,50);}if(ev.type===MOUSE_DOWN){listen(document,MOUSE_MOVE,onMove);listen(document,MOUSE_UP,onEnd);}listen(document,CONTEXTMENU,onContextMenu);}function onMove(ev){if(!started){return}endX=getCoord(ev,"X");endY=getCoord(ev,"Y");deltaX=endX-startX;deltaY=endY-startY;if(!moved&&(Math.abs(deltaX)>9||Math.abs(deltaY)>9)){moved=true;deactivate(ripple);}args.moved=moved;args.endX=endX;args.endY=endY;args.deltaX=deltaX;args.deltaY=deltaY;args.domEvent=ev;args.isTouch=ev.type===TOUCH_MOVE;if(options.onMove){options.onMove(args);}}function onEnd(ev){if(!started){return}if(activeable&&!active){clearTimeout(activeTimer);activate();}args.domEvent=ev;args.isTouch=ev.type===TOUCH_END;if(options.onEnd){options.onEnd(args);}deactivate(ripple,75);started=false;if(ev.type===TOUCH_END&&options.click&&hasGhostClick&&!moved){triggerClick(ev,ev.target);}if(ev.type===MOUSE_UP){unlisten(document,MOUSE_MOVE,onMove);unlisten(document,MOUSE_UP,onEnd);}unlisten(document,CONTEXTMENU,onContextMenu);}function onHoverIn(ev){if(skipMouseEvent(ev)){return}hasHover=true;options.onHoverIn(ev);}function onHoverOut(ev){if(hasHover){options.onHoverOut(ev);}hasHover=false;}function onKeyDown(ev){options.onKeyDown(ev);}function onFocus(ev){if(options.keepFocus||win.__mbscFocusVisible){hasFocus=true;options.onFocus(ev);}}function onBlur(ev){if(hasFocus){options.onBlur(ev);}hasFocus=false;}function onChange(ev){options.onChange(ev);}function onDoubleClick(ev){args.domEvent=ev;if(!wasTouched){options.onDoubleClick(args);}}function onContextMenu(ev){if(wasTouched){ev.preventDefault();}}listen(elm,TOUCH_START,onStart,{passive:true});listen(elm,MOUSE_DOWN,onStart);listen(elm,TOUCH_END,onEnd);listen(elm,TOUCH_CANCEL,onEnd);if(document){var moveCount=document.__mbscMoveCount||0;var moveListener=document.__mbscMoveObs||new Observable;if(moveCount===0){listen(document,TOUCH_MOVE,onTouchMove,{passive:false});}document.__mbscMoveObs=moveListener;document.__mbscMoveCount=++moveCount;moveId=moveListener.subscribe(onMove);}if(options.onChange){listen(elm,CHANGE,onChange);}if(options.onHoverIn){listen(elm,MOUSE_ENTER,onHoverIn);}if(options.onHoverOut){listen(elm,MOUSE_LEAVE,onHoverOut);}if(options.onKeyDown){listen(elm,KEY_DOWN,onKeyDown);}if(options.onFocus&&win){listen(elm,FOCUS,onFocus);if(!options.keepFocus){var focusCount=win.__mbscFocusCount||0;if(focusCount===0){listen(win,MOUSE_DOWN,setFocusInvisible,true);listen(win,KEY_DOWN,setFocusVisible,true);}win.__mbscFocusCount=++focusCount;}}if(options.onBlur){listen(elm,BLUR,onBlur);}if(options.onDoubleClick){listen(elm,DOUBLE_CLICK,onDoubleClick);}return function(){clearTimeout(activeTimer);if(options.onFocus&&win&&!options.keepFocus){var focusCount=win.__mbscFocusCount||0;win.__mbscFocusCount=--focusCount;if(focusCount<=0){unlisten(win,MOUSE_DOWN,setFocusInvisible);unlisten(win,KEY_DOWN,setFocusVisible);}}if(document){var moveCount=document.__mbscMoveCount||0;document.__mbscMoveCount=--moveCount;if(document.__mbscMoveObs){document.__mbscMoveObs.unsubscribe(moveId);}if(moveCount<=0){delete document.__mbscMoveCount;delete document.__mbscMoveObs;unlisten(document,TOUCH_MOVE,onTouchMove,{passive:false});}}unlisten(elm,MOUSE_DOWN,onStart,{passive:true});unlisten(elm,TOUCH_END,onEnd);unlisten(elm,TOUCH_CANCEL,onEnd);unlisten(document,MOUSE_MOVE,onMove);unlisten(document,MOUSE_UP,onEnd);unlisten(document,CONTEXTMENU,onContextMenu);unlisten(elm,CHANGE,onChange);unlisten(elm,MOUSE_ENTER,onHoverIn);unlisten(elm,MOUSE_LEAVE,onHoverOut);unlisten(elm,KEY_DOWN,onKeyDown);unlisten(elm,TOUCH_START,onStart);unlisten(elm,FOCUS,onFocus);unlisten(elm,BLUR,onBlur);unlisten(elm,DOUBLE_CLICK,onDoubleClick);}}function getIonInput(el,cb,nr){if(nr===void 0){nr=0;}if(nr>10){delete el.__mbscTimer;cb(el);}else {clearTimeout(el.__mbscTimer);el.__mbscTimer=setTimeout((function(){if(el.getInputElement){el.getInputElement().then((function(inp){if(inp){delete el.__mbscTimer;cb(inp);}else {getIonInput(el,cb,nr+1);}}));}else {getIonInput(el,cb,nr+1);}}),10);}}function isIonInput(el){return el.getInputElement||el.tagName&&el.tagName.toLowerCase()==="ion-input"}var PickerBase=/*#__PURE__*/function(_super){__extends(PickerBase,_super);function PickerBase(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this._nullSupport=true;_this._onInputClick=function(ev){if(!_this.s.disabled){_this._focusElm=ev.target;_this._anchor=_this.s.anchor||_this._focusElm;_this.open();}};_this._onInputFocus=function(ev){if(_this._preventShow){_this._preventShow=false;}else {_this._onInputClick(ev);}};_this._onInputMouseDown=function(ev){if(!_this._allowTyping){ev.preventDefault();}};_this._onInputKey=function(ev){if(_this._isOpen){if(ev.keyCode===ENTER&&_this._allowTyping){ev.stopPropagation();}}else {if(ev.keyCode===SPACE){ev.preventDefault();}if(ev.keyCode===ENTER||ev.keyCode===SPACE){_this._onInputClick(ev);}}};_this._onInputChange=function(ev,val){var value=ev.detail||(val!==UNDEFINED?val:ev.target.value);if(value!==_this._tempValueText&&!_this._preventChange){_this._readValue(value,true);_this._valueTextChange=value!==_this._tempValueText;var newValue=isEmpty(value)?null:_this._get(_this._tempValueRep);_this.value=newValue;_this._change(newValue);}_this._preventChange=false;};_this._onResize=function(args){_this._hook("onResize",args);};_this._onWrapperResize=function(){if(_this._wrapper){_this._onResize({windowWidth:_this._wrapper.offsetWidth});}};_this._onPopupClose=function(args){if(/cancel|esc|overlay|scroll/.test(args.source)){_this._hook("onCancel",{value:_this.value,valueText:_this._valueText});}_this.close();};_this._onPopupClosed=function(args){if(args.focus){_this._preventShow=true;}_this._hook("onClosed",args);_this._onClosed();};_this._onPopupKey=function(args){if(args.keyCode===13){_this._onEnterKey(args);}};_this._onPopupOpen=function(args){args.value=_this.value;args.valueText=_this._valueText;_this._hook("onOpen",args);};_this._onWinFocus=function(){if(_this._win.document.activeElement===_this._focusElm){_this._preventShow=true;}};_this._onButtonClick=function(_a){var domEvent=_a.domEvent,button=_a.button;if(button.name==="set"){_this.set();}if(_this._popup){_this._popup._onButtonClick({domEvent:domEvent,button:button});}};_this._setInput=function(inp){_this._el=inp&&inp.nativeElement?inp.nativeElement:inp;_this._isMbsc=!!inp&&inp._mbsc;};_this._setPopup=function(popup){_this._popup=popup;};_this._setWrapper=function(wrapper){_this._wrapper=wrapper;};return _this}PickerBase.prototype.open=function(){if(this._inst){this._inst.open();return}if(this.s.isOpen===UNDEFINED){this.setState({isOpen:true});}};PickerBase.prototype.close=function(){if(this.s.display==="inline"){return}if(this._inst){this._inst.close();return}var args={value:this.value,valueText:this._valueText};if(this.s.isOpen===UNDEFINED){this.setState({isOpen:false});}this._hook("onClose",args);};PickerBase.prototype.set=function(){this._valueRep=this._copy(this._tempValueRep);this._valueText=this._tempValueText;this._value=this.value=this._get(this._valueRep);this._change(this.value);};PickerBase.prototype.position=function(){if(this._inst){this._inst.position();return}if(this._popup){this._popup.position();}};PickerBase.prototype.isVisible=function(){if(this._inst){return this._inst.isVisible()}return !!this._popup&&this._popup.isVisible()};PickerBase.prototype.getVal=function(){return this._get(this._valueRep)};PickerBase.prototype.setVal=function(value){this.value=value;this.setState({value:value});};PickerBase.prototype.getTempVal=function(){return this._get(this._tempValueRep)};PickerBase.prototype.setTempVal=function(value){this._tempValueSet=true;this._tempValueRep=this._parse(value);this._setOrUpdate(true);};PickerBase.prototype._shouldValidate=function(s,prevS){return false};PickerBase.prototype._valueEquals=function(v1,v2){return v1===v2};PickerBase.prototype._render=function(s,state){var _this=this;var props=this.props||{};var resp=this._respProps||{};var prevS=this._prevS;var allowTyping=s.inputTyping&&!touchUi&&!this._touchUi;if(!this._touchUi){s.display=resp.display||props.display||options.display||"anchored";s.showArrow=resp.showArrow||props.showArrow||false;}if(s.display==="bubble"){s.display="anchored";}this._scrollLock=s.scrollLock;var isOpen=s.isOpen!==UNDEFINED?s.isOpen:state.isOpen;var controlled=s.value!==UNDEFINED;var value=controlled?s.value:state.value===UNDEFINED?s.defaultValue:state.value;this._showInput=s.showInput!==UNDEFINED?s.showInput:s.display!=="inline"&&s.element===UNDEFINED;if(!this._buttons||s.buttons!==prevS.buttons||s.display!==prevS.display||s.setText!==prevS.setText||s.cancelText!==prevS.cancelText||s.closeText!==prevS.closeText||s.touchUi!==prevS.touchUi){this._buttons=processButtons(this,s.buttons||(s.display!=="inline"&&(s.display!=="anchored"||this._touchUi)?["cancel","set"]:[]));this._live=true;if(this._buttons&&this._buttons.length){for(var _i=0,_a=this._buttons;_i<_a.length;_i++){var b=_a[_i];if(b.name==="ok"||b.name==="set"){this._live=false;}}}}var valueChange=!this._valueEquals(value,this._value);if(valueChange||this._tempValueRep===UNDEFINED||this._shouldValidate(s,prevS)||s.defaultSelection!==prevS.defaultSelection||s.invalid!==prevS.invalid||s.valid!==prevS.valid){this._readValue(value);var newValue_1=this._get(this._tempValueRep);var validationChange_1=!this._valueEquals(value,newValue_1)&&(!this._nullSupport||!isEmpty(value));this._setHeader();clearTimeout(this._handler);this._handler=setTimeout((function(){_this.value=value;if(validationChange_1){_this._change(newValue_1);}if(!_this._valueEquals(_this._tempValue,newValue_1)&&_this._inst===UNDEFINED){_this._hook("onTempChange",{value:newValue_1});}}));}if(s.headerText!==prevS.headerText){this._setHeader();}if(isOpen&&!this._isOpen){if(!this._tempValueSet||this._live){var tempValue=this._get(this._tempValueRep);var parsedValue_1=this._get(this._valueRep);this._tempValueRep=this._copy(this._valueRep);this._tempValueText=this._format(this._tempValueRep);this._tempValue=tempValue;this._setHeader();if(!this._valueEquals(tempValue,parsedValue_1)){setTimeout((function(){_this._hook("onTempChange",{value:parsedValue_1});}));}}this._onOpen();}this._anchorAlign=s.anchorAlign||(this._touchUi?"center":"start");this._cssClass="mbsc-picker "+(s.cssClass||"");this._isOpen=isOpen;this._maxWidth=s.maxWidth;this._valueTextChange=this._valueTextChange||this._oldValueText!==this._valueText;this._oldValueText=this._valueText;this._value=value;this._shouldInitInput=this._shouldInitInput||s.display!==prevS.display||s.element!==prevS.element||s.showOnFocus!==prevS.showOnFocus||s.showOnClick!==prevS.showOnClick||this._allowTyping!==allowTyping;this._allowTyping=allowTyping;};PickerBase.prototype._updated=function(){var _this=this;var s=this.s;var input=this._input;if(this._shouldInitInput&&!this._inst){this._resetEl(this._prevS.display);this._shouldInitInput=false;var el=s.element||this._el;if(el){if(isIonInput(el)){getIonInput(el,(function(inp){_this._el=inp;_this._initEl();}));}else if(el.vInput){this._el=el.vInput.nativeElement;}else {this._el=el;}}this._initEl();}if(this._valueTextChange&&input){this._write(input);}this._valueTextChange=false;this._anchor=s.anchor||this._focusElm||s.element||this._el;};PickerBase.prototype._writeValue=function(elm,text,value){var oldValue=elm.value;elm.value=text;return oldValue!==text};PickerBase.prototype._destroy=function(){this._resetEl(this.s.display);this._shouldInitInput=true;};PickerBase.prototype._setHeader=function(){var headerText=this.s.headerText;this._headerText=headerText?headerText.replace(/\{value\}/i,this._tempValueText||"&nbsp;"):UNDEFINED;};PickerBase.prototype._setOrUpdate=function(preventChange){var value=this._get(this._tempValueRep);this._tempValue=value;this._tempValueText=this._format(this._tempValueRep);this._setHeader();if(!preventChange){this._hook("onTempChange",{value:value});}if(this._live){this.set();}else {this.forceUpdate();}};PickerBase.prototype._copy=function(value){return value};PickerBase.prototype._format=function(value){return value};PickerBase.prototype._get=function(value){return value};PickerBase.prototype._parse=function(valueText,fromInput){return valueText};PickerBase.prototype._validate=function(){};PickerBase.prototype._onClosed=function(){};PickerBase.prototype._onOpen=function(){};PickerBase.prototype._onParse=function(){};PickerBase.prototype._onEnterKey=function(args){this.set();this.close();};PickerBase.prototype._change=function(value){if(this.s.value===UNDEFINED){this.setState({value:value});}this._hook("onChange",{value:value,valueText:this._tempValueText});};PickerBase.prototype._readValue=function(value,fromInput){this._tempValueRep=this._parse(value,fromInput);this._onParse();this._validate();this._tempValueText=this._format(this._tempValueRep);this._valueRep=this._copy(this._tempValueRep);this._valueText=!isEmpty(value)?this._tempValueText:"";};PickerBase.prototype._initEl=function(){var s=this.s;var el=this._el;if(this._wrapper&&s.display==="inline"){this._observer=resizeObserver(this._wrapper,this._onWrapperResize,this._zone);}if(!el||el.nodeType!==1){return}var isInput=matches(el,"input,select");var input=el;this._win=getWindow(el);if(isInput){this._input=input;this._readOnly=input.readOnly;}if(s.display!=="inline"){if(!this._isMbsc){this._unlisten=gestureListener(el,{click:true});}if((s.showOnClick||s.showOnFocus)&&isInput&&!this._allowTyping){input.readOnly=true;}if(this._allowTyping){input.autocomplete="off";}if(s.showOnClick){listen(el,CLICK,this._onInputClick);listen(el,MOUSE_DOWN,this._onInputMouseDown);listen(el,KEY_DOWN,this._onInputKey);}if(s.showOnFocus){listen(this._win,FOCUS,this._onWinFocus);listen(el,FOCUS,this._onInputFocus);}listen(el,CHANGE,this._onInputChange);}if(isInput){this._write(input);}};PickerBase.prototype._resetEl=function(display){if(display!=="inline"){if(this._input){this._input.readOnly=this._readOnly;}if(this._unlisten){this._unlisten();}var el=this._el;if(el){unlisten(el,CLICK,this._onInputClick);unlisten(el,MOUSE_DOWN,this._onInputMouseDown);unlisten(el,KEY_DOWN,this._onInputKey);unlisten(el,FOCUS,this._onInputFocus);unlisten(el,CHANGE,this._onInputChange);unlisten(this._win,FOCUS,this._onWinFocus);}}if(this._observer){this._observer.detach();this._observer=null;}};PickerBase.prototype._write=function(input){var _this=this;var value=this._value;var changed=this._writeValue(input,this._valueText||"",value);if(changed){setTimeout((function(){_this._preventChange=true;trigger(input,INPUT);trigger(input,CHANGE);}));}var mbscInput=input.__mbscFormInst;if(mbscInput){mbscInput.setOptions({pickerMap:this.s.valueMap,pickerValue:value});}};PickerBase.defaults={cancelText:"Cancel",closeText:"Close",okText:"Ok",setText:"Set"};PickerBase.decorators=[{type:core.Directive,args:[{selector:"[mbsc-p-b]"}]}];return PickerBase}(BaseComponent);var WEEK_DAYNAMES={0:"SU",1:"MO",2:"TU",3:"WE",4:"TH",5:"FR",6:"SA"};var WEEK_DAYS={SU:0,MO:1,TU:2,WE:3,TH:4,FR:5,SA:6};var RULE_KEY_MAP={byday:"weekDays",bymonth:"month",bymonthday:"day",bysetpos:"pos",dtstart:"from",freq:"repeat",wkst:"weekStart"};function addMultiDayEvent(obj,item,s,overwrite){var start=makeDate(item.start,item.allDay?UNDEFINED:s);var end=makeDate(item.end,item.allDay?UNDEFINED:s);var duration=end-start;if(overwrite){item.start=start;item.end=end;}start=getDateOnly(start);end=s.exclusiveEndDates?end:getDateOnly(addDays(end,1));while(start<end||!duration){addToList(obj,start,item);start=addDays(start,1);duration=1;}}function addToList(obj,d,data){var key=getDateStr(d);if(!obj[key]){obj[key]=[];obj[key].date=getDateOnly(d,true);}obj[key].push(data);}function getExceptionDateMap(dtStart,start,end,s,exception,exceptionRule){var map={};if(exception){var exceptionDates=getExceptionList(exception);for(var _i=0,exceptionDates_1=exceptionDates;_i<exceptionDates_1.length;_i++){var e=exceptionDates_1[_i];map[getDateStr(makeDate(e))]=true;}}if(exceptionRule){var exceptionDateList=getOccurrences(exceptionRule,dtStart,start,end,s);for(var _a=0,exceptionDateList_1=exceptionDateList;_a<exceptionDateList_1.length;_a++){var ex=exceptionDateList_1[_a];map[getDateStr(ex.d)]=true;}}return map}function getDateFromItem(item){return isString(item)||item.getTime||item.toDate?item:item.start||item.date}function parseRule(ruleStr){var rule={};var pairs=ruleStr.split(";");for(var _i=0,pairs_1=pairs;_i<pairs_1.length;_i++){var pair=pairs_1[_i];var values=pair.split("=");var key=values[0].trim().toLowerCase();var value=values[1].trim();rule[RULE_KEY_MAP[key]||key]=value;}return rule}function getRule(rule){return isString(rule)?parseRule(rule):__assign({},rule)}function updateRecurringRule(recurringRule,newStart,oldStart){var updatedRule=getRule(recurringRule);var newStartDate=makeDate(newStart);var oldStartDate=makeDate(oldStart);var dayDelta=getDayDiff(oldStartDate,newStartDate);var repeat=(updatedRule.repeat||"").toLowerCase();var updateArray=function(values,oldValue,newValue){var newValues=values.filter((function(value){return value!==oldValue}));if(newValues.indexOf(newValue)===-1){newValues.push(newValue);}return newValues};var updateNumber=function(values,oldValue,newValue){var oldValues=isArray(values)?values:((values||"")+"").split(",").map((function(nr){return +nr}));var newValues=updateArray(oldValues,oldValue,newValue);return newValues.length>1?newValues:newValues[0]};var updateWeekDays=function(){if(updatedRule.weekDays){var oldWeekDays=updatedRule.weekDays.split(",");var oldWeekDay=WEEK_DAYNAMES[oldStartDate.getDay()];var newWeekDay=WEEK_DAYNAMES[newStartDate.getDay()];var newWeekDays=updateArray(oldWeekDays,oldWeekDay,newWeekDay);updatedRule.weekDays=newWeekDays.join();}};if(repeat==="weekly"){updateWeekDays();}else if(repeat==="monthly"){if(updatedRule.pos===UNDEFINED){updatedRule.day=updateNumber(updatedRule.day,oldStartDate.getDate(),newStartDate.getDate());}else {updateWeekDays();}}else if(repeat==="yearly"){if(updatedRule.pos===UNDEFINED){updatedRule.month=updateNumber(updatedRule.month,oldStartDate.getMonth()+1,newStartDate.getMonth()+1);updatedRule.day=updateNumber(updatedRule.day,oldStartDate.getDate(),newStartDate.getDate());}else {updateWeekDays();}}if(updatedRule.from){updatedRule.from=addDays(makeDate(updatedRule.from),dayDelta);}if(updatedRule.until){updatedRule.until=addDays(makeDate(updatedRule.until),dayDelta);}return updatedRule}function updateRecurringEvent(originalRecurringEvent,oldEventOccurrence,newEvent,updatedEvent,updateMode){var retUpdatedEvent=__assign({},originalRecurringEvent);var retNewEvent=null;var oldStart=oldEventOccurrence&&oldEventOccurrence.start;var newStart=newEvent&&newEvent.start;var newEnd=newEvent&&newEvent.end;var originalRule=getRule(originalRecurringEvent.recurring);switch(updateMode){case"following":var newRule=void 0;if(updatedEvent){if(updatedEvent.recurring){newRule=getRule(updatedEvent.recurring);}retNewEvent=updatedEvent;delete retNewEvent.id;}else if(newStart&&oldStart){newRule=updateRecurringRule(originalRule,newStart,oldStart);retNewEvent=__assign({},newEvent);}originalRule.until=getDateOnly(makeDate(oldStart));if(originalRule.count){var oldNr=oldEventOccurrence&&oldEventOccurrence.nr||0;if(newRule){newRule.count=originalRule.count-oldNr;}originalRule.count=oldNr;}if(newStart&&newRule){newRule.from=newStart;}if(retNewEvent&&newRule){retNewEvent.recurring=newRule;}retUpdatedEvent.recurring=originalRule;break;case"all":if(updatedEvent){retUpdatedEvent=updatedEvent;}else if(newEvent&&newStart&&newEnd&&oldStart){var origStart=originalRecurringEvent.start;var origEnd=originalRecurringEvent.end;var allDayChange=originalRecurringEvent.allDay&&!newEvent.allDay;if(isTime(origStart)||!origStart&&allDayChange){retUpdatedEvent.start=formatDatePublic("HH:mm",makeDate(newStart));}else if(origStart){retUpdatedEvent.start=newStart;}if(isTime(origEnd)||!origEnd&&allDayChange){retUpdatedEvent.end=formatDatePublic("HH:mm",makeDate(newEnd));}else if(origEnd){retUpdatedEvent.end=newEnd;}retUpdatedEvent.recurring=updateRecurringRule(originalRule,newStart,oldStart);}break;default:var originalException=originalRecurringEvent.recurringException;var exception=isArray(originalException)?originalException.slice():originalException?[originalException]:[];if(oldStart){exception.push(oldStart);}retUpdatedEvent.recurringException=exception;retNewEvent=updatedEvent||newEvent;break}return {updatedEvent:retUpdatedEvent,newEvent:retNewEvent}}function getNextOccurrence(list,from,s,displayFormat){var closest=null;for(var _i=0,list_1=list;_i<list_1.length;_i++){var item=list_1[_i];if(item.recurring){var dtStart=makeDate(item.start||item.date);var firstOccurrence=getOccurrences(item.recurring,dtStart,from,UNDEFINED,s,item.reccurringException,item.recurringExceptionRule,"first");if(!closest||firstOccurrence<closest){closest=firstOccurrence;}}else if(item.start&&item.end){var start=makeDate(item.start,s,displayFormat);var end=makeDate(item.end,s,displayFormat);if(end>from){if(start<=from){closest=from;}else {closest=closest&&closest<start?closest:start;}}}else {var exactDate=makeDate(getDateFromItem(item),s,displayFormat);if(exactDate>from&&(!closest||exactDate<closest)){closest=exactDate;}}}return closest}function getLatestOccurrence(list,from,s,displayFormat){var latest=from;list.sort((function(a,b){var d1=makeDate(getDateFromItem(a),s,displayFormat);var d2=makeDate(getDateFromItem(b),s,displayFormat);return d1-d2}));for(var _i=0,list_2=list;_i<list_2.length;_i++){var item=list_2[_i];if(item.recurring){var dtStart=makeDate(item.start||item.date);var latestOccurrence=getOccurrences(item.recurring,dtStart,from,UNDEFINED,s,item.reccurringException,item.recurringExceptionRule,"last");if(latestOccurrence>latest){latest=latestOccurrence;}}else if(item.start&&item.end){var start=makeDate(item.start,s,displayFormat);var end=makeDate(item.end,s,displayFormat);if(end>latest&&getDayDiff(latest,start)<=1){latest=end;}}else {var exactDate=makeDate(getDateFromItem(item),s,displayFormat);if(exactDate>latest&&getDayDiff(latest,exactDate)<=1){latest=exactDate;}}}return latest}function getExceptionList(exception){if(exception){if(isArray(exception)){return exception}if(isString(exception)){return exception.split(",")}return [exception]}return []}function getOccurrences(rule,dtStart,start,end,s,exception,exceptionRule,returnOccurrence){if(isString(rule)){rule=parseRule(rule);}var getYear=s.getYear;var getMonth=s.getMonth;var getDay=s.getDay;var getDate=s.getDate;var getMaxDays=s.getMaxDayOfMonth;var freq=(rule.repeat||"").toLowerCase();var interval=rule.interval||1;var count=rule.count;var from=rule.from?makeDate(rule.from):dtStart||(interval!==1||count!==UNDEFINED?new Date:start);var fromDate=getDateOnly(from);var fromYear=getYear(from);var fromMonth=getMonth(from);var until=rule.until?makeDate(rule.until):Infinity;var occurredBefore=from<start;var rangeStart=occurredBefore?start:getDateOnly(from);var firstOnly=returnOccurrence==="first";var lastOnly=returnOccurrence==="last";var rangeEnd=firstOnly||lastOnly||!end?until:until<end?until:end;var countOrInfinity=count===UNDEFINED?Infinity:count;var weekDays=(rule.weekDays||WEEK_DAYNAMES[from.getDay()]).split(",");var weekStart=WEEK_DAYS[(rule.weekStart||"MO").trim().toUpperCase()];var days=isArray(rule.day)?rule.day:((rule.day||getDay(from))+"").split(",");var months=isArray(rule.month)?rule.month:((rule.month||getMonth(from)+1)+"").split(",");var occurrences=[];var hasPos=rule.pos!==UNDEFINED;var pos=hasPos?+rule.pos:1;var weekDayValues=[];var exceptionDateMap=end?getExceptionDateMap(dtStart,start,end,s,exception,exceptionRule):{};var first;var iterator;var repeat=true;var i=0;var nr=0;var closest=null;var latest=start;for(var _i=0,weekDays_1=weekDays;_i<weekDays_1.length;_i++){var weekDay=weekDays_1[_i];weekDayValues.push(WEEK_DAYS[weekDay.trim().toUpperCase()]);}var handleOccurrence=function(){if(!end){exceptionDateMap=getExceptionDateMap(iterator,iterator,addDays(iterator,1),s,exception,exceptionRule);}if(!exceptionDateMap[getDateStr(iterator)]&&iterator>=rangeStart){if(firstOnly){closest=!closest||iterator<closest?iterator:closest;repeat=false;}else if(lastOnly){var diff=getDayDiff(latest,iterator);latest=iterator>latest&&diff<=1?iterator:latest;repeat=diff<=1;}else {occurrences.push({d:iterator,i:nr});}}nr++;};var handlePos=function(monthFirstDay,monthLastDay){var matches=[];for(var _i=0,weekDayValues_1=weekDayValues;_i<weekDayValues_1.length;_i++){var weekDay=weekDayValues_1[_i];var startWeekDay=getFirstDayOfWeek(monthFirstDay,{firstDay:weekDay});for(var d=startWeekDay;d<monthLastDay;d.setDate(d.getDate()+7)){if(d.getMonth()===monthFirstDay.getMonth()){matches.push(+d);}}}matches.sort();var match=matches[pos<0?matches.length+pos:pos-1];iterator=match?new Date(match):monthLastDay;if(iterator<rangeEnd){if(match){handleOccurrence();}}else {repeat=false;}};switch(freq){case"daily":nr=count&&occurredBefore?floor(getDayDiff(from,start)/interval):0;while(repeat){iterator=getDate(getYear(from),getMonth(from),getDay(from)+nr*interval);if(iterator<rangeEnd&&nr<countOrInfinity){handleOccurrence();}else {repeat=false;}}break;case"weekly":var sortedDays=weekDayValues;var fromFirstWeekDay=getFirstDayOfWeek(from,{firstDay:weekStart});var fromWeekDay_1=fromFirstWeekDay.getDay();sortedDays.sort((function(a,b){a=a-fromWeekDay_1;a=a<0?a+7:a;b=b-fromWeekDay_1;b=b<0?b+7:b;return a-b}));while(repeat){for(var _a=0,sortedDays_1=sortedDays;_a<sortedDays_1.length;_a++){var weekDay=sortedDays_1[_a];first=addDays(fromFirstWeekDay,weekDay<weekStart?weekDay-weekStart+7:weekDay-weekStart);iterator=getDate(getYear(first),getMonth(first),getDay(first)+i*7*interval);if(iterator<rangeEnd&&nr<countOrInfinity){if(iterator>=fromDate){handleOccurrence();}}else {repeat=false;}}i++;}break;case"monthly":while(repeat){var maxDays=getMaxDays(fromYear,fromMonth+i*interval);if(hasPos){var monthFirstDay=getDate(fromYear,fromMonth+i*interval,1);var monthLastDay=getDate(fromYear,fromMonth+i*interval+1,1);handlePos(monthFirstDay,monthLastDay);}else {for(var _b=0,days_1=days;_b<days_1.length;_b++){var d=days_1[_b];var day=+d;iterator=getDate(fromYear,fromMonth+i*interval,day<0?maxDays+day+1:day);if(iterator<rangeEnd&&nr<countOrInfinity){if(maxDays>=d&&iterator>=fromDate){handleOccurrence();}}else {repeat=false;}}}i++;}break;case"yearly":while(repeat){for(var _c=0,months_1=months;_c<months_1.length;_c++){var m=months_1[_c];var month=+m;var maxDays=getMaxDays(fromYear+i*interval,month-1);if(hasPos){var monthFirstDay=getDate(fromYear+i*interval,month-1,1);var monthLastDay=getDate(fromYear+i*interval,month,1);handlePos(monthFirstDay,monthLastDay);}else {for(var _d=0,days_2=days;_d<days_2.length;_d++){var d=days_2[_d];var day=+d;iterator=getDate(fromYear+i*interval,month-1,day<0?maxDays+day+1:day);if(iterator<rangeEnd&&nr<countOrInfinity){if(maxDays>=d&&iterator>=fromDate){handleOccurrence();}}else {repeat=false;}}}}i++;}break}return firstOnly?closest:lastOnly?latest:occurrences}function getEventMap(list,start,end,s,overwrite){var obj={};var tz=s.timezonePlugin;var dataTimezone=s.dataTimezone||s.displayTimezone;var tzOpt=tz?{displayTimezone:dataTimezone,timezonePlugin:tz}:s;if(!list){return}for(var _i=0,list_3=list;_i<list_3.length;_i++){var item=list_3[_i];var d=getDateFromItem(item);var dt=makeDate(d,item.allDay?UNDEFINED:s);if(item.recurring){var dtStart=ISO_8601_TIME.test(d)?null:makeDate(d);var from=addDays(start,-1);var until=addDays(end,1);var dates=getOccurrences(item.recurring,dtStart,from,until,s,item.recurringException,item.recurringExceptionRule);var origStart=createDate(item.allDay?UNDEFINED:tzOpt,dt);var origEnd=item.end?makeDate(item.end,item.allDay?UNDEFINED:s):origStart;var duration=+origEnd-+origStart;for(var _a=0,dates_1=dates;_a<dates_1.length;_a++){var occurrence=dates_1[_a];var date=occurrence.d;var clone=__assign({},item);if(item.start){clone.start=createDate(item.allDay?UNDEFINED:tzOpt,date.getFullYear(),date.getMonth(),date.getDate(),origStart.getHours(),origStart.getMinutes(),origStart.getSeconds());}else {clone.allDay=true;clone.start=createDate(UNDEFINED,date.getFullYear(),date.getMonth(),date.getDate());}if(item.end){if(item.allDay){var endDay=addDays(date,getDayDiff(origStart,origEnd));clone.end=new Date(endDay.getFullYear(),endDay.getMonth(),endDay.getDate(),origEnd.getHours(),origEnd.getMinutes(),origEnd.getSeconds());}else {clone.end=createDate(tzOpt,+clone.start+duration);}if(item.end==="00:00"){clone.end.setHours(23,59,59,999);}}clone.nr=occurrence.i;clone.occurrenceId=clone.id+"_"+getDateStr(clone.start);clone.original=item;if(clone.start&&clone.end){addMultiDayEvent(obj,clone,s,overwrite);}else {addToList(obj,date,clone);}}}else if(item.start&&item.end){addMultiDayEvent(obj,item,s,overwrite);}else if(dt){addToList(obj,dt,item);}}return obj}function isInvalid(s,d,invalids,valids,min,max){var key=getDateStr(d);if(min&&+d<min||max&&+d>max){return true}if(valids&&valids[key]){return false}var invalidsForDay=invalids&&invalids[key];if(invalidsForDay){for(var _i=0,invalidsForDay_1=invalidsForDay;_i<invalidsForDay_1.length;_i++){var invalid=invalidsForDay_1[_i];var start=invalid.start,end=invalid.end,allDay=invalid.allDay;if(start&&end&&!allDay){var endDate=getEndDate(s,allDay,start,end);var dayStart=getDayStart(s,d);var dayEnd=getDayEnd(s,endDate);if(!isSameDay(start,end)&&(+start===+dayStart||+endDate===+dayEnd||!isSameDay(d,start)&&!isSameDay(d,end)&&d>start&&d<end)){return invalid}}else {return invalid}}}return false}function getClosestValidDate(d,s,min,max,invalids,valids,dir){var next;var prev;var nextInvalid=true;var prevInvalid=true;var up=0;var down=0;if(+d<min){d=createDate(s,min);}if(+d>max){d=createDate(s,max);}var year=s.getYear(d);var month=s.getMonth(d);var start=s.getDate(year,month-1,1);var end=s.getDate(year,month+2,1);var from=+start>min?+start:min;var until=+end<max?+end:max;if(!invalids){valids=getEventMap(s.valid,start,end,s,true);invalids=getEventMap(s.invalid,start,end,s,true);}if(!isInvalid(s,d,invalids,valids,min,max)){return d}next=d;prev=d;while(nextInvalid&&+next<until&&up<100){next=addDays(next,1);nextInvalid=isInvalid(s,next,invalids,valids,min,max);up++;}while(prevInvalid&&+prev>from&&down<100){prev=addDays(prev,-1);prevInvalid=isInvalid(s,prev,invalids,valids,min,max);down++;}if(nextInvalid&&prevInvalid){return d}if(dir===1&&!nextInvalid){return next}if(dir===-1&&!prevInvalid){return prev}if(isSameMonth(d,next,s)){return next}if(isSameMonth(d,prev,s)){return prev}return down>=up&&!nextInvalid?next:prev}var localTimezone;function normTimezone(timezone){if(!localTimezone){localTimezone=luxonTimezone.luxon.DateTime.local().zoneName;}return !timezone||timezone==="local"?localTimezone:timezone}function getVersion(DT){var fn=DT.fromObject.toString().trim();return /^(function )?\w*\(\w+\)/.test(fn)?1:2}var LDate=/*#__PURE__*/function(){function LDate(value,timezone){if(timezone===void 0){timezone="utc";}this._mbsc=true;timezone=normTimezone(timezone);var DT=luxonTimezone.luxon.DateTime;var zoneOpt={zone:timezone};this.zone=timezone;if(isUndefined(value)){this.dt=DT.utc().setZone(timezone);}else if(isDate(value)||isNumber(value)){this.dt=DT.fromMillis(+value,zoneOpt);}else if(isString(value)){this.dt=DT.fromISO(value,zoneOpt);}else if(isArray(value)){var keys=["year","month","day","hour","minute","second","millisecond"];var valueObj={};for(var i=0;i<value.length&&i<7;i++){valueObj[keys[i]]=value[i]+(i===1?1:0);}luxonTimezone.version=luxonTimezone.version||getVersion(DT);if(luxonTimezone.version===1){this.dt=DT.fromObject(__assign({},valueObj,zoneOpt));}else {this.dt=DT.fromObject(valueObj,zoneOpt);}}}LDate.prototype.clone=function(){return new LDate(this,this.zone)};LDate.prototype.createDate=function(year,month,date,h,min,sec,ms){return luxonTimezone.createDate({displayTimezone:this.zone},year,month,date,h,min,sec,ms)};LDate.prototype[Symbol.toPrimitive]=function(hint){return this.dt.toJSDate()[Symbol.toPrimitive](hint)};LDate.prototype.toDateString=function(){return this.dt.toFormat("ccc MMM dd yyyy")};LDate.prototype.toISOString=function(){return this.dt.toISO()};LDate.prototype.toJSON=function(){return this.dt.toISO()};LDate.prototype.valueOf=function(){return this.dt.valueOf()};LDate.prototype.getDate=function(){return this.dt.day};LDate.prototype.getDay=function(){return this.dt.weekday%7};LDate.prototype.getFullYear=function(){return this.dt.year};LDate.prototype.getHours=function(){return this.dt.hour};LDate.prototype.getMilliseconds=function(){return this.dt.millisecond};LDate.prototype.getMinutes=function(){return this.dt.minute};LDate.prototype.getMonth=function(){return this.dt.month-1};LDate.prototype.getSeconds=function(){return this.dt.second};LDate.prototype.getTime=function(){return this.valueOf()};LDate.prototype.getTimezoneOffset=function(){return -this.dt.offset};LDate.prototype.getUTCDate=function(){return this.dt.toUTC().day};LDate.prototype.getUTCDay=function(){return this.dt.toUTC().weekday%7};LDate.prototype.getUTCFullYear=function(){return this.dt.toUTC().year};LDate.prototype.getUTCHours=function(){return this.dt.toUTC().hour};LDate.prototype.getUTCMilliseconds=function(){return this.dt.toUTC().millisecond};LDate.prototype.getUTCMinutes=function(){return this.dt.toUTC().minute};LDate.prototype.getUTCMonth=function(){return this.dt.toUTC().month-1};LDate.prototype.getUTCSeconds=function(){return this.dt.toUTC().second};LDate.prototype.setMilliseconds=function(millisecond){return this.setter({millisecond:millisecond}).millisecond};LDate.prototype.setSeconds=function(second,millisecond){return this.setter({second:second,millisecond:millisecond}).second};LDate.prototype.setMinutes=function(minute,second,millisecond){return this.setter({minute:minute,second:second,millisecond:millisecond}).minute};LDate.prototype.setHours=function(hour,minute,second,millisecond){return this.setter({hour:hour,minute:minute,second:second,millisecond:millisecond}).hour};LDate.prototype.setDate=function(day){return this.setter({day:day}).day};LDate.prototype.setMonth=function(month,day){month++;return this.setter({month:month,day:day}).month-1};LDate.prototype.setFullYear=function(year,month,day){return this.setter({year:year,month:month,day:day}).year};LDate.prototype.setTime=function(time){this.dt=luxonTimezone.luxon.DateTime.fromMillis(time);return this.dt.valueOf()};LDate.prototype.setTimezone=function(timezone){timezone=normTimezone(timezone);this.zone=timezone;this.dt=this.dt.setZone(timezone);};LDate.prototype.setUTCMilliseconds=function(ms){return 0};LDate.prototype.setUTCSeconds=function(sec,ms){return 0};LDate.prototype.setUTCMinutes=function(min,sec,ms){return 0};LDate.prototype.setUTCHours=function(hours,min,sec,ms){return 0};LDate.prototype.setUTCDate=function(date){return 0};LDate.prototype.setUTCMonth=function(month,date){return 0};LDate.prototype.setUTCFullYear=function(year,month,date){return 0};LDate.prototype.toUTCString=function(){return ""};LDate.prototype.toTimeString=function(){return ""};LDate.prototype.toLocaleDateString=function(){return ""};LDate.prototype.toLocaleTimeString=function(){return ""};LDate.prototype.setter=function(obj){this.dt=this.dt.set(obj);return this.dt};return LDate}();var luxonTimezone={luxon:UNDEFINED,version:UNDEFINED,parse:function(date,s){return new LDate(date,s.dataTimezone||s.displayTimezone)},createDate:function(s,year,month,day,hour,minute,second,millisecond){var displayTimezone=s.displayTimezone;if(isObject(year)||isString(year)||isUndefined(month)){return new LDate(year,displayTimezone)}return new LDate([year||1970,month||0,day||1,hour||0,minute||0,second||0,millisecond||0],displayTimezone)}};function normTimezone$1(timezone){return !timezone||timezone==="local"?momentTimezone.moment.tz.guess():timezone}var MDate=/*#__PURE__*/function(){function MDate(value,timezone){this._mbsc=true;this.timezone=normTimezone$1(timezone);this.init(value);}MDate.prototype.clone=function(){return new MDate(this,this.timezone)};MDate.prototype.createDate=function(year,month,date,h,min,sec,ms){return momentTimezone.createDate({displayTimezone:this.timezone},year,month,date,h,min,sec,ms)};MDate.prototype[Symbol.toPrimitive]=function(hint){return this.m.toDate()[Symbol.toPrimitive](hint)};MDate.prototype.toDateString=function(){return this.m.format("ddd MMM DD YYYY")};MDate.prototype.toISOString=function(){return this.m.toISOString(true)};MDate.prototype.toJSON=function(){return this.m.toISOString()};MDate.prototype.valueOf=function(){return this.m.valueOf()};MDate.prototype.getDate=function(){return this.m.date()};MDate.prototype.getDay=function(){return this.m.day()};MDate.prototype.getFullYear=function(){return this.m.year()};MDate.prototype.getHours=function(){return this.m.hours()};MDate.prototype.getMilliseconds=function(){return this.m.milliseconds()};MDate.prototype.getMinutes=function(){return this.m.minutes()};MDate.prototype.getMonth=function(){return this.m.month()};MDate.prototype.getSeconds=function(){return this.m.seconds()};MDate.prototype.getTime=function(){return this.m.valueOf()};MDate.prototype.getTimezoneOffset=function(){return -this.m.utcOffset()};MDate.prototype.getUTCDate=function(){return this.utc().date()};MDate.prototype.getUTCDay=function(){return this.utc().day()};MDate.prototype.getUTCFullYear=function(){return this.utc().year()};MDate.prototype.getUTCHours=function(){return this.utc().hours()};MDate.prototype.getUTCMilliseconds=function(){return this.utc().milliseconds()};MDate.prototype.getUTCMinutes=function(){return this.utc().minutes()};MDate.prototype.getUTCMonth=function(){return this.utc().month()};MDate.prototype.getUTCSeconds=function(){return this.utc().seconds()};MDate.prototype.setMilliseconds=function(ms){return this.m.set({millisecond:ms}).milliseconds()};MDate.prototype.setSeconds=function(sec,ms){return this.m.set({seconds:sec,milliseconds:ms}).seconds()};MDate.prototype.setMinutes=function(min,sec,ms){return this.m.set({minutes:min,seconds:sec,milliseconds:ms}).minutes()};MDate.prototype.setHours=function(hours,min,sec,ms){return this.m.set({hours:hours,minutes:min,seconds:sec,milliseconds:ms}).hours()};MDate.prototype.setDate=function(date){return this.m.set({date:date}).date()};MDate.prototype.setMonth=function(month,date){return this.m.set({month:month,date:date}).month()};MDate.prototype.setFullYear=function(year,month,date){return this.m.set({year:year,month:month,date:date}).year()};MDate.prototype.setTime=function(time){this.init(time);return this.m.valueOf()};MDate.prototype.setTimezone=function(timezone){this.timezone=normTimezone$1(timezone);this.m.tz(this.timezone);};MDate.prototype.setUTCMilliseconds=function(ms){return 0};MDate.prototype.setUTCSeconds=function(sec,ms){return 0};MDate.prototype.setUTCMinutes=function(min,sec,ms){return 0};MDate.prototype.setUTCHours=function(hours,min,sec,ms){return 0};MDate.prototype.setUTCDate=function(date){return 0};MDate.prototype.setUTCMonth=function(month,date){return 0};MDate.prototype.setUTCFullYear=function(year,month,date){return 0};MDate.prototype.toUTCString=function(){return ""};MDate.prototype.toTimeString=function(){return ""};MDate.prototype.toLocaleDateString=function(){return ""};MDate.prototype.toLocaleTimeString=function(){return ""};MDate.prototype.init=function(input){var tz=momentTimezone.moment.tz;var normInput=isUndefined(input)||isString(input)||isNumber(input)||isArray(input)?input:+input;var isTime=isString(input)&&ISO_8601_TIME.test(input);this.m=isTime?tz(normInput,"HH:mm:ss",this.timezone):tz(normInput,this.timezone);};MDate.prototype.utc=function(){return this.m.clone().utc()};return MDate}();var momentTimezone={moment:UNDEFINED,parse:function(date,s){return new MDate(date,s.dataTimezone||s.displayTimezone)},createDate:function(s,year,month,date,h,min,sec,ms){var displayTimezone=s.displayTimezone;if(isObject(year)||isString(year)||isUndefined(month)){return new MDate(year,displayTimezone)}return new MDate([year||1970,month||0,date||1,h||0,min||0,sec||0,ms||0],displayTimezone)}};var modules={};var RANGE_SEPARATOR=" - ";var CALENDAR_CTRL=["calendar"];var INVALID_ALL=[{recurring:{repeat:"daily"}}];function notActive(active){return active==="start"?"end":"start"}function getPresetRange(timestamp,s){var date=new Date(timestamp);var firstSelectDay=s.firstSelectDay!==UNDEFINED?s.firstSelectDay:s.firstDay;var start=getFirstDayOfWeek(date,s,firstSelectDay);var end=new Date(start.getFullYear(),start.getMonth(),start.getDate()+s.selectSize-1);return {start:start,end:end}}var DatepickerBase=/*#__PURE__*/function(_super){__extends(DatepickerBase,_super);function DatepickerBase(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this._iso={};_this._remote=0;_this._onActiveChange=function(ev){_this._active=ev.date;_this.forceUpdate();};_this._onResize=function(ev){var viewportWidth=ev.windowWidth;ev.cancel=_this.state.width!==viewportWidth;_this.setState({isLarge:ev.isLarge,maxPopupWidth:ev.maxPopupWidth,width:viewportWidth,widthType:viewportWidth>600?"md":"sm"});};_this._onDayHoverIn=function(_a){var date=_a.date,hidden=_a.hidden;_this.setState({hoverDate:hidden?UNDEFINED:+date});};_this._onDayHoverOut=function(_a){var date=_a.date;if(_this.state.hoverDate===+date){_this.setState({hoverDate:UNDEFINED});}};_this._onCellClick=function(args){_this._lastSelected=addTimezone(_this.s,args.date);args.active=_this._activeSelect;_this._hook("onCellClick",args);};_this._onCalendarChange=function(ev){_this._tempValueSet=false;var s=_this.s;var tempValueRep=_this._copy(_this._tempValueRep);var date=map(ev.value,(function(item){return addTimezone(s,item)}));var isPreset=s.select==="preset-range";var isRange=s.select==="range";var newSelection=isRange&&_this._newSelection;var slide=(isRange||isPreset)&&s.exclusiveEndDates&&!_this._hasTime;if(slide&&tempValueRep.end){tempValueRep.end=+getDayStart(s,addDays(createDate(s,tempValueRep.end),-1));}if(_this._hasTime&&_this._selectedTime&&!isRange){if(_this.s.selectMultiple){var lastSelection=date[date.length-1];if(lastSelection){lastSelection.setHours(_this._selectedTime.getHours(),_this._selectedTime.getMinutes());}}else {date.setHours(_this._selectedTime.getHours(),_this._selectedTime.getMinutes());}}if(isRange||isPreset){var oldValue=_this._getDate(tempValueRep);var oldRangeDate=oldValue.filter((function(v){return v!==null}));var oldRange=oldRangeDate.map((function(dateValue){return +dateValue}));var oldRangeCut_1=oldRangeDate.map((function(v){return +getDateOnly(v)}));var newValue=date.filter((function(v){return oldRangeCut_1.indexOf(+v)<0}))[0];if(isPreset){if(newValue){var _a=getPresetRange(+newValue,s),start=_a.start,end=_a.end;tempValueRep.start=+start;tempValueRep.end=+end;}}else {var cycle=!_this._hasTime;var cycleAndLabels=_this._renderControls;var activeSelect=_this._activeSelect;var notActiveSelect=notActive(activeSelect);if(newValue){if(_this._hasTime&&_this._selectedTime){newValue.setHours(_this._selectedTime.getHours(),_this._selectedTime.getMinutes(),_this._selectedTime.getSeconds(),_this._selectedTime.getMilliseconds());}switch(oldRange.length){case 0:{tempValueRep={};tempValueRep[activeSelect]=+newValue;break}case 1:{if(cycleAndLabels){tempValueRep[activeSelect]=+newValue;break}if(oldRange[0]>+newValue||_this._activeSelect==="start"){if(_this._hasTime){tempValueRep[activeSelect]=+newValue;}else {tempValueRep={start:+newValue};cycle=false;}}else {tempValueRep.end=+newValue;}break}case 2:{if(cycleAndLabels){tempValueRep[activeSelect]=+newValue;break}if(oldRange[0]>+newValue||_this._activeSelect==="start"){if(_this._hasTime){tempValueRep[activeSelect]=+newValue;}else {tempValueRep={start:+newValue};if(_this._activeSelect==="end"){cycle=false;}}}else if(_this._activeSelect==="end"){tempValueRep.end=+newValue;}break}}if(cycleAndLabels&&tempValueRep.start&&tempValueRep.end&&tempValueRep.start>tempValueRep.end){tempValueRep={start:+newValue};_this._setActiveSelect("end");}}else {var newDate=void 0;if(oldRange.length===1){newDate=createDate(s,oldRange[0]);}else {newDate=_this._lastSelected;}if(_this._hasTime&&_this._selectedTime){newDate.setHours(_this._selectedTime.getHours(),_this._selectedTime.getMinutes(),_this._selectedTime.getSeconds(),_this._selectedTime.getMilliseconds());}else if(!s.exclusiveEndDates&&!_this._hasTime&&_this._activeSelect==="end"&&oldValue[0]&&isSameDay(newDate,oldValue[0])){newDate.setHours(23,59,59,999);}if(cycleAndLabels||_this._hasTime){tempValueRep[activeSelect]=+newDate;}else if(_this._activeSelect==="start"){tempValueRep={start:+newDate};}else {tempValueRep.end=+newDate;}}if(tempValueRep.start&&tempValueRep.end){if(tempValueRep.start>tempValueRep.end){var st=createDate(s,tempValueRep.start);var ed=createDate(s,tempValueRep.end);if(isSameDay(st,ed)){ed.setHours(st.getHours(),st.getMinutes(),st.getSeconds(),st.getMilliseconds());tempValueRep.end=+ed;}else {tempValueRep.end=UNDEFINED;}}if(s.minRange&&tempValueRep.end){var newEnd=_this._hasTime?tempValueRep.start+s.minRange:+addDays(createDate(s,tempValueRep.start),s.minRange-1);if(tempValueRep.end<newEnd&&(!_this._hasTime||activeSelect==="start")){tempValueRep.end=UNDEFINED;}}if(s.maxRange&&tempValueRep.end){var newEnd=_this._hasTime?tempValueRep.start+s.maxRange:+addDays(createDate(s,tempValueRep.start),s.maxRange)-1;if(tempValueRep.end>newEnd&&(!_this._hasTime||activeSelect==="start")){tempValueRep.end=UNDEFINED;}}if(tempValueRep.end&&activeSelect==="start"&&!s.inRangeInvalid){var nextInvalid=s.valid?addDays(getLatestOccurrence(s.valid,createDate(s,tempValueRep.start),s),1):getNextOccurrence(s.invalid||[],createDate(s,tempValueRep.start),s);if(nextInvalid!==null&&+nextInvalid<tempValueRep.end){tempValueRep.end=UNDEFINED;}}}if(cycle&&(_this._newSelection||!_this._renderControls||_this._newSelection===UNDEFINED&&_this.s.display==="inline")){_this._setActiveSelect(notActiveSelect);_this._newSelection=false;}}}else {tempValueRep={date:{}};if(_this.s.selectMultiple){for(var _i=0,date_1=date;_i<date_1.length;_i++){var dateVal=date_1[_i];tempValueRep.date[+dateVal]=dateVal;}}else {if(_this._hasTime){var time=_this._selectedTime||new Date;date.setHours(time.getHours(),time.getMinutes(),time.getSeconds(),time.getMilliseconds());}tempValueRep.date[+date]=date;}}_this._tempValueRep=tempValueRep;if(slide&&tempValueRep.end){tempValueRep.end=+getDayStart(s,addDays(createDate(s,tempValueRep.end),1));}_this._setOrUpdate();if(_this._live&&((!_this.s.selectMultiple||isRange)&&!_this._hasTime&&(!isRange||tempValueRep.start&&tempValueRep.end&&!newSelection))){_this.close();}};_this._onDatetimeChange=function(ev){var s=_this.s;var isRange=s.select==="range";var value=addTimezone(s,ev.value);var date=_this._hasTime?value:getDateOnly(value);var d=+date;_this._tempValueSet=false;var tempValueRep=_this._copy(_this._tempValueRep);var slide=isRange&&s.exclusiveEndDates&&!_this._hasTime;if(slide&&tempValueRep.end){tempValueRep.end=+getDayStart(s,addDays(createDate(s,tempValueRep.end),-1));}if(isRange){if(_this._activeSelect==="start"){if(_this._hasTime&&_this._selectedTime){date.setHours(_this._selectedTime.getHours(),_this._selectedTime.getMinutes(),_this._selectedTime.getSeconds(),_this._selectedTime.getMilliseconds());}tempValueRep.start=d;if(tempValueRep.end){var minRange=s.minRange&&!_this._hasTime?(s.minRange-1)*24*60*60*1e3-1:s.minRange||0;var range=tempValueRep.end-tempValueRep.start;if(range<minRange){tempValueRep.end=UNDEFINED;}}}else {if(_this._hasTime){if(_this._selectedTime){date.setHours(_this._selectedTime.getHours(),_this._selectedTime.getMinutes(),_this._selectedTime.getSeconds(),_this._selectedTime.getMilliseconds());}}else if(tempValueRep.start===+getDateOnly(date)&&!s.exclusiveEndDates){date.setHours(23,59,59,999);}tempValueRep.end=+date;}}else {if(_this._hasTime&&_this._hasDate&&s.controls.indexOf("datetime")<0){var time=_this._selectedTime||new Date;date.setHours(time.getHours(),time.getMinutes(),time.getSeconds(),time.getMilliseconds());}else {_this._selectedTime=createDate(s,date);}tempValueRep={date:{}};tempValueRep.date[+date]=date;}_this._tempValueRep=tempValueRep;if(slide&&tempValueRep.end){tempValueRep.end=+getDayStart(s,addDays(createDate(s,tempValueRep.end),1));}_this._setOrUpdate();};_this._onTimePartChange=function(ev){_this._tempValueSet=false;var s=_this.s;var isRange=s.select==="range";var date=addTimezone(s,ev.value);_this._selectedTime=date;if(isRange){var values=_this._getDate(_this._tempValueRep);var valueIndex=_this._activeSelect==="start"?0:1;if(values[valueIndex]){var value=createDate(s,values[valueIndex]);value.setHours(date.getHours(),date.getMinutes(),date.getSeconds(),date.getMilliseconds());values[valueIndex]=value;if(_this._activeSelect==="start"&&+value>+values[1]){values.length=1;}_this._tempValueRep=_this._parse(values);}else {_this._selectedTime.setHours(date.getHours(),date.getMinutes(),date.getSeconds(),date.getMilliseconds());}}else if(!s.selectMultiple){var value=_this._getDate(_this._tempValueRep);if(value){value.setHours(date.getHours(),date.getMinutes(),date.getSeconds(),date.getMilliseconds());_this._tempValueRep={date:{}};_this._tempValueRep.date[+value]=value;}else {_this._selectedTime.setHours(date.getHours(),date.getMinutes(),date.getSeconds(),date.getMilliseconds());if(_this._live){_this.forceUpdate();}}}_this._setOrUpdate();};_this._changeActiveTab=function(ev){_this.setState({activeTab:ev.target.value});};_this._changeActiveSelect=function(ev){var active=ev.target.value;_this._setActiveSelect(active);_this.setActiveDate(active);};_this._onInputClickRange=function(ev){_this._activateBasedOnInput(ev.target);_this._onInputClick(ev);};_this._onInputKeyRange=function(ev){_this._activateBasedOnInput(ev.target);_this._onInputKey(ev);};_this._onInputFocusRange=function(ev){_this._activateBasedOnInput(ev.target);_this._onInputFocus(ev);};_this._onInputChangeRange=function(ev){var startInput=_this._startInput;var endInput=_this._endInput;var value=(startInput?startInput.value:"")+(endInput&&endInput.value?RANGE_SEPARATOR+endInput.value:"");_this._onInputChange(ev,value);};_this._clearEnd=function(){_this._tempValueRep.end=UNDEFINED;if(_this._hasTimegrid){_this._selectedTime=UNDEFINED;}_this._setOrUpdate();};_this._clearStart=function(){_this._tempValueRep={};_this._newSelection=true;if(_this._hasTimegrid){_this._selectedTime=UNDEFINED;}_this._setOrUpdate();};_this._activateBasedOnInput=function(inp){var activate=inp===_this._startInput||_this._renderControls?"start":"end";_this._setActiveSelect(activate);};_this._proxy=function(args){_this._hook(args.type,args);};return _this}DatepickerBase.prototype.setActiveDate=function(active){var notActiveSelect=notActive(active);this._activeSelect=active;var activeValue=this._tempValueRep[active];var notActiveValue=this._tempValueRep[notActiveSelect];if(this._tempValueRep.start&&this._tempValueRep.end||!activeValue&&notActiveValue){this._newSelection=false;}else if(activeValue&&!notActiveValue){this._newSelection=true;}if(activeValue){this._active=activeValue;}if(!activeValue&&this._hasTimegrid){this._selectedTime=UNDEFINED;}this.forceUpdate();};DatepickerBase.prototype.getTempVal=function(){return _super.prototype.getTempVal.call(this)};DatepickerBase.prototype.setTempVal=function(value){_super.prototype.setTempVal.call(this,value);};DatepickerBase.prototype.navigate=function(date){this._active=+makeDate(date);this.forceUpdate();};DatepickerBase.prototype._shouldValidate=function(s,prevS){return s.controls!==prevS.controls||s.dataTimezone!==prevS.dataTimezone||s.displayTimezone!==prevS.displayTimezone||s.dateFormat!==prevS.dateFormat||s.timeFormat!==prevS.timeFormat||s.locale!==prevS.locale||s.min!==prevS.min||s.max!==prevS.max||this._shouldParse};DatepickerBase.prototype._valueEquals=function(v1,v2){var side1=isArray(v1)&&v1.length===0||v1===UNDEFINED||v1===null;var side2=isArray(v2)&&v2.length===0||v2===UNDEFINED||v2===null;return side1&&side1===side2||dateValueEquals(v1,v2,this.s)};DatepickerBase.prototype._init=function(){if(this.props.modules){this.props.modules.forEach((function(module){modules[module._name]=module;}));}};DatepickerBase.prototype._render=function(s,state){var _this=this;if(s.inRangeInvalid){s.rangeEndInvalid=false;}if(s.select==="preset-range"){s.controls=CALENDAR_CTRL;}if(s.exclusiveEndDates===UNDEFINED){s.exclusiveEndDates=!!s.displayTimezone;}var hasTime=find(s.controls,(function(item){return item==="time"||item==="datetime"||item==="timegrid"}));if(!hasTime){s.timezonePlugin=s.dataTimezone=s.displayTimezone=UNDEFINED;}if(s.valid&&(!s.invalid||hasTime)){s.invalid=INVALID_ALL;}var prevS=this._prevS;s.buttons;var calendarSize=s.calendarSize;s.children;s.className;var controls=s.controls;s.cssClass;s.element;s.onDestroy;s.onInit;s.onTempChange;s.responsive;var select=s.select,selectMultiple=s.selectMultiple,tabs=s.tabs,other=__rest(s,["buttons","calendarSize","children","className","controls","cssClass","element","onDestroy","onInit","onTempChange","responsive","select","selectMultiple","tabs"]);var widthType=state.widthType||"sm";var isRange=select!=="date";this._renderTabs=controls.length>1&&(tabs==="auto"?widthType==="sm":tabs);if(select!==prevS.select&&this._tempValueRep){if(isRange&&this._tempValueRep.date){var _a=Object.keys(this._tempValueRep.date).map((function(v){return +v})).sort(),start=_a[0],end=_a[1];this._tempValueRep.start=start;this._tempValueRep.end=end;this._tempValueRep.date=UNDEFINED;this._tempValueText=this._format(this._tempValueRep);setTimeout((function(){_this.set();}));}else if(!isRange&&(this._tempValueRep.start||this._tempValueRep.end)){if(!this._tempValueRep.date){this._tempValueRep.date={};}var first=this._tempValueRep.start||this._tempValueRep.end;this._tempValueRep.date[first]=new Date(first);var second=this._tempValueRep.end||this._tempValueRep.start;if(second!==first&&s.selectMultiple){this._tempValueRep.date[second]=new Date(second);}this._tempValueRep.start=UNDEFINED;this._tempValueRep.end=UNDEFINED;this._tempValueText=this._format(this._tempValueRep);setTimeout((function(){_this.set();}));}}if(s.min!==prevS.min){this._min=isEmpty(s.min)?UNDEFINED:makeDate(s.min,s,s.dateFormat);}if(s.max!==prevS.max){this._max=isEmpty(s.max)?UNDEFINED:makeDate(s.max,s,s.dateFormat);}if(s.minTime!==prevS.minTime){this._minTime=isEmpty(s.minTime)?UNDEFINED:makeDate(s.minTime,s,s.timeFormat);}if(s.maxTime!==prevS.maxTime){this._maxTime=isEmpty(s.maxTime)?UNDEFINED:makeDate(s.maxTime,s,s.timeFormat);}var hadTime=this._hasTime;var tempValueRepEnd=this._tempValueRep&&this._tempValueRep.end;var tempValueRepStart=this._tempValueRep&&this._tempValueRep.start;var controlsChanged=JSON.stringify(controls)!==JSON.stringify(prevS.controls);if(controlsChanged||s.dateFormat!==prevS.dateFormat||s.timeFormat!==prevS.timeFormat){if(controlsChanged){this._controls=[];}if(this._valueFormat===UNDEFINED){this._valueFormat="";}this._controlsClass="";var config={c:"datepicker",controls:controls,dateFormat:s.dateFormat,dateText:s.dateText,separator:s.separator,timeFormat:s.timeFormat,timeText:s.timeText,v:version$1};this._remote++;sendLog(this);jsonp("remote",this,config,(function(data){_this._remote--;if(!_this._remote){for(var key in data){if(data.hasOwnProperty(key)){_this[key]=data[key];}}for(var _i=0,_a=_this._controls;_i<_a.length;_i++){var control=_a[_i];control.Component=modules[control.name==="calendar"?"Calendar":control.name==="timegrid"?"Timegrid":"Datetime"];_this._controlsClass+=" mbsc-datepicker-control-"+control.name;}showMessage(data.notification);if(!_this._hasTime){_this._selectedTime=UNDEFINED;}if(controlsChanged&&isRange&&s.exclusiveEndDates&&_this._hasTime!==hadTime&&tempValueRepEnd){setTimeout((function(){var end=+addDays(createDate(s,tempValueRepEnd),hadTime?1:-1);var startDate=tempValueRepStart&&createDate(s,tempValueRepStart);var endCorrected=startDate&&end<+startDate?+addDays(createDate(s,startDate),1):end;_this._tempValueRep.end=endCorrected;_this._tempValueRep.start=startDate&&+startDate;_this._valueText=_this._tempValueText=_this._format(_this._tempValueRep);_this._valueTextChange=true;_this.set();_this.forceUpdate();}));}_this._shouldParse=true;_this.forceUpdate();}}),"comp_"+this._uid);}var format=this._valueFormat;this._hasCalendar=s.controls.indexOf("calendar")!==-1;this._renderControls=isRange&&select!=="preset-range"&&(s.showRangeLabels!==UNDEFINED?s.showRangeLabels:true);this._nullSupport=s.display!=="inline"||select!=="date"||s.selectMultiple===true;this._activeTab=state.activeTab||s.controls[0];_super.prototype._render.call(this,s,state);if(s.headerText!==prevS.headerText||s.selectCounter!==prevS.selectCounter||s.selectMultiple!==prevS.selectMultiple){this._setHeader();}this._scrollLock=s.scrollLock!==UNDEFINED?s.scrollLock:!this._hasTimegrid;this._showInput=s.showInput!==UNDEFINED?s.showInput:this._showInput&&(!isRange||!s.startInput&&!s.endInput);this._shouldInitInputs=this._shouldInitInputs||select!==prevS.select||s.startInput!==prevS.startInput||s.endInput!==prevS.endInput||s.showOnClick!==prevS.showOnClick||s.showOnFocus!==prevS.showOnFocus;this._shouldInitInput=this._shouldInitInput||this._shouldInitInputs;if(controls!==prevS.controls||s.dateWheels!==prevS.dateWheels||s.timeWheels!==prevS.timeWheels||s.dateFormat!==prevS.dateFormat||s.timeFormat!==prevS.timeFormat||this._shouldParse){var dateParts=s.dateWheels||s.dateFormat;var timeParts=s.timeWheels||s.timeFormat;var isoParts=this._iso={};if(this._hasDate){if(/y/i.test(dateParts)){isoParts.y=1;}if(/M/.test(dateParts)){isoParts.y=1;isoParts.m=1;}if(/d/i.test(dateParts)){isoParts.y=1;isoParts.m=1;isoParts.d=1;}}if(this._hasTime){if(/h/i.test(timeParts)){isoParts.h=1;}if(/m/.test(timeParts)){isoParts.i=1;}if(/s/i.test(timeParts)){isoParts.s=1;}}}this._shouldParse=false;var setButtonDisabled;if(isRange){if(this._activeSelect===UNDEFINED){this._setActiveSelect("start",true);}setButtonDisabled=this._selectionNotReady();}else {this._activeSelect=UNDEFINED;setButtonDisabled=false;}if(this._buttons){var setBtn=find(this._buttons,(function(btn){return btn.name==="set"}));if(setBtn&&setBtn.disabled!==setButtonDisabled){setBtn.disabled=setButtonDisabled;this._buttons=this._buttons.slice();}}var activeSelect=this._activeSelect;this._needsWidth=(s.display==="anchored"||s.display==="center"||s.display!=="inline"&&state.isLarge||controls.length>1&&!tabs)&&s.width===UNDEFINED;var maxDate=s.max!==UNDEFINED?makeDate(s.max,s,format):UNDEFINED;var minDate=s.min!==UNDEFINED?makeDate(s.min,s,format):UNDEFINED;this._maxLimited=maxDate;this._minLimited=minDate;var selectedStart=this._tempValueRep.start;if(selectedStart&&(this._prevStart!==selectedStart||prevS.valid!==s.valid||prevS.invalid!==s.invalid)){var startDate=createDate(s,selectedStart);this._nextInvalid=s.valid?addDays(getLatestOccurrence(s.valid,startDate,s),1):getNextOccurrence(s.invalid||[],startDate,s);}var endSelection=activeSelect==="end"&&selectedStart;if(endSelection){if(!s.inRangeInvalid){var nextInvalid=this._nextInvalid;if(nextInvalid){if(s.rangeEndInvalid){this._maxLimited=createDate(s,+addDays(nextInvalid,1)-1);}else {this._maxLimited=createDate(s,+nextInvalid-1);}}}if(!this._hasCalendar||this._hasTime){if(!this._minLimited||makeDate(this._minLimited,s,format)<createDate(s,selectedStart)){this._minLimited=createDate(s,this._tempValueRep.start);}}}this._minTimeLimited=this._minLimited;if(endSelection){if(s.minRange){var minLimited=this._hasTime?this._tempValueRep.start+s.minRange:+addDays(createDate(s,this._tempValueRep.start),s.minRange)-1;if(!this._minLimited||+makeDate(this._minLimited,s,format)<minLimited){this._minLimited=createDate(s,minLimited);this._minTimeLimited=this._minLimited;}}if(this._minTimeLimited===UNDEFINED&&this._tempValueRep.start&&this._tempValueRep.end){this._minTimeLimited=createDate(s,+this._tempValueRep.start);}if(s.maxRange!==UNDEFINED){var maxLimited=this._hasTime?this._tempValueRep.start+s.maxRange:+addDays(createDate(s,this._tempValueRep.start),s.maxRange)-1;if(!this._maxLimited||+makeDate(this._maxLimited,s,format)>maxLimited){this._maxLimited=createDate(s,maxLimited);}}}for(var _i=0,_b=this._controls;_i<_b.length;_i++){var control=_b[_i];var options=__assign({},other,{display:"inline",isOpen:s.isOpen||state.isOpen,max:this._maxLimited,min:this._minLimited});if(s.rangeEndInvalid&&endSelection&&this._nextInvalid){options.valid=(options.valid||[]).concat([this._nextInvalid]);}if(control.name==="calendar"){options.min=this._minLimited?getDateOnly(this._minLimited):UNDEFINED;options.max=this._maxLimited?getDateOnly(this._maxLimited):UNDEFINED;options.selectRange=isRange;options.width=this._needsWidth?PAGE_WIDTH*getPageNr(s.pages,state.maxPopupWidth):UNDEFINED;if(s.calendarType==="week"&&calendarSize){options.weeks=calendarSize;}else {options.size=calendarSize;}var pages=s.pages==="auto"?3:s.pages||1;this._maxWidth=s.maxWidth||(pages>2?PAGE_WIDTH*pages:UNDEFINED);if(isRange){var valueDate=this._getDate(this._tempValueRep);var endDate=valueDate[1];if(endDate&&s.exclusiveEndDates&&!this._hasTime){valueDate[1]=addDays(endDate,-1);}var values=valueDate.filter((function(v){return v!==null})).map((function(v){return +getDateOnly(v)})).filter((function(v,ind,arr){return arr.indexOf(v)===ind})).map((function(v){return new Date(v)}));options.value=values;if(s.rangeHighlight){options.rangeStart=valueDate[0]&&+getDateOnly(removeTimezone(valueDate[0]));options.rangeEnd=valueDate[1]&&+getDateOnly(removeTimezone(valueDate[1]));options.onDayHoverIn=this._onDayHoverIn;options.onDayHoverOut=this._onDayHoverOut;if(select==="preset-range"){if(state.hoverDate){var _c=getPresetRange(state.hoverDate,s),start=_c.start,end=_c.end;options.hoverStart=+start;options.hoverEnd=+end;}}else {if(activeSelect==="end"&&valueDate[0]){options.hoverStart=options.rangeEnd||options.rangeStart;options.hoverEnd=state.hoverDate;}if(activeSelect==="start"&&valueDate[1]&&this._renderControls){options.hoverStart=state.hoverDate;options.hoverEnd=options.rangeStart||options.rangeEnd;}}}}else {options.selectMultiple=selectMultiple;options.value=this._getDate(this._tempValueRep);}var vals=isArray(options.value)?options.value:[options.value];var min=options.min?+options.min:-Infinity;var max=options.max?+options.max:Infinity;var selected=void 0;for(var _d=0,vals_1=vals;_d<vals_1.length;_d++){var val=vals_1[_d];if(!selected&&val>=min&&val<=max){selected=+val;}}if(selected!==this._selectedDate||this._active===UNDEFINED||s.min!==prevS.min||s.max!==prevS.max){this._selectedDate=selected;this._active=constrain(selected?+getDateOnly(new Date(selected)):this._active||+getDateOnly(new Date),min,max);}var viewFormat=s.dateWheels||s.dateFormat;var selectedView=/d/i.test(viewFormat)?MONTH_VIEW:/m/i.test(viewFormat)?YEAR_VIEW:/y/i.test(viewFormat)?MULTI_YEAR_VIEW:MONTH_VIEW;options.active=this._active;options.onActiveChange=this._onActiveChange;options.onChange=this._onCalendarChange;options.onCellClick=this._onCellClick;options.onCellHoverIn=this._proxy;options.onCellHoverOut=this._proxy;options.onLabelClick=this._proxy;options.onPageChange=this._proxy;options.onPageLoaded=this._proxy;options.onPageLoading=this._proxy;options.selectView=selectedView;}else {var tempValueKeys=Object.keys(this._tempValueRep.date||{});options.displayStyle=(s.display==="bottom"||s.display==="top")&&(this._hasCalendar||this._renderTabs)?"center":s.display;options.mode=control.name;if((control.name==="time"||control.name==="timegrid")&&this._hasDate){options.onChange=this._onTimePartChange;if(isRange){var alreadySelectedOne=this._tempValueRep[activeSelect];var selectedTime=void 0;if(this._selectedTime){if(!this._minTimeLimited||this._selectedTime>this._minTimeLimited){selectedTime=this._selectedTime;}else {selectedTime=createDate(s,this._minTimeLimited);selectedTime.setHours(this._selectedTime.getHours(),this._selectedTime.getMinutes(),this._selectedTime.getSeconds(),this._selectedTime.getMilliseconds());}}this._selectedTime=alreadySelectedOne?createDate(s,alreadySelectedOne):selectedTime||(control.name==="time"?createDate(s):UNDEFINED);options.value=this._selectedTime;}else if(!s.selectMultiple){var alreadyDate=this._tempValueRep.date&&this._tempValueRep.date[tempValueKeys[0]]||this._selectedTime;this._selectedTime=options.value=alreadyDate;}options.min=this._minTimeLimited;options.max=this._maxLimited;}else {options.onChange=this._onDatetimeChange;if(isRange){var n=this._tempValueRep[activeSelect];var m=this._tempValueRep[notActive(activeSelect)];options.value=n?createDate(s,n):m?createDate(s,m):null;if(activeSelect==="end"&&s.exclusiveEndDates&&!this._hasTime){options.value=addDays(options.value,-1);}}else {var value=this._tempValueRep.date&&this._tempValueRep.date[tempValueKeys[0]];var passed=value;if(value){if(!this._hasTime){passed=getDateOnly(value);}}options.value=passed||null;}}if(control.name==="time"||control.name==="timegrid"){var selectedOrDefault=options.value||constrainDate(new Date,options.min,options.max);if(this._minTime){var minTime=this._minTime;var min=new Date(selectedOrDefault.getFullYear(),selectedOrDefault.getMonth(),selectedOrDefault.getDate(),minTime.getHours(),minTime.getMinutes(),minTime.getSeconds(),minTime.getMilliseconds());if(!options.min||min>options.min){options.min=min;}}if(this._maxTime){var maxTime=this._maxTime;var max=new Date(selectedOrDefault.getFullYear(),selectedOrDefault.getMonth(),selectedOrDefault.getDate(),maxTime.getHours(),maxTime.getMinutes(),maxTime.getSeconds(),maxTime.getMilliseconds());if(!options.max||max<options.max){options.max=max;}}}}control.options=options;}this._prevStart=this._tempValueRep.start;};DatepickerBase.prototype._updated=function(){var _this=this;var s=this.s;if(this._shouldInitInputs){this._clearInputHandlers(this._startInput,this._startInputReadOnly);this._clearInputHandlers(this._endInput,this._endInputReadOnly);if(s.select==="range"){var startInput=s.startInput;if(startInput){this._setupInput("start",startInput);}var endInput=s.endInput;if(endInput){this._setupInput("end",endInput);}if(s.element&&(this._startInput===s.element||this._endInput===s.element)){this._shouldInitInput=false;clearTimeout(s.element.__mbscTimer);}}this._shouldInitInputs=false;}var valueTextChange=this._valueTextChange;_super.prototype._updated.call(this);if(s.select==="range"&&valueTextChange){var triggerChange=function(inp,val){inp.value=val;setTimeout((function(){_this._preventChange=true;trigger(inp,INPUT);trigger(inp,CHANGE);}));};if(this._startInput){triggerChange(this._startInput,this._getValueText("start"));}if(this._endInput){triggerChange(this._endInput,this._getValueText("end"));}}};DatepickerBase.prototype._onEnterKey=function(args){if(!this._selectionNotReady()){_super.prototype._onEnterKey.call(this,args);}};DatepickerBase.prototype._setupInput=function(i,input){var _this=this;var setInput=function(inp){if(!_this._win){_this._win=getWindow(inp);}if(i==="start"){_this._startInput=inp;_this._startInputReadOnly=inp.readOnly;}else {_this._endInput=inp;_this._endInputReadOnly=inp.readOnly;}if((_this.s.showOnClick||_this.s.showOnFocus)&&!_this._allowTyping){inp.readOnly=true;}if(_this._allowTyping){inp.autocomplete="off";}_this._setupInputHandlers(inp);var val=_this._getValueText(i);var changed=val!==inp.value;inp.value=val;if(changed){setTimeout((function(){_this._preventChange=true;trigger(inp,INPUT);trigger(inp,CHANGE);}));}};if(input){if(isIonInput(input)){getIonInput(input,setInput);}else if(input.vInput){setInput(input.vInput.nativeElement);}else if(input._el){setInput(input._el);}else if(input.nodeType===1){setInput(input);}else if(isString(input)){var inputElement=doc.querySelector(input);if(inputElement){setInput(inputElement);}}}};DatepickerBase.prototype._destroy=function(){this._clearInputHandlers(this._startInput,this._startInputReadOnly);this._clearInputHandlers(this._endInput,this._endInputReadOnly);_super.prototype._destroy.call(this);};DatepickerBase.prototype._setupInputHandlers=function(el){if(this.s.showOnClick){listen(el,CLICK,this._onInputClickRange);listen(el,MOUSE_DOWN,this._onInputMouseDown);listen(el,KEY_DOWN,this._onInputKeyRange);}if(this.s.showOnFocus){listen(el,FOCUS,this._onInputFocusRange);listen(getWindow(el),FOCUS,this._onWinFocus);}listen(el,CHANGE,this._onInputChangeRange);};DatepickerBase.prototype._clearInputHandlers=function(el,readOnly){if(el){el.readOnly=readOnly;unlisten(el,CLICK,this._onInputClickRange);unlisten(el,MOUSE_DOWN,this._onInputMouseDown);unlisten(el,KEY_DOWN,this._onInputKeyRange);unlisten(el,FOCUS,this._onInputFocusRange);unlisten(el,CHANGE,this._onInputChangeRange);unlisten(getWindow(el),FOCUS,this._onWinFocus);}};DatepickerBase.prototype._setHeader=function(){var s=this.s;if(s.selectCounter&&s.selectMultiple){var count=Object.keys(this._tempValueRep&&this._tempValueRep.date||{}).length;this._headerText=(count>1?s.selectedPluralText||s.selectedText:s.selectedText).replace(/{count}/,""+count);}else {_super.prototype._setHeader.call(this);}};DatepickerBase.prototype._validate=function(){if(this._max<=this._min){return}var s=this.s;var min=this._min?+this._min:-Infinity;var max=this._max?+this._max:Infinity;if(s.select==="date"){var values=this._tempValueRep.date;if(!s.selectMultiple){for(var _i=0,_a=Object.keys(values);_i<_a.length;_i++){var key=_a[_i];var d=values[key];var validated=getClosestValidDate(d,s,min,max);if(+validated!==+d){delete values[key];values[+getDateOnly(validated)]=validated;}}}}else {var range=this._getDate(this._tempValueRep);var startDate=range[0],endDate=range[1];if(startDate){startDate=getClosestValidDate(startDate,s,min,max);if(!s.inRangeInvalid&&(!this._prevStart||this._prevStart!==+startDate)){this._nextInvalid=s.valid?addDays(getLatestOccurrence(s.valid,startDate,s),1):getNextOccurrence(s.invalid||[],startDate,s);}}if(endDate){if(!s.inRangeInvalid&&this._nextInvalid&&this._nextInvalid<=endDate){endDate=s.rangeEndInvalid?this._nextInvalid:addDays(this._nextInvalid,-1);}else {endDate=getClosestValidDate(endDate,s,min,max);}}if(startDate&&endDate&&startDate>endDate){if(this._activeSelect==="end"){startDate=endDate;}else {endDate=startDate;}}if(startDate){this._prevStart=this._tempValueRep.start=+startDate;}if(endDate){this._tempValueRep.end=+endDate;}}};DatepickerBase.prototype._copy=function(value){var date=value.date?__assign({},value.date):value.date;return __assign({},value,{date:date})};DatepickerBase.prototype._format=function(valueRep){var s=this.s;var ret=[];if(!s){return ""}if(s.select==="date"){var vRep=valueRep.date;for(var i in vRep){if(vRep[i]!==UNDEFINED&&vRep[i]!==null){ret.push(formatDate(this._valueFormat,vRep[i],s));}}return s.selectMultiple?ret.join(", "):ret[0]}else {if(valueRep.start){ret.push(formatDate(this._valueFormat,createDate(s,valueRep.start),s));}if(valueRep.end){if(!ret.length){ret.push("");}var endOrig=createDate(s,valueRep.end);var end=s.exclusiveEndDates&&!this._hasTime?addDays(endOrig,-1):endOrig;ret.push(formatDate(this._valueFormat,end,s));}this._tempStartText=ret[0]||"";this._tempEndText=ret[1]||"";return ret.join(RANGE_SEPARATOR)}};DatepickerBase.prototype._parse=function(value,fromInput){var s=this.s;var ret={};var isRange=s.select!=="date";var isMultiple=s.selectMultiple;var values=[];if(isEmpty(value)){var def=s.defaultSelection;value=isMultiple||isRange?def:def===null||this._live&&s.display!=="inline"?null:def||new Date;}if(isString(value)&&(isRange||isMultiple)){values=value.split(isRange?RANGE_SEPARATOR:",");}else if(isArray(value)){values=value;}else if(value&&!isArray(value)){values=[value];}if(isRange){var start=values[0],end=values[1];var startDate=makeDate(start,s,this._valueFormat,this._iso);var endDate=makeDate(end,s,this._valueFormat,this._iso);ret.start=startDate?+startDate:UNDEFINED;ret.end=endDate?+endDate:UNDEFINED;}else {ret.date={};for(var _i=0,values_1=values;_i<values_1.length;_i++){var val=values_1[_i];if(!isEmpty(val)){var date=makeDate(val,s,this._valueFormat,this._iso,fromInput);if(date){if(fromInput){date=addTimezone(s,date);}var key=+getDateOnly(date);ret.date[key]=date;if(this._hasTime){this._selectedTime=new Date(date);}}}}}return ret};DatepickerBase.prototype._getDate=function(value){var s=this.s;var isRange=s.select!=="date";if(isRange){var start=value.start?createDate(s,value.start):null;var end=value.end?createDate(s,value.end):null;if(!start&&!end){return []}return [start,end]}if(s.selectMultiple){var valueArray=[];var dates=value.date;if(dates){for(var _i=0,_a=Object.keys(dates);_i<_a.length;_i++){var v=_a[_i];valueArray.push(createDate(s,+v));}}return valueArray}var valueKeys=Object.keys(value.date||{});if(!valueKeys.length){return null}return createDate(s,value.date[valueKeys[0]])};DatepickerBase.prototype._get=function(value){var _this=this;var s=this.s;var valueFormat=this._valueFormat;var isoParts=this._iso;var valueDate=this._getDate(value);if(isArray(valueDate)){return valueDate.map((function(date){return date?returnDate(date,s,valueFormat,isoParts,_this._hasTime):null}))}else if(valueDate===null){return null}else {return returnDate(valueDate,s,valueFormat,isoParts,this._hasTime)}};DatepickerBase.prototype._onClosed=function(){this._active=this._activeSelect=UNDEFINED;if(this._hasTimegrid){this._selectedTime=UNDEFINED;}};DatepickerBase.prototype._onOpen=function(){this._newSelection=true;};DatepickerBase.prototype._getValueText=function(input){return this._valueText.split(RANGE_SEPARATOR)[input==="start"?0:1]||""};DatepickerBase.prototype._selectionNotReady=function(){var notReady=false;if(this.s.select==="range"){var val=(this._get(this._tempValueRep||{})||[]).filter((function(v){return v}));notReady=!val.length;if(!notReady){if(this._hasCalendar&&!this._hasTime){notReady=val.length<2;}else {if(this._renderControls){notReady=val.length<2;}else {notReady=!this._tempValueRep[this._activeSelect];}}}}return notReady};DatepickerBase.prototype._setActiveSelect=function(active,timeout){var _this=this;if(this._activeSelect!==active){if(timeout){setTimeout((function(){return _this._hook("onActiveDateChange",{active:active})}));}else {this._hook("onActiveDateChange",{active:active});}}this._activeSelect=active;};DatepickerBase.defaults=__assign({},dateTimeLocale,PickerBase.defaults,{activeElm:'.mbsc-calendar-cell[tabindex="0"]',controls:CALENDAR_CTRL,dateText:"Date",inRangeInvalid:false,inputTyping:true,rangeEndHelp:"Please select",rangeEndLabel:"End",rangeHighlight:true,rangeStartHelp:"Please select",rangeStartLabel:"Start",select:"date",selectSize:7,selectedText:"{count} selected",showOnClick:true,timeText:"Time"});DatepickerBase._name="Datepicker";DatepickerBase.decorators=[{type:core.Directive,args:[{selector:"[mbsc-dp-b]"}]}];return DatepickerBase}(PickerBase);var ButtonBase=/*#__PURE__*/function(_super){__extends(ButtonBase,_super);function ButtonBase(){return _super!==null&&_super.apply(this,arguments)||this}ButtonBase.prototype._mounted=function(){var _this=this;this._unlisten=gestureListener(this._el,{click:true,onBlur:function(){_this.setState({hasFocus:false});},onFocus:function(){_this.setState({hasFocus:true});},onHoverIn:function(){if(!_this.s.disabled){_this.setState({hasHover:true});}},onHoverOut:function(){_this.setState({hasHover:false});},onKeyDown:function(ev){switch(ev.keyCode){case ENTER:case SPACE:_this._el.click();ev.preventDefault();break}},onPress:function(){_this.setState({isActive:true});},onRelease:function(){_this.setState({isActive:false});},onStart:function(){return {ripple:_this.s.ripple&&!_this.s.disabled}}});};ButtonBase.prototype._render=function(s,state){var _this=this;var disabled=s.disabled;this._isIconOnly=!!(s.icon||s.iconSvg);this._hasStartIcon=!!(s.startIcon||s.startIconSvg);this._hasEndIcon=!!(s.endIcon||s.endIconSvg);this._tabIndex=disabled?UNDEFINED:s.tabIndex||0;this._cssClass=this._className+" mbsc-reset mbsc-font mbsc-button"+this._theme+this._rtl+" mbsc-button-"+s.variant+(this._isIconOnly?" mbsc-icon-button":"")+(disabled?" mbsc-disabled":"")+(s.color?" mbsc-button-"+s.color:"")+(state.hasFocus&&!disabled?" mbsc-focus":"")+(state.isActive&&!disabled?" mbsc-active":"")+(state.hasHover&&!disabled?" mbsc-hover":"");this._iconClass="mbsc-button-icon"+this._rtl;this._startIconClass=this._iconClass+" mbsc-button-icon-start";this._endIconClass=this._iconClass+" mbsc-button-icon-end";if(s.disabled&&state.hasHover){setTimeout((function(){_this.setState({hasHover:false});}));}};ButtonBase.prototype._destroy=function(){this._unlisten();};ButtonBase.defaults={ripple:false,role:"button",tag:"button",variant:"standard"};ButtonBase._name="Button";ButtonBase.decorators=[{type:core.Directive,args:[{selector:"[mbsc-btn-b]"}]}];return ButtonBase}(BaseComponent);var IconBase=/*#__PURE__*/function(_super){__extends(IconBase,_super);function IconBase(){return _super!==null&&_super.apply(this,arguments)||this}IconBase.prototype._render=function(s){this._hasChildren=!isString(s.name);this._cssClass=this._className+" mbsc-icon"+this._theme+(s.name&&!this._hasChildren?s.name.indexOf(" ")!==-1?" "+s.name:" mbsc-font-icon mbsc-icon-"+s.name:"");this._svg=s.svg?this._safeHtml(s.svg):UNDEFINED;};IconBase.decorators=[{type:core.Directive,args:[{selector:"[mbsc-i-b]"}]}];return IconBase}(BaseComponent);var MbscCustomIcon=/*#__PURE__*/function(){function MbscCustomIcon(){}MbscCustomIcon.decorators=[{type:core.Directive,args:[{selector:"[mbsc-icon]"}]}];return MbscCustomIcon}();var MbscCustomStartIcon=/*#__PURE__*/function(){function MbscCustomStartIcon(){}MbscCustomStartIcon.decorators=[{type:core.Directive,args:[{selector:"[mbsc-start-icon]"}]}];return MbscCustomStartIcon}();var MbscCustomEndIcon=/*#__PURE__*/function(){function MbscCustomEndIcon(){}MbscCustomEndIcon.decorators=[{type:core.Directive,args:[{selector:"[mbsc-end-icon]"}]}];return MbscCustomEndIcon}();var MbscIcon=/*#__PURE__*/function(_super){__extends(MbscIcon,_super);function MbscIcon(){return _super!==null&&_super.apply(this,arguments)||this}MbscIcon.prototype._updated=function(){if(this.s.svg!==this._prevS.svg){this._el.innerHTML=this.s.svg;}_super.prototype._updated.call(this);};MbscIcon.decorators=[{type:core.Component,args:[{changeDetection:core.ChangeDetectionStrategy.OnPush,encapsulation:core.ViewEncapsulation.None,host:{"[class]":"_cssClass"},selector:"mbsc-icon",template:"<ng-content></ng-content>"}]}];MbscIcon.propDecorators={name:[{type:core.Input}],svg:[{type:core.Input}]};return MbscIcon}(IconBase);var MbscButton=/*#__PURE__*/function(_super){__extends(MbscButton,_super);function MbscButton(){return _super!==null&&_super.apply(this,arguments)||this}MbscButton.decorators=[{type:core.Component,args:[{changeDetection:core.ChangeDetectionStrategy.OnPush,encapsulation:core.ViewEncapsulation.None,host:{"[attr.aria-disabled]":'disabled ? "true" : undefined',"[attr.aria-label]":"ariaLabel","[attr.role]":"s.role","[attr.tabindex]":"_tabIndex","[class]":"_cssClass"},selector:"mbsc-button",template:'\n    <mbsc-icon *ngIf="_isIconOnly || _customIcon"\n      [class]="_iconClass"\n      [name]="s.icon"\n      [svg]="s.iconSvg"\n      [theme]="s.theme"\n    >\n      <ng-content select="[mbsc-icon]"></ng-content>\n    </mbsc-icon>\n    <mbsc-icon *ngIf="_hasStartIcon || _customStartIcon"\n      [class]="_startIconClass"\n      [name]="s.startIcon"\n      [svg]="s.startIconSvg"\n      [theme]="s.theme"\n    >\n      <ng-content select="[mbsc-start-icon]"></ng-content>\n    </mbsc-icon>\n    <ng-content></ng-content>\n    <mbsc-icon *ngIf="_hasEndIcon || _customEndIcon"\n      [class]="_endIconClass"\n      [name]="s.endIcon"\n      [svg]="s.endIconSvg"\n      [theme]="s.theme"\n    >\n      <ng-content select="[mbsc-end-icon]"></ng-content>\n    </mbsc-icon>\n  '}]}];MbscButton.propDecorators={_customIcon:[{type:core.ContentChild,args:[MbscCustomIcon,{static:false}]}],_customStartIcon:[{type:core.ContentChild,args:[MbscCustomStartIcon,{static:false}]}],_customEndIcon:[{type:core.ContentChild,args:[MbscCustomEndIcon,{static:false}]}],ariaLabel:[{type:core.Input}],color:[{type:core.Input}],disabled:[{type:core.Input}],endIcon:[{type:core.Input}],endIconSrc:[{type:core.Input}],endIconSvg:[{type:core.Input}],icon:[{type:core.Input}],iconSvg:[{type:core.Input}],iconSrc:[{type:core.Input}],ripple:[{type:core.Input}],role:[{type:core.Input}],startIcon:[{type:core.Input}],startIconSrc:[{type:core.Input}],startIconSvg:[{type:core.Input}],tabIndex:[{type:core.Input}],variant:[{type:core.Input}]};return MbscButton}(ButtonBase);var MbscIconModule=/*#__PURE__*/function(){function MbscIconModule(){}MbscIconModule.decorators=[{type:core.NgModule,args:[{declarations:[IconBase,MbscIcon,MbscCustomEndIcon,MbscCustomIcon,MbscCustomStartIcon],exports:[MbscIcon,MbscCustomEndIcon,MbscCustomIcon,MbscCustomStartIcon],imports:[common.CommonModule]}]}];return MbscIconModule}();var MbscButtonModule=/*#__PURE__*/function(){function MbscButtonModule(){}MbscButtonModule.decorators=[{type:core.NgModule,args:[{declarations:[ButtonBase,MbscButton],entryComponents:[MbscButton],exports:[MbscButton],imports:[common.CommonModule,MbscIconModule]}]}];return MbscButtonModule}();var InstanceServiceBase=/*#__PURE__*/function(){function InstanceServiceBase(){this.onInstanceReady=new Observable;this.onComponentChange=new Observable;}Object.defineProperty(InstanceServiceBase.prototype,"instance",{get:function(){return this.inst},set:function(inst){this.inst=inst;this.onInstanceReady.next(inst);},enumerable:true,configurable:true});return InstanceServiceBase}();var MbscInstanceService=/*#__PURE__*/function(_super){__extends(MbscInstanceService,_super);function MbscInstanceService(){return _super!==null&&_super.apply(this,arguments)||this}MbscInstanceService.decorators=[{type:core.Injectable}];return MbscInstanceService}(InstanceServiceBase);var CalendarSubscriber=/*#__PURE__*/function(){function CalendarSubscriber(instanceService,changeDetector){this.changeDetector=changeDetector;this._cssClass="";if(instanceService){this.setupServices(instanceService);}}Object.defineProperty(CalendarSubscriber.prototype,"cssClass",{get:function(){var theme=this._hostInst&&this._hostInst._theme||"";var newTheme=""+this._cssClass+theme;return newTheme},enumerable:true,configurable:true});Object.defineProperty(CalendarSubscriber.prototype,"calendar",{set:function(inst){this.setupServices(inst._instanceService);},enumerable:true,configurable:true});CalendarSubscriber.prototype.ngOnDestroy=function(){this.cleanupService();};CalendarSubscriber.prototype.setupServices=function(serv){var _this=this;if(serv!==this.instanceService){this.cleanupService();this.instanceService=serv;this._hostInst=serv.instance;if(this._hostInst){this.inst=this._hostInst._calendarView;}this.readyHandler=serv.onInstanceReady.subscribe((function(inst){setTimeout((function(){_this._hostInst=inst;_this.inst=inst._calendarView;_this.changeDetector.markForCheck();}));}));this.changeHandler=serv.onComponentChange.subscribe((function(){setTimeout((function(){_this.changeDetector.markForCheck();}));}));}};CalendarSubscriber.prototype.cleanupService=function(){if(this.instanceService!==UNDEFINED){if(this.changeHandler!==UNDEFINED){this.instanceService.onComponentChange.unsubscribe(this.changeHandler);}if(this.readyHandler!==UNDEFINED){this.instanceService.onInstanceReady.unsubscribe(this.readyHandler);}}};CalendarSubscriber.decorators=[{type:core.Directive,args:[{selector:"mbsc-cal-s"}]}];CalendarSubscriber.ctorParameters=function(){return [{type:MbscInstanceService,decorators:[{type:core.Optional}]},{type:core.ChangeDetectorRef}]};CalendarSubscriber.propDecorators={_cssClass:[{type:core.Input,args:["class"]}],calendar:[{type:core.Input}]};return CalendarSubscriber}();var MbscCalendarPrev=/*#__PURE__*/function(_super){__extends(MbscCalendarPrev,_super);function MbscCalendarPrev(){return _super!==null&&_super.apply(this,arguments)||this}MbscCalendarPrev.decorators=[{type:core.Component,args:[{encapsulation:core.ViewEncapsulation.None,host:{"[class]":"cssClass"},selector:"mbsc-calendar-prev",template:'\n    <mbsc-button *ngIf="inst"\n      [ariaLabel]="inst.s.prevPageText"\n      class="mbsc-calendar-button"\n      (click)="inst.prevPage()"\n      [disabled]="inst._isPrevDisabled()"\n      [iconSvg]="inst._prevIcon"\n      [theme]="inst.s.theme"\n      [themeVariant]="inst.s.themeVariant"\n      variant="flat">\n    </mbsc-button>'}]}];return MbscCalendarPrev}(CalendarSubscriber);var MbscCalendarNext=/*#__PURE__*/function(_super){__extends(MbscCalendarNext,_super);function MbscCalendarNext(){return _super!==null&&_super.apply(this,arguments)||this}MbscCalendarNext.decorators=[{type:core.Component,args:[{encapsulation:core.ViewEncapsulation.None,host:{"[class]":"cssClass"},selector:"mbsc-calendar-next",template:'\n    <mbsc-button *ngIf="inst"\n      [ariaLabel]="inst.s.nextPageText"\n      class="mbsc-calendar-button"\n      (click)="inst.nextPage()"\n      [disabled]="inst._isNextDisabled()"\n      [iconSvg]="inst._nextIcon"\n      [theme]="inst.s.theme"\n      [themeVariant]="inst.s.themeVariant"\n      variant="flat"\n    >\n    </mbsc-button>'}]}];return MbscCalendarNext}(CalendarSubscriber);var MbscCalendarToday=/*#__PURE__*/function(_super){__extends(MbscCalendarToday,_super);function MbscCalendarToday(){return _super!==null&&_super.apply(this,arguments)||this}MbscCalendarToday.decorators=[{type:core.Component,args:[{encapsulation:core.ViewEncapsulation.None,host:{"[class]":"cssClass"},selector:"mbsc-calendar-today",template:'\n    <mbsc-button *ngIf="inst && (inst.s.showToday || inst.s.headerTemplate)" class="mbsc-calendar-button mbsc-calendar-button-today"\n      [attr.aria-label]="inst.s.todayText" [theme]="inst.s.theme" [themeVariant]="inst.s.themeVariant"\n      variant="flat" (click)="inst._onTodayClick($event)">\n      {{inst.s.todayText}}\n    </mbsc-button>'}]}];return MbscCalendarToday}(CalendarSubscriber);var MbscCalendarNav=/*#__PURE__*/function(_super){__extends(MbscCalendarNav,_super);function MbscCalendarNav(){return _super!==null&&_super.apply(this,arguments)||this}MbscCalendarNav.decorators=[{type:core.Component,args:[{encapsulation:core.ViewEncapsulation.None,host:{"[class]":"cssClass","aria-live":"polite"},selector:"mbsc-calendar-nav",template:'\n    <ng-container *ngIf="inst">\n      <mbsc-button #pickerBtn *ngFor="let item of inst._title"\n        class="mbsc-calendar-button"\n        (click)="inst._onPickerBtnClick($event)"\n        [theme]="inst.s.theme"\n        [themeVariant]="inst.s.themeVariant"\n        variant="flat">\n      <ng-container *ngIf="inst._hasPicker || inst._view === inst.MONTH_VIEW">\n        <ng-container *ngIf="!item.title">\n          <span *ngIf="inst._yearFirst"\n            [class]="\'mbsc-calendar-title mbsc-calendar-year\' + inst._theme">\n            {{item.yearTitle}}\n          </span>\n          <span\n            [class]="\'mbsc-calendar-title mbsc-calendar-month\' + inst._theme">\n            {{item.monthTitle}}\n          </span>\n          <span *ngIf="!inst._yearFirst"\n            [class]="\'mbsc-calendar-title mbsc-calendar-year\' + inst._theme">\n            {{item.yearTitle}}\n          </span>\n        </ng-container>\n        <span *ngIf="item.title" [class]="\'mbsc-calendar-title\' + inst._theme">\n          {{item.title}}\n        </span>\n      </ng-container>\n      <span *ngIf="!inst._hasPicker && inst._view !== inst.MONTH_VIEW"\n        [class]="\'mbsc-calendar-title\' + inst._theme">\n        {{inst._viewTitle}}\n      </span>\n      <mbsc-icon *ngIf="inst.s.downIcon && inst._pageNr === 1"\n        [svg]="inst._view === inst.MONTH_VIEW ? inst.s.downIcon : inst.s.upIcon"\n        [theme]="inst.s.theme"\n        [themeVariant]="inst.s.themeVariant">\n      </mbsc-icon>\n    </mbsc-button>\n  </ng-container>'}]}];return MbscCalendarNav}(CalendarSubscriber);var MbscCalendarHeaderModule=/*#__PURE__*/function(){function MbscCalendarHeaderModule(){}MbscCalendarHeaderModule.decorators=[{type:core.NgModule,args:[{declarations:[CalendarSubscriber,MbscCalendarNav,MbscCalendarNext,MbscCalendarPrev,MbscCalendarToday],exports:[MbscCalendarNav,MbscCalendarNext,MbscCalendarPrev,MbscCalendarToday],imports:[common.CommonModule,MbscButtonModule,MbscIconModule]}]}];return MbscCalendarHeaderModule}();var MbscPickerModule=/*#__PURE__*/function(){function MbscPickerModule(){}MbscPickerModule.decorators=[{type:core.NgModule,args:[{declarations:[PickerBase],exports:[],imports:[common.CommonModule]}]}];return MbscPickerModule}();var CalendarBase=/*#__PURE__*/function(_super){__extends(CalendarBase,_super);function CalendarBase(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this._onDayClick=function(args){var s=_this.s;var date=addTimezone(s,args.date);var d=+date;if(args.disabled){return}if(s.selectMultiple){var tempValueRep=_this._tempValueRep;if(tempValueRep[d]){delete tempValueRep[d];}else if(s.selectMax!==UNDEFINED?Object.keys(tempValueRep).length<s.selectMax:true){tempValueRep[d]=date;}_this._tempValueRep=__assign({},tempValueRep);}else {if(!s.selectRange){_this._tempValueRep={};}_this._tempValueRep[d]=date;}_this._hook("onCellClick",args);_this._setOrUpdate();};_this._onTodayClick=function(){var date=new Date;var d=+date;if(!_this.s.selectRange&&!_this.s.selectMultiple){_this._tempValueRep={};_this._tempValueRep[d]=date;_this._setOrUpdate();}};return _this}CalendarBase.prototype._valueEquals=function(v1,v2){return dateValueEquals(v1,v2,this.s)};CalendarBase.prototype._shouldValidate=function(s,prevS){return s.dataTimezone!==prevS.dataTimezone||s.displayTimezone!==prevS.displayTimezone};CalendarBase.prototype._copy=function(value){return __assign({},value)};CalendarBase.prototype._format=function(value){var s=this.s;var ret=[];for(var i in value){if(value[i]!==UNDEFINED&&value[i]!==null){ret.push(formatDate(s.dateFormat,new Date(+value[i]),s));}}return s.selectMultiple||s.selectRange?ret.join(", "):ret[0]};CalendarBase.prototype._parse=function(value){var s=this.s;var isRange=s.selectRange;var ret={};var values=[];if(isString(value)){values=value.split(",");}else if(isArray(value)){values=value;}else if(value&&!isArray(value)){values=[value];}for(var _i=0,values_1=values;_i<values_1.length;_i++){var val=values_1[_i];if(val!==null){var date=makeDate(val,s,s.dateFormat);var key=isRange?+date:+getDateOnly(date);ret[key]=date;}}return ret};CalendarBase.prototype._get=function(value){var s=this.s;var isRange=s.selectRange;if(this.s.selectMultiple||isRange){var valueArray=[];for(var _i=0,_a=Object.keys(value);_i<_a.length;_i++){var v=_a[_i];valueArray.push(createDate(s,+value[v]));}return valueArray}var valueKeys=Object.keys(value||{});if(!valueKeys.length){return null}return createDate(s,value[valueKeys[0]])};CalendarBase.defaults=__assign({},calendarViewDefaults,{calendarScroll:"horizontal",calendarType:"month",selectedText:"{count} selected",showControls:true,showOnClick:true,weeks:1});CalendarBase._name="Calendar";CalendarBase.decorators=[{type:core.Directive,args:[{selector:"[mbsc-sc-b]"}]}];return CalendarBase}(PickerBase);var CalendarDayBase=/*#__PURE__*/function(_super){__extends(CalendarDayBase,_super);function CalendarDayBase(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this._onClick=function(ev){_this._cellClick("onDayClick",ev);};_this._onRightClick=function(ev){_this._cellClick("onDayRightClick",ev);};_this._onLabelClick=function(args){_this._labelClick("onLabelClick",args);};_this._onLabelDoubleClick=function(args){_this._labelClick("onLabelDoubleClick",args);};_this._onLabelRightClick=function(args){_this._labelClick("onLabelRightClick",args);};_this._onLabelHoverIn=function(args){_this._labelClick("onLabelHoverIn",args);};_this._onLabelHoverOut=function(args){_this._labelClick("onLabelHoverOut",args);};return _this}CalendarDayBase.prototype._mounted=function(){var _this=this;var allowCreate;var allowStart;var touchTimer;this._unlisten=gestureListener(this._el,{click:true,onBlur:function(){_this.setState({hasFocus:false});},onDoubleClick:function(args){var s=_this.s;if(s.clickToCreate&&s.clickToCreate!=="single"&&s.labels&&!s.disabled&&s.display){_this._hook("onLabelUpdateStart",args);_this._hook("onLabelUpdateEnd",args);}_this._cellClick("onDayDoubleClick",args.domEvent);},onEnd:function(args){if(allowCreate){args.domEvent.preventDefault();_this._hook("onLabelUpdateEnd",args);allowCreate=false;}clearTimeout(touchTimer);allowCreate=false;allowStart=false;},onFocus:function(){_this.setState({hasFocus:true});},onHoverIn:function(ev){var s=_this.s;if(!s.disabled){_this.setState({hasHover:true});}_this._hook("onHoverIn",{date:new Date(s.date),domEvent:ev,hidden:!s.display,outer:s.outer,target:_this._el});},onHoverOut:function(ev){var s=_this.s;_this.setState({hasHover:false});_this._hook("onHoverOut",{date:new Date(s.date),domEvent:ev,hidden:!s.display,outer:s.outer,target:_this._el});},onKeyDown:function(ev){switch(ev.keyCode){case ENTER:case SPACE:ev.preventDefault();_this._onClick(ev);break}},onMove:function(args){if(allowCreate&&_this.s.dragToCreate){args.domEvent.preventDefault();_this._hook("onLabelUpdateMove",args);}else if(allowStart&&_this.s.dragToCreate&&(Math.abs(args.deltaX)>7||Math.abs(args.deltaY)>7)){allowCreate=!args.isTouch;_this._hook("onLabelUpdateStart",args);}else {clearTimeout(touchTimer);}},onStart:function(args){var s=_this.s;args.create=true;if(!s.disabled&&(s.dragToCreate||s.clickToCreate)&&s.labels&&!allowCreate){var label=closest(args.domEvent.target,".mbsc-calendar-text",_this._el);if(!label){if(args.isTouch&&s.dragToCreate){touchTimer=setTimeout((function(){_this._hook("onLabelUpdateStart",args);_this._hook("onLabelUpdateModeOn",args);allowCreate=true;}),350);}else if(s.clickToCreate==="single"){_this._hook("onLabelUpdateStart",args);allowCreate=true;}else {allowStart=!args.isTouch;}}}}});};CalendarDayBase.prototype._render=function(s,state){var now=createDate(s);var d=s.date;var colors=s.colors,display=s.display,dragData=s.dragData,hoverEnd=s.hoverEnd,hoverStart=s.hoverStart,labels=s.labels,rangeEnd=s.rangeEnd,rangeStart=s.rangeStart;var date=new Date(d);var dateKey=getDateStr(date);var isToday=isSameDay(now,date);var events=labels&&labels.events;var color=colors&&colors[0];var background=color&&color.background;var highlight=color&&color.highlight;var cellClass="";var highlightClass="";this._draggedLabel=dragData&&dragData.draggedDates&&dragData.draggedDates[dateKey];this._draggedLabelOrig=dragData&&dragData.originDates&&dragData.originDates[dateKey];this._todayClass=isToday?" mbsc-calendar-today":"";this._cellStyles=background&&display?{backgroundColor:background,color:getTextColor(background)}:UNDEFINED;this._circleStyles=highlight?{backgroundColor:highlight,color:getTextColor(color.highlight)}:UNDEFINED;this._ariaLabel=s.type==="day"?(isToday?s.todayText+", ":"")+s.day+", "+s.month+" "+s.text+", "+s.year:s.type==="month"?s.month:"";if(display){if(rangeStart&&d>=rangeStart&&d<=(rangeEnd||rangeStart)||rangeEnd&&d<=rangeEnd&&d>=(rangeStart||rangeEnd)){highlightClass=" mbsc-range-day"+(d===(rangeStart||rangeEnd)?" mbsc-range-day-start":"")+(d===(rangeEnd||rangeStart)?" mbsc-range-day-end":"");}if(hoverStart&&hoverEnd&&d>=hoverStart&&d<=hoverEnd){highlightClass+=" mbsc-range-hover"+(d===hoverStart?" mbsc-range-hover-start mbsc-hover":"")+(d===hoverEnd?" mbsc-range-hover-end mbsc-hover":"");}}if(s.marks){s.marks.forEach((function(e){cellClass+=e.cellCssClass?" "+e.cellCssClass:"";}));}if(colors){colors.forEach((function(e){cellClass+=e.cellCssClass?" "+e.cellCssClass:"";}));}if(events){events.forEach((function(e){cellClass+=e.cellCssClass?" "+e.cellCssClass:"";}));}this._cssClass="mbsc-calendar-cell mbsc-flex-1-0-0 mbsc-calendar-"+s.type+this._theme+this._rtl+this._hb+cellClass+(labels?" mbsc-calendar-day-labels":"")+(colors?" mbsc-calendar-day-colors":"")+(s.outer?" mbsc-calendar-day-outer":"")+(s.hasMarks?" mbsc-calendar-day-marked":"")+(s.disabled?" mbsc-disabled":"")+(display?"":" mbsc-calendar-day-empty")+(s.selected?" mbsc-selected":"")+(state.hasFocus?" mbsc-focus":"")+(state.hasHover&&(d===hoverStart||d===hoverEnd||!hoverStart&&!hoverEnd)?" mbsc-hover":"")+(this._draggedLabel?" mbsc-calendar-day-highlight":"")+highlightClass;this._data={date:date,events:events,selected:s.selected};};CalendarDayBase.prototype._destroy=function(){this._unlisten();};CalendarDayBase.prototype._cellClick=function(name,domEvent){var s=this.s;if(s.display){this._hook(name,{date:new Date(s.date),disabled:s.disabled,domEvent:domEvent,outer:s.outer,selected:s.selected,source:"calendar",target:this._el});}};CalendarDayBase.prototype._labelClick=function(name,args){var s=this.s;args.date=new Date(s.date);args.labels=s.labels.events;this._hook(name,args);};CalendarDayBase.decorators=[{type:core.Directive,args:[{selector:"[mbsc-calday-b]"}]}];return CalendarDayBase}(BaseComponent);var stateObservables={};var CalendarLabelBase=/*#__PURE__*/function(_super){__extends(CalendarLabelBase,_super);function CalendarLabelBase(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this._onClick=function(ev){if(_this._isDrag){ev.stopPropagation();}else {_this._triggerEvent("onClick",ev);var s=_this.s;var observable=stateObservables[s.id];if(observable&&s.selected){observable.next({hasFocus:false});}}};_this._onRightClick=function(ev){_this._triggerEvent("onRightClick",ev);};_this._onDocTouch=function(ev){unlisten(_this._doc,TOUCH_START,_this._onDocTouch);unlisten(_this._doc,MOUSE_DOWN,_this._onDocTouch);_this._isDrag=false;_this._hook("onDragModeOff",{data:_this.s.event});};_this._updateState=function(args){if(_this.s.showText){_this.setState(args);}};_this._triggerEvent=function(name,ev){_this._hook(name,{domEvent:ev,label:_this.s.event,target:_this._el});};return _this}CalendarLabelBase.prototype._mounted=function(){var _this=this;var opt=this.s;var id=opt.id;var isPicker=opt.isPicker;var resizeDir;var observable=stateObservables[id];if(!observable){observable=new Observable;stateObservables[id]=observable;}this._unsubscribe=observable.subscribe(this._updateState);this._doc=getDocument(this._el);this._unlisten=gestureListener(this._el,{keepFocus:true,onBlur:function(){if(!isPicker){observable.next({hasFocus:false});}},onDoubleClick:function(ev){ev.domEvent.stopPropagation();_this._hook("onDoubleClick",{domEvent:ev.domEvent,label:_this.s.event,target:_this._el});},onEnd:function(ev){if(_this._isDrag){var s=_this.s;var args=__assign({},ev);args.domEvent.preventDefault();args.data=s.event;if(s.resize&&resizeDir){args.resize=true;args.direction=resizeDir;}else if(s.drag){args.drag=true;}_this._hook("onDragEnd",args);if(!s.isUpdate){_this._isDrag=false;}}clearTimeout(_this._touchTimer);resizeDir=UNDEFINED;},onFocus:function(){if(!isPicker){observable.next({hasFocus:true});}},onHoverIn:function(ev){if(_this._isDrag||isPicker){return}observable.next({hasHover:true});_this._triggerEvent("onHoverIn",ev);},onHoverOut:function(ev){observable.next({hasHover:false});_this._triggerEvent("onHoverOut",ev);},onKeyDown:function(ev){var event=_this.s.event;switch(ev.keyCode){case ENTER:case SPACE:_this._el.click();ev.preventDefault();break;case BACKSPACE:case DELETE:if(event&&event.editable!==false){_this._hook("onDelete",{domEvent:ev,event:event,source:"calendar"});}break}},onMove:function(ev){var s=_this.s;var args=__assign({},ev);args.data=s.event;if(resizeDir){args.resize=true;args.direction=resizeDir;}else if(s.drag){args.drag=true;}else {return}if(!s.event||s.event.editable===false){return}if(_this._isDrag){args.domEvent.preventDefault();_this._hook("onDragMove",args);}else if(Math.abs(args.deltaX)>7||Math.abs(args.deltaY)>7){clearTimeout(_this._touchTimer);if(!args.isTouch){_this._isDrag=true;_this._hook("onDragStart",args);}}},onStart:function(ev){var s=_this.s;var args=__assign({},ev);var target=args.domEvent.target;args.data=s.event;if(s.resize&&target.classList.contains("mbsc-calendar-label-resize")){resizeDir=target.classList.contains("mbsc-calendar-label-resize-start")?"start":"end";args.resize=true;args.direction=resizeDir;}else if(s.drag){args.drag=true;}else {return}if(!s.event||s.event.editable===false){return}if(_this._isDrag||!args.isTouch){args.domEvent.stopPropagation();}if(_this._isDrag){_this._hook("onDragStart",args);}else if(args.isTouch){_this._touchTimer=setTimeout((function(){_this._hook("onDragModeOn",args);_this._hook("onDragStart",args);_this._isDrag=true;}),350);}}});if(this._isDrag){listen(this._doc,TOUCH_START,this._onDocTouch);listen(this._doc,MOUSE_DOWN,this._onDocTouch);}};CalendarLabelBase.prototype._destroy=function(){if(this._unsubscribe){var id=this.s.id;var observable=stateObservables[id];if(observable){observable.unsubscribe(this._unsubscribe);if(!observable.nr){delete stateObservables[id];}}}if(this._unlisten){this._unlisten();}unlisten(this._doc,TOUCH_START,this._onDocTouch);unlisten(this._doc,MOUSE_DOWN,this._onDocTouch);};CalendarLabelBase.prototype._render=function(s,state){var event=s.event;var d=new Date(s.date);var render=s.render||s.renderContent;var start;var end;var isMultiDay=false;var isStart;var isEnd;var isEndStyle;var text;this._isDrag=this._isDrag||s.isUpdate;this._content=UNDEFINED;this._title=s.more||s.count||!s.showEventTooltip?UNDEFINED:htmlToText(event.tooltip||event.title||event.text);this._tabIndex=s.isActiveMonth&&s.showText&&!s.count&&!s.isPicker?0:-1;if(event){var allDay=event.allDay;var tzOpt=allDay?UNDEFINED:s;start=event.start?makeDate(event.start,tzOpt):null;end=event.end?makeDate(event.end,tzOpt):null;var endTime=start&&end&&getEndDate(s,allDay,start,end,true);var firstDayOfWeek=getFirstDayOfWeek(d,s);var lastDayOfWeek=addDays(firstDayOfWeek,7);var lastDay=s.lastDay&&s.lastDay<lastDayOfWeek?s.lastDay:lastDayOfWeek;isMultiDay=start&&endTime&&!isSameDay(start,endTime);isStart=!isMultiDay||start&&isSameDay(start,d);isEnd=!isMultiDay||endTime&&isSameDay(endTime,d);isEndStyle=!isMultiDay||(s.showText?endTime<lastDay:isEnd);this._hasResizeStart=s.resize&&isStart;this._hasResizeEnd=s.resize&&isEndStyle;var color=event.color;if(!color&&event.resource&&s.resourcesMap){var resource=s.resourcesMap[isArray(event.resource)?event.resource[0]:event.resource];color=resource&&resource.color;}if(s.showText){this._textColor=color?getTextColor(color):UNDEFINED;}this._color=s.render||s.template?UNDEFINED:event.textColor&&!color?"transparent":color;}if(event&&s.showText&&(render||s.contentTemplate||s.template)){var fillsAllDay=event.allDay||!start||isMultiDay&&!isStart&&!isEnd;this._data={end:!fillsAllDay&&isEnd&&end?formatDate(s.timeFormat,end,s):"",id:event.id,isMultiDay:isMultiDay,original:event,start:!fillsAllDay&&isStart&&start?formatDate(s.timeFormat,start,s):"",title:this._title};if(render){var content=render(this._data);if(isString(content)){text=content;}else {this._content=content;}}}else {text=s.more||s.count||(s.showText?event.title||event.text||"":"");}if(text!==this._text){this._text=text;this._html=text?this._safeHtml(text):UNDEFINED;this._shouldEnhance=text&&event&&s.showText&&!!render;}this._cssClass="mbsc-calendar-text"+this._theme+this._rtl+(state.hasFocus&&!s.inactive&&!s.selected||s.selected&&s.showText?" mbsc-calendar-label-active ":"")+(state.hasHover&&!s.inactive&&!this._isDrag?" mbsc-calendar-label-hover":"")+(s.more?" mbsc-calendar-text-more":s.render||s.template?" mbsc-calendar-custom-label":" mbsc-calendar-label")+(s.inactive?" mbsc-calendar-label-inactive":"")+(s.isUpdate?" mbsc-calendar-label-dragging":"")+(s.hidden?" mbsc-calendar-label-hidden":"")+(isStart?" mbsc-calendar-label-start":"")+(isEndStyle?" mbsc-calendar-label-end":"")+(event&&event.editable===false?" mbsc-readonly-event":"");};CalendarLabelBase.decorators=[{type:core.Directive,args:[{selector:"[mbsc-callbl-b]"}]}];return CalendarLabelBase}(BaseComponent);var CalendarViewBase=/*#__PURE__*/function(_super){__extends(CalendarViewBase,_super);function CalendarViewBase(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.state={height:"sm",pageSize:0,pickerSize:0,width:"sm"};_this._dim={};_this._months=[1,2,3];_this._title=[];_this.MONTH_VIEW=MONTH_VIEW;_this.YEAR_VIEW=YEAR_VIEW;_this.MULTI_YEAR_VIEW=MULTI_YEAR_VIEW;_this.nextPage=function(){_this._prevDocClick();switch(_this._view){case MULTI_YEAR_VIEW:_this._activeYearsChange(1);break;case YEAR_VIEW:_this._activeYearChange(1);break;default:_this._activeChange(1);}};_this.prevPage=function(){_this._prevDocClick();switch(_this._view){case MULTI_YEAR_VIEW:_this._activeYearsChange(-1);break;case YEAR_VIEW:_this._activeYearChange(-1);break;default:_this._activeChange(-1);}};_this._changeView=function(newView){var s=_this.s;var view=_this._view;var hasPicker=_this._hasPicker;var selectView=s.selectView;var isYearView=(s.showCalendar?s.calendarType:s.eventRange)==="year";if(!newView){switch(view){case MONTH_VIEW:newView=MULTI_YEAR_VIEW;break;case MULTI_YEAR_VIEW:newView=YEAR_VIEW;break;default:newView=hasPicker||selectView===YEAR_VIEW?MULTI_YEAR_VIEW:MONTH_VIEW;}if(view===MULTI_YEAR_VIEW&&isYearView){newView=MONTH_VIEW;}}var skipAnimation=hasPicker&&newView===selectView;_this.setState({view:newView,viewClosing:skipAnimation?UNDEFINED:view,viewOpening:skipAnimation?UNDEFINED:newView});};_this._onDayHoverIn=function(ev){if(!_this._disableHover){_this._hook("onDayHoverIn",ev);_this._hoverTimer=setTimeout((function(){var key=getDateStr(ev.date);if(_this._labels){ev.labels=_this._labels[key];}if(_this._marked){ev.marked=_this._marked[key];}_this._isHover=true;_this._hook("onCellHoverIn",ev);}),150);}};_this._onDayHoverOut=function(ev){if(!_this._disableHover){_this._hook("onDayHoverOut",ev);clearTimeout(_this._hoverTimer);if(_this._isHover){var key=getDateStr(ev.date);if(_this._labels){ev.labels=_this._labels[key];}if(_this._marked){ev.marked=_this._marked[key];}_this._isHover=false;_this._hook("onCellHoverOut",ev);}}};_this._onLabelClick=function(args){_this._isLabelClick=true;_this._hook("onLabelClick",args);};_this._onDayClick=function(args){_this._shouldFocus=!_this._isLabelClick;_this._prevAnim=false;_this._prevPageChange=_this.s.noOuterChange;_this._isLabelClick=false;_this._hook("onDayClick",args);};_this._onTodayClick=function(args){_this._prevAnim=false;_this._hook("onActiveChange",{date:+removeTimezone(createDate(_this.s)),today:true});_this._hook("onTodayClick",{});};_this._onMonthClick=function(args){var d=args.date;var s=_this.s;if(s.selectView===YEAR_VIEW){_this._hook("onDayClick",args);}else {var newIndex=getPageIndex(d,s)-_this._offset;_this._changeView(MONTH_VIEW);_this._shouldFocus=true;_this._prevAnim=!_this._hasPicker;_this._hook("onActiveChange",{date:+d,nav:true,pageChange:newIndex!==_this._pageIndex});}};_this._onYearClick=function(args){var d=args.date;var s=_this.s;var view=s.selectView;if(view===MULTI_YEAR_VIEW){_this._hook("onDayClick",args);}else {_this._shouldFocus=true;_this._prevAnim=view===YEAR_VIEW;_this._activeMonth=+d;_this._changeView();if((s.showCalendar?s.calendarType:s.eventRange)==="year"){var newIndex=getPageIndex(d,s)-_this._offset;_this._hook("onActiveChange",{date:+d,pageChange:newIndex!==_this._pageIndex});}}};_this._onPageChange=function(args){_this._isSwipeChange=true;_this._activeChange(args.diff);};_this._onYearPageChange=function(args){_this._activeYearChange(args.diff);};_this._onYearsPageChange=function(args){_this._activeYearsChange(args.diff);};_this._onAnimationEnd=function(args){_this._disableHover=false;if(_this._isIndexChange){_this._pageLoaded();_this._isIndexChange=false;}};_this._onStart=function(){clearTimeout(_this._hoverTimer);};_this._onGestureStart=function(args){_this._disableHover=true;_this._hook("onGestureStart",args);};_this._onGestureEnd=function(args){_this._prevDocClick();};_this._onPickerClose=function(){_this.setState({view:MONTH_VIEW});};_this._onPickerOpen=function(){var pageHeight=_this._pickerCont.clientHeight;var pageWidth=_this._pickerCont.clientWidth;_this.setState({pickerSize:_this._isVertical?pageHeight:pageWidth});};_this._onPickerBtnClick=function(ev){if(_this._view===MONTH_VIEW){_this._pickerBtn=ev.currentTarget;}_this._prevDocClick();_this._changeView();};_this._onDocClick=function(ev){var view=_this.s.selectView;if(!_this._prevClick&&!_this._hasPicker&&_this._view!==view&&_this._pickerCont&&!_this._pickerCont.contains(ev.target)){_this._changeView(view);}};_this._onViewAnimationEnd=function(){if(_this.state.viewClosing){_this.setState({viewClosing:UNDEFINED});}if(_this.state.viewOpening){_this.setState({viewOpening:UNDEFINED});}};_this._onResize=function(){if(!_this._body||!isBrowser){return}var s=_this.s;var state=_this.state;var showCalendar=s.showCalendar;var body=showCalendar&&_this.__getTextParam?_this._body.querySelector(".mbsc-calendar-body-inner"):_this._body;var totalWidth=_this._el.offsetWidth;var totalHeight=_this._el.offsetHeight;var pageHeight=body.clientHeight;var pageWidth=body.clientWidth;var pageSize=_this._isVertical?pageHeight:pageWidth;var pickerSize=_this._hasPicker?state.pickerSize:pageSize;var ready=showCalendar!==UNDEFINED;var width="sm";var height="sm";var maxLabels=0;var hasScrollY=false;var cellTextHeight=0;var labelHeight=0;if(s.responsiveStyle&&!_this._isGrid){if(pageHeight>300){height="md";}if(pageWidth>767){width="md";}}if(width!==state.width||height!==state.height){_this._shouldCheckSize=true;_this.setState({width:width,height:height});}else {if(_this._labels&&showCalendar&&_this.__getTextParam){var placeholder=body.querySelector(".mbsc-calendar-text");var cell=body.querySelector(".mbsc-calendar-day-inner");var labelsCont=cell.querySelector(".mbsc-calendar-labels");var txtMargin=placeholder?getDimension(placeholder,"marginBottom"):2;var txtHeight=placeholder?placeholder.offsetHeight:18;cellTextHeight=labelsCont.offsetTop;hasScrollY=body.scrollHeight>body.clientHeight;labelHeight=txtHeight+txtMargin;maxLabels=Math.max(1,floor((cell.clientHeight-cellTextHeight)/labelHeight));}_this._hook("onResize",{height:totalHeight,target:_this._el,width:totalWidth});_this.setState({cellTextHeight:cellTextHeight,hasScrollY:hasScrollY,labelHeight:labelHeight,maxLabels:maxLabels,pageSize:pageSize,pickerSize:pickerSize,ready:ready});}};_this._onKeyDown=function(ev){var s=_this.s;var view=_this._view;var active=view===MONTH_VIEW?_this._active:_this._activeMonth;var activeDate=new Date(active);var year=s.getYear(activeDate);var month=s.getMonth(activeDate);var day=s.getDay(activeDate);var getDate=s.getDate;var weeks=s.weeks;var isMonthView=s.calendarType==="month";var newDate;if(view===MULTI_YEAR_VIEW){var newYear=void 0;switch(ev.keyCode){case LEFT_ARROW:newYear=year-1*_this._rtlNr;break;case RIGHT_ARROW:newYear=year+1*_this._rtlNr;break;case UP_ARROW:newYear=year-3;break;case DOWN_ARROW:newYear=year+3;break;case HOME:newYear=_this._getPageYears(_this._yearsIndex);break;case END:newYear=_this._getPageYears(_this._yearsIndex)+11;break;case PAGE_UP:newYear=year-12;break;case PAGE_DOWN:newYear=year+12;break}if(newYear&&_this._minYears<=newYear&&_this._maxYears>=newYear){ev.preventDefault();_this._shouldFocus=true;_this._prevAnim=false;_this._activeMonth=+getDate(newYear,0,1);_this.forceUpdate();}}else if(view===YEAR_VIEW){switch(ev.keyCode){case LEFT_ARROW:newDate=getDate(year,month-1*_this._rtlNr,1);break;case RIGHT_ARROW:newDate=getDate(year,month+1*_this._rtlNr,1);break;case UP_ARROW:newDate=getDate(year,month-3,1);break;case DOWN_ARROW:newDate=getDate(year,month+3,1);break;case HOME:newDate=getDate(year,0,1);break;case END:newDate=getDate(year,11,1);break;case PAGE_UP:newDate=getDate(year-1,month,1);break;case PAGE_DOWN:newDate=getDate(year+1,month,1);break}if(newDate&&_this._minYear<=newDate&&_this._maxYear>=newDate){ev.preventDefault();_this._shouldFocus=true;_this._prevAnim=false;_this._activeMonth=+newDate;_this.forceUpdate();}}else if(view===MONTH_VIEW){switch(ev.keyCode){case LEFT_ARROW:newDate=getDate(year,month,day-1*_this._rtlNr);break;case RIGHT_ARROW:newDate=getDate(year,month,day+1*_this._rtlNr);break;case UP_ARROW:newDate=getDate(year,month,day-7);break;case DOWN_ARROW:newDate=getDate(year,month,day+7);break;case HOME:newDate=getDate(year,month,1);break;case END:newDate=getDate(year,month+1,0);break;case PAGE_UP:newDate=ev.altKey?getDate(year-1,month,day):isMonthView?getDate(year,month-1,day):getDate(year,month,day-weeks*7);break;case PAGE_DOWN:newDate=ev.altKey?getDate(year+1,month,day):isMonthView?getDate(year,month+1,day):getDate(year,month,day+weeks*7);break}if(newDate&&_this._minDate<=newDate&&_this._maxDate>=newDate){ev.preventDefault();var newIndex=getPageIndex(newDate,s)-_this._offset;_this._shouldFocus=true;_this._prevAnim=false;_this._pageChange=s.noOuterChange&&newIndex!==_this._pageIndex;_this._hook("onActiveChange",{date:+newDate,pageChange:_this._pageChange});}}};return _this}CalendarViewBase.prototype._getPageDay=function(pageIndex){return +getFirstPageDay(pageIndex+this._offset,this.s)};CalendarViewBase.prototype._getPageStyle=function(index,offset,pageNr){var _a;return _a={},_a[(jsPrefix?jsPrefix+"T":"t")+"ransform"]="translate"+this._axis+"("+(index-offset)*100*this._rtlNr+"%)",_a.width=100/(pageNr||1)+"%",_a};CalendarViewBase.prototype._getPageYear=function(pageIndex){var s=this.s;var refDate=s.refDate?makeDate(s.refDate):REF_DATE;var year=s.getYear(refDate);return year+pageIndex+this._yearOffset};CalendarViewBase.prototype._getPageYears=function(pageIndex){var s=this.s;var refDate=s.refDate?makeDate(s.refDate):REF_DATE;var year=s.getYear(refDate);return year+(pageIndex+this._yearsOffset)*12};CalendarViewBase.prototype._getPickerClass=function(view){var animName;var pickerName=view===this.s.selectView?" mbsc-calendar-picker-main":"";var baseName="mbsc-calendar-picker";var hasPicker=this._hasPicker;var _a=this.state,viewClosing=_a.viewClosing,viewOpening=_a.viewOpening;switch(view){case MONTH_VIEW:animName=hasPicker?"":(viewOpening===MONTH_VIEW?"in-down":"")+(viewClosing===MONTH_VIEW?"out-down":"");break;case MULTI_YEAR_VIEW:animName=hasPicker&&viewClosing===MONTH_VIEW?"":(viewOpening===MULTI_YEAR_VIEW?"in-up":"")+(viewClosing===MULTI_YEAR_VIEW?"out-up":"");break;default:animName=hasPicker&&viewOpening===MONTH_VIEW?"":(viewOpening===YEAR_VIEW?viewClosing===MULTI_YEAR_VIEW?"in-down":"in-up":"")+(viewClosing===YEAR_VIEW?viewOpening===MULTI_YEAR_VIEW?"out-down":"out-up":"");}return baseName+pickerName+(hasAnimation&&animName?" "+baseName+"-"+animName:"")};CalendarViewBase.prototype._isNextDisabled=function(isModalPicker){if(!this._hasPicker||isModalPicker){var view=this._view;if(view===MULTI_YEAR_VIEW){return this._yearsIndex+1>this._maxYearsIndex}if(view===YEAR_VIEW){return this._yearIndex+1>this._maxYearIndex}}return this._pageIndex+1>this._maxIndex};CalendarViewBase.prototype._isPrevDisabled=function(isModalPicker){if(!this._hasPicker||isModalPicker){var view=this._view;if(view===MULTI_YEAR_VIEW){return this._yearsIndex-1<this._minYearsIndex}if(view===YEAR_VIEW){return this._yearIndex-1<this._minYearIndex}}return this._pageIndex-1<this._minIndex};CalendarViewBase.prototype._render=function(s,state){var getDate=s.getDate;var getYear=s.getYear;var getMonth=s.getMonth;var showCalendar=s.showCalendar;var calendarType=s.calendarType;var eventRange=s.eventRange;var eventRangeSize=s.eventRangeSize||1;var firstWeekDay=s.firstDay;var isWeekView=calendarType==="week";var isMonthView=calendarType==="month";var isYearView=calendarType==="year";var size=isYearView?12:s.size||1;var isGrid=size>1&&!isWeekView;var weeks=showCalendar?isWeekView?s.weeks:6:0;var active=s.activeDate||this._active||+new Date;var activeChanged=active!==this._active;var d=new Date(active);var prevProps=this._prevS;var dateFormat=s.dateFormat;var monthNames=s.monthNames;var yearSuffix=s.yearSuffix;var variableRow=isNumeric(s.labelList)?+s.labelList+1:s.labelList==="all"?-1:0;var labelListingChanged=s.labelList!==prevProps.labelList;var viewChanged=calendarType!==prevProps.calendarType||eventRange!==prevProps.eventRange||firstWeekDay!==prevProps.firstDay||s.eventRangeSize!==prevProps.eventRangeSize||s.refDate!==prevProps.refDate||s.showCalendar!==prevProps.showCalendar||s.weeks!==prevProps.weeks;var pageIndex=this._pageChange||this._pageIndex===UNDEFINED||viewChanged||!this._prevPageChange&&activeChanged&&(active<+this._firstDay||active>=+this._lastDay)?getPageIndex(d,s):this._pageIndex+this._offset;if(weeks!==this._weeks||this._pageIndex===UNDEFINED){this._offset=pageIndex;}if(activeChanged){this._activeMonth=active;}var yearsPageIndex=getYearsIndex(new Date(this._activeMonth),s);var yearPageIndex=getYearIndex(new Date(this._activeMonth),s);if(activeChanged){this._yearsOffset=yearsPageIndex;this._yearOffset=yearPageIndex;}this._view=state.view||s.selectView;this._yearsIndex=yearsPageIndex-this._yearsOffset;this._yearIndex=yearPageIndex-this._yearOffset;if(this._view===YEAR_VIEW){this._viewTitle=this._getPageYear(this._yearIndex)+"";}else if(this._view===MULTI_YEAR_VIEW){var startYear=this._getPageYears(this._yearsIndex);this._viewTitle=startYear+" - "+(startYear+11);}var pageOffset=0;var pageBuffer=isGrid?0:1;var pageNr=isGrid?1:getPageNr(s.pages,state.pageSize);var isVertical=s.calendarScroll==="vertical"&&s.pages!=="auto"&&(s.pages===UNDEFINED||s.pages===1);var showOuter=s.showOuterDays!==UNDEFINED?s.showOuterDays:!isVertical&&pageNr<2&&(isWeekView||!size||size<2);var firstDay=getFirstPageDay(pageIndex,s);var lastDay=getFirstPageDay(pageIndex+pageNr,s);if(!showCalendar&&eventRange==="week"&&s.startDay!==UNDEFINED&&s.endDay!==UNDEFINED){firstDay=addDays(firstDay,s.startDay-firstWeekDay+(s.startDay<firstWeekDay?7:0));lastDay=addDays(firstDay,7*eventRangeSize+s.endDay-s.startDay+1-(s.endDay<s.startDay?0:7));}var firstPageDay=showCalendar&&showOuter?getFirstDayOfWeek(firstDay,s):firstDay;var lastPage=isGrid?getDate(getYear(lastDay),getMonth(lastDay)-1,1):getFirstPageDay(pageIndex+pageNr-1,s);var lastPageDay=showCalendar&&showOuter?addDays(getFirstDayOfWeek(lastPage,s),weeks*7):lastDay;var start=showCalendar?getFirstDayOfWeek(getFirstPageDay(pageIndex-pageOffset-pageBuffer,s),s):firstDay;var last=showCalendar?getFirstDayOfWeek(getFirstPageDay(pageIndex-pageOffset+pageNr+pageBuffer-1,s),s):lastDay;var end=showCalendar?addDays(isGrid?getFirstDayOfWeek(lastPage,s):last,weeks*7):lastDay;var monthIndex=dateFormat.search(/m/i);var yearIndex=dateFormat.search(/y/i);if(!isEmpty(s.min)){if(prevProps.min!==s.min||s.getDate!==prevProps.getDate){var min=makeDate(s.min);this._minDate=getDateOnly(min);this._minYear=getDate(getYear(min),getMonth(min),1);this._minYears=getYear(min);}this._minIndex=getPageIndex(this._minDate,s)-this._offset;this._minYearIndex=getYearIndex(this._minDate,s)-this._yearOffset;this._minYearsIndex=getYearsIndex(this._minDate,s)-this._yearsOffset;}else {this._minDate=-Infinity;this._minIndex=-Infinity;this._minYears=-Infinity;this._minYearsIndex=-Infinity;this._minYear=-Infinity;this._minYearIndex=-Infinity;}if(!isEmpty(s.max)){if(prevProps.max!==s.max||s.getDate!==prevProps.getDate){var max=makeDate(s.max);this._maxDate=max;this._maxYear=getDate(getYear(max),getMonth(max)+1,1);this._maxYears=getYear(this._maxDate);}this._maxIndex=getPageIndex(this._maxDate,s)-this._offset;this._maxYearIndex=getYearIndex(this._maxDate,s)-this._yearOffset;this._maxYearsIndex=getYearsIndex(this._maxDate,s)-this._yearsOffset;}else {this._maxDate=Infinity;this._maxIndex=Infinity;this._maxYears=Infinity;this._maxYearsIndex=Infinity;this._maxYear=Infinity;this._maxYearIndex=Infinity;}if(isGrid){this._monthsMulti=[];if(pageIndex!==UNDEFINED){var columns=floor(state.pageSize/PAGE_WIDTH)||1;while(size%columns){columns--;}for(var i=0;i<size/columns;++i){var rowItems=[];for(var j=0;j<columns;++j){rowItems.push(+getDate(getYear(firstDay),getMonth(firstDay)+i*columns+j,1));}this._monthsMulti.push(rowItems);}}}if(calendarType!==prevProps.calendarType||s.theme!==prevProps.theme||s.calendarScroll!==prevProps.calendarScroll||s.hasContent!==prevProps.hasContent||s.showCalendar!==prevProps.showCalendar||s.showWeekNumbers!==prevProps.showWeekNumbers||s.weeks!==prevProps.weeks||labelListingChanged){this._shouldCheckSize=true;}if(prevProps.width!==s.width||prevProps.height!==s.height){this._dim={height:addPixel(s.height),width:addPixel(s.width)};}this._cssClass="mbsc-calendar mbsc-font"+this._theme+this._rtl+(state.ready?"":" mbsc-calendar-hidden")+(isGrid?" mbsc-calendar-grid-view":" mbsc-calendar-height-"+state.height+" mbsc-calendar-width-"+state.width)+" "+s.cssClass;this._dayNames=state.width==="sm"||isGrid?s.dayNamesMin:s.dayNamesShort;this._isSwipeChange=false;this._firstDay=firstDay;this._firstPageDay=firstPageDay;this._lastDay=lastDay;this._lastPageDay=lastPageDay;this._yearFirst=yearIndex<monthIndex;this._pageNr=pageNr;this._variableRow=variableRow;var forcePageLoad=s.pageLoad!==prevProps.pageLoad;var pageChanged=+start!==+this._viewStart||+end!==+this._viewEnd;if(this._pageIndex!==UNDEFINED&&pageChanged){this._isIndexChange=!this._isSwipeChange&&!viewChanged;this._hook("onPageChange",{firstDay:firstPageDay,lastDay:lastPageDay,month:isMonthView?firstDay:UNDEFINED,viewEnd:end,viewStart:start});}if(pageIndex!==UNDEFINED){this._pageIndex=pageIndex-this._offset;}if(pageIndex!==UNDEFINED&&(s.marked!==prevProps.marked||s.colors!==prevProps.colors||s.labels!==prevProps.labels||s.invalid!==prevProps.invalid||s.valid!==prevProps.valid||state.maxLabels!==this._maxLabels||pageChanged||labelListingChanged||forcePageLoad)){if(pageChanged||forcePageLoad){this._marksMap=UNDEFINED;this._labelsMap=UNDEFINED;this._hook("onPageLoading",{firstDay:firstPageDay,lastDay:lastPageDay,month:isMonthView?firstDay:UNDEFINED,viewChanged:pageChanged,viewEnd:end,viewStart:start});}this._maxLabels=state.maxLabels||0;this._viewStart=start;this._viewEnd=end;var labelsMap=this._labelsMap||getEventMap(s.labels,start,end,s);var labels=labelsMap&&getLabels(s,labelsMap,start,end,this._variableRow||this._maxLabels,7,false,firstWeekDay,true,s.eventOrder,!showOuter,s.showLabelCount,s.moreEventsText,s.moreEventsPluralText);if(labels&&!this._labels){this._shouldCheckSize=true;}if(labels&&state.maxLabels||!labels){this._shouldPageLoad=!this._isIndexChange||this._prevAnim||!showCalendar||forcePageLoad;}this._labelsLayout=labels;this._labels=labelsMap;this._marked=!labelsMap&&(this._marksMap||getEventMap(s.marked,start,end,s));this._colors=getEventMap(s.colors,start,end,s);this._valid=getEventMap(s.valid,start,end,s,true);this._invalid=getEventMap(s.invalid,start,end,s,true);}if(pageChanged||activeChanged||eventRange!==prevProps.eventRange||eventRangeSize!==prevProps.eventRangeSize||s.monthNames!==prevProps.monthNames){this._title=[];var lDay=addDays(lastDay,-1);var titleDate=pageIndex===UNDEFINED?d:firstDay;if(isWeekView){for(var _i=0,_a=Object.keys(s.selectedDates);_i<_a.length;_i++){var key=_a[_i];if(+key>=+firstDay&&+key<+lastDay){titleDate=new Date(+key);break}}}if(this._pageNr>1){for(var i=0;i<pageNr;i++){var dt=getDate(getYear(firstDay),getMonth(firstDay)+i,1);var yt=getYear(dt)+yearSuffix;var mt=monthNames[getMonth(dt)];this._title.push({yearTitle:yt,monthTitle:mt});}}else {var titleObj={yearTitle:getYear(titleDate)+yearSuffix,monthTitle:monthNames[getMonth(titleDate)]};var titleType=s.showSchedule&&eventRangeSize===1?eventRange:showCalendar?calendarType:eventRange;var agendaOnly=eventRange&&!showCalendar&&(!s.showSchedule||eventRangeSize>1);switch(titleType){case"year":{titleObj.title=getYear(firstDay)+yearSuffix;if(eventRangeSize>1){titleObj.title+=" - "+(getYear(lDay)+yearSuffix);}break}case"month":{if(eventRangeSize>1&&!showCalendar){var monthStart=monthNames[getMonth(firstDay)];var yearStart=getYear(firstDay)+yearSuffix;var titleStart=this._yearFirst?yearStart+" "+monthStart:monthStart+" "+yearStart;var monthEnd=monthNames[getMonth(lDay)];var yearEnd=getYear(lDay)+yearSuffix;var titleEnd=this._yearFirst?yearEnd+" "+monthEnd:monthEnd+" "+yearEnd;titleObj.title=titleStart+" - "+titleEnd;}else if(isGrid){titleObj.title=getYear(firstDay)+yearSuffix;}break}case"day":case"week":{if(agendaOnly){var dayIndex=dateFormat.search(/d/i);var shortDateFormat=dayIndex<monthIndex?"D MMM, YYYY":"MMM D, YYYY";titleObj.title=formatDate(shortDateFormat,firstDay,s);if(titleType==="week"||eventRangeSize>1){titleObj.title+=" - "+formatDate(shortDateFormat,lDay,s);}}break}}this._title.push(titleObj);}}this._active=active;this._activeMonth=constrain(this._activeMonth,+this._minDate,+this._maxDate);this._hasPicker=s.hasPicker||isGrid||!isMonthView||!showCalendar||state.width==="md"&&s.hasPicker!==false;this._axis=isVertical?"Y":"X";this._rtlNr=!isVertical&&s.rtl?-1:1;this._weeks=weeks;this._nextIcon=isVertical?s.nextIconV:s.rtl?s.prevIconH:s.nextIconH;this._prevIcon=isVertical?s.prevIconV:s.rtl?s.nextIconH:s.prevIconH;this._mousewheel=s.mousewheel===UNDEFINED?isVertical:s.mousewheel;this._isGrid=isGrid;this._isVertical=isVertical;this._showOuter=showOuter;};CalendarViewBase.prototype._mounted=function(){this._observer=resizeObserver(this._el,this._onResize,this._zone);this._doc=getDocument(this._el);listen(this._doc,CLICK,this._onDocClick);};CalendarViewBase.prototype._updated=function(){var _this=this;if(this._shouldCheckSize){setTimeout((function(){_this._onResize();}));this._shouldCheckSize=false;}else if(this._shouldPageLoad){this._pageLoaded();this._shouldPageLoad=false;}if(this._shouldFocus){setTimeout((function(){_this._focusActive();_this._shouldFocus=false;}));}if(this.s.instanceService){this.s.instanceService.onComponentChange.next({});}this._pageChange=false;this._prevPageChange=false;if(this._variableRow&&this._body.firstChild){var body=this._body.firstChild;var hasScrollY=body.scrollHeight>body.clientHeight;if(hasScrollY!==this.state.hasScrollY){this._shouldCheckSize=true;this.setState({hasScrollY:hasScrollY});}}};CalendarViewBase.prototype._destroy=function(){if(this._observer){this._observer.detach();}unlisten(this._doc,CLICK,this._onDocClick);clearTimeout(this._hoverTimer);};CalendarViewBase.prototype._getActiveCell=function(){var view=this._view;var cont=view===MONTH_VIEW?this._body:this._pickerCont;var cell=view===MULTI_YEAR_VIEW?"year":view===YEAR_VIEW?"month":"cell";return cont&&cont.querySelector(".mbsc-calendar-"+cell+'[tabindex="0"]')};CalendarViewBase.prototype._focusActive=function(){var cell=this._getActiveCell();if(cell){cell.focus();}};CalendarViewBase.prototype._pageLoaded=function(){this._hook("onPageLoaded",{activeElm:this._getActiveCell(),firstDay:this._firstPageDay,lastDay:this._lastPageDay,month:this.s.calendarType==="month"?this._firstDay:UNDEFINED,viewEnd:this._viewEnd,viewStart:this._viewStart});};CalendarViewBase.prototype._activeChange=function(diff){var nextIndex=this._pageIndex+diff;if(this._minIndex<=nextIndex&&this._maxIndex>=nextIndex&&this.__getTextParam){this._prevAnim=false;this._pageChange=true;this._hook("onActiveChange",{date:this._getPageDay(nextIndex),dir:diff,pageChange:true});}};CalendarViewBase.prototype._activeYearsChange=function(diff){var nextIndex=this._yearsIndex+diff;if(this._minYearsIndex<=nextIndex&&this._maxYearsIndex>=nextIndex){var newYear=this._getPageYears(nextIndex);this._prevAnim=false;this._activeMonth=+this.s.getDate(newYear,0,1);this.forceUpdate();}};CalendarViewBase.prototype._activeYearChange=function(diff){var nextIndex=this._yearIndex+diff;if(this._minYearIndex<=nextIndex&&this._maxYearIndex>=nextIndex){var newYear=this._getPageYear(nextIndex);this._prevAnim=false;this._activeMonth=+this.s.getDate(newYear,0,1);this.forceUpdate();}};CalendarViewBase.prototype._prevDocClick=function(){var _this=this;this._prevClick=true;setTimeout((function(){_this._prevClick=false;}));};CalendarViewBase.decorators=[{type:core.Directive,args:[{selector:"[mbsc-calview-b]"}]}];return CalendarViewBase}(BaseComponent);var MonthViewBase=/*#__PURE__*/function(_super){__extends(MonthViewBase,_super);function MonthViewBase(){return _super!==null&&_super.apply(this,arguments)||this}MonthViewBase.prototype._isActive=function(d){return this.s.isActive&&d===this.s.activeDate};MonthViewBase.prototype._isInvalid=function(d){var s=this.s;var localDate=new Date(d);var timezoneDate=addTimezone(s,localDate);return isInvalid(s,timezoneDate,s.invalid,s.valid,+s.min,+s.max)};MonthViewBase.prototype._isSelected=function(d){var localDate=new Date(d);var timezoneDate=addTimezone(this.s,localDate);return !!this.s.selectedDates[+timezoneDate]};MonthViewBase.prototype._getWeekNr=function(s,date){var d=new Date(date);return ""+s.getWeekNumber(s.getDate(d.getFullYear(),d.getMonth(),d.getDate()+(7-s.firstDay+1)%7))};MonthViewBase.prototype._render=function(s){var weeks=s.weeks;var firstWeekDay=s.firstDay;var firstDay=new Date(s.firstPageDay);var year=s.getYear(firstDay);var month=s.getMonth(firstDay);var day=s.getDay(firstDay);var weekDay=s.getDate(year,month,day).getDay();var offset=firstWeekDay-weekDay>0?7:0;var row=[];var maxLabels=0;this._rowHeights=[];this._rows=[];this._days=Array.apply(0,Array(7));for(var i=0;i<7*weeks;i++){var curr=s.getDate(year,month,i+firstWeekDay-offset-weekDay+day);var key=getDateStr(curr);var displayMonth=s.getMonth(curr);var outer=displayMonth!==month&&s.calendarType!=="week";var marked=s.marked&&s.marked[key];var marks=marked?s.showSingleMark?[{}]:marked:null;var labels=s.labels&&s.labels[key];var labelCount=labels?labels.data.length:0;var isWeekStart=i%7===0;if(s.variableRow){if(isWeekStart&&outer&&i){break}if(labelCount>maxLabels){maxLabels=labelCount;}if(i%7===6){this._rowHeights.push(maxLabels*(s.labelHeight||20)+(s.cellTextHeight||0)+3);maxLabels=0;}}if(isWeekStart){row=[];this._rows.push(row);}row.push({colors:s.colors&&s.colors[key],date:+curr,day:s.dayNames[curr.getDay()],display:outer?s.showOuter:true,labels:labels,marks:marks,month:s.monthNames[displayMonth],monthShort:s.monthNamesShort[displayMonth],outer:outer,text:s.getDay(curr),year:s.getYear(curr)});}};MonthViewBase.decorators=[{type:core.Directive,args:[{selector:"[mbsc-mv-b]"}]}];return MonthViewBase}(BaseComponent);var cloudUpload='<svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" width="24"><path d="M0 0h24v24H0z" fill="none"/><path d="M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96zM14 13v4h-4v-4H7l5-5 5 5h-3z"/></svg>';var resizeObservable=new Observable;var resizeSubscribers=0;var resizeTimer;function onWindowResize(){clearTimeout(resizeTimer);resizeTimer=setTimeout((function(){resizeObservable.next();}),100);}function subscribeResize(handler){if(!resizeSubscribers){listen(win,RESIZE,onWindowResize);}resizeSubscribers++;return resizeObservable.subscribe(handler)}function unsubscribeResize(id){resizeSubscribers--;resizeObservable.unsubscribe(id);if(!resizeSubscribers){unlisten(win,RESIZE,onWindowResize);}}function checkAutoFill(el){try{return matches(el,"*:-webkit-autofill")}catch(ex){return false}}var InputBase=/*#__PURE__*/function(_super){__extends(InputBase,_super);function InputBase(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this._tag="input";_this._onClick=function(){_this._hidePass=!_this._hidePass;};_this._onMouseDown=function(ev){if(_this.s.tags){_this._preventFocus=true;}};_this._onTagClear=function(ev,index){ev.stopPropagation();ev.preventDefault();if(!_this.s.disabled){var value=_this.s.pickerValue.slice();value.splice(index,1);trigger(_this._el,CHANGE,value);}};_this._sizeTextArea=function(){var input=_this._el;var rowNr=_this.s.rows;var lineHeight=24;var height;var lineNr;var line;if(input.offsetHeight){input.style.height="";line=input.scrollHeight-input.offsetHeight;height=input.offsetHeight+(line>0?line:0);lineNr=Math.round(height/lineHeight);if(lineNr>rowNr){height=lineHeight*rowNr+(height-lineNr*lineHeight);input.style.overflow="auto";}else {input.style.overflow="";}if(height){input.style.height=height+"px";}}};_this._onAutoFill=function(){if(_this.s.labelStyle==="floating"&&checkAutoFill(_this._el)){_this.setState({isFloatingActive:true});}};return _this}InputBase.prototype._checkFloating=function(){var _this=this;var el=this._el;var s=this.s;var isAutoFill=checkAutoFill(el);var isFloatingActive=this.state.hasFocus||isAutoFill||!isEmpty(this.value);if(el&&s.labelStyle==="floating"){if(this._tag==="select"){var select=el;var firstOption=select.options[0];isFloatingActive=!!(isFloatingActive||select.multiple||select.value||select.selectedIndex>-1&&firstOption&&firstOption.label);}else if(this.value===UNDEFINED){var input=el;isFloatingActive=!!(isFloatingActive||input.value);}this._valueChecked=true;ngSetTimeout(this,(function(){_this.setState({isFloatingActive:isFloatingActive});}));}};InputBase.prototype._mounted=function(){var _this=this;var s=this.s;var input=this._el;listen(input,ANIMATION_START,this._onAutoFill);if(this._tag==="textarea"){listen(input,INPUT,this._sizeTextArea);this._unsubscribe=subscribeResize(this._sizeTextArea);}this._unlisten=gestureListener(input,{keepFocus:true,onBlur:function(){_this.setState({hasFocus:false,isFloatingActive:!!input.value});},onChange:function(ev){if(s.type==="file"){var files=ev.target.files;var names=[];for(var _i=0,files_1=files;_i<files_1.length;_i++){var file=files_1[_i];names.push(file.name);}_this.setState({files:names.join(", ")});}if(s.tags&&s.value===UNDEFINED&&s.defaultValue===UNDEFINED){_this.setState({value:ev.target.value});}_this._checkFloating();_this._emit("onChange",ev);},onFocus:function(){if(!_this._preventFocus){_this.setState({hasFocus:true,isFloatingActive:true});}_this._preventFocus=false;},onHoverIn:function(){if(!_this._disabled){_this.setState({hasHover:true});}},onHoverOut:function(){_this.setState({hasHover:false});}});};InputBase.prototype._render=function(s,state){var hasEndIcon=!!(s.endIconSvg||s.endIcon);var pickerValue=s.pickerValue;var hasStartIcon=!!(s.startIconSvg||s.startIcon);var hasLabel=s.label!==UNDEFINED||s.hasChildren;var hasError=s.error;var iconStartPosition=s.rtl?"right":"left";var iconEndPosition=s.rtl?"left":"right";var inputType=s.inputStyle;var labelType=s.labelStyle;var isFloating=labelType==="floating";var isFloatingActive=!!(isFloating&&hasLabel&&(state.isFloatingActive||!isEmpty(s.value)));var disabled=s.disabled===UNDEFINED?state.disabled:s.disabled;var prevS=this._prevS;var value=s.value!==UNDEFINED?s.value:state.value!==UNDEFINED?state.value:s.defaultValue;var commonClasses=this._theme+this._rtl+(hasError?" mbsc-error":"")+(disabled?" mbsc-disabled":"")+(state.hasHover?" mbsc-hover":"")+(state.hasFocus&&!disabled?" mbsc-focus":"");if(s.type==="file"&&!hasEndIcon){s.endIconSvg=cloudUpload;hasEndIcon=true;}if(s.tags){if(isEmpty(pickerValue)){pickerValue=[];}if(!isArray(pickerValue)){pickerValue=[pickerValue];}this._tagsArray=s.pickerMap?pickerValue.map((function(val){return s.pickerMap.get(val)})):isEmpty(value)?[]:value.split(", ");}if(s.passwordToggle){hasEndIcon=true;this._passIconClass=commonClasses+" mbsc-toggle-icon"+(" mbsc-textfield-icon mbsc-textfield-icon-"+inputType+" mbsc-textfield-icon-"+iconEndPosition)+(" mbsc-textfield-icon-"+inputType+"-"+iconEndPosition)+(hasLabel?" mbsc-textfield-icon-"+labelType:"");this._hidePass=this._hidePass===UNDEFINED?s.type==="password":this._hidePass;}this._hasStartIcon=hasStartIcon;this._hasEndIcon=hasEndIcon;this._hasError=hasError;this._disabled=disabled;this._cssClass=this._className+this._hb+commonClasses+" mbsc-form-control-wrapper mbsc-textfield-wrapper mbsc-font"+(" mbsc-textfield-wrapper-"+inputType)+(disabled?" mbsc-disabled":"")+(hasLabel?" mbsc-textfield-wrapper-"+labelType:"")+(hasStartIcon?" mbsc-textfield-wrapper-has-icon-"+iconStartPosition+" ":"")+(hasEndIcon?" mbsc-textfield-wrapper-has-icon-"+iconEndPosition+" ":"");if(hasLabel){this._labelClass=commonClasses+(" mbsc-label mbsc-label-"+labelType+" mbsc-label-"+inputType+"-"+labelType)+(hasStartIcon?" mbsc-label-"+inputType+"-"+labelType+"-has-icon-"+iconStartPosition+" ":"")+(hasEndIcon?" mbsc-label-"+inputType+"-"+labelType+"-has-icon-"+iconEndPosition+" ":"")+(isFloating&&this._animateFloating?" mbsc-label-floating-animate":"")+(isFloatingActive?" mbsc-label-floating-active":"");}this._innerClass=commonClasses+(" mbsc-textfield-inner mbsc-textfield-inner-"+inputType)+(hasLabel?" mbsc-textfield-inner-"+labelType:"");if(hasStartIcon){this._startIconClass=commonClasses+(" mbsc-textfield-icon mbsc-textfield-icon-"+inputType+" mbsc-textfield-icon-"+iconStartPosition)+(" mbsc-textfield-icon-"+inputType+"-"+iconStartPosition)+(hasLabel?" mbsc-textfield-icon-"+labelType:"");}if(hasEndIcon){this._endIconClass=commonClasses+(" mbsc-textfield-icon mbsc-textfield-icon-"+inputType+" mbsc-textfield-icon-"+iconEndPosition)+(" mbsc-textfield-icon-"+inputType+"-"+iconEndPosition)+(hasLabel?" mbsc-textfield-icon-"+labelType:"");}this._nativeElmClass=commonClasses+" "+(s.inputClass||"")+(" mbsc-textfield mbsc-textfield-"+inputType)+(s.dropdown?" mbsc-select":"")+(hasLabel?" mbsc-textfield-"+labelType+" mbsc-textfield-"+inputType+"-"+labelType:"")+(isFloatingActive?" mbsc-textfield-floating-active":"")+(hasStartIcon?" mbsc-textfield-has-icon-"+iconStartPosition+" mbsc-textfield-"+inputType+"-has-icon-"+iconStartPosition+(hasLabel?" mbsc-textfield-"+inputType+"-"+labelType+"-has-icon-"+iconStartPosition:""):"")+(hasEndIcon?" mbsc-textfield-has-icon-"+iconEndPosition+" mbsc-textfield-"+inputType+"-has-icon-"+iconEndPosition+(hasLabel?" mbsc-textfield-"+inputType+"-"+labelType+"-has-icon-"+iconEndPosition:""):"");if(this._tag==="select"||s.dropdown){this._selectIconClass="mbsc-select-icon mbsc-select-icon-"+inputType+this._rtl+this._theme+(hasLabel?" mbsc-select-icon-"+labelType:"")+(hasStartIcon?" mbsc-select-icon-"+iconStartPosition:"")+(hasEndIcon?" mbsc-select-icon-"+iconEndPosition:"");}if(this._tag==="textarea"||s.tags){this._cssClass+=" mbsc-textarea-wrapper";this._innerClass+=" mbsc-textarea-inner";this._nativeElmClass+=" mbsc-textarea";if(this._tag==="textarea"&&(value!==this._prevValue||s.inputStyle!==prevS.inputStyle||s.labelStyle!==prevS.labelStyle||s.rows!==prevS.rows||s.theme!==prevS.theme)){this._shouldSize=true;}this._prevValue=value;}if(s.tags){this._innerClass+=" mbsc-textfield-tags-inner";}if(s.type==="file"){this._dummyElmClass=this._nativeElmClass;this._nativeElmClass+=" mbsc-textfield-file";}this._errorClass=this._theme+this._rtl+(" mbsc-error-message mbsc-error-message-"+inputType)+(hasLabel?" mbsc-error-message-"+labelType:"")+(hasStartIcon?" mbsc-error-message-has-icon-"+iconStartPosition:"")+(hasEndIcon?" mbsc-error-message-has-icon-"+iconEndPosition:"");if(s.notch&&inputType==="outline"){this._fieldSetClass="mbsc-textfield-fieldset"+commonClasses+(hasStartIcon?" mbsc-textfield-fieldset-has-icon-"+iconStartPosition:"")+(hasEndIcon?" mbsc-textfield-fieldset-has-icon-"+iconEndPosition:"");this._legendClass="mbsc-textfield-legend"+this._theme+(isFloatingActive||hasLabel&&labelType==="stacked"?" mbsc-textfield-legend-active":"");}if(s.ripple&&s.inputStyle!=="outline"){this._rippleClass="mbsc-textfield-ripple"+this._theme+(hasError?" mbsc-error":"")+(state.hasFocus?" mbsc-textfield-ripple-active":"");}if(this._valueChecked){this._animateFloating=true;}};InputBase.prototype._updated=function(){var _this=this;if(this._shouldSize){this._shouldSize=false;ngSetTimeout(this,(function(){_this._sizeTextArea();}));}this._checkFloating();};InputBase.prototype._destroy=function(){unlisten(this._el,ANIMATION_START,this._onAutoFill);unlisten(this._el,INPUT,this._sizeTextArea);unsubscribeResize(this._unsubscribe);this._unlisten();};InputBase.defaults={dropdown:false,dropdownIcon:arrowDown,hideIcon:"eye-blocked",inputStyle:"underline",labelStyle:"stacked",placeholder:"",ripple:false,rows:6,showIcon:"eye",type:"text"};InputBase._name="Input";InputBase.decorators=[{type:core.Directive,args:[{selector:"[mbsc-inp-b]"}]}];return InputBase}(BaseComponent);function FormControl(constructor){var prototype=constructor.prototype;prototype.registerOnChange=function(fn){this._onFormChange=fn;};prototype.registerOnTouched=function(fn){this._onFormTouch=fn;};prototype.setDisabledState=function(disabled){this.setState({disabled:disabled});};prototype.writeValue=function(val){updateValue(this,val);};}var guid$1=0;var MbscInput=/*#__PURE__*/function(_super){__extends(MbscInput,_super);function MbscInput(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.onChange=new core.EventEmitter;_this._id="mbsc-textfield-"+guid$1++;return _this}MbscInput.prototype._triggerEvent=function(ev){if(this.s.tags&&ev.target!==this._el){trigger(this._el,ev.type);}};MbscInput.prototype._onValueChange=function(){this._checkFloating();};MbscInput.prototype._mounted=function(){this._el=this.vInput.nativeElement;_super.prototype._mounted.call(this);};MbscInput.decorators=[{type:core.Component,args:[{changeDetection:core.ChangeDetectionStrategy.OnPush,encapsulation:core.ViewEncapsulation.None,host:{"[class]":"_cssClass"},selector:"mbsc-input",template:'\n    <label *ngIf="s.label !== undefined" [for]="_id" [class]="_labelClass">\n      {{s.label}}\n      <ng-content select="[mbsc-label]"></ng-content>\n    </label>\n    <span [class]="_innerClass" (click)="_triggerEvent($event)" (keydown)="_triggerEvent($event)">\n      <input #input [(ngModel)]="value" (blur)="_onFormTouch($event)"\n        [attr.accept]="accept"\n        [attr.aria-haspopup]="ariaHaspopup"\n        [attr.aria-expanded]="ariaExpanded"\n        [attr.autocapitalize]="autocapitalize"\n        [attr.autocomplete]="autocomplete"\n        [attr.autocorrect]="autocorrect"\n        [attr.autofocus]="autofocus"\n        [attr.max]="max"\n        [attr.maxlength]="maxlength"\n        [attr.min]="min"\n        [attr.minlength]="minlength"\n        [attr.multiple]="multiple"\n        [attr.name]="name"\n        [attr.pattern]="pattern"\n        [attr.required]="required"\n        [attr.spellcheck]="spellcheck"\n        [attr.step]="step"\n        [class]="_nativeElmClass + (s.tags ? \' mbsc-textfield-hidden\' : \'\')"\n        [disabled]="_disabled"\n        [id]="id || _id"\n        [placeholder]="s.placeholder"\n        [readonly]="readonly"\n        [type]="s.passwordToggle ? (_hidePass ? \'password\' : \'text\') : s.type"\n      />\n      <input *ngIf="s.type === \'file\'"\n        [class]="_dummyElmClass"\n        [disabled]="_disabled"\n        [placeholder]="s.placeholder"\n        [readonly]="true"\n        type="text"\n        [value]="state.files || \'\'"\n      />\n      <span *ngIf="tags" [class]="\'mbsc-textfield-tags\' + _nativeElmClass">\n        <ng-container *ngFor="let v of _tagsArray; let i = index;">\n          <span *ngIf="v" [class]="\'mbsc-textfield-tag\' + _theme + _rtl">\n            <span [class]="\'mbsc-textfield-tag-text\' + _theme">{{v}}</span>\n            <mbsc-icon class="mbsc-textfield-tag-clear" (click)="_onTagClear($event, i)"\n             [svg]="s.clearIcon" [theme]="s.theme"></mbsc-icon>\n          </span>\n        </ng-container>\n        <span *ngIf="!_tagsArray.length" [class]="\'mbsc-textfield-tags-placeholder\' + _theme">{{s.placeholder}}</span>\n      </span>\n      <mbsc-icon *ngIf="s.dropdown" [class]="_selectIconClass" [svg]="s.dropdownIcon" [theme]="s.theme"></mbsc-icon>\n      <mbsc-icon *ngIf="_hasStartIcon" [class]="_startIconClass" [name]="s.startIcon" [svg]="s.startIconSvg" [theme]="s.theme"></mbsc-icon>\n      <mbsc-icon *ngIf="_hasEndIcon && !s.passwordToggle"\n        [class]="_endIconClass"\n        [name]="s.endIcon"\n        [svg]="s.endIconSvg"\n        [theme]="s.theme">\n      </mbsc-icon>\n      <mbsc-icon *ngIf="s.passwordToggle"\n        (click)="_onClick()"\n        [class]="_passIconClass"\n        [name]="_hidePass ? s.showIcon : s.hideIcon"\n        [svg]="_hidePass ? s.showIconSvg : s.hideIconSvg"\n        [theme]="s.theme">\n      </mbsc-icon>\n      <span *ngIf="_hasError" [class]="_errorClass">{{s.errorMessage}}</span>\n      <fieldset *ngIf="s.notch && s.inputStyle === \'outline\'" aria-hidden="true" [class]="_fieldSetClass">\n        <legend [class]="_legendClass">{{s.label && s.labelStyle !== \'inline\' ? s.label : \'&nbsp;\'}}</legend>\n      </fieldset>\n      <span *ngIf="s.ripple && s.inputStyle !== \'outline\'" [class]="_rippleClass" ></span>\n    </span>\n  '}]}];MbscInput.propDecorators={vInput:[{type:core.ViewChild,args:["input",{static:false}]}],ariaHaspopup:[{type:core.Input}],ariaExpanded:[{type:core.Input}],accept:[{type:core.Input}],autocapitalize:[{type:core.Input}],autocomplete:[{type:core.Input}],autocorrect:[{type:core.Input}],autofocus:[{type:core.Input}],disabled:[{type:core.Input}],dropdown:[{type:core.Input}],endIcon:[{type:core.Input}],endIconSrc:[{type:core.Input}],endIconSvg:[{type:core.Input}],error:[{type:core.Input}],errorMessage:[{type:core.Input}],hideIcon:[{type:core.Input}],hideIconSvg:[{type:core.Input}],id:[{type:core.Input}],inputClass:[{type:core.Input}],inputStyle:[{type:core.Input}],label:[{type:core.Input}],labelStyle:[{type:core.Input}],max:[{type:core.Input}],maxlength:[{type:core.Input}],min:[{type:core.Input}],minlength:[{type:core.Input}],multiple:[{type:core.Input}],name:[{type:core.Input}],passwordToggle:[{type:core.Input}],pattern:[{type:core.Input}],pickerMap:[{type:core.Input}],pickerValue:[{type:core.Input}],placeholder:[{type:core.Input}],readonly:[{type:core.Input}],required:[{type:core.Input}],ripple:[{type:core.Input}],rows:[{type:core.Input}],showIcon:[{type:core.Input}],showIconSvg:[{type:core.Input}],spellcheck:[{type:core.Input}],startIcon:[{type:core.Input}],startIconSrc:[{type:core.Input}],startIconSvg:[{type:core.Input}],step:[{type:core.Input}],tags:[{type:core.Input}],type:[{type:core.Input}],onChange:[{type:core.Output}]};MbscInput=__decorate([FormControl],MbscInput);return MbscInput}(InputBase);var MbscDropdown=/*#__PURE__*/function(_super){__extends(MbscDropdown,_super);function MbscDropdown(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this._tag="select";return _this}MbscDropdown._name="Dropdown";MbscDropdown.decorators=[{type:core.Component,args:[{changeDetection:core.ChangeDetectionStrategy.OnPush,encapsulation:core.ViewEncapsulation.None,host:{"[class]":"_cssClass"},selector:"mbsc-dropdown",template:'\n    <label *ngIf="s.label !== undefined" [for]="_id" [class]="_labelClass">\n      {{s.label}}\n      <ng-content select="[mbsc-label]"></ng-content>\n    </label>\n    <span [class]="_innerClass">\n      <select #input\n        (blur)="_onFormTouch($event)"\n        (change)="value=input.value"\n        [attr.autofocus]="autofocus"\n        [attr.multiple]="multiple"\n        [attr.name]="name"\n        [attr.required]="required"\n        [class]="\'mbsc-select \' + _nativeElmClass"\n        [disabled]="_disabled"\n        [id]="id || _id"\n        [value]="value"\n      >\n        <ng-content></ng-content>\n      </select>\n      <mbsc-icon [class]="_selectIconClass" [svg]="s.dropdownIcon" [theme]="s.theme"></mbsc-icon>\n      <mbsc-icon *ngIf="_hasStartIcon" [class]="_startIconClass" [name]="s.startIcon" [svg]="s.startIconSvg" [theme]="s.theme"></mbsc-icon>\n      <mbsc-icon *ngIf="_hasEndIcon" [class]="_endIconClass" [name]="s.endIcon" [svg]="s.endIconSvg" [theme]="s.theme"></mbsc-icon>\n      <span *ngIf="_hasError" [class]="_errorClass">{{s.errorMessage}}</span>\n      <fieldset *ngIf="s.notch && s.inputStyle === \'outline\'" aria-hidden="true" [class]="_fieldSetClass">\n        <legend [class]="_legendClass">{{s.label && s.labelStyle !== \'inline\' ? s.label : \'&nbsp;\'}}</legend>\n      </fieldset>\n      <span *ngIf="s.ripple && s.inputStyle !== \'outline\'" [class]="_rippleClass" ></span>\n    </span>\n  '}]}];return MbscDropdown}(MbscInput);var MbscTextarea=/*#__PURE__*/function(_super){__extends(MbscTextarea,_super);function MbscTextarea(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this._tag="textarea";return _this}MbscTextarea._name="Textarea";MbscTextarea.decorators=[{type:core.Component,args:[{changeDetection:core.ChangeDetectionStrategy.OnPush,encapsulation:core.ViewEncapsulation.None,host:{"[class]":"_cssClass"},selector:"mbsc-textarea",template:'\n    <label *ngIf="s.label !== undefined" [for]="_id" [class]="_labelClass">\n      {{s.label}}\n      <ng-content select="[mbsc-label]"></ng-content>\n    </label>\n    <span [class]="_innerClass">\n      <textarea #input [(ngModel)]="value" (blur)="_onFormTouch($event)"\n        [attr.accept]="accept"\n        [attr.autocapitalize]="autocapitalize"\n        [attr.autocomplete]="autocomplete"\n        [attr.autocorrect]="autocorrect"\n        [attr.autofocus]="autofocus"\n        [attr.maxlength]="maxlength"\n        [attr.minlength]="minlength"\n        [attr.name]="name"\n        [attr.pattern]="pattern"\n        [attr.required]="required"\n        [attr.spellcheck]="spellcheck"\n        [class]="_nativeElmClass"\n        [disabled]="_disabled"\n        [id]="id || _id"\n        [readonly]="readonly"\n        [rows]="rows"\n        [placeholder]="placeholder"\n      ></textarea>\n      <mbsc-icon *ngIf="_hasStartIcon" [class]="_startIconClass" [name]="s.startIcon" [svg]="s.startIconSvg" [theme]="s.theme"></mbsc-icon>\n      <mbsc-icon *ngIf="_hasEndIcon" [class]="_endIconClass" [name]="s.endIcon" [svg]="s.endIconSvg" [theme]="s.theme"></mbsc-icon>\n      <span *ngIf="_hasError" [class]="_errorClass">{{s.errorMessage}}</span>\n      <fieldset *ngIf="s.notch && s.inputStyle === \'outline\'" aria-hidden="true" [class]="_fieldSetClass">\n        <legend [class]="_legendClass">{{s.label && s.labelStyle !== \'inline\' ? s.label : \'&nbsp;\'}}</legend>\n      </fieldset>\n      <span *ngIf="s.ripple && s.inputStyle !== \'outline\'" [class]="_rippleClass" ></span>\n    </span>\n  '}]}];return MbscTextarea}(MbscInput);var MbscInputModule=/*#__PURE__*/function(){function MbscInputModule(){}MbscInputModule.decorators=[{type:core.NgModule,args:[{declarations:[InputBase,MbscDropdown,MbscInput,MbscTextarea],exports:[MbscDropdown,MbscInput,MbscTextarea],imports:[common.CommonModule,forms.FormsModule,MbscIconModule]}]}];return MbscInputModule}();var MbscPopup=/*#__PURE__*/function(_super){__extends(MbscPopup,_super);function MbscPopup(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.onButtonClick=new core.EventEmitter;_this.onOverlayClick=new core.EventEmitter;_this.onClose=new core.EventEmitter;_this.onClosed=new core.EventEmitter;_this.onKeyDown=new core.EventEmitter;_this.onOpen=new core.EventEmitter;_this.onPosition=new core.EventEmitter;_this.onResize=new core.EventEmitter;return _this}MbscPopup.prototype._updated=function(){var justOpened=this._justOpened;if(justOpened){this._active=this.vActive.nativeElement;this._content=this.vContent.nativeElement;this._limitator=this.vLimit.nativeElement;this._wrapper=this.vWrapper.nativeElement;this._popup=this.vPopup.nativeElement;}_super.prototype._updated.call(this);if(justOpened&&this._ctx&&!this._ph){var wrapper=this._wrapper;var doc=getDocument(wrapper);this._ph=doc.createComment("mbsc-popup");wrapper.parentNode.insertBefore(this._ph,wrapper);this._ctx.appendChild(wrapper);}};MbscPopup.prototype._onClosed=function(){this._ph.parentNode.replaceChild(this._wrapper,this._ph);this._ph=null;_super.prototype._onClosed.call(this);};MbscPopup.decorators=[{type:core.Component,args:[{changeDetection:core.ChangeDetectionStrategy.OnPush,encapsulation:core.ViewEncapsulation.None,selector:"mbsc-popup",template:"\n    <ng-template #ngcontent>\n      <ng-container *ngIf=\"_isVisible || !_isModal\">\n        <ng-content></ng-content>\n      </ng-container>\n    </ng-template>\n    <ng-container *ngIf=\"_isModal && _isVisible\">\n      <div [class]=\"'mbsc-font mbsc-popup-wrapper mbsc-popup-wrapper-' + s.display + _theme + _rtl + ' ' + _className +\n        (s.fullScreen ? ' mbsc-popup-wrapper-' + s.display + '-full' : '') +\n        (_touchUi ? '' : ' mbsc-popup-pointer') +\n        (_round ? ' mbsc-popup-round' : '') +\n        (_hasContext ? ' mbsc-popup-wrapper-ctx' : '') +\n        (state.isReady ? '' : ' mbsc-popup-hidden')\"\n        (keydown)=\"_onKeyDown($event)\" #wrapper>\n        <div *ngIf=\"s.showOverlay\" (click)=\"_onOverlayClick()\"\n          [class]=\"'mbsc-popup-overlay mbsc-popup-overlay-' + s.display + _theme +\n            (_isClosing ? ' mbsc-popup-overlay-out' : '') +\n            (_isOpening && state.isReady ? ' mbsc-popup-overlay-in' : '')\n        \"></div>\n        <div #limit [class]=\"'mbsc-popup-limits mbsc-popup-limits-' + s.display\" [ngStyle]=\"_limits\"></div>\n        <div #popup\n          [class]=\"'mbsc-popup ' + _theme + _hb +\n            ' mbsc-popup-' + s.display + (s.fullScreen ? '-full' : '') +\n            (state.bubblePos && state.showArrow && s.display === 'anchored' ? ' mbsc-popup-anchored-' + state.bubblePos : '') +\n            (_isClosing ? ' mbsc-popup-' + _animation + '-out' : '') +\n            (_isOpening && state.isReady ? ' mbsc-popup-' + _animation + '-in' : '')\"\n          [ngStyle]=\"_style\"\n          (animationend)=\"_onAnimationEnd($event)\"\n          (click)=\"_onPopupClick()\"\n          role=\"dialog\"\n          aria-modal=\"true\"\n        >\n          <div *ngIf=\"s.display === 'anchored' && state.showArrow\"\n            [class]=\"'mbsc-popup-arrow-wrapper mbsc-popup-arrow-wrapper-' + state.bubblePos + _theme\">\n            <div [class]=\"'mbsc-popup-arrow mbsc-popup-arrow-' + state.bubblePos + _theme\" [ngStyle]=\"state.arrowPos\"></div>\n          </div>\n          <div class=\"mbsc-popup-focus\" tabindex=\"-1\" #active></div>\n          <div [class]=\"'mbsc-popup-body mbsc-popup-body-' + s.display + this._theme + this._hb +\n              (s.fullScreen ? ' mbsc-popup-body-' + s.display + '-full' : '') +\n              (_round ? ' mbsc-popup-body-round': '')\">\n            <div *ngIf=\"_headerText\"\n              [class]=\"'mbsc-popup-header mbsc-popup-header-' +\n                s.display + _theme + _hb +\n                (_buttons ? '' : ' mbsc-popup-header-no-buttons')\"\n              [innerHTML]=\"_headerText\">\n            </div>\n            <div #content [class]=\"'mbsc-popup-content' + (s.contentPadding ? ' mbsc-popup-padding' : '')\">\n              <ng-container [ngTemplateOutlet]=\"ngcontent\"></ng-container>\n            </div>\n            <div *ngIf=\"_buttons\" [class]=\"'mbsc-popup-buttons mbsc-popup-buttons-' + s.display + _theme + _rtl + _hb +\n              (_flexButtons ? ' mbsc-popup-buttons-flex' : '') +\n              (s.fullScreen ? ' mbsc-popup-buttons-' + s.display + '-full' : '')\"\n            >\n              <mbsc-button *ngFor=\"let btn of _buttons\"\n                [color]=\"btn.color\"\n                [class]=\"'mbsc-popup-button mbsc-popup-button-' + s.display + _rtl + _hb +\n                  (_flexButtons ? ' mbsc-popup-button-flex' : '') + ' ' +\n                  (btn.cssClass || '')\"\n                [disabled]=\"btn.disabled\"\n                [icon]=\"btn.icon\"\n                [theme]=\"s.theme\"\n                [themeVariant]=\"s.themeVariant\"\n                [variant]=\"btn.variant || s.buttonVariant\"\n                (click)=\"!btn.disabled && btn.handler($event)\">\n                {{btn.text}}\n              </mbsc-button>\n            </div>\n          </div>\n        </div>\n      </div>\n    </ng-container>\n    <ng-container *ngIf=\"!_isModal\" [ngTemplateOutlet]=\"ngcontent\">\n    </ng-container>\n  "}]}];MbscPopup.propDecorators={vActive:[{type:core.ViewChild,args:["active",{static:false}]}],vContent:[{type:core.ViewChild,args:["content",{static:false}]}],vLimit:[{type:core.ViewChild,args:["limit",{static:false}]}],vWrapper:[{type:core.ViewChild,args:["wrapper",{static:false}]}],vPopup:[{type:core.ViewChild,args:["popup",{static:false}]}],activeElm:[{type:core.Input}],anchor:[{type:core.Input}],anchorAlign:[{type:core.Input}],animation:[{type:core.Input}],buttons:[{type:core.Input}],buttonVariant:[{type:core.Input}],closeOnEsc:[{type:core.Input}],closeOnOverlayClick:[{type:core.Input}],closeOnScroll:[{type:core.Input}],contentPadding:[{type:core.Input}],cssClass:[{type:core.Input}],disableLeftRight:[{type:core.Input}],display:[{type:core.Input}],focusElm:[{type:core.Input}],focusOnClose:[{type:core.Input}],focusOnOpen:[{type:core.Input}],focusTrap:[{type:core.Input}],fullScreen:[{type:core.Input}],headerText:[{type:core.Input}],height:[{type:core.Input}],isOpen:[{type:core.Input}],maxHeight:[{type:core.Input}],maxWidth:[{type:core.Input}],scrollLock:[{type:core.Input}],showArrow:[{type:core.Input}],showOverlay:[{type:core.Input}],windowWidth:[{type:core.Input}],width:[{type:core.Input}],cancelText:[{type:core.Input}],closeText:[{type:core.Input}],okText:[{type:core.Input}],setText:[{type:core.Input}],onButtonClick:[{type:core.Output}],onOverlayClick:[{type:core.Output}],onClose:[{type:core.Output}],onClosed:[{type:core.Output}],onKeyDown:[{type:core.Output}],onOpen:[{type:core.Output}],onPosition:[{type:core.Output}],onResize:[{type:core.Output}]};return MbscPopup}(PopupBase);var MbscPrompt=/*#__PURE__*/function(){function MbscPrompt(){this.value="";}MbscPrompt.decorators=[{type:core.Component,args:[{changeDetection:core.ChangeDetectionStrategy.OnPush,encapsulation:core.ViewEncapsulation.None,selector:"mbsc-prompt",template:'\n    <mbsc-popup #popup [options]="props">\n      <div class="mbsc-alert-content">\n        <h2 *ngIf="title" class="mbsc-alert-title">{{title}}</h2>\n        <p class="mbsc-alert-message">{{message || \'\'}}</p>\n        <mbsc-input\n          class="mbsc-prompt-input"\n          [label]="label"\n          [placeholder]="placeholder || \'\'"\n          [theme]="props.theme"\n          [themeVariant]="props.themeVariant"\n          [type]="inputType"\n          [(value)]="value"\n        ></mbsc-input>\n      </div>\n    </mbsc-popup>\n  '}]}];MbscPrompt.propDecorators={popup:[{type:core.ViewChild,args:["popup",{static:false}]}],inputType:[{type:core.Input}],label:[{type:core.Input}],message:[{type:core.Input}],placeholder:[{type:core.Input}],title:[{type:core.Input}],props:[{type:core.Input}],value:[{type:core.Input}]};return MbscPrompt}();var MbscSnackbar=/*#__PURE__*/function(){function MbscSnackbar(){}MbscSnackbar.prototype.onButtonClick=function(){this.popup.close();if(this.button&&this.button.action){this.button.action();}};MbscSnackbar.decorators=[{type:core.Component,args:[{changeDetection:core.ChangeDetectionStrategy.OnPush,encapsulation:core.ViewEncapsulation.None,selector:"mbsc-snackbar",template:'\n    <mbsc-popup #popup [options]="props">\n      <div class="mbsc-snackbar-cont mbsc-toast-background">\n        <div class="mbsc-snackbar-message">{{message}}</div>\n          <mbsc-button *ngIf="button"\n            class="mbsc-snackbar-button"\n            [icon]="button.icon"\n            [theme]="props.theme"\n            [themeVariant]="props.themeVariant"\n            variant="flat"\n            (click)="onButtonClick()"\n          >\n            {{button.text}}\n          </mbsc-button>\n      </div>\n    </mbsc-popup>\n  '}]}];MbscSnackbar.propDecorators={popup:[{type:core.ViewChild,args:["popup",{static:false}]}],button:[{type:core.Input}],message:[{type:core.Input}],props:[{type:core.Input}]};return MbscSnackbar}();var MbscPopupModule=/*#__PURE__*/function(){function MbscPopupModule(){}MbscPopupModule.decorators=[{type:core.NgModule,args:[{declarations:[MbscPopup,MbscPrompt,MbscSnackbar,PopupBase],entryComponents:[MbscPopup,MbscSnackbar,MbscPrompt],exports:[MbscPopup,MbscPrompt,MbscSnackbar],imports:[common.CommonModule,MbscButtonModule,MbscInputModule]}]}];return MbscPopupModule}();var MbscCalendarDay=/*#__PURE__*/function(_super){__extends(MbscCalendarDay,_super);function MbscCalendarDay(){return _super!==null&&_super.apply(this,arguments)||this}MbscCalendarDay.prototype._getLabelKey=function(index,label){return label.id};MbscCalendarDay.decorators=[{type:core.Component,args:[{changeDetection:core.ChangeDetectionStrategy.OnPush,encapsulation:core.ViewEncapsulation.None,host:{"(click)":"_onClick($event)","(contextmenu)":"_onRightClick($event)","[attr.tabindex]":"s.disabled ? null : s.active ? 0 : -1","[class]":"_cssClass","[style.backgroundColor]":'_cellStyles ? _cellStyles.backgroundColor : ""',"[style.color]":'_cellStyles ? _cellStyles.color : ""'},selector:"mbsc-calendar-day",template:'<div [innerHTML]="textParam"></div>\n    <div [class]="\'mbsc-calendar-cell-inner mbsc-calendar-\' + s.type + \'-inner\' + _theme +\n        (s.type === \'day\' ? \'\' : _hb) +\n        (s.display ? \'\' : \' mbsc-calendar-day-hidden\')">\n      <ng-template *ngIf="dayTemplate" [ngTemplateOutlet]="dayTemplate" [ngTemplateOutletContext]="{ $implicit: _data }"></ng-template>\n\n      <div *ngIf="s.text === 1"\n        aria-hidden="true"\n        [class]="\'mbsc-calendar-month-name\' + _theme + _rtl">\n        {{s.monthShort}}\n      </div>\n      <div *ngIf="!dayTemplate"\n        [attr.aria-label]="_ariaLabel"\n        [attr.aria-pressed]="s.selected || null"\n        role="button"\n        [class]="\'mbsc-calendar-cell-text mbsc-calendar-\' + s.type + \'-text\' + _theme + _todayClass"\n        [ngStyle]="_circleStyles">\n        {{s.text}}\n      </div>\n\n      <div *ngIf="s.marks && !dayTemplate">\n        <div [class]="\'mbsc-calendar-marks\' + _theme + _rtl">\n          <div *ngFor="let mark of s.marks; trackBy: _getKey"\n            [class]="\'mbsc-calendar-mark \' + (mark.markCssClass || \'\') + _theme"\n            [style.background]="mark.color"></div>\n        </div>\n      </div>\n\n      <ng-template *ngIf="dayContentTemplate" [ngTemplateOutlet]="dayContentTemplate" [ngTemplateOutletContext]="{ $implicit: _data }">\n      </ng-template>\n\n      <div *ngIf="s.labels">\n        <div *ngIf="_draggedLabelOrig && _draggedLabelOrig.event" [class]="\'mbsc-calendar-labels mbsc-calendar-labels-dragging\'">\n          <div [style.width]="_draggedLabelOrig.width + \'%\' || 100 + \'%\'">\n            <mbsc-calendar-label\n              [amText]="s.amText"\n              [date]="s.date"\n              [dataTimezone]="dataTimezone"\n              [displayTimezone]="displayTimezone"\n              [drag]="s.dragToMove"\n              [resize]="s.dragToResize"\n              [event]="_draggedLabelOrig.event"\n              [exclusiveEndDates]="exclusiveEndDates"\n              [firstDay]="s.firstDay"\n              [hidden]="!!s.dragData!.draggedDates"\n              [isUpdate]="true"\n              [pmText]="s.pmText"\n              [resourcesMap]="s.resourcesMap"\n              [rtl]="s.rtl"\n              [showEventTooltip]="s.showEventTooltip"\n              [showText]="true"\n              [theme]="s.theme"\n              [timeFormat]="s.timeFormat"\n              [timezonePlugin]="timezonePlugin"\n              [template]="labelTemplate"\n              [contentTemplate]="labelContentTemplate"\n              [onClick]="_onLabelClick"\n              [onDoubleClick]="_onLabelDoubleClick"\n              [onRightClick]="_onLabelRightClick"\n              [onHoverIn]="_onLabelHoverIn"\n              [onHoverOut]="_onLabelHoverOut"\n              [onDelete]="s.onLabelDelete"\n              [onDragStart]="s.onLabelUpdateStart"\n              [onDragMove]="s.onLabelUpdateMove"\n              [onDragEnd]="s.onLabelUpdateEnd"\n              [onDragModeOn]="s.onLabelUpdateModeOn"\n              [onDragModeOff]="s.onLabelUpdateModeOff"\n            >\n            </mbsc-calendar-label>\n          </div>\n        </div>\n\n        <div *ngIf="_draggedLabel && _draggedLabel.event" [class]="\'mbsc-calendar-labels mbsc-calendar-labels-dragging\'">\n          <div [class]="\'mbsc-calendar-label-wrapper\'" [style.width]="_draggedLabel.width + \'%\' || 100 + \'%\'">\n            <mbsc-calendar-label\n              [amText]="s.amText"\n              [date]="s.date"\n              [dataTimezone]="dataTimezone"\n              [displayTimezone]="displayTimezone"\n              [drag]="s.dragToMove"\n              [resize]="s.dragToResize"\n              [event]="_draggedLabel.event"\n              [exclusiveEndDates]="exclusiveEndDates"\n              [firstDay]="s.firstDay"\n              [isUpdate]="true"\n              [pmText]="s.pmText"\n              [resourcesMap]="s.resourcesMap"\n              [rtl]="s.rtl"\n              [showEventTooltip]="s.showEventTooltip"\n              [showText]="true"\n              [theme]="s.theme"\n              [timeFormat]="s.timeFormat"\n              [timezonePlugin]="timezonePlugin"\n              [template]="labelTemplate"\n              [contentTemplate]="labelContentTemplate"\n              [onClick]="_onLabelClick"\n              [onDoubleClick]="_onLabelDoubleClick"\n              [onRightClick]="_onLabelRightClick"\n              [onHoverIn]="_onLabelHoverIn"\n              [onHoverOut]="_onLabelHoverOut"\n              [onDelete]="s.onLabelDelete"\n              [onDragStart]="s.onLabelUpdateStart"\n              [onDragMove]="s.onLabelUpdateMove"\n              [onDragEnd]="s.onLabelUpdateEnd"\n              [onDragModeOn]="s.onLabelUpdateModeOn"\n              [onDragModeOff]="s.onLabelUpdateModeOff"\n            >\n            </mbsc-calendar-label>\n          </div>\n        </div>\n\n        <div class="mbsc-calendar-labels">\n          <ng-container *ngFor="let label of s.labels.data;trackBy: _getLabelKey">\n            <div *ngIf="label.placeholder" class="mbsc-calendar-text mbsc-calendar-text-placeholder"></div>\n\n            <mbsc-calendar-label *ngIf="label.more || label.count"\n              [count]="label.count ? label.count + \' \' + (label.count > 1 ? s.eventsText : s.eventText) : undefined"\n              [id]="label.id"\n              [isActiveMonth]="isActiveMonth"\n              [label]="label.label"\n              [more]="label.more"\n              [rtl]="s.rtl"\n              [theme]="s.theme"\n              [onClick]="_onLabelClick"\n              [onDoubleClick]="_onLabelDoubleClick"\n              [onRightClick]="_onLabelRightClick"\n              [onHoverIn]="_onLabelHoverIn"\n              [onHoverOut]="_onLabelHoverOut"\n              [showText]="true"\n              >\n            </mbsc-calendar-label>\n\n            <ng-container *ngIf="label.multiDay">\n              <div class="mbsc-calendar-label-wrapper" [style.width]="label.width + \'%\'">\n                  <mbsc-calendar-label\n                    [amText]="s.amText"\n                    [date]="s.date"\n                    [dataTimezone]="dataTimezone"\n                    [displayTimezone]="displayTimezone"\n                    [drag]="s.dragToMove"\n                    [resize]="s.dragToResize"\n                    [event]="label.event"\n                    [exclusiveEndDates]="exclusiveEndDates"\n                    [firstDay]="s.firstDay"\n                    [id]="label.id"\n                    [inactive]="label.event && s.dragData && s.dragData.draggedEvent && label.event.id === s.dragData.draggedEvent.id"\n                    [isActiveMonth]="isActiveMonth"\n                    [isPicker]="s.isPicker"\n                    [label]="label.label"\n                    [lastDay]="label.lastDay"\n                    [pmText]="s.pmText"\n                    [resourcesMap]="s.resourcesMap"\n                    [rtl]="s.rtl"\n                    [selected]="label.event && selectedEventsMap && (selectedEventsMap[label.id] || selectedEventsMap[label.event.id])"\n                    [showEventTooltip]="s.showEventTooltip"\n                    [showText]="true"\n                    [theme]="s.theme"\n                    [timeFormat]="s.timeFormat"\n                    [timezonePlugin]="timezonePlugin"\n                    [template]="labelTemplate"\n                    [contentTemplate]="labelContentTemplate"\n                    [onClick]="_onLabelClick"\n                    [onDoubleClick]="_onLabelDoubleClick"\n                    [onRightClick]="_onLabelRightClick"\n                    [onHoverIn]="_onLabelHoverIn"\n                    [onHoverOut]="_onLabelHoverOut"\n                    [onDelete]="s.onLabelDelete"\n                    [onDragStart]="s.onLabelUpdateStart"\n                    [onDragMove]="s.onLabelUpdateMove"\n                    [onDragEnd]="s.onLabelUpdateEnd"\n                    [onDragModeOn]="s.onLabelUpdateModeOn"\n                    [onDragModeOff]="s.onLabelUpdateModeOff"\n                  >\n                  </mbsc-calendar-label>\n              </div>\n              <mbsc-calendar-label\n                [date]="s.date"\n                [dataTimezone]="dataTimezone"\n                [displayTimezone]="displayTimezone"\n                [drag]="s.dragToMove"\n                [resize]="s.dragToResize"\n                [event]="label.event"\n                [exclusiveEndDates]="exclusiveEndDates"\n                [firstDay]="s.firstDay"\n                [id]="label.id"\n                [inactive]="label.event && s.dragData && s.dragData.draggedEvent && label.event.id === s.dragData.draggedEvent.id"\n                [label]="label.label"\n                [resourcesMap]="s.resourcesMap"\n                [rtl]="s.rtl"\n                [showEventTooltip]="s.showEventTooltip"\n                [theme]="s.theme"\n                [timeFormat]="s.timeFormat"\n                [timezonePlugin]="timezonePlugin"\n                [template]="labelTemplate"\n                [contentTemplate]="labelContentTemplate"\n                [onClick]="_onLabelClick"\n                [onDoubleClick]="_onLabelDoubleClick"\n                [onRightClick]="_onLabelRightClick"\n                [onHoverIn]="_onLabelHoverIn"\n                [onHoverOut]="_onLabelHoverOut"\n                [onDelete]="s.onLabelDelete"\n                [onDragStart]="s.onLabelUpdateStart"\n                [onDragMove]="s.onLabelUpdateMove"\n                [onDragEnd]="s.onLabelUpdateEnd"\n                [onDragModeOn]="s.onLabelUpdateModeOn"\n                [onDragModeOff]="s.onLabelUpdateModeOff"\n              >\n              </mbsc-calendar-label>\n            </ng-container>\n\n            <mbsc-calendar-label *ngIf="!label.multiDay && label.event"\n              [amText]="s.amText"\n              [date]="s.date"\n              [dataTimezone]="dataTimezone"\n              [displayTimezone]="displayTimezone"\n              [drag]="s.dragToMove"\n              [resize]="s.dragToResize"\n              [event]="label.event"\n              [exclusiveEndDates]="exclusiveEndDates"\n              [firstDay]="s.firstDay"\n              [id]="label.id"\n              [inactive]="label.event && s.dragData && s.dragData.draggedEvent && label.event.id === s.dragData.draggedEvent.id"\n              [isActiveMonth]="isActiveMonth"\n              [isPicker]="s.isPicker"\n              [label]="label.label"\n              [pmText]="s.pmText"\n              [resourcesMap]="s.resourcesMap"\n              [rtl]="s.rtl"\n              [selected]="label.event && selectedEventsMap && (selectedEventsMap[label.id] || selectedEventsMap[label.event.id])"\n              [showText]="label.showText"\n              [showEventTooltip]="s.showEventTooltip"\n              [theme]="s.theme"\n              [timeFormat]="s.timeFormat"\n              [timezonePlugin]="timezonePlugin"\n              [template]="labelTemplate"\n              [contentTemplate]="labelContentTemplate"\n              [onClick]="_onLabelClick"\n              [onDoubleClick]="_onLabelDoubleClick"\n              [onRightClick]="_onLabelRightClick"\n              [onHoverIn]="_onLabelHoverIn"\n              [onHoverOut]="_onLabelHoverOut"\n              [onDelete]="s.onLabelDelete"\n              [onDragStart]="s.onLabelUpdateStart"\n              [onDragMove]="s.onLabelUpdateMove"\n              [onDragEnd]="s.onLabelUpdateEnd"\n              [onDragModeOn]="s.onLabelUpdateModeOn"\n              [onDragModeOff]="s.onLabelUpdateModeOff"\n            >\n            </mbsc-calendar-label>\n          </ng-container>\n        </div>\n        <div class="mbsc-calendar-text mbsc-calendar-text-placeholder"></div>\n      </div>\n    </div>\n  '}]}];MbscCalendarDay.propDecorators={active:[{type:core.Input}],amText:[{type:core.Input}],clickToCreate:[{type:core.Input}],colors:[{type:core.Input}],dataTimezone:[{type:core.Input}],date:[{type:core.Input}],day:[{type:core.Input}],dayTemplate:[{type:core.Input}],dayContentTemplate:[{type:core.Input}],disabled:[{type:core.Input}],display:[{type:core.Input}],displayTimezone:[{type:core.Input}],dragToCreate:[{type:core.Input}],dragToResize:[{type:core.Input}],dragToMove:[{type:core.Input}],eventText:[{type:core.Input}],eventsText:[{type:core.Input}],exclusiveEndDates:[{type:core.Input}],firstDay:[{type:core.Input}],hasMarks:[{type:core.Input}],hoverEnd:[{type:core.Input}],hoverStart:[{type:core.Input}],isActiveMonth:[{type:core.Input}],isPicker:[{type:core.Input}],labels:[{type:core.Input}],labelTemplate:[{type:core.Input}],labelContentTemplate:[{type:core.Input}],dragData:[{type:core.Input}],marks:[{type:core.Input}],month:[{type:core.Input}],monthShort:[{type:core.Input}],outer:[{type:core.Input}],pmText:[{type:core.Input}],rangeEnd:[{type:core.Input}],rangeStart:[{type:core.Input}],resourcesMap:[{type:core.Input}],selected:[{type:core.Input}],selectedEventsMap:[{type:core.Input}],showEventTooltip:[{type:core.Input}],text:[{type:core.Input}],timeFormat:[{type:core.Input}],timezonePlugin:[{type:core.Input}],todayText:[{type:core.Input}],type:[{type:core.Input}],year:[{type:core.Input}],onDayClick:[{type:core.Input}],onDayDoubleClick:[{type:core.Input}],onDayRightClick:[{type:core.Input}],onHoverIn:[{type:core.Input}],onHoverOut:[{type:core.Input}],onLabelClick:[{type:core.Input}],onLabelDoubleClick:[{type:core.Input}],onLabelRightClick:[{type:core.Input}],onLabelHoverIn:[{type:core.Input}],onLabelHoverOut:[{type:core.Input}],onLabelDelete:[{type:core.Input}],onLabelUpdateStart:[{type:core.Input}],onLabelUpdateMove:[{type:core.Input}],onLabelUpdateEnd:[{type:core.Input}],onLabelUpdateModeOn:[{type:core.Input}],onLabelUpdateModeOff:[{type:core.Input}]};return MbscCalendarDay}(CalendarDayBase);var MbscCalendarLabel=/*#__PURE__*/function(_super){__extends(MbscCalendarLabel,_super);function MbscCalendarLabel(){return _super!==null&&_super.apply(this,arguments)||this}MbscCalendarLabel.decorators=[{type:core.Component,args:[{changeDetection:core.ChangeDetectionStrategy.OnPush,encapsulation:core.ViewEncapsulation.None,host:{"(click)":"_onClick($event)","(contextmenu)":"_onRightClick($event)","[attr.aria-hidden]":'showText ? null : "true"',"[attr.data-id]":"showText && event ? event.id : null","[attr.role]":'showText ? "button" : null',"[attr.tabindex]":"_tabIndex","[attr.title]":"_title","[class]":"_cssClass","[style.color]":"_color"},selector:"mbsc-calendar-label",template:'\n    <div *ngIf="_hasResizeStart && event && event.editable !== false"\n      [class]="\'mbsc-calendar-label-resize mbsc-calendar-label-resize-start\' + _rtl +\n      (isUpdate ? \' mbsc-calendar-label-resize-start-touch\' : \'\')">\n    </div>\n    <div *ngIf="_hasResizeEnd && event && event.editable !== false"\n      [class]="\'mbsc-calendar-label-resize mbsc-calendar-label-resize-end\' + _rtl +\n      (isUpdate ? \' mbsc-calendar-label-resize-start-touch\' : \'\')">\n    </div>\n    <div *ngIf="showText && !more && !template" [class]="\'mbsc-calendar-label-background\' + _theme"></div>\n    <div *ngIf="!template || !!more" [class]="\'mbsc-calendar-label-inner\' + _theme" [style.color]="_textColor">\n      <div *ngIf="_html"\n        aria-hidden="true"\n        [class]="\'mbsc-calendar-label-text\' + _theme"\n        [style.color]="event && event.textColor"\n        [innerHTML]="_html"\n      >\n      </div>\n      <div *ngIf="!_html" [class]="\'mbsc-calendar-label-text\' + _theme" [style.color]="event && event.textColor">\n        <ng-template\n          [ngTemplateOutlet]="contentTemplate"\n          [ngTemplateOutletContext]="{ $implicit: _data }">\n        </ng-template>\n      </div>\n      <div *ngIf="s.label" class="mbsc-hidden-content">{{s.label}}</div>\n    </div>\n    <ng-template *ngIf="showText && !more && template"\n      [ngTemplateOutlet]="template"\n      [ngTemplateOutletContext]="{ $implicit: _data }">\n    </ng-template>'}]}];MbscCalendarLabel.propDecorators={amText:[{type:core.Input}],contentTemplate:[{type:core.Input}],count:[{type:core.Input}],dataTimezone:[{type:core.Input}],date:[{type:core.Input}],displayTimezone:[{type:core.Input}],drag:[{type:core.Input}],hidden:[{type:core.Input}],firstDay:[{type:core.Input}],event:[{type:core.Input}],editMode:[{type:core.Input}],exclusiveEndDates:[{type:core.Input}],inactive:[{type:core.Input}],isActiveMonth:[{type:core.Input}],label:[{type:core.Input}],resize:[{type:core.Input}],hideLabel:[{type:core.Input}],id:[{type:core.Input}],isPicker:[{type:core.Input}],isUpdate:[{type:core.Input}],lastDay:[{type:core.Input}],more:[{type:core.Input}],pmText:[{type:core.Input}],resourcesMap:[{type:core.Input}],selected:[{type:core.Input}],showEventTooltip:[{type:core.Input}],showText:[{type:core.Input}],template:[{type:core.Input}],timeFormat:[{type:core.Input}],timezonePlugin:[{type:core.Input}],onClick:[{type:core.Input}],onDoubleClick:[{type:core.Input}],onRightClick:[{type:core.Input}],onHoverIn:[{type:core.Input}],onHoverOut:[{type:core.Input}],onDelete:[{type:core.Input}],onDragStart:[{type:core.Input}],onDragMove:[{type:core.Input}],onDragEnd:[{type:core.Input}],onDragModeOn:[{type:core.Input}],onDragModeOff:[{type:core.Input}]};return MbscCalendarLabel}(CalendarLabelBase);var MbscCalendarView=/*#__PURE__*/function(_super){__extends(MbscCalendarView,_super);function MbscCalendarView(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.selectedDates={};_this._noop=noop;return _this}MbscCalendarView.prototype._getFirstDay=function(){return +this._firstDay};MbscCalendarView.prototype._getMonthName=function(item){return this.s.monthNames[new Date(item).getMonth()]};MbscCalendarView.prototype._mounted=function(){this._body=this.vBody.nativeElement;_super.prototype._mounted.call(this);};MbscCalendarView.prototype._updated=function(){this._pickerCont=this.vPickerCont&&this.vPickerCont.nativeElement;_super.prototype._updated.call(this);};MbscCalendarView.decorators=[{type:core.Component,args:[{changeDetection:core.ChangeDetectionStrategy.OnPush,encapsulation:core.ViewEncapsulation.None,host:{"(click)":"_noop","[class]":"_cssClass","[style.height]":"_dim.height","[style.width]":"_dim.width"},selector:"mbsc-calendar-view",template:'\n    <div [class]="\'mbsc-calendar-wrapper mbsc-flex-col mbsc-flex-1-1\' + _theme + _hb +\n      (s.hasContent || !s.showCalendar ? \' mbsc-calendar-wrapper-fixed\' : \'\')\n    ">\n      <div [class]="\'mbsc-calendar-header\' + _theme + _hb + (_isVertical || _variableRow ? \' mbsc-calendar-header-vertical\' : \'\')">\n        <div *ngIf="s.showControls" [class]="\'mbsc-calendar-controls\' + _theme">\n          <ng-template [ngTemplateOutlet]="headerTemplate || defaultHeader"></ng-template>\n          <ng-template #defaultHeader>\n            <mbsc-calendar-nav [class]="\'mbsc-calendar-title-wrapper\' + (_pageNr > 1 ? \' mbsc-calendar-title-wrapper-multi\' : \'\')">\n            </mbsc-calendar-nav>\n            <mbsc-calendar-prev [class]="\'mbsc-calendar-button-prev\' + (_pageNr > 1 ? \' mbsc-calendar-button-prev-multi\' : \'\')">\n            </mbsc-calendar-prev>\n            <mbsc-calendar-today class="mbsc-calendar-header-today">\n            </mbsc-calendar-today>\n            <mbsc-calendar-next [class]="\'mbsc-calendar-button-next\' + (_pageNr > 1 ? \' mbsc-calendar-button-next-multi\' : \'\')">\n            </mbsc-calendar-next>\n          </ng-template>\n        </div>\n        <mbsc-calendar-weekdays *ngIf="(_isVertical || (_variableRow && +s.size! === 1)) && s.showCalendar"\n          [dayNamesShort]="_dayNames"\n          [firstDay]="s.firstDay"\n          [hasScroll]="state.hasScrollY"\n          [hidden]="_view !== MONTH_VIEW && !_hasPicker"\n          [showWeekNumbers]="s.showWeekNumbers"\n          [rtl]="_rtl"\n          [theme]="_theme"\n        >\n        </mbsc-calendar-weekdays>\n      </div>\n      <ng-template #monthView let-timestamp="timestamp" let-drag="drag" let-isActive="isActive">\n        <mbsc-month-view\n          [activeDate]="_active"\n          [amText]="s.amText"\n          [calendarType]="s.calendarType"\n          [cellTextHeight]="state.cellTextHeight"\n          [clickToCreate]="s.clickToCreate"\n          [colors]="_colors"\n          [dayNames]="s.dayNames"\n          [dayNamesShort]="_dayNames"\n          [dayTemplate]="dayTemplate"\n          [dayContentTemplate]="dayContentTemplate"\n          [dataTimezone]="dataTimezone"\n          [displayTimezone]="displayTimezone"\n          [dragData]="drag && s.dragData"\n          [dragToCreate]="drag && s.dragToCreate"\n          [dragToResize]="drag && s.dragToResize"\n          [dragToMove]="drag && s.dragToMove"\n          [eventText]="s.eventText"\n          [eventsText]="s.eventsText"\n          [exclusiveEndDates]="exclusiveEndDates"\n          [firstDay]="s.firstDay"\n          [firstPageDay]="timestamp"\n          [getDate]="s.getDate"\n          [getDay]="s.getDay"\n          [getMonth]="s.getMonth"\n          [getYear]="s.getYear"\n          [getWeekNumber]="s.getWeekNumber"\n          [hasMarks]="!!_marked"\n          [hoverEnd]="s.hoverEnd"\n          [hoverStart]="s.hoverStart"\n          [invalid]="_invalid"\n          [isActive]="isActive"\n          [isPicker]="s.isPicker"\n          [labels]="_labelsLayout"\n          [labelHeight]="state.labelHeight"\n          [labelTemplate]="labelTemplate"\n          [labelContentTemplate]="labelContentTemplate"\n          [marked]="_marked"\n          [max]="_maxDate"\n          [min]="_minDate"\n          [monthNames]="s.monthNames"\n          [monthNamesShort]="s.monthNamesShort"\n          [onDayClick]="_onDayClick"\n          [onDayDoubleClick]="s.onDayDoubleClick"\n          [onDayRightClick]="s.onDayRightClick"\n          [onDayHoverIn]="_onDayHoverIn"\n          [onDayHoverOut]="_onDayHoverOut"\n          [onLabelClick]="_onLabelClick"\n          [onLabelDoubleClick]="s.onLabelDoubleClick"\n          [onLabelRightClick]="s.onLabelRightClick"\n          [onLabelHoverIn]="s.onLabelHoverIn"\n          [onLabelHoverOut]="s.onLabelHoverOut"\n          [onLabelDelete]="s.onLabelDelete"\n          [onLabelUpdateStart]="drag && s.onLabelUpdateStart"\n          [onLabelUpdateMove]="drag && s.onLabelUpdateMove"\n          [onLabelUpdateEnd]="drag && s.onLabelUpdateEnd"\n          [onLabelUpdateModeOn]="drag && s.onLabelUpdateModeOn"\n          [onLabelUpdateModeOff]="drag && s.onLabelUpdateModeOff"\n          [pmText]="s.pmText"\n          [rangeEnd]="s.rangeEnd"\n          [rangeStart]="s.rangeStart"\n          [resourcesMap]="s.resourcesMap"\n          [rtl]="s.rtl"\n          [selectedDates]="s.selectedDates"\n          [selectedEventsMap]="s.selectedEventsMap"\n          [showEventTooltip]="s.showEventTooltip"\n          [showOuter]="_showOuter"\n          [showSingleMark]="!!_marksMap"\n          [showWeekDays]="!_isVertical && !_variableRow"\n          [showWeekNumbers]="s.showWeekNumbers"\n          [theme]="s.theme"\n          [timeFormat]="s.timeFormat"\n          [timezonePlugin]="timezonePlugin"\n          [todayText]="s.todayText"\n          [valid]="_valid"\n          [variableRow]="_variableRow"\n          [weeks]="_weeks"\n          [weekText]="s.weekText"\n        >\n        </mbsc-month-view>\n      </ng-template>\n      <div [class]="\'mbsc-calendar-body mbsc-flex-col mbsc-flex-1-1\' + _theme" (keydown)="_onKeyDown($event)" #body>\n        <div *ngIf="s.showCalendar" [class]="\'mbsc-calendar-body-inner mbsc-flex-col mbsc-flex-1-1\' +\n          (_variableRow ? \' mbsc-calendar-body-inner-variable\' : \'\')"\n        >\n          <div *ngIf="_isGrid"\n            [attr.aria-hidden]="_view !== MONTH_VIEW"\n            [class]="\'mbsc-calendar-grid mbsc-flex-1-1 mbsc-flex-col\' + _theme + _hb"\n          >\n            <div *ngFor="let row of _monthsMulti; trackBy: _getKey" class="mbsc-calendar-grid-row mbsc-flex mbsc-flex-1-1">\n              <div *ngFor="let item of row; trackBy: _getKey"\n                [class]="\'mbsc-calendar-grid-item mbsc-flex-col mbsc-flex-1-1\' + _theme">\n                <div [class]="\'mbsc-calendar-month-title\' + _theme">{{_getMonthName(item)}}</div>\n                <ng-template\n                  [ngTemplateOutlet]="monthView"\n                  [ngTemplateOutletContext]="{\n                    timestamp: item,\n                    drag: false,\n                    isActive: true\n                  }">\n                </ng-template>\n              </div>\n            </div>\n          </div>\n\n          <div *ngIf="!_isGrid && _variableRow"\n            [attr.aria-hidden]="_view !== MONTH_VIEW"\n            [class]="\'mbsc-calendar-slide mbsc-calendar-slide-active \' + _getPickerClass(MONTH_VIEW)"\n          >\n            <ng-template\n              [ngTemplateOutlet]="monthView"\n              [ngTemplateOutletContext]="{\n                timestamp: _getFirstDay(),\n                isActive: true,\n                drag: true\n              }">\n            </ng-template>\n          </div>\n\n          <div *ngIf="s.selectView === MONTH_VIEW && !_isGrid && !_variableRow" (animationend)="_onViewAnimationEnd()"\n            [attr.aria-hidden]="_view !== MONTH_VIEW"\n            [class]="_getPickerClass(MONTH_VIEW)"\n          >\n            <mbsc-scrollview-base #scrollview\n              [axis]="_axis"\n              [batchSize]="1"\n              [changeOnEnd]="true"\n              class="mbsc-calendar-scroll-wrapper"\n              easing="ease-out"\n              [items]="_months"\n              [itemNr]="_pageNr"\n              [itemSize]="state.pageSize / _pageNr"\n              [maxIndex]="_maxIndex"\n              [minIndex]="_minIndex"\n              [mouseSwipe]="s.mouseSwipe"\n              [mousewheel]="_mousewheel"\n              [onAnimationEnd]="_onAnimationEnd"\n              [onGestureStart]="_onGestureStart"\n              [onIndexChange]="_onPageChange"\n              [onStart]="_onStart"\n              [prevAnim]="_prevAnim"\n              [rtl]="s.rtl"\n              [selectedIndex]="_pageIndex"\n              [snap]="true"\n              [swipe]="s.swipe"\n              time="200"\n            >\n              <div *ngFor="let item of scrollview.visibleItems; trackBy: _getKey"\n                [class]="\'mbsc-calendar-slide\' +\n                  (item.key >= _pageIndex && item.key < _pageIndex + _pageNr && _view === MONTH_VIEW ? \' mbsc-calendar-slide-active\' : \'\') +\n                  _theme + _rtl"\n                [ngStyle]="_getPageStyle(item.key, scrollview._offset, _pageNr)"\n              >\n                <ng-template\n                  [ngTemplateOutlet]="monthView"\n                  [ngTemplateOutletContext]="{\n                    timestamp: _getPageDay(item.key),\n                    drag: true,\n                    isActive: item.key >= _pageIndex && item.key < _pageIndex + _pageNr && _view === MONTH_VIEW\n                  }">\n                </ng-template>\n              </div>\n            </mbsc-scrollview-base>\n          </div>\n          <div *ngIf="!_hasPicker" #pickerCont>\n            <ng-container *ngTemplateOutlet="picker"></ng-container>\n          </div>\n        </div>\n      </div>\n    </div>\n    <ng-content></ng-content>\n    <mbsc-popup *ngIf="_hasPicker"\n      [anchor]="_pickerBtn"\n      class="mbsc-calendar-popup"\n      [closeOnScroll]="true"\n      [contentPadding]="false"\n      [context]="s.context"\n      display="anchored"\n      [isOpen]="_view !== MONTH_VIEW"\n      [locale]="s.locale"\n      (onClose)="_onPickerClose()"\n      (onOpen)="_onPickerOpen()"\n      [rtl]="s.rtl"\n      [scrollLock]="false"\n      [showOverlay]="false"\n      [theme]="s.theme"\n      [themeVariant]="s.themeVariant"\n    >\n      <div (keydown)="_onKeyDown($event)">\n        <div [class]="\'mbsc-calendar-controls\' + _theme">\n          <div aria-live="polite" [class]="\'mbsc-calendar-picker-button-wrapper mbsc-calendar-title-wrapper\' + _theme">\n            <mbsc-button\n              class="mbsc-calendar-button"\n              (click)="_onPickerBtnClick($event)"\n              [theme]="s.theme"\n              [themeVariant]="s.themeVariant"\n              variant="flat"\n            >\n              {{_viewTitle}}\n              <mbsc-icon *ngIf="s.downIcon"\n                [svg]="state.view === MULTI_YEAR_VIEW ? s.downIcon : s.upIcon"\n                [theme]="s.theme"\n                [themeVariant]="s.themeVariant"\n              ></mbsc-icon>\n            </mbsc-button>\n          </div>\n          <mbsc-button\n            [attr.aria-label]="s.prevPageText"\n            class="mbsc-calendar-button"\n            (click)="prevPage()"\n            [disabled]="_isPrevDisabled(true)"\n            [iconSvg]="_prevIcon"\n            [theme]="s.theme"\n            [themeVariant]="s.themeVariant"\n            variant="flat"\n          ></mbsc-button>\n          <mbsc-button\n            [attr.aria-label]="s.nextPageText"\n            class="mbsc-calendar-button"\n            (click)="nextPage()"\n            [disabled]="_isNextDisabled(true)"\n            [iconSvg]="_nextIcon"\n            [theme]="s.theme"\n            [themeVariant]="s.themeVariant"\n            variant="flat"\n          ></mbsc-button>\n        </div>\n        <div class="mbsc-calendar-picker-wrapper" #pickerCont>\n          <ng-container *ngTemplateOutlet="picker"></ng-container>\n        </div>\n      </div>\n    </mbsc-popup>\n    <ng-template #picker>\n      <div *ngIf="state.view === MULTI_YEAR_VIEW || state.viewClosing === MULTI_YEAR_VIEW || selectView === MULTI_YEAR_VIEW"\n        (animationend)="_onViewAnimationEnd()"\n        [class]="_getPickerClass(MULTI_YEAR_VIEW)"\n      >\n        <mbsc-scrollview-base #multiYearView\n          [axis]="_axis"\n          [batchSize]="1"\n          [changeOnEnd]="true"\n          [class]="\'mbsc-calendar-scroll-wrapper\' + _theme"\n          easing="ease-out"\n          [items]="_months"\n          [itemSize]="state.pickerSize"\n          [maxIndex]="_maxYearsIndex"\n          [minIndex]="_minYearsIndex"\n          [mousewheel]="_mousewheel"\n          [onGestureEnd]="_onGestureEnd"\n          [onIndexChange]="_onYearsPageChange"\n          [prevAnim]="_prevAnim"\n          [rtl]="s.rtl"\n          [selectedIndex]="_yearsIndex"\n          [snap]="true"\n          time="200"\n        >\n          <div *ngFor="let item of multiYearView.visibleItems; trackBy: _getKey"\n            [attr.aria-hidden]="item.key === _yearsIndex ? undefined : \'true\'"\n            [class]="\'mbsc-calendar-picker-slide mbsc-calendar-slide\' + _theme + _rtl"\n            [ngStyle]="_getPageStyle(item.key, multiYearView._offset)"\n          >\n            <mbsc-multi-year-view\n              [active]="_active"\n              [activeMonth]="_activeMonth"\n              [firstYear]="_getPageYears(item.key)"\n              [getDate]="s.getDate"\n              [getYear]="s.getYear"\n              [max]="_maxYears"\n              [min]="_minYears"\n              [rtl]="s.rtl"\n              [theme]="s.theme"\n              [yearSuffix]="s.yearSuffix"\n              [onYearClick]="_onYearClick"\n            ></mbsc-multi-year-view>\n          </div>\n        </mbsc-scrollview-base>\n      </div>\n      <div *ngIf="state.view === YEAR_VIEW || state.viewClosing === YEAR_VIEW || selectView === YEAR_VIEW"\n        (animationend)="_onViewAnimationEnd()"\n        [class]="_getPickerClass(YEAR_VIEW)"\n      >\n        <mbsc-scrollview-base #yearView\n          [axis]="_axis"\n          [batchSize]="1"\n          [changeOnEnd]="true"\n          [class]="\'mbsc-calendar-scroll-wrapper\' + _theme"\n          easing="ease-out"\n          [items]="_months"\n          [itemSize]="state.pickerSize"\n          [maxIndex]="_maxYearIndex"\n          [minIndex]="_minYearIndex"\n          [mousewheel]="_mousewheel"\n          [onGestureEnd]="_onGestureEnd"\n          [onIndexChange]="_onYearPageChange"\n          [prevAnim]="_prevAnim"\n          [rtl]="s.rtl"\n          [selectedIndex]="_yearIndex"\n          [snap]="true"\n          time="200"\n        >\n          <div *ngFor="let item of yearView.visibleItems; trackBy: _getKey"\n            [attr.aria-hidden]="item.key === _yearIndex ? undefined : \'true\'"\n            [class]="\'mbsc-calendar-picker-slide mbsc-calendar-slide\' + _theme + _rtl"\n            [ngStyle]="_getPageStyle(item.key, yearView._offset)"\n          >\n            <mbsc-year-view\n              [active]="_active"\n              [activeMonth]="_activeMonth"\n              [getDate]="s.getDate"\n              [getMonth]="s.getMonth"\n              [getYear]="s.getYear"\n              [max]="_maxYear"\n              [min]="_minYear"\n              [monthNames]="s.monthNames"\n              [monthNamesShort]="s.monthNamesShort"\n              [onMonthClick]="_onMonthClick"\n              [rtl]="s.rtl"\n              [theme]="s.theme"\n              [year]="_getPageYear(item.key)"\n            ></mbsc-year-view>\n          </div>\n        </mbsc-scrollview-base>\n      </div>\n    </ng-template>'}]}];MbscCalendarView.propDecorators={vBody:[{type:core.ViewChild,args:["body",{static:false}]}],vPickerCont:[{type:core.ViewChild,args:["pickerCont",{static:false}]}],activeDate:[{type:core.Input}],cssClass:[{type:core.Input}],clickToCreate:[{type:core.Input}],colors:[{type:core.Input}],dataTimezone:[{type:core.Input}],dayTemplate:[{type:core.Input}],dayContentTemplate:[{type:core.Input}],displayTimezone:[{type:core.Input}],dragToCreate:[{type:core.Input}],dragToResize:[{type:core.Input}],dragToMove:[{type:core.Input}],endDay:[{type:core.Input}],eventOrder:[{type:core.Input}],eventRange:[{type:core.Input}],eventRangeSize:[{type:core.Input}],exclusiveEndDates:[{type:core.Input}],fromText:[{type:core.Input}],hasContent:[{type:core.Input}],hasPicker:[{type:core.Input}],headerTemplate:[{type:core.Input}],height:[{type:core.Input}],hoverEnd:[{type:core.Input}],hoverStart:[{type:core.Input}],invalid:[{type:core.Input}],instanceService:[{type:core.Input}],isPicker:[{type:core.Input}],labels:[{type:core.Input}],labelTemplate:[{type:core.Input}],labelContentTemplate:[{type:core.Input}],dragData:[{type:core.Input}],max:[{type:core.Input}],marked:[{type:core.Input}],min:[{type:core.Input}],mouseSwipe:[{type:core.Input}],mousewheel:[{type:core.Input}],noOuterChange:[{type:core.Input}],downIcon:[{type:core.Input}],nextIconH:[{type:core.Input}],nextIconV:[{type:core.Input}],nextPageText:[{type:core.Input}],prevIconH:[{type:core.Input}],prevIconV:[{type:core.Input}],prevPageText:[{type:core.Input}],upIcon:[{type:core.Input}],pages:[{type:core.Input}],pageLoad:[{type:core.Input}],refDate:[{type:core.Input}],resourcesMap:[{type:core.Input}],rangeEnd:[{type:core.Input}],rangeStart:[{type:core.Input}],responsiveStyle:[{type:core.Input}],selectedDates:[{type:core.Input}],selectedEventsMap:[{type:core.Input}],selectView:[{type:core.Input}],showCalendar:[{type:core.Input}],showControls:[{type:core.Input}],showEventTooltip:[{type:core.Input}],showLabelCount:[{type:core.Input}],showOuterDays:[{type:core.Input}],showSchedule:[{type:core.Input}],showToday:[{type:core.Input}],showWeekNumbers:[{type:core.Input}],size:[{type:core.Input}],startDay:[{type:core.Input}],swipe:[{type:core.Input}],labelList:[{type:core.Input}],timeFormat:[{type:core.Input}],timezonePlugin:[{type:core.Input}],update:[{type:core.Input}],valid:[{type:core.Input}],weeks:[{type:core.Input}],width:[{type:core.Input}],calendarScroll:[{type:core.Input}],calendarType:[{type:core.Input}],getDate:[{type:core.Input}],getDay:[{type:core.Input}],getMaxDayOfMonth:[{type:core.Input}],getMonth:[{type:core.Input}],getWeekNumber:[{type:core.Input}],getYear:[{type:core.Input}],amText:[{type:core.Input}],dateFormat:[{type:core.Input}],dayNames:[{type:core.Input}],dayNamesMin:[{type:core.Input}],dayNamesShort:[{type:core.Input}],eventText:[{type:core.Input}],eventsText:[{type:core.Input}],firstDay:[{type:core.Input}],monthNames:[{type:core.Input}],monthNamesShort:[{type:core.Input}],moreEventsPluralText:[{type:core.Input}],moreEventsText:[{type:core.Input}],pmText:[{type:core.Input}],todayText:[{type:core.Input}],toText:[{type:core.Input}],weekText:[{type:core.Input}],yearSuffix:[{type:core.Input}],onActiveChange:[{type:core.Input}],onCellHoverIn:[{type:core.Input}],onCellHoverOut:[{type:core.Input}],onDayClick:[{type:core.Input}],onDayDoubleClick:[{type:core.Input}],onDayRightClick:[{type:core.Input}],onDayHoverIn:[{type:core.Input}],onDayHoverOut:[{type:core.Input}],onGestureStart:[{type:core.Input}],onLabelClick:[{type:core.Input}],onLabelDoubleClick:[{type:core.Input}],onLabelRightClick:[{type:core.Input}],onLabelHoverIn:[{type:core.Input}],onLabelHoverOut:[{type:core.Input}],onLabelDelete:[{type:core.Input}],onLabelUpdateStart:[{type:core.Input}],onLabelUpdateMove:[{type:core.Input}],onLabelUpdateEnd:[{type:core.Input}],onLabelUpdateModeOn:[{type:core.Input}],onLabelUpdateModeOff:[{type:core.Input}],onPageChange:[{type:core.Input}],onPageLoaded:[{type:core.Input}],onPageLoading:[{type:core.Input}],onResize:[{type:core.Input}],onTodayClick:[{type:core.Input}]};return MbscCalendarView}(CalendarViewBase);var MbscCalendarWeekDays=/*#__PURE__*/function(){function MbscCalendarWeekDays(){this.days=ARRAY7;}MbscCalendarWeekDays.decorators=[{type:core.Component,args:[{changeDetection:core.ChangeDetectionStrategy.OnPush,encapsulation:core.ViewEncapsulation.None,host:{"aria-hidden":"true",class:"mbsc-calendar-week-days mbsc-flex"},selector:"mbsc-calendar-weekdays",template:'<div *ngIf="showWeekNumbers" [ngClass]="\'mbsc-calendar-week-day mbsc-calendar-week-nr mbsc-flex-none\' + theme + rtl"></div>\n    <div\n      [ngClass]="\'mbsc-calendar-week-day mbsc-flex-1-0-0\' + theme + rtl"\n      *ngFor="let d of days;index as i;"\n    >\n      {{dayNamesShort[(i + firstDay) % 7]}}\n    </div>\n    <div *ngIf="hasScroll" class="mbsc-schedule-fake-scroll-y"></div>'}]}];MbscCalendarWeekDays.propDecorators={firstDay:[{type:core.Input}],hasScroll:[{type:core.Input}],dayNamesShort:[{type:core.Input}],rtl:[{type:core.Input}],showWeekNumbers:[{type:core.Input}],theme:[{type:core.Input}]};return MbscCalendarWeekDays}();var MbscMonthView=/*#__PURE__*/function(_super){__extends(MbscMonthView,_super);function MbscMonthView(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.selectedDates={};_this.showEventTooltip={};return _this}MbscMonthView.decorators=[{type:core.Component,args:[{changeDetection:core.ChangeDetectionStrategy.OnPush,encapsulation:core.ViewEncapsulation.None,selector:"mbsc-month-view",template:'\n    <div [attr.aria-hidden]="s.isActive ? undefined : \'true\'"\n      [class]="\'mbsc-calendar-table mbsc-flex-col mbsc-flex-1-1\' + (s.isActive ? \' mbsc-calendar-table-active\' : \'\')"\n    >\n      <mbsc-calendar-weekdays *ngIf="showWeekDays"\n        [rtl]="_rtl"\n        [theme]="_theme"\n        [firstDay]="s.firstDay"\n        [dayNamesShort]="s.dayNamesShort"\n        [showWeekNumbers]="s.showWeekNumbers">\n      </mbsc-calendar-weekdays>\n      <div *ngFor="let row of _rows; trackBy: _getKey; let i = index" [style.minHeight.px]="_rowHeights[i] || 0"\n        class="mbsc-calendar-row mbsc-flex mbsc-flex-1-0"\n      >\n        <div *ngIf="s.showWeekNumbers" [ngClass]="\'mbsc-calendar-cell mbsc-flex-none mbsc-calendar-day mbsc-calendar-week-nr\' + _theme">\n          <div aria-hidden="true">{{_getWeekNr(s, row[0].date)}}</div>\n          <div class="mbsc-hidden-content">{{s.weekText.replace(\'{count}\', _getWeekNr(s, row[0].date))}}</div>\n        </div>\n        <mbsc-calendar-day *ngFor="let cell of row; trackBy: _getKey"\n          type="day"\n          [active]="cell.display && _isActive(cell.date)"\n          [amText]="s.amText"\n          [colors]="cell.colors"\n          [clickToCreate]="s.clickToCreate"\n          [date]="cell.date"\n          [day]="cell.day"\n          [dayTemplate]="dayTemplate"\n          [dayContentTemplate]="dayContentTemplate"\n          [disabled]="_isInvalid(cell.date)"\n          [display]="cell.display"\n          [dataTimezone]="dataTimezone"\n          [displayTimezone]="displayTimezone"\n          [dragToCreate]="s.dragToCreate"\n          [dragToResize]="s.dragToResize"\n          [dragToMove]="s.dragToMove"\n          [eventText]="s.eventText"\n          [eventsText]="s.eventsText"\n          [exclusiveEndDates]="exclusiveEndDates"\n          [firstDay]="s.firstDay"\n          [hasMarks]="s.hasMarks"\n          [hoverEnd]="s.hoverEnd"\n          [hoverStart]="s.hoverStart"\n          [isActiveMonth]="s.isActive"\n          [isPicker]="s.isPicker"\n          [labels]="cell.labels"\n          [labelTemplate]="labelTemplate"\n          [labelContentTemplate]="labelContentTemplate"\n          [dragData]="s.dragData"\n          [marks]="cell.marks"\n          [month]="cell.month"\n          [monthShort]="cell.monthShort"\n          [outer]="cell.outer"\n          [pmText]="s.pmText"\n          [rangeEnd]="s.rangeEnd"\n          [rangeStart]="s.rangeStart"\n          [resourcesMap]="s.resourcesMap"\n          [rtl]="s.rtl"\n          [selected]="_isSelected(cell.date)"\n          [selectedEventsMap]="s.selectedEventsMap"\n          [showEventTooltip]="s.showEventTooltip"\n          [text]="cell.text"\n          [timeFormat]="s.timeFormat"\n          [timezonePlugin]="timezonePlugin"\n          [todayText]="s.todayText"\n          [theme]="s.theme"\n          [year]="cell.year"\n          [onDayClick]="s.onDayClick"\n          [onDayDoubleClick]="s.onDayDoubleClick"\n          [onDayRightClick]="s.onDayRightClick"\n          [onHoverIn]="s.onDayHoverIn"\n          [onHoverOut]="s.onDayHoverOut"\n          [onLabelClick]="s.onLabelClick"\n          [onLabelDoubleClick]="s.onLabelDoubleClick"\n          [onLabelRightClick]="s.onLabelRightClick"\n          [onLabelHoverIn]="s.onLabelHoverIn"\n          [onLabelHoverOut]="s.onLabelHoverOut"\n          [onLabelDelete]="s.onLabelDelete"\n          [onLabelUpdateStart]="s.onLabelUpdateStart"\n          [onLabelUpdateMove]="s.onLabelUpdateMove"\n          [onLabelUpdateEnd]="s.onLabelUpdateEnd"\n          [onLabelUpdateModeOn]="s.onLabelUpdateModeOn"\n          [onLabelUpdateModeOff]="s.onLabelUpdateModeOff"\n        ></mbsc-calendar-day>\n      </div>\n    </div>\n  '}]}];MbscMonthView.propDecorators={activeDate:[{type:core.Input}],amText:[{type:core.Input}],calendarType:[{type:core.Input}],cellTextHeight:[{type:core.Input}],clickToCreate:[{type:core.Input}],colors:[{type:core.Input}],dataTimezone:[{type:core.Input}],dayNames:[{type:core.Input}],dayNamesMin:[{type:core.Input}],dayNamesShort:[{type:core.Input}],dayTemplate:[{type:core.Input}],dayContentTemplate:[{type:core.Input}],displayTimezone:[{type:core.Input}],dragToCreate:[{type:core.Input}],dragToResize:[{type:core.Input}],dragToMove:[{type:core.Input}],eventText:[{type:core.Input}],eventsText:[{type:core.Input}],exclusiveEndDates:[{type:core.Input}],firstDay:[{type:core.Input}],firstPageDay:[{type:core.Input}],hasMarks:[{type:core.Input}],hoverEnd:[{type:core.Input}],hoverStart:[{type:core.Input}],isActive:[{type:core.Input}],isPicker:[{type:core.Input}],invalid:[{type:core.Input}],labels:[{type:core.Input}],labelHeight:[{type:core.Input}],labelTemplate:[{type:core.Input}],labelContentTemplate:[{type:core.Input}],dragData:[{type:core.Input}],marked:[{type:core.Input}],max:[{type:core.Input}],min:[{type:core.Input}],monthNames:[{type:core.Input}],monthNamesShort:[{type:core.Input}],pmText:[{type:core.Input}],rangeEnd:[{type:core.Input}],rangeStart:[{type:core.Input}],selectedDates:[{type:core.Input}],selectedEventsMap:[{type:core.Input}],showEventTooltip:[{type:core.Input}],showOuter:[{type:core.Input}],showWeekDays:[{type:core.Input}],showWeekNumbers:[{type:core.Input}],showSingleMark:[{type:core.Input}],resourcesMap:[{type:core.Input}],todayText:[{type:core.Input}],timeFormat:[{type:core.Input}],timezonePlugin:[{type:core.Input}],valid:[{type:core.Input}],variableRow:[{type:core.Input}],weeks:[{type:core.Input}],weekText:[{type:core.Input}],getDate:[{type:core.Input}],getDay:[{type:core.Input}],getMonth:[{type:core.Input}],getWeekNumber:[{type:core.Input}],getYear:[{type:core.Input}],onDayClick:[{type:core.Input}],onDayDoubleClick:[{type:core.Input}],onDayRightClick:[{type:core.Input}],onDayHoverIn:[{type:core.Input}],onDayHoverOut:[{type:core.Input}],onLabelClick:[{type:core.Input}],onLabelDoubleClick:[{type:core.Input}],onLabelRightClick:[{type:core.Input}],onLabelHoverIn:[{type:core.Input}],onLabelHoverOut:[{type:core.Input}],onLabelDelete:[{type:core.Input}],onLabelUpdateStart:[{type:core.Input}],onLabelUpdateMove:[{type:core.Input}],onLabelUpdateEnd:[{type:core.Input}],onLabelUpdateModeOn:[{type:core.Input}],onLabelUpdateModeOff:[{type:core.Input}]};return MbscMonthView}(MonthViewBase);var MbscMultiYearView=/*#__PURE__*/function(){function MbscMultiYearView(){}MbscMultiYearView.prototype.ngOnChanges=function(){this._rows=[];this._selectedYear=this.getYear(new Date(this.active));this._activeYear=this.getYear(new Date(this.activeMonth));for(var i=0;i<4;i++){var row=[];for(var j=0;j<3;j++){var year=this.firstYear+i*3+j;var d=+this.getDate(year,0,1);row.push({d:d,year:year});}this._rows.push(row);}};MbscMultiYearView.prototype.getKey=function(index,item){return item.key};MbscMultiYearView.decorators=[{type:core.Component,args:[{changeDetection:core.ChangeDetectionStrategy.OnPush,encapsulation:core.ViewEncapsulation.None,host:{class:"mbsc-calendar-table mbsc-flex-col"},selector:"mbsc-multi-year-view",template:'<div class="mbsc-calendar-row mbsc-flex mbsc-flex-1-0" *ngFor="let row of _rows; trackBy: getKey">\n    <mbsc-calendar-day *ngFor="let cell of row; trackBy: getKey"\n      [active]="cell.year === _activeYear"\n      [date]="cell.d"\n      [display]="true"\n      [selected]="cell.year === _selectedYear"\n      [disabled]="cell.year < this.min || cell.year > this.max"\n      [rtl]="rtl"\n      [text]="cell.year + yearSuffix"\n      [theme]="theme"\n      type="year"\n      [onDayClick]="onYearClick"\n    ></mbsc-calendar-day>\n  </div>'}]}];MbscMultiYearView.propDecorators={active:[{type:core.Input}],activeMonth:[{type:core.Input}],firstYear:[{type:core.Input}],getDate:[{type:core.Input}],getYear:[{type:core.Input}],max:[{type:core.Input}],min:[{type:core.Input}],rtl:[{type:core.Input}],theme:[{type:core.Input}],yearSuffix:[{type:core.Input}],onYearClick:[{type:core.Input}]};return MbscMultiYearView}();function getItem(items,i,min,max){var item;if(i<min||i>max){return}if(isArray(items)){var len=items.length;var index=i%len;item=items[index>=0?index:index+len];}else {item=items(i);}return item}var ScrollviewBase=/*#__PURE__*/function(_super){__extends(ScrollviewBase,_super);function ScrollviewBase(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this._currPos=0;_this._delta=0;_this._endPos=0;_this._lastRaf=0;_this._maxSnapScroll=0;_this._margin=0;_this._scrollEnd=debounce((function(){rafc(_this._raf);_this._raf=false;_this._onEnd();_this._hasScrolled=false;}),200);_this._onStart=function(args){var s=_this.s;_this._hook("onStart",{});if(s.changeOnEnd&&_this._isScrolling||!s.mouseSwipe&&!args.isTouch||!s.swipe){return}_this._started=true;_this._hasScrolled=_this._isScrolling;_this._currX=args.startX;_this._currY=args.startY;_this._delta=0;_this._velocityX=0;_this._velocityY=0;_this._startPos=getPosition(_this._scrollEl,_this._isVertical);_this._timestamp=+new Date;if(_this._isScrolling){rafc(_this._raf);_this._raf=false;_this._scroll(_this._startPos);}};_this._onMove=function(args){var ev=args.domEvent;var s=_this.s;if(_this._isVertical||s.scrollLock){if(ev.cancelable){ev.preventDefault();}}else {if(_this._hasScrolled){if(ev.cancelable){ev.preventDefault();}}else if(ev.type===TOUCH_MOVE&&(Math.abs(args.deltaY)>7||!s.swipe)){_this._started=false;}}if(!_this._started){return}_this._delta=_this._isVertical?args.deltaY:args.deltaX;if(_this._hasScrolled||Math.abs(_this._delta)>_this._threshold){if(!_this._hasScrolled){_this._hook("onGestureStart",{});}_this._hasScrolled=true;_this._isScrolling=true;if(!_this._raf){_this._raf=raf((function(){return _this._move(args)}));}}};_this._onEnd=function(){_this._started=false;if(_this._hasScrolled){var s=_this.s;var v=(_this._isVertical?_this._velocityY:_this._velocityX)*17;var maxSnapScroll=_this._maxSnapScroll;var delta=_this._delta;var time=0;delta+=v*v*.5*(v<0?-1:1);if(maxSnapScroll){delta=constrain(delta,-_this._round*maxSnapScroll,_this._round*maxSnapScroll);}var pos=constrain(round((_this._startPos+delta)/_this._round)*_this._round,_this._min,_this._max);var index=round(-pos*_this._rtlNr/s.itemSize)+_this._offset;var direction=delta>0?_this._isVertical?270:360:_this._isVertical?90:180;var diff=index-s.selectedIndex;time=s.time||Math.max(1e3,Math.abs(pos-_this._currPos)*3);_this._hook("onGestureEnd",{direction:direction,index:index});_this._delta=0;_this._scroll(pos,time);if(diff&&!s.changeOnEnd){_this._hook("onIndexChange",{index:index,diff:diff});if(s.selectedIndex===_this._prevIndex&&s.selectedIndex!==index){_this.forceUpdate();}}}};_this._onClick=function(ev){if(_this._hasScrolled){_this._hasScrolled=false;ev.stopPropagation();ev.preventDefault();}};_this._onScroll=function(ev){ev.target.scrollTop=0;ev.target.scrollLeft=0;};_this._onMouseWheel=function(ev){var delta=_this._isVertical?ev.deltaY===UNDEFINED?ev.wheelDelta||ev.detail:ev.deltaY:ev.deltaX;if(!_this._el.contains(ev.target)){return}if(delta&&_this.s.mousewheel){ev.preventDefault();_this._hook("onStart",{});if(!_this._started){_this._delta=0;_this._velocityX=0;_this._velocityY=0;_this._startPos=_this._currPos;_this._hook("onGestureStart",{});}if(ev.deltaMode&&ev.deltaMode===1){delta*=15;}delta=constrain(-delta,-_this._scrollSnap,_this._scrollSnap);_this._delta+=delta;if(_this._maxSnapScroll&&Math.abs(_this._delta)>_this._round*_this._maxSnapScroll){delta=0;}if(_this._startPos+_this._delta<_this._min){_this._startPos=_this._min;_this._delta=0;delta=0;}if(_this._startPos+_this._delta>_this._max){_this._startPos=_this._max;_this._delta=0;delta=0;}if(!_this._raf){_this._raf=raf((function(){return _this._move()}));}if(!delta&&_this._started){return}_this._hasScrolled=true;_this._isScrolling=true;_this._started=true;_this._scrollEnd();}};_this._onTrackStart=function(ev){ev.stopPropagation();var args={domEvent:ev,startX:getCoord(ev,"X",true),startY:getCoord(ev,"Y",true)};_this._onStart(args);_this._trackStartX=args.startX;_this._trackStartY=args.startY;if(ev.target===_this._scrollbarEl){listen(_this._doc,MOUSE_UP,_this._onTrackEnd);listen(_this._doc,MOUSE_MOVE,_this._onTrackMove);}else {var top_1=getOffset(_this._scrollbarContEl).top;var percent=(args.startY-top_1)/_this._barContSize;_this._startPos=_this._currPos=_this._max+(_this._min-_this._max)*percent;_this._hasScrolled=true;_this._onEnd();}};_this._onTrackMove=function(ev){var barContSize=_this._barContSize;var endX=getCoord(ev,"X",true);var endY=getCoord(ev,"Y",true);var trackDelta=_this._isVertical?endY-_this._trackStartY:endX-_this._trackStartX;var percent=trackDelta/barContSize;if(_this._isInfinite){_this._delta=-(_this._maxSnapScroll*_this._round*2+barContSize)*percent;}else {_this._delta=(_this._min-_this._max-barContSize)*percent;}if(_this._hasScrolled||Math.abs(_this._delta)>_this._threshold){if(!_this._hasScrolled){_this._hook("onGestureStart",{});}_this._hasScrolled=true;_this._isScrolling=true;if(!_this._raf){_this._raf=raf((function(){return _this._move({endX:endX,endY:endY},!_this._isInfinite)}));}}};_this._onTrackEnd=function(){_this._delta=0;_this._startPos=_this._currPos;_this._onEnd();unlisten(_this._doc,MOUSE_UP,_this._onTrackEnd);unlisten(_this._doc,MOUSE_MOVE,_this._onTrackMove);};_this._onTrackClick=function(ev){ev.stopPropagation();};return _this}ScrollviewBase.prototype._render=function(s,state){var prevS=this._prevS;var batchSize=s.batchSize;var batchSize3d=s.batchSize3d;var itemNr=s.itemNr||1;var itemSize=s.itemSize;var selectedIndex=s.selectedIndex;var prevIndex=prevS.selectedIndex;var currIndex=state.index===UNDEFINED?selectedIndex:state.index;var visibleItems=[];var visible3dItems=[];var diff=selectedIndex-prevIndex;var diff2=currIndex-this._currIndex;var minIndex=s.minIndex;var maxIndex=s.maxIndex;var items=s.items;var offset=s.offset;this._currIndex=currIndex;this._isVertical=s.axis==="Y";this._threshold=this._isVertical?s.thresholdY:s.thresholdX;this._rtlNr=!this._isVertical&&s.rtl?-1:1;this._round=s.snap?itemSize:1;var scrollSnap=this._round;while(scrollSnap>44){scrollSnap/=2;}this._scrollSnap=round(44/scrollSnap)*scrollSnap;if(items){for(var i=currIndex-batchSize;i<currIndex+itemNr+batchSize;i++){visibleItems.push({key:i,data:getItem(items,i,minIndex,maxIndex)});}if(s.scroll3d){for(var i=currIndex-batchSize3d;i<currIndex+itemNr+batchSize3d;i++){visible3dItems.push({key:i,data:getItem(items,i,minIndex,maxIndex)});}}this.visibleItems=visibleItems;this.visible3dItems=visible3dItems;this._maxSnapScroll=batchSize;this._isInfinite=typeof items==="function";}if(this._offset===UNDEFINED){this._offset=selectedIndex;}var nextPos=-(selectedIndex-this._offset)*itemSize*this._rtlNr;if(Math.abs(diff)>batchSize&&nextPos!==this._endPos){var off=diff+batchSize*(diff>0?-1:1);this._offset+=off;this._margin-=off;}if(offset&&offset!==prevS.offset){this._offset+=offset;this._margin-=offset;}if(diff2){this._margin+=diff2;}if(minIndex!==UNDEFINED){this._max=-(minIndex-this._offset)*itemSize*this._rtlNr;}else {this._max=Infinity;}if(maxIndex!==UNDEFINED){this._min=-(maxIndex-this._offset-(s.spaceAround?0:itemNr-1))*itemSize*this._rtlNr;}else {this._min=-Infinity;}if(this._rtlNr===-1){var temp=this._min;this._min=this._max;this._max=temp;}if(this._min>this._max){this._min=this._max;}var visibleSize=s.visibleSize;var barContSize=visibleSize*itemSize;this._barContSize=barContSize;this._barSize=Math.max(20,barContSize*barContSize/(this._max-this._min+barContSize));this._cssClass=this._className+" mbsc-ltr";};ScrollviewBase.prototype._mounted=function(){this._doc=getDocument(this._el);listen(this._el,CLICK,this._onClick,true);listen(this.s.scroll3d?this._innerEl:this._el,SCROLL,this._onScroll);listen(this._doc,MOUSE_WHEEL,this._onMouseWheel,{passive:false,capture:true});listen(this._doc,WHEEL,this._onMouseWheel,{passive:false,capture:true});listen(this._scrollbarContEl,MOUSE_DOWN,this._onTrackStart);listen(this._scrollbarContEl,CLICK,this._onTrackClick);this._unlisten=gestureListener(this._el,{onEnd:this._onEnd,onMove:this._onMove,onStart:this._onStart,prevDef:true});};ScrollviewBase.prototype._updated=function(){var s=this.s;var batchSize=s.batchSize;var itemSize=s.itemSize;var selectedIndex=s.selectedIndex;var prevIndex=this._prevIndex;var shouldAnimate=!s.prevAnim&&(prevIndex!==UNDEFINED&&prevIndex!==selectedIndex||this._isAnimating);var newPos=-(selectedIndex-this._offset)*itemSize*this._rtlNr;if(s.margin){this._scrollEl.style.marginTop=this._isVertical?(this._margin-batchSize)*itemSize+"px":"";}if(!this._started){this._scroll(newPos,shouldAnimate?this._isAnimating||s.time||1e3:0);}this._prevIndex=selectedIndex;};ScrollviewBase.prototype._destroy=function(){unlisten(this._el,CLICK,this._onClick,true);unlisten(this.s.scroll3d?this._innerEl:this._el,SCROLL,this._onScroll);unlisten(this._doc,MOUSE_WHEEL,this._onMouseWheel,{passive:false,capture:true});unlisten(this._doc,WHEEL,this._onMouseWheel,{passive:false,capture:true});unlisten(this._scrollbarContEl,MOUSE_DOWN,this._onTrackStart);unlisten(this._scrollbarContEl,CLICK,this._onTrackClick);rafc(this._raf);this._raf=false;this._scroll(0);this._unlisten();};ScrollviewBase.prototype._anim=function(dir){var _this=this;return this._raf=raf((function(){var s=_this.s;var now=+new Date;if(!_this._raf){return}if((_this._currPos-_this._endPos)*-dir<4){_this._currPos=_this._endPos;_this._raf=false;_this._isAnimating=0;_this._isScrolling=false;_this._infinite(_this._currPos);_this._hook("onAnimationEnd",{});_this._scrollbarContEl.classList.remove("mbsc-scroller-bar-started");return}if(now-_this._lastRaf>100){_this._lastRaf=now;_this._currPos=getPosition(_this._scrollEl,_this._isVertical);if(!s.changeOnEnd){_this._infinite(_this._currPos);}}_this._raf=_this._anim(dir);}))};ScrollviewBase.prototype._infinite=function(pos){var s=this.s;if(s.itemSize){var index=round(-pos*this._rtlNr/s.itemSize)+this._offset;var diff=index-this._currIndex;if(diff){if(s.changeOnEnd){this._hook("onIndexChange",{index:index,diff:diff});}else {this.setState({index:index});}}}};ScrollviewBase.prototype._scroll=function(pos,time){var s=this.s;var itemSize=s.itemSize;var isVertical=this._isVertical;var style=this._scrollEl.style;var prefix=jsPrefix?jsPrefix+"T":"t";var timing=time?cssPrefix+"transform "+round(time)+"ms "+s.easing:"";style[prefix+"ransform"]="translate3d("+(isVertical?"0,"+pos+"px,":pos+"px,0,")+"0)";style[prefix+"ransition"]=timing;this._endPos=pos;if(s.scroll3d){var style3d=this._scrollEl3d.style;var angle=360/(s.batchSize3d*2);style3d[prefix+"ransform"]="translateY(-50%) rotateX("+-pos/itemSize*angle+"deg)";style3d[prefix+"ransition"]=timing;}if(this._scrollbarEl){var sbStyle=this._scrollbarEl.style;var percent=this._isInfinite?(this._maxSnapScroll*this._round-this._delta)/(this._maxSnapScroll*this._round*2):(pos-this._max)/(this._min-this._max);var barPos=constrain((this._barContSize-this._barSize)*percent,0,this._barContSize-this._barSize);sbStyle[prefix+"ransform"]="translate3d("+(isVertical?"0,"+barPos+"px,":barPos+"px,0,")+"0)";sbStyle[prefix+"ransition"]=timing;}if(time){rafc(this._raf);this._isAnimating=time;this._scrollbarContEl.classList.add("mbsc-scroller-bar-started");this._raf=this._anim(pos>this._currPos?1:-1);}else {this._currPos=pos;if(!s.changeOnEnd){this._infinite(pos);}}};ScrollviewBase.prototype._move=function(args,preventMaxSnap){var prevX=this._currX;var prevY=this._currY;var prevT=this._timestamp;var maxSnapScroll=this._maxSnapScroll;if(args){this._currX=args.endX;this._currY=args.endY;this._timestamp=+new Date;var timeDelta=this._timestamp-prevT;if(timeDelta>0&&timeDelta<100){var velocityX=(this._currX-prevX)/timeDelta;var velocityY=(this._currY-prevY)/timeDelta;this._velocityX=velocityX*.7+this._velocityX*.3;this._velocityY=velocityY*.7+this._velocityY*.3;}}if(maxSnapScroll&&!preventMaxSnap){this._delta=constrain(this._delta,-this._round*maxSnapScroll,this._round*maxSnapScroll);}this._scroll(constrain(this._startPos+this._delta,this._min-this.s.itemSize,this._max+this.s.itemSize));this._raf=false;};ScrollviewBase.defaults={axis:"Y",batchSize:40,easing:"cubic-bezier(0.190, 1.000, 0.220, 1.000)",mouseSwipe:true,mousewheel:true,prevDef:true,selectedIndex:0,spaceAround:true,stopProp:true,swipe:true,thresholdX:10,thresholdY:5};ScrollviewBase.decorators=[{type:core.Directive,args:[{selector:"[mbsc-sv-b]"}]}];return ScrollviewBase}(BaseComponent);var MbscScrollviewBase=/*#__PURE__*/function(_super){__extends(MbscScrollviewBase,_super);function MbscScrollviewBase(){return _super!==null&&_super.apply(this,arguments)||this}Object.defineProperty(MbscScrollviewBase.prototype,"vEl3d",{set:function(el){this._scrollEl3d=el&&el.nativeElement;},enumerable:true,configurable:true});MbscScrollviewBase.prototype._mounted=function(){this._innerEl=this.vInnerEl.nativeElement;this._scrollEl=this.vEl.nativeElement;this._scrollbarContEl=this.vBarCont.nativeElement;this._scrollbarEl=this.vBar.nativeElement;_super.prototype._mounted.call(this);};MbscScrollviewBase.decorators=[{type:core.Component,args:[{changeDetection:core.ChangeDetectionStrategy.OnPush,encapsulation:core.ViewEncapsulation.None,host:{"[class]":"_cssClass"},selector:"mbsc-scrollview-base",template:'\n    <div #innerEl [class]="s.innerClass || \'\'" [ngStyle]="s.innerStyles">\n      <div #el [class]="\'mbsc-scrollview-scroll\' + _rtl">\n        <ng-content></ng-content>\n      </div>\n    </div>\n    <div *ngIf="s.scroll3d" #el3d [style.height.px]="s.itemSize" class="mbsc-scroller-items-3d">\n      <ng-content select="[content-3d]"></ng-content>\n    </div>\n    <div [class]="\'mbsc-scroller-bar-cont\' + _rtl +\n      (!s.scrollBar || _barSize === _barContSize ? \' mbsc-scroller-bar-hidden\' : \'\') +\n      (_started ? \' mbsc-scroller-bar-started\' : \'\')" #barCont\n    >\n      <div [class]="\'mbsc-scroller-bar\' + _theme" #bar [style.height.px]="_barSize" ></div>\n    </div>\n  '}]}];MbscScrollviewBase.propDecorators={vEl:[{type:core.ViewChild,args:["el",{static:true}]}],vEl3d:[{type:core.ViewChild,args:["el3d",{static:false}]}],vInnerEl:[{type:core.ViewChild,args:["innerEl",{static:true}]}],vBarCont:[{type:core.ViewChild,args:["barCont",{static:true}]}],vBar:[{type:core.ViewChild,args:["bar",{static:true}]}],axis:[{type:core.Input}],batchSize:[{type:core.Input}],batchSize3d:[{type:core.Input}],changeOnEnd:[{type:core.Input}],easing:[{type:core.Input}],innerClass:[{type:core.Input}],innerStyles:[{type:core.Input}],items:[{type:core.Input}],itemSize:[{type:core.Input}],itemNr:[{type:core.Input}],selectedIndex:[{type:core.Input}],margin:[{type:core.Input}],maxIndex:[{type:core.Input}],minIndex:[{type:core.Input}],mouseSwipe:[{type:core.Input}],mousewheel:[{type:core.Input}],offset:[{type:core.Input}],prevAnim:[{type:core.Input}],scroll3d:[{type:core.Input}],scrollBar:[{type:core.Input}],snap:[{type:core.Input}],spaceAround:[{type:core.Input}],swipe:[{type:core.Input}],time:[{type:core.Input}],touchUi:[{type:core.Input}],visibleSize:[{type:core.Input}],onAnimationEnd:[{type:core.Input}],onGestureStart:[{type:core.Input}],onGestureEnd:[{type:core.Input}],onIndexChange:[{type:core.Input}],onStart:[{type:core.Input}]};return MbscScrollviewBase}(ScrollviewBase);var MbscScrollviewBaseModule=/*#__PURE__*/function(){function MbscScrollviewBaseModule(){}MbscScrollviewBaseModule.decorators=[{type:core.NgModule,args:[{declarations:[MbscScrollviewBase,ScrollviewBase],exports:[MbscScrollviewBase],imports:[common.CommonModule]}]}];return MbscScrollviewBaseModule}();var MbscYearView=/*#__PURE__*/function(){function MbscYearView(){}MbscYearView.prototype.ngOnChanges=function(){this._rows=[];var active=new Date(this.activeMonth);var selected=new Date(this.active);this._activeYear=this.getYear(active);this._activeMonth=this.getMonth(active);this._selectedYear=this.getYear(selected);this._selectedMonth=this.getMonth(selected);for(var i=0;i<4;i++){var row=[];for(var j=0;j<3;j++){var d=this.getDate(this.year,i*3+j,1);var y=this.getYear(d);var m=this.getMonth(d);row.push({d:d,y:y,m:m});}this._rows.push(row);}};MbscYearView.prototype.getKey=function(index,item){return item.key};MbscYearView.decorators=[{type:core.Component,args:[{changeDetection:core.ChangeDetectionStrategy.OnPush,encapsulation:core.ViewEncapsulation.None,host:{class:"mbsc-calendar-table mbsc-flex-col"},selector:"mbsc-year-view",template:'<div class="mbsc-calendar-row mbsc-flex mbsc-flex-1-0" *ngFor="let row of _rows; trackBy: getKey">\n    <mbsc-calendar-day *ngFor="let cell of row; trackBy: getKey"\n      [active]="cell.y === _activeYear && cell.m === _activeMonth"\n      [date]="cell.d"\n      [display]="true"\n      [selected]="cell.y === _selectedYear && cell.m === _selectedMonth"\n      [disabled]="cell.d < this.min || cell.d >= this.max"\n      month="monthNames[cell.m]"\n      [rtl]="rtl"\n      [text]="monthNamesShort[cell.m]"\n      [theme]="theme"\n      type="month"\n      [onDayClick]="onMonthClick"\n    ></mbsc-calendar-day>\n  </div>'}]}];MbscYearView.propDecorators={active:[{type:core.Input}],activeMonth:[{type:core.Input}],getDate:[{type:core.Input}],getMonth:[{type:core.Input}],getYear:[{type:core.Input}],max:[{type:core.Input}],min:[{type:core.Input}],monthNames:[{type:core.Input}],monthNamesShort:[{type:core.Input}],rtl:[{type:core.Input}],theme:[{type:core.Input}],year:[{type:core.Input}],onMonthClick:[{type:core.Input}]};return MbscYearView}();var MbscCalendarViewModule=/*#__PURE__*/function(){function MbscCalendarViewModule(){}MbscCalendarViewModule.decorators=[{type:core.NgModule,args:[{declarations:[CalendarDayBase,CalendarLabelBase,CalendarViewBase,MbscCalendarDay,MbscCalendarLabel,MbscCalendarView,MbscCalendarWeekDays,MbscMonthView,MbscMultiYearView,MbscYearView,MonthViewBase],exports:[MbscCalendarView,MbscCalendarHeaderModule],imports:[common.CommonModule,MbscButtonModule,MbscCalendarHeaderModule,MbscIconModule,MbscPopupModule,MbscScrollviewBaseModule]}]}];return MbscCalendarViewModule}();var MbscCalendar=/*#__PURE__*/function(_super){__extends(MbscCalendar,_super);function MbscCalendar(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this._hours=ARRAY24;_this.onCancel=new core.EventEmitter;_this.onChange=new core.EventEmitter;_this.onClose=new core.EventEmitter;_this.onOpen=new core.EventEmitter;return _this}Object.defineProperty(MbscCalendar.prototype,"vCal",{set:function(cal){this._calendarView=cal;},enumerable:true,configurable:true});MbscCalendar.prototype._ctor=function(){this._instanceService=this._injector.get(MbscInstanceService);};MbscCalendar.prototype._mounted=function(){this._instanceService.instance=this;_super.prototype._mounted.call(this);};MbscCalendar.decorators=[{type:core.Component,args:[{changeDetection:core.ChangeDetectionStrategy.OnPush,encapsulation:core.ViewEncapsulation.None,host:{class:"mbsc-flex-1-1"},selector:"mbsc-calendar",template:'\n    <mbsc-calendar-view #cal\n      [activeDate]="s.active"\n      [amText]="s.amText"\n      [cssClass]="_className + \' mbsc-flex-1-1 mbsc-calendar-\' + s.display"\n      [calendarScroll]="s.calendarScroll"\n      [calendarType]="s.calendarType"\n      [colors]="s.colors"\n      [context]="s.context"\n      [dataTimezone]="s.dataTimezone"\n      [dayTemplate]="s.dayTemplate"\n      [dayContentTemplate]="s.dayContentTemplate"\n      [displayTimezone]="s.displayTimezone"\n      [downIcon]="s.downIcon"\n      [exclusiveEndDates]="s.exclusiveEndDates"\n      [fromText]="s.fromText"\n      [headerTemplate]="s.calendarHeaderTemplate"\n      [hoverEnd]="s.hoverEnd"\n      [hoverStart]="s.hoverStart"\n      [invalid]="s.invalid"\n      [instanceService]="_instanceService"\n      [isPicker]="true"\n      [labels]="s.labels"\n      [marked]="s.marked"\n      [max]="s.max"\n      [min]="s.min"\n      [mousewheel]="s.mousewheel"\n      [nextIconH]="s.nextIconH"\n      [nextIconV]="s.nextIconV"\n      [nextPageText]="s.nextPageText"\n      [noOuterChange]="s.selectRange"\n      [onActiveChange]="s.onActiveChange"\n      [onCellHoverIn]="s.onCellHoverIn"\n      [onCellHoverOut]="s.onCellHoverOut"\n      [onDayClick]="_onDayClick"\n      [onDayHoverIn]="s.onDayHoverIn"\n      [onDayHoverOut]="s.onDayHoverOut"\n      [onLabelClick]="s.onLabelClick"\n      [onPageChange]="s.onPageChange"\n      [onPageLoaded]="s.onPageLoaded"\n      [onPageLoading]="s.onPageLoading"\n      [onTodayClick]="_onTodayClick"\n      [pmText]="s.pmText"\n      [prevIconH]="s.prevIconH"\n      [prevIconV]="s.prevIconV"\n      [prevPageText]="s.prevPageText"\n      [pages]="s.pages"\n      [rangeEnd]="s.rangeEnd"\n      [rangeStart]="s.rangeStart"\n      [refDate]="s.refDate"\n      [rtl]="s.rtl"\n      [selectedDates]="_tempValueRep"\n      [selectView]="s.selectView"\n      [showCalendar]="true"\n      [showControls]="s.showControls"\n      [showOuterDays]="s.showOuterDays"\n      [showToday]="false"\n      [showWeekNumbers]="s.showWeekNumbers"\n      [size]="s.size"\n      [theme]="s.theme"\n      [themeVariant]="s.themeVariant"\n      [timezonePlugin]="s.timezonePlugin"\n      [toText]="s.toText"\n      [upIcon]="s.upIcon"\n      [valid]="s.valid"\n      [weeks]="s.weeks"\n      [width]="s.width"\n      [getDate]="s.getDate"\n      [getDay]="s.getDay"\n      [getMaxDayOfMonth]="s.getMaxDayOfMonth"\n      [getMonth]="s.getMonth"\n      [getWeekNumber]="s.getWeekNumber"\n      [getYear]="s.getYear"\n      [dateFormat]="s.dateFormat"\n      [dayNames]="s.dayNames"\n      [dayNamesMin]="s.dayNamesMin"\n      [dayNamesShort]="s.dayNamesShort"\n      [eventText]="s.eventText"\n      [eventsText]="s.eventsText"\n      [firstDay]="s.firstDay"\n      [monthNames]="s.monthNames"\n      [monthNamesShort]="s.monthNamesShort"\n      [moreEventsPluralText]="s.moreEventsPluralText"\n      [moreEventsText]="s.moreEventsText"\n      [todayText]="s.todayText"\n      [weekText]="s.weekText"\n      [yearSuffix]="s.yearSuffix"\n    >\n    </mbsc-calendar-view>\n  '}]}];MbscCalendar.propDecorators={vCal:[{type:core.ViewChild,args:["cal",{static:false}]}],onCancel:[{type:core.Output}],onChange:[{type:core.Output}],onClose:[{type:core.Output}],onOpen:[{type:core.Output}]};MbscCalendar=__decorate([FormControl],MbscCalendar);return MbscCalendar}(CalendarBase);var MbscCalendarModule=/*#__PURE__*/function(){function MbscCalendarModule(){}MbscCalendarModule.decorators=[{type:core.NgModule,args:[{declarations:[CalendarBase,MbscCalendar],entryComponents:[MbscCalendar],exports:[MbscCalendar],imports:[common.CommonModule,MbscCalendarViewModule]}]}];return MbscCalendarModule}();function getPickerTemplate(content){return '\n    <mbsc-input *ngIf="_showInput" #input\n      [ariaExpanded]="!!_isOpen"\n      ariaHaspopup="dialog"\n      [dropdown]="dropdown"\n      [disabled]="disabled"\n      [endIcon]="endIcon"\n      [endIconSrc]="endIconSrc"\n      [endIconSvg]="endIconSvg"\n      [error]="error"\n      [errorMessage]="errorMessage"\n      [inputStyle]="s.inputStyle"\n      [label]="label"\n      [labelStyle]="s.labelStyle"\n      [placeholder]="placeholder"\n      [name]="name"\n      [pickerMap]="s.valueMap"\n      [pickerValue]="_value"\n      [rtl]="s.rtl"\n      [startIcon]="startIcon"\n      [startIconSrc]="startIconSrc"\n      [startIconSvg]="startIconSvg"\n      [tags]="s.tagInput === undefined ? s.selectMultiple : s.tagInput"\n      [theme]="s.theme"\n      [themeVariant]="s.themeVariant"\n      [value]="(_value != null && _valueText) || \'\'"\n    >\n      <ng-content></ng-content>\n    </mbsc-input>\n    <mbsc-popup #popup\n      [activeElm]="s.activeElm"\n      [anchor]="_anchor"\n      [anchorAlign]="_anchorAlign"\n      [animation]="s.animation"\n      [buttons]="_buttons"\n      [cancelText]="s.cancelText"\n      [closeOnEsc]="s.closeOnEsc"\n      [closeOnOverlayClick]="s.closeOnOverlayClick"\n      [closeOnScroll]="s.closeOnScroll"\n      [closeText]="s.closeText"\n      [contentPadding]="false"\n      [context]="s.context"\n      [cssClass]="_cssClass"\n      [disableLeftRight]="true"\n      [display]="s.display"\n      [focusElm]="_focusElm"\n      [focusOnClose]="s.focusOnClose"\n      [focusOnOpen]="!_allowTyping"\n      [focusTrap]="s.focusTrap"\n      [fullScreen]="s.fullScreen"\n      [headerText]="_headerText"\n      [height]="s.height"\n      [isOpen]="_isOpen"\n      [maxHeight]="s.maxHeight"\n      [maxWidth]="_maxWidth"\n      [setText]="s.setText"\n      [showArrow]="s.showArrow"\n      [showOverlay]="_allowTyping ? false : s.showOverlay"\n      [rtl]="s.rtl"\n      [scrollLock]="_scrollLock"\n      [theme]="s.theme"\n      [themeVariant]="s.themeVariant"\n      [touchUi]="_touchUi"\n      [windowWidth]="state.width"\n      [width]="s.width"\n      (onClose)="_onPopupClose($event)"\n      (onClosed)="_onPopupClosed($event)"\n      (onKeyDown)="_onPopupKey($event)"\n      (onOpen)="_onPopupOpen($event)"\n      (onResize)="_onResize($event)"\n    >\n      '+content+"\n    </mbsc-popup>"}function getValid(wheel,val,disabled,direction){var min=wheel.min===UNDEFINED?-Infinity:wheel.min;var max=wheel.max===UNDEFINED?Infinity:wheel.max;var index=getIndex(wheel,val);var value=getValue(wheel,index);var value1=value;var value2=value;var dist1=0;var dist2=0;if(disabled&&disabled.get(value)){while(index-dist1>=min&&disabled.get(value1)&&dist1<100){dist1++;value1=getValue(wheel,index-dist1);}while(index+dist2<max&&disabled.get(value2)&&dist2<100){dist2++;value2=getValue(wheel,index+dist2);}if(disabled.get(value1)&&disabled.get(value2)){return value}if((dist2<dist1&&dist2&&direction!==-1||!dist1||index-dist1<0||direction===1)&&!disabled.get(value2)){value=value2;}else {value=value1;}}return value}function getItemValue(item){return item!==UNDEFINED?item.value!==UNDEFINED?item.value:item.display!==UNDEFINED?item.display:item:item}function getItem$1(wheel,index){if(wheel.getItem){return wheel.getItem(index)}var data=wheel.data||[];var len=data.length;var i=index%len;return wheel._circular?data[i>=0?i:i+len]:data[constrain(index,0,len-1)]}function getIndex(wheel,value){var val=wheel.multiple?value&&value.length&&value[0]||UNDEFINED:value;return (wheel.getIndex?+wheel.getIndex(value):wheel._map.get(val))||0}function getFirstIndex(wheel,index){if(wheel.getItem&&wheel.getIndex){return wheel.getIndex(getItemValue(wheel.getItem(index)))}var data=wheel.data||[];var len=data.length;var i=index%len;return !len?0:i>=0?i:i+len}function getValue(wheel,index){return getItemValue(getItem$1(wheel,index))}var ScrollerBase=/*#__PURE__*/function(_super){__extends(ScrollerBase,_super);function ScrollerBase(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this._indexes=[];_this._activeIndexes=[];_this._wheels=[];_this._batches=[];_this._lastIndexes=[];_this._onSet=function(){_this._setOrUpdate();};_this._onActiveChange=function(_a){var wheel=_a.wheel,index=_a.index;var wheelIndex=wheel._key;_this._activeIndexes[wheelIndex]=index;var indexes=_this._indexes;var currentIndex=indexes[wheelIndex];if(_this._scroll3d){currentIndex=index;}else if(index-currentIndex>=_this._rows){currentIndex++;}else if(index<currentIndex){currentIndex--;}indexes[wheelIndex]=currentIndex;_this.forceUpdate();};_this._onWheelIndexChange=function(args){var s=_this.s;var wheel=args.wheel;var key=wheel._key;var isMultiple=wheel.multiple;var newValue=getValue(wheel,args.index);var disabled=_this._disabled&&_this._disabled[key]&&_this._disabled[key].get(newValue);var lengths=[];var selectOnScroll=s.selectOnScroll;var updateIndex=selectOnScroll||!args.click;if(updateIndex){_this._lastIndexes[key]=_this._indexes[key]=args.index;_this._indexes.forEach((function(val,i){var w=_this._wheelMap[i];var len=w.data?w.data.length:0;_this._batches[i]=len?floor(val/len):0;lengths[i]=len;}));}_this._activeIndexes[key]=args.index;var beforeTempValue=_this._get(_this._tempValueRep);var itemTap=!!args.click&&!disabled;var scrollOrTapSelect=selectOnScroll||itemTap;if(isMultiple){if(itemTap){var selectionArr=(_this._tempValueRep[key]||[]).slice();if(args.selected===false){selectionArr.push(newValue);}else if(args.selected===true){selectionArr.splice(selectionArr.indexOf(newValue),1);}_this._tempValueRep[key]=selectionArr;}}else if(scrollOrTapSelect){_this._tempValueRep[key]=newValue;}if(s.onWheelMove&&args.index!==UNDEFINED){var wheelRep=s.onWheelMove({dataItem:getItem$1(wheel,args.index),selection:scrollOrTapSelect,wheelIndex:key});if(wheelRep){wheelRep.forEach((function(v,i){if(v!==UNDEFINED){_this._tempValueRep[i]=v;}if(!scrollOrTapSelect){var w=_this._wheelMap[i];var newIndex=getIndex(w,v);_this._constrainIndex(newIndex,w);}}));}}if(scrollOrTapSelect){_this._validate(key,args.diff>0?1:-1);}if(selectOnScroll){_this._tempValueRep.forEach((function(val,i){var w=_this._wheelMap[i];var len=w.data?w.data.length:0;var oldIndex=_this._indexes[i];var newIndex=getIndex(w,val)+_this._batches[i]*len;_this._activeIndexes[i]=_this._lastIndexes[i]=_this._indexes[i]=newIndex;w._offset=len!==lengths[i]?newIndex-oldIndex:0;}));}var currentTempValue=_this._get(_this._tempValueRep);var tempValueChanged=!_this._valueEquals(beforeTempValue,currentTempValue);if(tempValueChanged||args.click&&_this._live&&!_this._valueEquals(_this.value,currentTempValue)){_this._setOrUpdate(!tempValueChanged);}else {_this.forceUpdate();}if(_this._live&&itemTap&&wheel.closeOnTap){_this.close();}};return _this}ScrollerBase.prototype._initWheels=function(){var _this=this;var key=0;var wheels=this.s.wheels||[];this._wheelMap=[];wheels.forEach((function(wheelGroup){wheelGroup.forEach((function(wheel){_this._initWheel(wheel,key);_this._wheelMap[key]=wheel;key++;}));}));this._wheels=wheels;};ScrollerBase.prototype._shouldValidate=function(s,prevS){return s.shouldValidate?s.shouldValidate(s,prevS):false};ScrollerBase.prototype._valueEquals=function(v1,v2){if(this.s.valueEquality){return this.s.valueEquality(v1,v2)}return v1===v2};ScrollerBase.prototype._render=function(s,state){var _this=this;var props=this.props||{};var resp=this._respProps||{};var prevS=this._prevS;var circular=this._touchUi?s.circular:false;var rows=this._touchUi?s.rows:resp.rows||props.rows||7;this._displayStyle=s.displayStyle||s.display;this._scroll3d=s.scroll3d&&this._touchUi&&has3d;if(s.itemHeight!==prevS.itemHeight||rows!==this._rows){this._rows=rows;this._lineStyle={height:s.itemHeight+"px"};if(this._scroll3d){var translateZ="translateZ("+(s.itemHeight*rows/2+3)+"px";this._overlayStyle={};this._overlayStyle[cssPrefix+"transform"]=translateZ;this._lineStyle[cssPrefix+"transform"]="translateY(-50%) "+translateZ;}}if(s.wheels!==prevS.wheels||circular!==this._circular){this._batches=[];this._shouldSetIndex=true;this._circular=circular;this._initWheels();}_super.prototype._render.call(this,s,state);if(this._shouldSetIndex){this._setIndexes();this._shouldSetIndex=this._indexFromValue=false;}if(s.wheels!==prevS.wheels&&prevS.wheels!==UNDEFINED){setTimeout((function(){for(var _i=0,_a=_this._wheelMap;_i<_a.length;_i++){var wheel=_a[_i];_this._onWheelIndexChange({diff:0,index:_this._indexes[wheel._key],wheel:wheel});}}));}};ScrollerBase.prototype._writeValue=function(elm,text,value){if(this.s.writeValue){return this.s.writeValue(elm,text,value)}return _super.prototype._writeValue.call(this,elm,text,value)};ScrollerBase.prototype._copy=function(value){return value.slice(0)};ScrollerBase.prototype._format=function(value){if(this.s.formatValue){return this.s.formatValue(value)}return value.join(" ")};ScrollerBase.prototype._get=function(value){if(this.s.getValue){return this.s.getValue(value)}return value};ScrollerBase.prototype._parse=function(valueStr){if(this.s.parseValue){return this.s.parseValue(valueStr)}var ret=[];var values=[];var i=0;if(valueStr!==null&&valueStr!==UNDEFINED){values=(valueStr+"").split(" ");}this._wheels.forEach((function(wheelGroup){wheelGroup.forEach((function(wheel){var data=wheel.data||[];var len=data.length;var value=getItemValue(data[0]);var j=0;
/* eslint-disable eqeqeq */while(value!=values[i]&&j<len){value=getItemValue(data[j]);j++;}ret.push(value);i++;}));}));return ret};ScrollerBase.prototype._validate=function(index,direction){var _this=this;if(this.s.validate){var ret=this.s.validate.call(this._el,{direction:direction,index:index,values:this._tempValueRep.slice(0),wheels:this._wheelMap});this._disabled=ret.disabled;if(ret.init){this._initWheels();}if(ret.indexes){ret.indexes.forEach((function(value,i){if(value!==UNDEFINED){var w=_this._wheelMap[i];var newIndex=getIndex(w,value);_this._constrainIndex(newIndex,w);}}));}if(ret.valid){this._tempValueRep=ret.valid.slice(0);}else {this._wheelMap.forEach((function(wheel,i){_this._tempValueRep[i]=getValid(wheel,_this._tempValueRep[i],_this._disabled&&_this._disabled[i],direction);}));}}};ScrollerBase.prototype._onOpen=function(){this._batches=[];this._shouldSetIndex=true;this._indexFromValue=true;};ScrollerBase.prototype._onParse=function(){this._shouldSetIndex=true;};ScrollerBase.prototype._initWheel=function(wheel,key){var circular=this._circular;wheel._key=key;wheel._map=new Map;wheel._circular=circular===UNDEFINED?wheel.circular===UNDEFINED?wheel.data&&wheel.data.length>this._rows:wheel.circular:isArray(circular)?circular[key]:circular;if(wheel.data){wheel.min=wheel._circular?UNDEFINED:0;wheel.max=wheel._circular?UNDEFINED:wheel.data.length-1;wheel.data.forEach((function(item,i){wheel._map.set(getItemValue(item),i);}));}};ScrollerBase.prototype._setIndexes=function(){var _this=this;var currentIndexes=this._indexes||[];this._indexes=[];this._activeIndexes=[];this._tempValueRep.forEach((function(val,i){var w=_this._wheelMap[i];var len=w.data?w.data.length:0;var newIndex=getIndex(w,val);if(_this.s.selectOnScroll){_this._activeIndexes[i]=_this._indexes[i]=newIndex+(_this._batches[i]||0)*len;}else {var currentIndex=newIndex;if(!_this._indexFromValue){currentIndex=currentIndexes[i];if(currentIndex!==UNDEFINED){currentIndex=getFirstIndex(w,currentIndex)+(_this._batches[i]||0)*len;}}_this._constrainIndex(currentIndex,w);}}));};ScrollerBase.prototype._constrainIndex=function(newIndex,wheel){var i=wheel._key;if(newIndex!==UNDEFINED&&wheel.data){if(!wheel.spaceAround){newIndex=constrain(newIndex,0,Math.max(wheel.data.length-this._rows,0));}this._activeIndexes[i]=this._indexes[i]=newIndex;}else {this._activeIndexes[i]=this._indexes[i]=this._lastIndexes[i]||0;}};ScrollerBase.defaults={itemHeight:40,rows:5,selectOnScroll:true,showOnClick:true};ScrollerBase._name="Scroller";ScrollerBase.decorators=[{type:core.Directive,args:[{selector:"[mbsc-sc-b]"}]}];return ScrollerBase}(PickerBase);var WHEEL_WIDTHS={ios:50,material:46,windows:50};var TIME_PARTS=["a","h","i","s","tt"];function validateTimes(s,hasAmPm,i,valid,wheelOrder,getDatePart,maxs,steps,key,disabled,order,validDate,startDate,endDate,isValid,exclusiveEndDates){var sameDayInvalid=isSameDay(startDate,endDate);var start=sameDayInvalid||!isSameDay(validDate,endDate)?startDate:getDayStart(s,startDate);var end=sameDayInvalid||!isSameDay(validDate,startDate)?endDate:getDayEnd(s,endDate);var startAmPm=getDatePart.a(start);var endAmPm=getDatePart.a(end);var startProp=true;var endProp=true;var all=false;var add=0;var remove=0;for(var j=0;j<i;j++){var k=TIME_PARTS[j];var validVal=valid[wheelOrder[k]];if(validVal!==UNDEFINED){var startVal=startProp?getDatePart[k](start):0;var endVal=endProp?getDatePart[k](end):maxs[k];if(hasAmPm&&j===1){startVal+=startAmPm?12:0;endVal+=endAmPm?12:0;validVal+=valid[wheelOrder.a]?12:0;}if((startProp||endProp)&&(startVal<validVal&&validVal<endVal)){all=true;}if(validVal!==startVal){startProp=false;}if(validVal!==endVal){endProp=false;}}}if(!isValid){for(var j=i+1;j<4;j++){var k=TIME_PARTS[j];if(wheelOrder[k]!==UNDEFINED){if(getDatePart[k](start)>0&&startProp){add=steps[key];}if(getDatePart[k](end)<maxs[k]&&endProp){remove=steps[key];}}}if(endProp&&exclusiveEndDates&&!remove){remove=end.getMilliseconds()!==999?steps[key]:0;}}if(startProp||endProp||all){var startVal=startProp&&!all?getDatePart[key](start)+add:0;var endVal=endProp&&!all?getDatePart[key](end)-remove:maxs[key];for(var j=startVal;j<=endVal;j+=steps[key]){disabled[order].set(j,!isValid);}}}function getDateIndex(d,hasDay){var dt=new Date(d);return hasDay?floor(+dt/864e5):dt.getMonth()+12*(dt.getFullYear()-1970)}function getFullDate(d){return d.getFullYear()+"-"+pad(d.getMonth()+1)+"-"+pad(d.getDate())}function getMilliseconds(d){return d.getMilliseconds()}function getAmPm(d){return d.getHours()>11?1:0}var DatetimeBase=/*#__PURE__*/function(_super){__extends(DatetimeBase,_super);function DatetimeBase(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this._preset="date";_this._innerValues={};_this._onChange=function(args){if(_this.s.value===UNDEFINED){_this.setState({value:args.value});}_this._hook("onChange",args);};_this._parseDate=function(value){var s=_this.s;if(!value){_this._innerValues={};}return _this._getArray(makeDate(value||s.defaultSelection||new Date,s,_this._format),!!value)};_this._formatDate=function(values){var d=_this._getDate(values);return d?formatDate(_this._format,d,_this.s):""};_this._getDate=function(values){var s=_this.s;var getArrayPart=_this._getArrayPart;var wheelOrder=_this._wheelOrder;var today=new Date((new Date).setHours(0,0,0,0));var d;var t;if(values===null||values===UNDEFINED){return null}if(wheelOrder.dd!==UNDEFINED){var parts=values[wheelOrder.dd].split("-");d=new Date(parts[0],parts[1]-1,parts[2]);}if(wheelOrder.tt!==UNDEFINED){t=d||today;t=new Date(t.getTime()+values[wheelOrder.tt]%86400*1e3);}var year=getArrayPart(values,"y",d,today);var month=getArrayPart(values,"m",d,today);var day=Math.min(getArrayPart(values,"d",d,today),s.getMaxDayOfMonth(year,month));var hour=getArrayPart(values,"h",t,today);return s.getDate(year,month,day,_this._hasAmPm&&getArrayPart(values,"a",t,today)?hour+12:hour,getArrayPart(values,"i",t,today),getArrayPart(values,"s",t,today),getArrayPart(values,"u",t,today))};_this._validate=function(_a){var direction=_a.direction,index=_a.index,values=_a.values,wheels=_a.wheels;var disabled=[];var s=_this.s;var stepHour=s.stepHour;var stepMinute=s.stepMinute;var stepSecond=s.stepSecond;var preset=s.mode||_this._preset;var wheelOrder=_this._wheelOrder;var getDatePart=_this._getDatePart;var maxDate=_this._max;var minDate=_this._min;var current=addTimezone(s,_this._getDate(values));var currYear=s.getYear(current);var currMonth=s.getMonth(current);var from=s.getDate(currYear,currMonth-1,1);var until=s.getDate(currYear,currMonth+2,1);if(index===wheelOrder.y||index===wheelOrder.m||index===wheelOrder.d||index===wheelOrder.dd||index===UNDEFINED){_this._valids=getEventMap(s.valid,from,until,s,true);_this._invalids=getEventMap(s.invalid,from,until,s,true);}var valids=_this._valids;var invalids=_this._invalids;var mind=minDate?+minDate:-Infinity;var maxd=maxDate?+maxDate:Infinity;var validated=getClosestValidDate(current,s,mind,maxd,invalids,valids,direction);var valid=_this._getArray(validated);var dayWheel=_this._wheels&&_this._wheels[0][wheelOrder.d];var y=getDatePart.y(validated);var m=getDatePart.m(validated);var maxDays=s.getMaxDayOfMonth(y,m);var mins={y:minDate?minDate.getFullYear():-Infinity,m:0,d:1,h:0,i:0,s:0,a:0,tt:0};var maxs={y:maxDate?maxDate.getFullYear():Infinity,m:11,d:31,h:step(_this._hasAmPm?11:23,stepHour),i:step(59,stepMinute),s:step(59,stepSecond),a:1,tt:86400};var steps={y:1,m:1,d:1,h:stepHour,i:stepMinute,s:stepSecond,a:1,tt:_this._timeStep};var init=false;var minprop=true;var maxprop=true;["dd","y","m","d","tt","a","h","i","s"].forEach((function(key){var min=mins[key];var max=maxs[key];var val=getDatePart[key](validated);var order=wheelOrder[key];if(minprop&&minDate){min=getDatePart[key](minDate);}if(maxprop&&maxDate){max=getDatePart[key](maxDate);}if(val<min){val=min;}if(val>max){val=max;}if(key!=="dd"&&key!=="tt"&&!(key==="a"&&order===UNDEFINED)){if(minprop){minprop=val===min;}if(maxprop){maxprop=val===max;}}if(order!==UNDEFINED){disabled[order]=new Map;if(key!=="y"&&key!=="dd"){for(var i=mins[key];i<=maxs[key];i+=steps[key]){if(i<min||i>max){disabled[order].set(i,true);}}}if(key==="d"&&invalids){for(var d in invalids){if(!valids||!valids[d]){var dd=new Date(d);var yy=s.getYear(dd);var mm=s.getMonth(dd);if(yy===y&&mm===m&&isInvalid(s,dd,invalids,valids)){disabled[order].set(s.getDay(dd),true);}}}}}}));if(/time/i.test(preset)){var invalidsForDay_1=invalids&&invalids[getDateStr(validated)];var validsForDay_1=valids&&valids[getDateStr(validated)];TIME_PARTS.forEach((function(key,i){var order=wheelOrder[key];if(order!==UNDEFINED){var entries=s.valid?validsForDay_1:invalidsForDay_1;if(entries){if(s.valid){for(var j=0;j<=maxs[key];j++){disabled[order].set(j,true);}}for(var _i=0,entries_1=entries;_i<entries_1.length;_i++){var entry=entries_1[_i];var start=entry.start;var end=entry.end;if(start&&end){validateTimes(s,_this._hasAmPm,i,valid,wheelOrder,getDatePart,maxs,steps,key,disabled,order,validated,start,end,!!s.valid,s.exclusiveEndDates);}}}valid[order]=getValid(wheels[order],getDatePart[key](validated),disabled[order],direction);}}));}var dateDisplay=_this._dateDisplay;if(dayWheel&&(dayWheel.data.length!==maxDays||/DDD/.test(dateDisplay))){var data=[];var dayDisplay=dateDisplay.replace(/[my|]/gi,"").replace(/DDDD/,"{dddd}").replace(/DDD/,"{ddd}").replace(/DD/,"{dd}").replace(/D/,"{d}");for(var j=1;j<=maxDays;j++){var weekDay=s.getDate(y,m,j).getDay();var dayStr=dayDisplay.replace(/{dddd}/,s.dayNames[weekDay]).replace(/{ddd}/,s.dayNamesShort[weekDay]).replace(/{dd}/,pad(j)+s.daySuffix).replace(/{d}/,j+s.daySuffix);data.push({display:dayStr,value:j});}dayWheel.data=data;init=true;}return {disabled:disabled,init:init,valid:valid}};_this._shouldValidate=function(s,prevS){return !!(s.min&&+s.min!==+prevS.min||s.max&&+s.max!==+prevS.max)||s.wheels!==prevS.wheels||s.dataTimezone!==prevS.dataTimezone||s.displayTimezone!==prevS.displayTimezone};_this._getYearValue=function(i){return {display:(/yy/i.test(_this._dateDisplay)?i:(i+"").substr(2,2))+_this.s.yearSuffix,value:i}};_this._getYearIndex=function(i){return +i};_this._getDateIndex=function(i){return getDateIndex(i,_this._hasDay)};_this._getDateItem=function(i){var s=_this.s;var hasDay=_this._hasDay;var today=new Date((new Date).setHours(0,0,0,0));var d=hasDay?new Date(i*864e5):new Date(1970,i,1);if(hasDay){d=new Date(d.getUTCFullYear(),d.getUTCMonth(),d.getUTCDate());}return {disabled:hasDay&&isInvalid(s,d,_this._invalids,_this._valids),display:today.getTime()===d.getTime()?s.todayText:formatDate(_this._dateTemplate,d,s),value:getFullDate(d)}};_this._getArrayPart=function(values,part,d,def){var ret;if(_this._wheelOrder[part]!==UNDEFINED){ret=+values[_this._wheelOrder[part]];if(!isNaN(ret)){return ret}}if(d){return _this._getDatePart[part](d)}if(_this._innerValues[part]!==UNDEFINED){return _this._innerValues[part]}return _this._getDatePart[part](def)};_this._getHours=function(d){var hour=d.getHours();hour=_this._hasAmPm&&hour>=12?hour-12:hour;return step(hour,_this.s.stepHour)};_this._getMinutes=function(d){return step(d.getMinutes(),_this.s.stepMinute)};_this._getSeconds=function(d){return step(d.getSeconds(),_this.s.stepSecond)};_this._getFullTime=function(d){return step(round((d.getTime()-new Date(d).setHours(0,0,0,0))/1e3),_this._timeStep||1)};return _this}DatetimeBase.prototype.getVal=function(){return this._value};DatetimeBase.prototype.setVal=function(value){this._value=value;this.setState({value:value});};DatetimeBase.prototype.position=function(){if(this._scroller){this._scroller.position();}};DatetimeBase.prototype.isVisible=function(){return this._scroller&&this._scroller.isVisible()};DatetimeBase.prototype._valueEquals=function(v1,v2){return dateValueEquals(v1,v2,this.s)};DatetimeBase.prototype._render=function(s,state){var genWheels=false;var prevProps=this._prevS;var dateFormat=s.dateFormat;var timeFormat=s.timeFormat;var preset=s.mode||this._preset;var format=preset==="datetime"?dateFormat+s.separator+timeFormat:preset==="time"?timeFormat:dateFormat;this._value=s.value===UNDEFINED?state.value:s.value;this._minWheelWidth=s.minWheelWidth||(preset==="datetime"?WHEEL_WIDTHS[s.baseTheme||s.theme]:UNDEFINED);this._dateWheels=s.dateWheels||(preset==="datetime"?s.dateWheelFormat:dateFormat);this._dateDisplay=s.dateWheels||s.dateDisplay;this._timeWheels=s.timeWheels||timeFormat;this._timeDisplay=this._timeWheels;this._format=format;this._hasAmPm=/h/.test(this._timeDisplay);this._getDatePart={y:s.getYear,m:s.getMonth,d:s.getDay,h:this._getHours,i:this._getMinutes,s:this._getSeconds,u:getMilliseconds,a:getAmPm,dd:getFullDate,tt:this._getFullTime};if(+makeDate(prevProps.min)!==+makeDate(s.min)){genWheels=true;this._min=isEmpty(s.min)?UNDEFINED:makeDate(s.min,s,format);}if(+makeDate(prevProps.max)!==+makeDate(s.max)){genWheels=true;this._max=isEmpty(s.max)?UNDEFINED:makeDate(s.max,s,format);}if(s.theme!==prevProps.theme||s.mode!==prevProps.mode||s.locale!==prevProps.locale||s.dateWheels!==prevProps.dateWheels||s.timeWheels!==prevProps.timeWheels||genWheels){this._wheels=this._getWheels();}};DatetimeBase.prototype._getWheels=function(){this._wheelOrder={};var s=this.s;var preset=s.mode||this._preset;var hasAmPm=this._hasAmPm;var dateDisplay=this._dateDisplay;var timeDisplay=this._timeDisplay;var wheelOrder=this._wheelOrder;var wheels=[];var dateGroup=[];var values;var timeGroup=[];var nr=0;if(/date/i.test(preset)){var dateParts=this._dateWheels.split(/\|/.test(this._dateWheels)?"|":"");for(var _i=0,dateParts_1=dateParts;_i<dateParts_1.length;_i++){var template=dateParts_1[_i];var types=0;if(template.length){if(/y/i.test(template)){types++;}if(/m/i.test(template)){types++;}if(/d/i.test(template)){types++;}if(types>1&&wheelOrder.dd===UNDEFINED){wheelOrder.dd=nr;nr++;dateGroup.push(this._getDateWheel(template));timeGroup=dateGroup;}else if(/y/i.test(template)&&wheelOrder.y===UNDEFINED){wheelOrder.y=nr;nr++;dateGroup.push({cssClass:"mbsc-datetime-year-wheel",getIndex:this._getYearIndex,getItem:this._getYearValue,max:this._max?s.getYear(this._max):UNDEFINED,min:this._min?s.getYear(this._min):UNDEFINED,spaceAround:true});}else if(/m/i.test(template)&&wheelOrder.m===UNDEFINED){wheelOrder.m=nr;values=[];nr++;var monthDisplay=dateDisplay.replace(/[dy|]/gi,"").replace(/MMMM/,"{mmmm}").replace(/MMM/,"{mmm}").replace(/MM/,"{mm}").replace(/M/,"{m}");for(var j=0;j<12;j++){var monthStr=monthDisplay.replace(/{mmmm}/,s.monthNames[j]).replace(/{mmm}/,s.monthNamesShort[j]).replace(/{mm}/,pad(j+1)+(s.monthSuffix||"")).replace(/{m}/,j+1+(s.monthSuffix||""));values.push({display:monthStr,value:j});}dateGroup.push({cssClass:"mbsc-datetime-month-wheel",data:values,spaceAround:true});}else if(/d/i.test(template)&&wheelOrder.d===UNDEFINED){wheelOrder.d=nr;values=[];nr++;for(var j=1;j<32;j++){values.push({display:(/dd/i.test(dateDisplay)?pad(j):j)+s.daySuffix,value:j});}dateGroup.push({cssClass:"mbsc-datetime-day-wheel",data:values,spaceAround:true});}}}wheels.push(dateGroup);}if(/time/i.test(preset)){var timeParts=this._timeWheels.split(/\|/.test(this._timeWheels)?"|":"");for(var _a=0,timeParts_1=timeParts;_a<timeParts_1.length;_a++){var template=timeParts_1[_a];var types=0;if(template.length){if(/h/i.test(template)){types++;}if(/m/i.test(template)){types++;}if(/s/i.test(template)){types++;}if(/a/i.test(template)){types++;}}if(types>1&&wheelOrder.tt===UNDEFINED){wheelOrder.tt=nr;nr++;timeGroup.push(this._getTimeWheel(template));}else if(/h/i.test(template)&&wheelOrder.h===UNDEFINED){values=[];wheelOrder.h=nr;nr++;for(var j=0;j<(hasAmPm?12:24);j+=s.stepHour){values.push({display:hasAmPm&&j===0?12:/hh/i.test(timeDisplay)?pad(j):j,value:j});}timeGroup.push({cssClass:"mbsc-datetime-hour-wheel",data:values,spaceAround:true});}else if(/m/i.test(template)&&wheelOrder.i===UNDEFINED){values=[];wheelOrder.i=nr;nr++;for(var j=0;j<60;j+=s.stepMinute){values.push({display:/mm/i.test(timeDisplay)?pad(j):j,value:j});}timeGroup.push({cssClass:"mbsc-datetime-minute-wheel",data:values,spaceAround:true});}else if(/s/i.test(template)&&wheelOrder.s===UNDEFINED){values=[];wheelOrder.s=nr;nr++;for(var j=0;j<60;j+=s.stepSecond){values.push({display:/ss/i.test(timeDisplay)?pad(j):j,value:j});}timeGroup.push({cssClass:"mbsc-datetime-second-wheel",data:values,spaceAround:true});}else if(/a/i.test(template)&&wheelOrder.a===UNDEFINED){wheelOrder.a=nr;nr++;timeGroup.push({cssClass:"mbsc-dt-whl-a",data:/A/.test(template)?[{display:s.amText.toUpperCase(),value:0},{display:s.pmText.toUpperCase(),value:1}]:[{display:s.amText,value:0},{display:s.pmText,value:1}],spaceAround:true});}}if(timeGroup!==dateGroup){wheels.push(timeGroup);}}return wheels};DatetimeBase.prototype._getDateWheel=function(template){var hasDay=/d/i.test(template);this._hasDay=hasDay;this._dateTemplate=template;return {cssClass:"mbsc-datetime-date-wheel",getIndex:this._getDateIndex,getItem:this._getDateItem,label:"",max:this._max?getDateIndex(getFullDate(this._max),hasDay):UNDEFINED,min:this._min?getDateIndex(getFullDate(this._min),hasDay):UNDEFINED,spaceAround:true}};DatetimeBase.prototype._getTimeWheel=function(template){var s=this.s;var values=[];var st=1;if(/s/i.test(template)){st=s.stepSecond;}else if(/m/i.test(template)){st=s.stepMinute*60;}else if(/h/i.test(template)){st=s.stepHour*3600;}this._timeStep=st;for(var i=0;i<86400;i+=st){var time=new Date((new Date).setHours(0,0,0,0)+i*1e3);values.push({display:formatDate(template,time,s),value:i});}return {data:values,label:"",spaceAround:true}};DatetimeBase.prototype._getArray=function(d,fillInner){var parts=["y","m","d","a","h","i","s","u","dd","tt"];var ret=[];var wheelOrder=this._wheelOrder;if(d===null||d===UNDEFINED){return ret}for(var _i=0,parts_1=parts;_i<parts_1.length;_i++){var part=parts_1[_i];var v=this._getDatePart[part](d);if(wheelOrder[part]!==UNDEFINED){ret[wheelOrder[part]]=v;}if(fillInner){this._innerValues[part]=v;}}return ret};DatetimeBase.defaults=__assign({},dateTimeLocale,{dateDisplay:"MMMMDDYYYY",dateWheelFormat:"|DDD MMM D|",stepHour:1,stepMinute:1,stepSecond:1});DatetimeBase._name="Datetime";DatetimeBase.decorators=[{type:core.Directive,args:[{selector:"[mbsc-dt-b]"}]}];return DatetimeBase}(BaseComponent);var MbscScroller=/*#__PURE__*/function(_super){__extends(MbscScroller,_super);function MbscScroller(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.onCancel=new core.EventEmitter;_this.onChange=new core.EventEmitter;_this.onClose=new core.EventEmitter;_this.onOpen=new core.EventEmitter;_this.onTempChange=new core.EventEmitter;_this.onResize=new core.EventEmitter;return _this}Object.defineProperty(MbscScroller.prototype,"vInput",{set:function(inp){if(inp){this._el=inp.nativeElement;this._isMbsc=true;}},enumerable:true,configurable:true});Object.defineProperty(MbscScroller.prototype,"vPopup",{set:function(popup){this._popup=popup;},enumerable:true,configurable:true});MbscScroller.decorators=[{type:core.Component,args:[{changeDetection:core.ChangeDetectionStrategy.OnPush,encapsulation:core.ViewEncapsulation.None,selector:"mbsc-scroller",template:getPickerTemplate('\n    <ng-template [ngTemplateOutlet]="preContentTemplate" [ngTemplateOutletContext]="{ data: preContentData }">\n    </ng-template>\n    <div *ngIf="(_popup && _popup._isVisible) || s.display === \'inline\'"\n      [class]="\'mbsc-scroller mbsc-scroller-\' + _displayStyle + _theme + _rtl +\n        (_touchUi ? \' mbsc-scroller-touch\' : \' mbsc-scroller-pointer \') +\n        (s.display === \'inline\' ? \' mbsc-font \' : \' \') + _className"\n    >\n      <ng-template [ngTemplateOutlet]="inContentTemplate" [ngTemplateOutletContext]="{ data: preContentData }">\n      </ng-template>\n      <div *ngFor="let wheelGroup of _wheels" [class]="\'mbsc-scroller-wheel-group-cont\' +\n        (s.scroll3d ? \' mbsc-scroller-wheel-group-cont-3d\' : \'\') + _theme">\n        <div *ngIf="s.selectOnScroll" [class]="\'mbsc-scroller-wheel-line\' + _theme" [ngStyle]="_lineStyle"></div>\n        <div [class]="\'mbsc-scroller-wheel-group\' +\n          (s.scroll3d ? \' mbsc-scroller-wheel-group-3d\' : \'\') + _theme">\n          <div\n            [class]="\'mbsc-scroller-wheel-overlay mbsc-scroller-wheel-overlay-\' + _displayStyle + _theme"\n            [ngStyle]="_overlayStyle"\n          ></div>\n          <mbsc-wheel *ngFor="let wheel of wheelGroup"\n            [activeIndex]="_activeIndexes[wheel._key]"\n            [disabled]="_disabled && _disabled[wheel._key]"\n            [display]="_displayStyle"\n            [itemHeight]="s.itemHeight"\n            [onActiveChange]="_onActiveChange"\n            [onIndexChange]="_onWheelIndexChange"\n            [onSet]="_onSet"\n            [maxIndex]="wheel.max"\n            [maxWheelWidth]="s.maxWheelWidth"\n            [minIndex]="wheel.min"\n            [minWheelWidth]="s.minWheelWidth"\n            [multiple]="wheel.multiple"\n            [rows]="_rows"\n            [scroll3d]="_scroll3d"\n            [selectedIndex]="_indexes[wheel._key]"\n            [selectedValues]="_tempValueRep[wheel._key]"\n            [selectOnScroll]="s.selectOnScroll"\n            [itemTemplate]="s.itemTemplate"\n            [theme]="s.theme"\n            [rtl]="s.rtl"\n            [wheel]="wheel"\n            [wheelWidth]="s.wheelWidth"\n            [touchUi]="s.touchUi">\n          </mbsc-wheel>\n        </div>\n      </div>\n    </div>')}]}];MbscScroller.propDecorators={vInput:[{type:core.ViewChild,args:["input",{static:false}]}],vPopup:[{type:core.ViewChild,args:["popup",{static:false}]}],element:[{type:core.Input}],writeValue:[{type:core.Input}],circular:[{type:core.Input}],data:[{type:core.Input}],displayStyle:[{type:core.Input}],filter:[{type:core.Input}],formatValue:[{type:core.Input}],getValue:[{type:core.Input}],maxWheelWidth:[{type:core.Input}],minWheelWidth:[{type:core.Input}],inContentTemplate:[{type:core.Input}],itemHeight:[{type:core.Input}],itemTemplate:[{type:core.Input}],onWheelMove:[{type:core.Input}],parseValue:[{type:core.Input}],preContentTemplate:[{type:core.Input}],preContentData:[{type:core.Input}],rows:[{type:core.Input}],selectMultiple:[{type:core.Input}],selectOnScroll:[{type:core.Input}],shouldValidate:[{type:core.Input}],showInput:[{type:core.Input}],showOnClick:[{type:core.Input}],showOnFocus:[{type:core.Input}],validate:[{type:core.Input}],valueEquality:[{type:core.Input}],valueMap:[{type:core.Input}],wheels:[{type:core.Input}],wheelWidth:[{type:core.Input}],disabled:[{type:core.Input}],dropdown:[{type:core.Input}],endIcon:[{type:core.Input}],endIconSrc:[{type:core.Input}],endIconSvg:[{type:core.Input}],error:[{type:core.Input}],errorMessage:[{type:core.Input}],inputStyle:[{type:core.Input}],label:[{type:core.Input}],labelStyle:[{type:core.Input}],name:[{type:core.Input}],placeholder:[{type:core.Input}],startIcon:[{type:core.Input}],startIconSrc:[{type:core.Input}],startIconSvg:[{type:core.Input}],activeElm:[{type:core.Input}],anchor:[{type:core.Input}],animation:[{type:core.Input}],buttons:[{type:core.Input}],cancelText:[{type:core.Input}],closeOnEsc:[{type:core.Input}],closeOnOverlayClick:[{type:core.Input}],closeText:[{type:core.Input}],context:[{type:core.Input}],display:[{type:core.Input}],focusOnClose:[{type:core.Input}],focusTrap:[{type:core.Input}],headerText:[{type:core.Input}],height:[{type:core.Input}],maxHeight:[{type:core.Input}],maxWidth:[{type:core.Input}],setText:[{type:core.Input}],showArrow:[{type:core.Input}],showOverlay:[{type:core.Input}],width:[{type:core.Input}],clearText:[{type:core.Input}],onCancel:[{type:core.Output}],onChange:[{type:core.Output}],onClose:[{type:core.Output}],onOpen:[{type:core.Output}],onTempChange:[{type:core.Output}],onResize:[{type:core.Output}]};MbscScroller=__decorate([FormControl],MbscScroller);return MbscScroller}(ScrollerBase);var TEMPLATE='\n  <mbsc-scroller #scroller\n    [disabled]="s.disabled"\n    [endIcon]="s.endIcon"\n    [endIconSrc]="s.endIconSrc"\n    [endIconSvg]="s.endIconSvg"\n    [error]="s.error"\n    [errorMessage]="s.errorMessage"\n    [inputStyle]="s.inputStyle"\n    [label]="s.label"\n    [labelStyle]="s.labelStyle"\n    [placeholder]="s.placeholder"\n    [name]="s.name"\n    [startIcon]="s.startIcon"\n    [startIconSrc]="s.startIconSrc"\n    [startIconSvg]="s.startIconSvg"\n\n    [anchor]="s.anchor"\n    [animation]="s.animation"\n    [buttons]="s.buttons"\n    [cancelText]="s.cancelText"\n    [clearText]="s.clearText"\n    [closeOnOverlayClick]="s.closeOnOverlayClick"\n    [context]="s.context"\n    [display]="s.display"\n    [focusOnClose]="s.focusOnClose"\n    [focusTrap]="s.focusTrap"\n    [headerText]="s.headerText"\n    [height]="s.height"\n    [setText]="s.setText"\n    [showArrow]="s.showArrow"\n    [showOverlay]="s.showOverlay"\n    [width]="s.width"\n\n    [circular]="s.circular"\n    [displayStyle]="s.displayStyle"\n    [formatValue]="_formatDate"\n    [getValue]="_getDate"\n    [itemHeight]="s.itemHeight"\n    [maxWheelWidth]="s.maxWheelWidth"\n    [minWheelWidth]="_minWheelWidth"\n    [value]="_value"\n    [parseValue]="_parseDate"\n    [rows]="s.rows"\n    [rtl]="s.rtl"\n    [shouldValidate]="_shouldValidate"\n    [showOnClick]="s.showOnClick"\n    [showOnFocus]="s.showOnFocus"\n    [theme]="s.theme"\n    [themeVariant]="s.themeVariant"\n    [touchUi]="_touchUi"\n    [validate]="_validate"\n    [valueEquality]="_valueEquals"\n    [wheels]="_wheels"\n    [wheelWidth]="s.wheelWidth"\n\n    (onCancel)="_hook(\'onCancel\', $event)"\n    (onChange)="_hook(\'onChange\', $event)"\n    (onClose)="_hook(\'onClose\', $event)"\n    (onOpen)="_hook(\'onOpen\', $event)"\n  ></mbsc-scroller>\n';var MbscDateBase=/*#__PURE__*/function(_super){__extends(MbscDateBase,_super);function MbscDateBase(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.onCancel=new core.EventEmitter;_this.onChange=new core.EventEmitter;_this.onClose=new core.EventEmitter;_this.onOpen=new core.EventEmitter;return _this}Object.defineProperty(MbscDateBase.prototype,"vScroller",{set:function(scroller){this._scroller=scroller;},enumerable:true,configurable:true});MbscDateBase.decorators=[{type:core.Directive,args:[{selector:"[mbsc-dtb-b]"}]}];MbscDateBase.propDecorators={vScroller:[{type:core.ViewChild,args:["scroller",{static:false}]}],onCancel:[{type:core.Output}],onChange:[{type:core.Output}],onClose:[{type:core.Output}],onOpen:[{type:core.Output}]};MbscDateBase=__decorate([FormControl],MbscDateBase);return MbscDateBase}(DatetimeBase);var MbscDate=/*#__PURE__*/function(_super){__extends(MbscDate,_super);function MbscDate(){return _super!==null&&_super.apply(this,arguments)||this}MbscDate.decorators=[{type:core.Component,args:[{changeDetection:core.ChangeDetectionStrategy.OnPush,encapsulation:core.ViewEncapsulation.None,selector:"mbsc-date",template:TEMPLATE}]}];return MbscDate}(MbscDateBase);var MbscDatetime=/*#__PURE__*/function(_super){__extends(MbscDatetime,_super);function MbscDatetime(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this._preset="datetime";return _this}MbscDatetime.decorators=[{type:core.Component,args:[{changeDetection:core.ChangeDetectionStrategy.OnPush,encapsulation:core.ViewEncapsulation.None,selector:"mbsc-datetime",template:TEMPLATE}]}];return MbscDatetime}(MbscDateBase);var MbscTime=/*#__PURE__*/function(_super){__extends(MbscTime,_super);function MbscTime(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this._preset="time";return _this}MbscTime.decorators=[{type:core.Component,args:[{changeDetection:core.ChangeDetectionStrategy.OnPush,encapsulation:core.ViewEncapsulation.None,selector:"mbsc-time",template:TEMPLATE}]}];return MbscTime}(MbscDateBase);function getClosestNumber(arr,value){if(value==null||!arr.length){return null}var i=0;while(i<arr.length&&value>=arr[i]){i++;}if(i===arr.length){return arr[i-1]}else if(i===0){return arr[0]}else {var prev=arr[i-1];var next=arr[i];return value-prev<next-value?prev:next}}var TimegridBase=/*#__PURE__*/function(_super){__extends(TimegridBase,_super);function TimegridBase(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this._setTime=function(timeSlot){_this._hook("onChange",{value:createDate(_this.s,timeSlot.value)});};_this._isDisabled=function(d){if(d){var key=getDateStr(createDate(_this.s,d));var invalidsForDay=_this._invalids&&_this._invalids[key];var validsForDay=_this._valids&&_this._valids[key];var exclusiveEndDates=_this.s.exclusiveEndDates;if(validsForDay){for(var _i=0,validsForDay_1=validsForDay;_i<validsForDay_1.length;_i++){var valid=validsForDay_1[_i];var lessThanEnd=valid.end&&(exclusiveEndDates?d<+valid.end:d<=+valid.end);if(valid.start&&d>=+valid.start&&lessThanEnd||valid.allDay){return false}}return true}if(invalidsForDay){for(var _a=0,invalidsForDay_1=invalidsForDay;_a<invalidsForDay_1.length;_a++){var invalid=invalidsForDay_1[_a];var lessThanEnd=invalid.end&&(exclusiveEndDates?d<+invalid.end:d<=+invalid.end);if(invalid.start&&d>=+invalid.start&&lessThanEnd||invalid.allDay){return true}}return false}}return false};_this._onKeyDown=function(ev){switch(ev.keyCode){case SPACE:ev.target.click();ev.preventDefault();break}};return _this}TimegridBase.prototype._render=function(s,state){var _this=this;var prevS=this._prevS;this._cssClass="mbsc-timegrid-container mbsc-font"+this._theme+this._rtl;var minChanged=s.min!==prevS.min;var maxChanged=s.max!==prevS.max;var timeFormat=s.timeFormat;var valueChanged=prevS.value&&!s.value||s.value&&+s.value!==this._value;if(minChanged){this._min=isEmpty(s.min)?UNDEFINED:makeDate(s.min,s,timeFormat);}if(maxChanged){this._max=isEmpty(s.max)?UNDEFINED:makeDate(s.max,s,timeFormat);}var selected=s.value||createDate(s);var dayStart=getDateOnly(selected);var dayEnd=addDays(dayStart,1);var currentDateChanged=this._selectedDate!==+dayStart;var invChanged=s.invalid!==prevS.invalid;var validChanged=s.valid!==prevS.valid;if(invChanged||currentDateChanged){this._invalids=getEventMap(s.invalid,dayStart,dayEnd,s,true);}if(validChanged||currentDateChanged){this._valids=getEventMap(s.valid,dayStart,dayEnd,s,true);}if(valueChanged){this._value=s.value&&+s.value;}var timeSlotsChange=currentDateChanged||invChanged||minChanged||maxChanged||timeFormat!==prevS.timeFormat;if(timeSlotsChange){this._selectedDate=+dayStart;var start=Math.max(+dayStart,+(this._min||-Infinity));var end=Math.min(+dayEnd,+(this._max||Infinity)+1);var timeInterval=s.stepHour*36e5+s.stepMinute*6e4;this._timeSlots=[];this._validTimes=[];var arr=[];var i=0;for(var d=+dayStart;d<+dayEnd;d+=timeInterval){if(end>=start?d>=start&&d<end:d>=start||d<end){var timeslot={formattedValue:formatDate(timeFormat,createDate(s,d),s),value:d};arr.push(timeslot);if(i===2){this._timeSlots.push(arr);arr=[];i=-1;}if(!this._isDisabled(d)){this._validTimes.push(timeslot);}i++;}}if(arr.length){this._timeSlots.push(arr);}}if(this._isDisabled(this._value)||(valueChanged||timeSlotsChange)&&findIndex(this._validTimes,(function(ts){return ts.value===_this._value}))===-1){var validated_1=getClosestNumber(this._validTimes.map((function(slot){return slot.value})),this._value);if(validated_1){clearTimeout(this._validationHandle);this._validationHandle=setTimeout((function(){var validTimeslot=find(_this._validTimes,(function(slot){return slot.value===validated_1}));_this._setTime(validTimeslot);}));}}else if(timeSlotsChange){clearTimeout(this._validationHandle);}this._valueChanged=this._valueChanged||valueChanged;};TimegridBase.prototype._updated=function(){if(this._value!==UNDEFINED&&(this._valueChanged||this._isOpen!==this.s.isOpen&&this.s.isOpen)){var animate_1=this._lastValue!==UNDEFINED;var grid_1=this._gridContEl;var timeslot_1=grid_1.querySelector('[data-timeslot="'+this._value+'"]');if(timeslot_1){setTimeout((function(){var itemRect=timeslot_1.getBoundingClientRect();var itemTop=itemRect.top;var itemHeight=itemRect.height;var gridRect=grid_1.getBoundingClientRect();var gridTop=gridRect.top;var gridHeight=gridRect.height;var currPos=getScrollTop(grid_1);if(itemTop+itemHeight>gridTop+gridHeight||itemTop<gridTop){var scrollPos=itemTop-gridTop+currPos-5;smoothScroll(grid_1,UNDEFINED,scrollPos,animate_1);}}));}this._valueChanged=false;this._lastValue=this._value;}this._isOpen=this.s.isOpen;};TimegridBase.defaults=__assign({},dateTimeLocale,{stepHour:0,stepMinute:30});TimegridBase._name="Timegrid";TimegridBase.decorators=[{type:core.Directive,args:[{selector:"[mbsc-tg-b]"}]}];return TimegridBase}(BaseComponent);var MbscTimeBox=/*#__PURE__*/function(){function MbscTimeBox(){}MbscTimeBox.decorators=[{type:core.Component,args:[{changeDetection:core.ChangeDetectionStrategy.OnPush,encapsulation:core.ViewEncapsulation.None,selector:"mbsc-timebox",template:"<div\n    [attr.data-timeslot]=\"timeSlot.value\"\n    [attr.tabIndex]=\"disabled ? null : 0\"\n    [class]=\"'mbsc-timegrid-item' + (selected ? ' mbsc-selected' : '') + (disabled ? ' mbsc-disabled' : '') + theme\"\n    (click)=\"onClick(timeSlot)\"\n    (keydown)=\"onKeyDown($event)\"\n  >\n    {{timeSlot.formattedValue}}\n  </div>"}]}];MbscTimeBox.propDecorators={disabled:[{type:core.Input}],selected:[{type:core.Input}],timeSlot:[{type:core.Input}],theme:[{type:core.Input}],onClick:[{type:core.Input}],onKeyDown:[{type:core.Input}]};return MbscTimeBox}();var MbscTimegrid=/*#__PURE__*/function(_super){__extends(MbscTimegrid,_super);function MbscTimegrid(){return _super!==null&&_super.apply(this,arguments)||this}MbscTimegrid.prototype._mounted=function(){var el=this._elr.nativeElement;this._gridContEl=el&&el.parentElement;};MbscTimegrid.decorators=[{type:core.Component,args:[{changeDetection:core.ChangeDetectionStrategy.OnPush,encapsulation:core.ViewEncapsulation.None,host:{"[class]":"_cssClass"},selector:"mbsc-timegrid",template:'\n    <div *ngFor="let arr of _timeSlots; let rowIndex = index; trackBy: _getKey" class="mbsc-timegrid-row">\n      <div *ngFor="let v of arr; let cellIndex = index; trackBy: _getKey"\n        [class]="\'mbsc-timegrid-cell\' + (_isDisabled(v.value) ? \' mbsc-disabled\' : \'\')"\n      >\n        <div [innerHTML]="textParamMulti(rowIndex*3+cellIndex)"></div>\n        <mbsc-timebox\n          [disabled]="_isDisabled(v.value)"\n          [selected]="_value === v.value"\n          [timeSlot]="v"\n          [theme]="_theme"\n          [onClick]="_setTime"\n          [onKeyDown]="_onKeyDown">\n        </mbsc-timebox>\n      </div>\n    </div>\n'}]}];return MbscTimegrid}(TimegridBase);modules.Calendar=MbscCalendar;modules.Datetime=MbscDatetime;modules.Timegrid=MbscTimegrid;var template='\n<div [class]="\'mbsc-datepicker mbsc-flex-col mbsc-datepicker-\' + s.display + _theme +\n  (s.display === \'inline\' ? \' \' + _className : \'\') + _controlsClass"\n>\n  <div *ngIf="_headerText && s.display === \'inline\'" [class]="\'mbsc-picker-header\' + _theme + _hb">\n    {{_headerText}}\n  </div>\n\n  <mbsc-segmented-group *ngIf="_renderTabs"\n    [rtl]="s.rtl"\n    [theme]="s.theme"\n    [themeVariant]="s.themeVariant"\n    [(ngModel)]="_activeTab"\n    (change)="_changeActiveTab($event)"\n  >\n    <mbsc-segmented *ngFor="let control of _controls"\n      [rtl]="s.rtl"\n      [theme]="s.theme"\n      [themeVariant]="s.themeVariant"\n      [value]="control.name"\n    >\n      {{control.title}}\n    </mbsc-segmented>\n  </mbsc-segmented-group>\n  <div *ngIf="_renderControls" [class]="\'mbsc-range-control-wrapper\' + _theme">\n    <mbsc-segmented-group\n      [rtl]="s.rtl"\n      [theme]="s.theme"\n      [themeVariant]="s.themeVariant"\n      [(ngModel)]="_activeSelect"\n      (change)="_changeActiveSelect($event)"\n    >\n      <mbsc-segmented [rtl]="s.rtl" [theme]="s.theme" [themeVariant]="s.themeVariant" value="start" [class]="\'mbsc-range-start\' +\n        (_tempStartText ? \' mbsc-range-value-nonempty\' : \'\')">\n        <div [class]="\'mbsc-range-control-label\' + _theme + _rtl +\n        (_activeSelect === \'start\'? \' active\' : \'\')">{{s.rangeStartLabel}}</div>\n        <div [class]="\'mbsc-range-control-value\' + _theme + _rtl +\n        (_activeSelect === \'start\' ? \' active\' : \'\') +\n        (!_tempStartText ? \' mbsc-range-control-text-empty\' : \'\')">{{_tempStartText || s.rangeStartHelp}}</div>\n        <mbsc-icon *ngIf="_activeSelect === \'start\' && _tempStartText" [class]="\'mbsc-range-label-clear\' + _rtl"\n          (click)="_clearStart()" [svg]="s.clearIcon" [theme]="s.theme"></mbsc-icon>\n      </mbsc-segmented>\n      <mbsc-segmented [rtl]="s.rtl" [theme]="s.theme" [themeVariant]="s.themeVariant" value="end" [class]="\'mbsc-range-end\' +\n        (_tempEndText ? \' mbsc-range-value-nonempty\' : \'\')">\n        <div [class]="\'mbsc-range-control-label\' + _theme + _rtl +\n        (_activeSelect === \'end\'? \' active\' : \'\')">{{s.rangeEndLabel}}</div>\n        <div [class]="\'mbsc-range-control-value\' + _theme + _rtl +\n        (_activeSelect === \'end\' ? \' active\' : \'\') +\n        (!_tempEndText ? \' mbsc-range-control-text-empty\' : \'\')">{{_tempEndText || s.rangeEndHelp}}</div>\n        <mbsc-icon *ngIf="_activeSelect === \'end\' && _tempEndText" [class]="\'mbsc-range-label-clear\' + _rtl"\n          (click)="_clearEnd()" [svg]="s.clearIcon" [theme]="s.theme"></mbsc-icon>\n      </mbsc-segmented>\n    </mbsc-segmented-group>\n  </div>\n  <div [class]="\'mbsc-datepicker-tab-wrapper mbsc-flex-1-1 \' + _theme" #wrapper>\n    <div *ngFor="let control of _controls"\n      [class]="\'mbsc-datepicker-tab mbsc-datepicker-tab-\' + control.name + _theme +\n        ((_renderTabs && control.name === _activeTab) || !_renderTabs ? \' mbsc-datepicker-tab-active\' : \'\') +\n        (_renderTabs && control.name === \'time\' ? \' mbsc-datepicker-time-modal\' : \'\') +\n        (_renderTabs || _controls.length === 1 ? \' mbsc-datepicker-tab-expand\' : \'\')"\n      >\n      <mbsc-calendar *ngIf="control.name === \'calendar\'" [options]="control.options" #ctrlVar></mbsc-calendar>\n      <mbsc-datetime *ngIf="control.name === \'datetime\'" [options]="control.options" #ctrlVar></mbsc-datetime>\n      <mbsc-date *ngIf="control.name === \'date\'" [options]="control.options" #ctrlVar></mbsc-date>\n      <mbsc-time *ngIf="control.name === \'time\'" [options]="control.options" #ctrlVar></mbsc-time>\n      <mbsc-timegrid *ngIf="control.name === \'timegrid\'" [options]="control.options" #ctrlVar></mbsc-timegrid>\n      \x3c!--<ng-container mbsc-tpl></ng-container>--\x3e\n    </div>\n  </div>\n</div>\n';var MbscDatepickerBase=/*#__PURE__*/function(_super){__extends(MbscDatepickerBase,_super);function MbscDatepickerBase(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.onCancel=new core.EventEmitter;_this.onCellClick=new core.EventEmitter;_this.onCellHoverIn=new core.EventEmitter;_this.onCellHoverOut=new core.EventEmitter;_this.onChange=new core.EventEmitter;_this.onClose=new core.EventEmitter;_this.onLabelClick=new core.EventEmitter;_this.onPageChange=new core.EventEmitter(true);_this.onPageLoaded=new core.EventEmitter(true);_this.onPageLoading=new core.EventEmitter(true);_this.onOpen=new core.EventEmitter;_this.onPosition=new core.EventEmitter;_this.onTempChange=new core.EventEmitter;_this.onActiveDateChange=new core.EventEmitter;return _this}MbscDatepickerBase.decorators=[{type:core.Directive,args:[{selector:"[mbsc-dp-b]"}]}];MbscDatepickerBase.propDecorators={calendarHeaderTemplate:[{type:core.Input}],calendarScroll:[{type:core.Input}],calendarSize:[{type:core.Input}],calendarSystem:[{type:core.Input}],calendarType:[{type:core.Input}],colors:[{type:core.Input}],controls:[{type:core.Input}],dataTimezone:[{type:core.Input}],defaultSelection:[{type:core.Input}],displayTimezone:[{type:core.Input}],element:[{type:core.Input}],endInput:[{type:core.Input}],firstSelectDay:[{type:core.Input}],inputTyping:[{type:core.Input}],invalid:[{type:core.Input}],inRangeInvalid:[{type:core.Input}],labels:[{type:core.Input}],marked:[{type:core.Input}],max:[{type:core.Input}],maxRange:[{type:core.Input}],maxTime:[{type:core.Input}],min:[{type:core.Input}],minRange:[{type:core.Input}],minTime:[{type:core.Input}],mode:[{type:core.Input}],modules:[{type:core.Input}],moment:[{type:core.Input}],pages:[{type:core.Input}],rangeHighlight:[{type:core.Input}],rangeEndInvalid:[{type:core.Input}],refDate:[{type:core.Input}],returnFormat:[{type:core.Input}],showInput:[{type:core.Input}],startInput:[{type:core.Input}],stepHour:[{type:core.Input}],stepMinute:[{type:core.Input}],stepSecond:[{type:core.Input}],select:[{type:core.Input}],selectCounter:[{type:core.Input}],selectSize:[{type:core.Input}],selectMax:[{type:core.Input}],selectMin:[{type:core.Input}],selectMultiple:[{type:core.Input}],showOuterDays:[{type:core.Input}],showRangeLabels:[{type:core.Input}],showWeekNumbers:[{type:core.Input}],tabs:[{type:core.Input}],theme:[{type:core.Input}],timezonePlugin:[{type:core.Input}],valid:[{type:core.Input}],weeks:[{type:core.Input}],disabled:[{type:core.Input}],dropdown:[{type:core.Input}],endIcon:[{type:core.Input}],endIconSrc:[{type:core.Input}],endIconSvg:[{type:core.Input}],error:[{type:core.Input}],errorMessage:[{type:core.Input}],inputStyle:[{type:core.Input}],label:[{type:core.Input}],labelStyle:[{type:core.Input}],name:[{type:core.Input}],placeholder:[{type:core.Input}],startIcon:[{type:core.Input}],startIconSrc:[{type:core.Input}],startIconSvg:[{type:core.Input}],tagInput:[{type:core.Input}],circular:[{type:core.Input}],clearText:[{type:core.Input}],itemHeight:[{type:core.Input}],maxWheelWidth:[{type:core.Input}],minWheelWidth:[{type:core.Input}],rows:[{type:core.Input}],showOnClick:[{type:core.Input}],showOnFocus:[{type:core.Input}],wheelWidth:[{type:core.Input}],anchor:[{type:core.Input}],anchorAlign:[{type:core.Input}],animation:[{type:core.Input}],buttons:[{type:core.Input}],cancelText:[{type:core.Input}],closeOnEsc:[{type:core.Input}],closeOnOverlayClick:[{type:core.Input}],closeOnScroll:[{type:core.Input}],closeText:[{type:core.Input}],context:[{type:core.Input}],display:[{type:core.Input}],focusOnClose:[{type:core.Input}],focusTrap:[{type:core.Input}],fullScreen:[{type:core.Input}],headerText:[{type:core.Input}],height:[{type:core.Input}],isOpen:[{type:core.Input}],maxHeight:[{type:core.Input}],maxWidth:[{type:core.Input}],scrollLock:[{type:core.Input}],setText:[{type:core.Input}],showArrow:[{type:core.Input}],showOverlay:[{type:core.Input}],width:[{type:core.Input}],amText:[{type:core.Input}],dateFormat:[{type:core.Input}],dateWheels:[{type:core.Input}],dayNames:[{type:core.Input}],dayNamesShort:[{type:core.Input}],daySuffix:[{type:core.Input}],dayTemplate:[{type:core.Input}],dayContentTemplate:[{type:core.Input}],firstDay:[{type:core.Input}],monthNames:[{type:core.Input}],monthNamesShort:[{type:core.Input}],monthSuffix:[{type:core.Input}],moreEventsPluralText:[{type:core.Input}],moreEventsText:[{type:core.Input}],nextPageText:[{type:core.Input}],nowText:[{type:core.Input}],pmText:[{type:core.Input}],prevPageText:[{type:core.Input}],rangeEndHelp:[{type:core.Input}],rangeEndLabel:[{type:core.Input}],rangeStartHelp:[{type:core.Input}],rangeStartLabel:[{type:core.Input}],selectedPluralText:[{type:core.Input}],selectedText:[{type:core.Input}],timeFormat:[{type:core.Input}],timeWheels:[{type:core.Input}],yearSuffix:[{type:core.Input}],onCancel:[{type:core.Output}],onCellClick:[{type:core.Output}],onCellHoverIn:[{type:core.Output}],onCellHoverOut:[{type:core.Output}],onChange:[{type:core.Output}],onClose:[{type:core.Output}],onLabelClick:[{type:core.Output}],onPageChange:[{type:core.Output}],onPageLoaded:[{type:core.Output}],onPageLoading:[{type:core.Output}],onOpen:[{type:core.Output}],onPosition:[{type:core.Output}],onTempChange:[{type:core.Output}],onActiveDateChange:[{type:core.Output}]};MbscDatepickerBase=__decorate([FormControl],MbscDatepickerBase);return MbscDatepickerBase}(DatepickerBase);var MbscDatepicker=/*#__PURE__*/function(_super){__extends(MbscDatepicker,_super);function MbscDatepicker(){return _super!==null&&_super.apply(this,arguments)||this}Object.defineProperty(MbscDatepicker.prototype,"vInput",{set:function(inp){if(inp){this._el=inp.nativeElement;this._isMbsc=true;}},enumerable:true,configurable:true});Object.defineProperty(MbscDatepicker.prototype,"vPopup",{set:function(popup){this._popup=popup;},enumerable:true,configurable:true});Object.defineProperty(MbscDatepicker.prototype,"vWrapper",{set:function(wrapper){this._wrapper=wrapper&&wrapper.nativeElement;},enumerable:true,configurable:true});MbscDatepicker.prototype._render=function(s,state){_super.prototype._render.call(this,s,state);if(this._controlRefs){this._controlRefs.forEach((function(ctrl){ctrl.props=ctrl.options;ctrl.forceUpdate();}));}};MbscDatepicker.prototype._destroy=function(){_super.prototype._destroy.call(this);};MbscDatepicker.prototype._onClosed=function(){_super.prototype._onClosed.call(this);this._onFormTouch();};MbscDatepicker.decorators=[{type:core.Component,args:[{changeDetection:core.ChangeDetectionStrategy.OnPush,encapsulation:core.ViewEncapsulation.None,providers:[MbscInstanceService],selector:"mbsc-datepicker",template:getPickerTemplate(template)}]}];MbscDatepicker.propDecorators={vInput:[{type:core.ViewChild,args:["input",{static:false}]}],vPopup:[{type:core.ViewChild,args:["popup",{static:false}]}],vWrapper:[{type:core.ViewChild,args:["wrapper",{static:false}]}],_controlRefs:[{type:core.ViewChildren,args:["ctrlVar",{static:false}]}]};MbscDatepicker=__decorate([FormControl],MbscDatepicker);return MbscDatepicker}(MbscDatepickerBase);var MbscDatepickerDirective=/*#__PURE__*/function(_super){__extends(MbscDatepickerDirective,_super);function MbscDatepickerDirective(){return _super!==null&&_super.apply(this,arguments)||this}MbscDatepickerDirective.prototype._ctor=function(){this._cfr=this._injector.get(core.ComponentFactoryResolver);};MbscDatepickerDirective.prototype._init=function(){var _this=this;var componentFactory=this._cfr.resolveComponentFactory(MbscDatepicker);this._ref=this._vcf.createComponent(componentFactory);this._inst=this._ref.instance;var inst=this._inst;var _loop_1=function(prop){if(prop!=="onInit"&&prop!=="onDestroy"&&inst[prop]instanceof core.EventEmitter){inst[prop].subscribe((function(args){if(prop==="onClose"){_this._onFormTouch();}if(prop==="onChange"){_this.value=inst.value;}_this[prop].emit(args);}));}};for(var prop in inst){_loop_1(prop);}_super.prototype._init.call(this);};MbscDatepickerDirective.prototype._destroy=function(){_super.prototype._destroy.call(this);if(this._ref){this._ref.destroy();}};MbscDatepickerDirective.prototype._render=function(s,state){_super.prototype._render.call(this,s,state);var inst=this._inst;inst.value=this.value;inst.props=s;inst.props.element=this._elr.nativeElement;inst.forceUpdate();};MbscDatepickerDirective.decorators=[{type:core.Directive,args:[{exportAs:"mobiscroll",providers:[MbscInstanceService],selector:"[mbsc-datepicker]"}]}];MbscDatepickerDirective.propDecorators={options:[{type:core.Input,args:["mbscOptions"]}]};return MbscDatepickerDirective}(MbscDatepickerBase);var WheelBase=/*#__PURE__*/function(_super){__extends(WheelBase,_super);function WheelBase(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this._onIndexChange=function(args){args.wheel=_this.s.wheel;_this._hook("onIndexChange",args);};_this._onItemClick=function(args){_this._hook("onIndexChange",{click:true,index:args.index,wheel:_this.s.wheel,selected:args.selected});};_this._onKeyDown=function(ev){var dir=0;if(ev.keyCode===UP_ARROW){dir=-1;}else if(ev.keyCode===DOWN_ARROW){dir=1;}var s=_this.s;var newIndex=s.activeIndex+dir;var change=!(newIndex<s.minIndex)&&!(newIndex>s.maxIndex);if(dir){ev.preventDefault();}if(dir&&change){var hook=s.selectOnScroll?"onIndexChange":"onActiveChange";_this._shouldFocus=true;_this._hook(hook,{diff:dir,index:newIndex,wheel:s.wheel});}else if(ev.keyCode===ENTER&&s.multiple){_this._hook("onSet",{});}};return _this}WheelBase.prototype._getText=function(data){return data!==UNDEFINED?data.display!==UNDEFINED?data.display:data:UNDEFINED};WheelBase.prototype._getValue=function(data){return data?data.value!==UNDEFINED?data.value:data.display!==UNDEFINED?data.display:data:data};WheelBase.prototype._isActive=function(item,text,is3d){var s=this.s;var d3=s.scroll3d&&s.multiple?is3d:!is3d;return s.activeIndex===item.key&&text&&d3};WheelBase.prototype._isSelected=function(item){var s=this.s;var selectedValues=s.selectedValues;var value=this._getValue(item.data);return s.multiple?!!(selectedValues&&selectedValues.indexOf)&&selectedValues.indexOf(value)>=0:s.selectOnScroll?item.key===s.selectedIndex:value!==UNDEFINED&&value===selectedValues};WheelBase.prototype._isDisabled=function(data){var disabledMap=this.s.disabled;var disabledProp=data&&data.disabled;var value=this._getValue(data);return !!(disabledProp||disabledMap&&disabledMap.get(value))};WheelBase.prototype._render=function(s){var rows=s.rows;var itemHeight=s.itemHeight;var key=s.wheel._key;var itemHeight3d=round((itemHeight-(itemHeight*rows/2+3)*.03)/2)*2;this._items=s.wheel.getItem||s.wheel.data||[];this._batchSize3d=round(rows*1.8);this._angle3d=360/(this._batchSize3d*2);this._style={height:round(rows*itemHeight*(s.scroll3d?1.1:1)/2)*2};this._itemNr=s.wheel.spaceAround?1:rows;this._innerStyle={height:(s.scroll3d?itemHeight3d:s.wheel.spaceAround?itemHeight:itemHeight*rows)+"px"};this._wheelStyle=s.wheelWidth?{width:s.wheelWidth[key]||s.wheelWidth}:{maxWidth:isArray(s.maxWheelWidth)?s.maxWheelWidth[key]:s.maxWheelWidth,minWidth:isArray(s.minWheelWidth)?s.minWheelWidth[key]:s.minWheelWidth};if(s.scroll3d){this._innerStyle[cssPrefix+"transform"]="translateY(-50%) translateZ("+(itemHeight*rows/2+3)+"px";}};WheelBase.prototype._updated=function(){if(this._shouldFocus){var item_1=this._el.querySelector('[tabindex="0"]');if(item_1){setTimeout((function(){item_1.focus();}));}this._shouldFocus=false;}};WheelBase.decorators=[{type:core.Directive,args:[{selector:"[mbsc-wh-b]"}]}];return WheelBase}(BaseComponent);var WheelItemBase=/*#__PURE__*/function(_super){__extends(WheelItemBase,_super);function WheelItemBase(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this._onClick=function(){var s=_this.s;if(s.text!==UNDEFINED&&!s.isGroup){_this._hook("onClick",{index:s.index,selected:s.selected,disabled:s.disabled});}};return _this}WheelItemBase.prototype._mounted=function(){var _this=this;this._unlisten=gestureListener(this._el,{click:true,keepFocus:false,onBlur:function(){_this.setState({hasFocus:false});},onFocus:function(){_this.setState({hasFocus:true});},onHoverIn:function(){if(_this.s.text!==UNDEFINED){_this.setState({hasHover:true});}},onHoverOut:function(){if(_this.s.text!==UNDEFINED){_this.setState({hasHover:false});}},onKeyDown:function(ev){if(ev.keyCode===SPACE||!_this.s.multiple&&ev.keyCode===ENTER){_this._onClick();}},onPress:function(){if(_this.s.text!==UNDEFINED){_this.setState({isActive:true});}},onRelease:function(){if(_this.s.text!==UNDEFINED){_this.setState({isActive:false});}}});};WheelItemBase.prototype._destroy=function(){this._unlisten();};WheelItemBase.prototype._render=function(s,state){var height=s.height;this._cssClass="mbsc-scroller-wheel-"+(s.isGroup?"header":"item")+this._theme+this._rtl+(s.checkmark&&!s.isGroup?" mbsc-wheel-item-checkmark":"")+(s.is3d?" mbsc-scroller-wheel-item-3d":"")+(s.scroll3d&&!s.is3d?" mbsc-scroller-wheel-item-2d":"")+(s.selected&&!s.is3d?" mbsc-selected":"")+(s.selected&&s.is3d?" mbsc-selected-3d":"")+(s.disabled?" mbsc-disabled":"")+(s.multiple&&!s.isGroup?" mbsc-wheel-item-multi":"")+(state.hasHover?" mbsc-hover":"")+(state.hasFocus?" mbsc-focus":"")+(state.isActive?" mbsc-active":"");this._style={height:height,lineHeight:height+"px"};this._checkmarkClass=this._theme+this._rtl+" mbsc-wheel-checkmark"+(s.selected?" mbsc-selected":"");if(s.is3d){this._transform="rotateX("+(s.offset-s.index)*s.angle3d%360+"deg) translateZ("+height*s.rows/2+"px)";this._style[cssPrefix+"transform"]=this._transform;}};WheelItemBase.decorators=[{type:core.Directive,args:[{selector:"[mbsc-whi-b]"}]}];return WheelItemBase}(BaseComponent);var MbscWheel=/*#__PURE__*/function(_super){__extends(MbscWheel,_super);function MbscWheel(){return _super!==null&&_super.apply(this,arguments)||this}MbscWheel.prototype._getItemKey=function(index,item){return item.key};MbscWheel.decorators=[{type:core.Component,args:[{changeDetection:core.ChangeDetectionStrategy.OnPush,encapsulation:core.ViewEncapsulation.None,host:{"(keydown)":"_onKeyDown($event)","[attr.aria-multiselectable]":'multiple ? "true" : undefined',"[class]":'"mbsc-scroller-wheel-wrapper mbsc-scroller-wheel-wrapper-" + wheel._key + " " +\n        (wheel.cssClass || "") + (scroll3d ? " mbsc-scroller-wheel-wrapper-3d" : "") + _theme + _rtl',"[style.maxWidth.px]":"_wheelStyle.maxWidth","[style.minWidth.px]":"_wheelStyle.minWidth","[style.width.px]":"_wheelStyle.width",role:"listbox"},selector:"mbsc-wheel",template:'\n    <mbsc-scrollview-base [class]="\'mbsc-scroller-wheel\' + (scroll3d ? \' mbsc-scroller-wheel-3d\' : \'\') + _theme" #scrollview\n      [batchSize3d]="_batchSize3d"\n      [innerClass]="\'mbsc-scroller-wheel-cont mbsc-scroller-wheel-cont-\' + display +\n        (scroll3d ? \' mbsc-scroller-wheel-cont-3d\' : \'\') +\n        (multiple ? \' mbsc-scroller-wheel-multi\' : \'\') + _theme"\n      [innerStyles]="_innerStyle"\n      [items]="_items"\n      [itemSize]="itemHeight"\n      [itemNr]="_itemNr"\n      [margin]="true"\n      [maxIndex]="maxIndex"\n      [minIndex]="minIndex"\n      [offset]="wheel._offset"\n      [onIndexChange]="_onIndexChange"\n      [rtl]="rtl"\n      [scroll3d]="scroll3d"\n      [scrollBar]="!_touchUi"\n      [selectedIndex]="selectedIndex"\n      [snap]="true"\n      [spaceAround]="wheel.spaceAround"\n      [style.height.px]="_style.height"\n      [visibleSize]="rows"\n    >\n      <mbsc-wheel-item *ngFor="let item of scrollview.visibleItems; trackBy: _getItemKey"\n        [active]="_isActive(item, _getText(item.data), false)"\n        [angle3d]="_angle3d"\n        [data]="item.data"\n        [disabled]="_isDisabled(item.data)"\n        [height]="itemHeight"\n        [is3d]="false"\n        [isGroup]="item.data && item.data.isGroup"\n        [index]="item.key"\n        [itemTemplate]="itemTemplate"\n        [multiple]="multiple"\n        [offset]="scrollview._offset"\n        [checkmark]="wheel.checkmark"\n        [rows]="rows"\n        [rtl]="rtl"\n        [scroll3d]="scroll3d"\n        [selected]="_isSelected(item)"\n        [text]="_getText(item.data)"\n        [theme]="theme"\n        [onClick]="_onItemClick">\n      </mbsc-wheel-item>\n      <ng-container content-3d>\n        <mbsc-wheel-item *ngFor="let item of scrollview.visible3dItems; trackBy: _getItemKey"\n          [active]="_isActive(item, _getText(item.data), true)"\n          [angle3d]="_angle3d"\n          [data]="item.data"\n          [disabled]="_isDisabled(item.data)"\n          [height]="itemHeight"\n          [is3d]="true"\n          [isGroup]="item.data && item.data.isGroup"\n          [index]="item.key"\n          [itemTemplate]="itemTemplate"\n          [multiple]="multiple"\n          [offset]="scrollview._offset"\n          [checkmark]="wheel.checkmark"\n          [rows]="rows"\n          [rtl]="rtl"\n          [scroll3d]="scroll3d"\n          [selected]="_isSelected(item)"\n          [text]="_getText(item.data)"\n          [theme]="theme"\n          [onClick]="_onItemClick">\n        </mbsc-wheel-item>\n      </ng-container>\n    </mbsc-scrollview-base>\n  '}]}];MbscWheel.propDecorators={activeIndex:[{type:core.Input}],disabled:[{type:core.Input}],display:[{type:core.Input}],itemHeight:[{type:core.Input}],itemTemplate:[{type:core.Input}],maxIndex:[{type:core.Input}],maxWheelWidth:[{type:core.Input}],minIndex:[{type:core.Input}],minWheelWidth:[{type:core.Input}],multiple:[{type:core.Input}],rows:[{type:core.Input}],scroll3d:[{type:core.Input}],selectedIndex:[{type:core.Input}],selectedValues:[{type:core.Input}],selectOnScroll:[{type:core.Input}],touchUi:[{type:core.Input}],wheel:[{type:core.Input}],wheelWidth:[{type:core.Input}],onGestureEnd:[{type:core.Input}],onGestureStart:[{type:core.Input}],onIndexChange:[{type:core.Input}],onActiveChange:[{type:core.Input}],onSet:[{type:core.Input}]};return MbscWheel}(WheelBase);var MbscWheelItem=/*#__PURE__*/function(_super){__extends(MbscWheelItem,_super);function MbscWheelItem(){return _super!==null&&_super.apply(this,arguments)||this}MbscWheelItem.prototype._render=function(s,state){_super.prototype._render.call(this,s,state);this._transform=this._sanitizer.bypassSecurityTrustStyle(this._transform);};MbscWheelItem.decorators=[{type:core.Component,args:[{changeDetection:core.ChangeDetectionStrategy.OnPush,encapsulation:core.ViewEncapsulation.None,host:{"(click)":"_onClick()","[attr.aria-disabled]":'disabled ? "true" : undefined',"[attr.aria-hidden]":'text === undefined || is3d ? "true" : undefined',"[attr.aria-selected]":'selected ? "true" : undefined',"[attr.tabindex]":"active ? 0 : text === undefined || is3d ? undefined : -1","[class]":"_cssClass","[style.height.px]":"height","[style.lineHeight.px]":"height","[style.transform]":"_transform",role:"option"},selector:"mbsc-wheel-item",template:'<div [innerHTML]="textParam"></div><span *ngIf="checkmark" [class]="_checkmarkClass"></span>\n  <div *ngIf="itemTemplate && data">\n    <ng-template [ngTemplateOutlet]="itemTemplate" [ngTemplateOutletContext]="{ $implicit: data }"></ng-template>\n  </div>\n  <ng-container *ngIf="!itemTemplate || !data">{{text}}</ng-container>'}]}];MbscWheelItem.propDecorators={active:[{type:core.Input}],angle3d:[{type:core.Input}],data:[{type:core.Input}],disabled:[{type:core.Input}],height:[{type:core.Input}],is3d:[{type:core.Input}],isGroup:[{type:core.Input}],index:[{type:core.Input}],itemTemplate:[{type:core.Input}],multiple:[{type:core.Input}],offset:[{type:core.Input}],rows:[{type:core.Input}],scroll3d:[{type:core.Input}],selected:[{type:core.Input}],text:[{type:core.Input}],onClick:[{type:core.Input}],checkmark:[{type:core.Input}]};return MbscWheelItem}(WheelItemBase);var MbscScrollerModule=/*#__PURE__*/function(){function MbscScrollerModule(){}MbscScrollerModule.decorators=[{type:core.NgModule,args:[{declarations:[MbscScroller,MbscWheelItem,MbscWheel,ScrollerBase,WheelBase,WheelItemBase],entryComponents:[MbscScroller],exports:[MbscScroller],imports:[common.CommonModule,MbscInputModule,MbscPickerModule,MbscPopupModule,MbscScrollviewBaseModule]}]}];return MbscScrollerModule}();var MbscDatetimeModule=/*#__PURE__*/function(){function MbscDatetimeModule(){}MbscDatetimeModule.decorators=[{type:core.NgModule,args:[{declarations:[DatetimeBase,MbscDate,MbscDateBase,MbscDatetime,MbscTime],entryComponents:[MbscDate,MbscDatetime,MbscTime],exports:[MbscDate,MbscDatetime,MbscTime],imports:[common.CommonModule,forms.FormsModule,MbscScrollerModule]}]}];return MbscDatetimeModule}();var radios={};function subscribeRadio(name,handler){if(!radios[name]){radios[name]={change:new Observable,selectedIndex:-1};}return radios[name].change.subscribe(handler)}function unsubscribeRadio(name,key){var data=radios[name];if(data){data.change.unsubscribe(key);if(!data.change.nr){delete radios[name];}}}function setRadio(name,value,selectedIndex){var data=radios[name];if(data){if(selectedIndex!==UNDEFINED){data.selectedIndex=selectedIndex;}if(value!==UNDEFINED){data.value=value;}data.change.next(data.value);}}function getSelectedIndex(name){return radios[name]&&radios[name].selectedIndex}function setSelectedIndex(name,selectedIndex){if(radios[name]){radios[name].selectedIndex=selectedIndex;}}var guid$2=1;var SegmentedGroupBase=/*#__PURE__*/function(_super){__extends(SegmentedGroupBase,_super);function SegmentedGroupBase(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this._id="mbsc-segmented-group"+guid$2++;_this._onChange=function(ev,val){var s=_this.s;var value=_this.value;if(s.select==="multiple"){if(value!==UNDEFINED){value=value||[];var index=value.indexOf(val);if(index!==-1){value.splice(index,1);}else {value.push(val);}_this.value=value.slice();}}else {_this.value=val;}if(s.onChange){s.onChange(ev);}};return _this}SegmentedGroupBase.prototype._setupDrag=function(){var _this=this;var disabledArray=[];var widthArray=[];var wrapperWidth;var wrapperLeft;var isDragging;var selectedIndex;var oldIndex;var name;this._unlisten=gestureListener(this._el,{onEnd:function(){if(isDragging&&selectedIndex!==oldIndex&&!disabledArray[selectedIndex]){var inputElement=_this._el.querySelectorAll(".mbsc-segmented-input")[selectedIndex];inputElement.click();}isDragging=false;_this.setState({dragging:false});},onMove:function(ev){if(isDragging){var relativeLeft=Math.min(Math.max(ev.endX-wrapperLeft,0),wrapperWidth);var newIndex=0;var beforeSum=widthArray[0];while(relativeLeft>beforeSum&&widthArray.length>newIndex+1){newIndex++;beforeSum+=widthArray[newIndex];}newIndex=_this.s.rtl?widthArray.length-1-newIndex:newIndex;if(newIndex!==selectedIndex&&!disabledArray[newIndex]){selectedIndex=newIndex;setRadio(name,UNDEFINED,selectedIndex);}}},onStart:function(ev){var item=closest(ev.domEvent.target,".mbsc-segmented-item",_this._el);if(!item){return}var input=item.querySelector(".mbsc-segmented-input");var classList=input.classList;if(classList.contains("mbsc-selected")){disabledArray=[];forEach(_this._el.querySelectorAll(".mbsc-segmented-button"),(function(button){disabledArray.push(button.classList.contains("mbsc-disabled"));}));widthArray=[];forEach(_this._el.querySelectorAll(".mbsc-segmented-item"),(function(el){widthArray.push(el.clientWidth);}));var padding=15;wrapperWidth=_this._el.clientWidth-padding*2;wrapperLeft=getOffset(_this._el).left+padding;name=input.name;selectedIndex=getSelectedIndex(name);oldIndex=selectedIndex;if(widthArray.length&&input.type==="radio"){isDragging=true;_this.setState({dragging:true});}}}});};SegmentedGroupBase.prototype._cleanupDrag=function(){if(this._unlisten){this._unlisten();this._unlisten=null;}};SegmentedGroupBase.prototype._render=function(s){this._name=s.name===UNDEFINED?this._id:s.name;this._groupClass="mbsc-segmented "+this._className+this._theme+this._rtl+(s.color?" mbsc-segmented-"+s.color:"")+(this.state.dragging?" mbsc-segmented-dragging":"");};SegmentedGroupBase.prototype._updated=function(){if(this.s.drag&&this.s.select!=="multiple"){if(!this._unlisten){this._setupDrag();}}else {this._cleanupDrag();}};SegmentedGroupBase.prototype._destroy=function(){this._cleanupDrag();};SegmentedGroupBase.defaults={select:"single"};SegmentedGroupBase._name="SegmentedGroup";SegmentedGroupBase.decorators=[{type:core.Directive,args:[{selector:"[mbsc-sgr-b]"}]}];return SegmentedGroupBase}(BaseComponent);var guid$3=1;var SegmentedBase=/*#__PURE__*/function(_super){__extends(SegmentedBase,_super);function SegmentedBase(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this._id="mbsc-segmented-"+guid$3++;_this._onChange=function(ev){var s=_this.s;var checked=ev.target.checked;if(checked===_this._checked){return}_this._change(checked);if(_this._onGroupChange){_this._onGroupChange(ev,_this._value);}_this._toggle(checked);if(s.onChange){s.onChange(ev);}};_this._onValueChange=function(value){var s=_this.s;var selected=_this._isMultiple?value&&value.indexOf(_this._value)!==-1:value===_this._value;if(s.checked===UNDEFINED&&selected!==_this.state.selected){_this.setState({selected:selected});}else {_this.forceUpdate();}_this._change(selected);};return _this}SegmentedBase.prototype._change=function(checked){};SegmentedBase.prototype._toggle=function(checked){if(this.s.checked===UNDEFINED){this.setState({selected:checked});}};SegmentedBase.prototype._groupOptions=function(_a){var _this=this;var color=_a.color,disabled=_a.disabled,name=_a.name,onChange=_a.onChange,select=_a.select,value=_a.value;var s=this.s;var state=this.state;var prevChecked=this._checked;var checked=s.checked!==UNDEFINED?emptyOrTrue(s.checked):state.selected===UNDEFINED?emptyOrTrue(s.defaultChecked):state.selected;this._value=s.value===UNDEFINED?this._id:s.value;this._onGroupChange=onChange;this._isMultiple=(select||s.select)==="multiple";this._name=name===UNDEFINED?s.name:name;this._disabled=disabled===UNDEFINED?s.disabled===UNDEFINED?state.disabled:emptyOrTrue(s.disabled):emptyOrTrue(disabled);this._color=color===UNDEFINED?s.color:color;this._checked=value===UNDEFINED?checked:this._isMultiple?value&&value.indexOf(this._value)!==-1:value===this._value;if(this._name&&!this._unsubscribe){this._unsubscribe=subscribeRadio(this._name,this._onValueChange);}if(!this._isMultiple&&!prevChecked&&this._checked){setTimeout((function(){if(_this._checked){setRadio(_this._name,_this._value,_this._index);}}));}this._selectedIndex=getSelectedIndex(this._name);this._cssClass="mbsc-segmented-item "+this._className+this._theme+this._rtl+(this._checked?" mbsc-segmented-item-checked":"")+(state.hasFocus?" mbsc-focus":"")+(this._index===this._selectedIndex||this._index===UNDEFINED&&this._checked||this._isMultiple&&this._checked?" mbsc-segmented-item-selected":"");};SegmentedBase.prototype._mounted=function(){var _this=this;listen(this._el,CLICK,this._onChange);this._unlisten=gestureListener(this._el,{onBlur:function(){_this.setState({hasFocus:false});},onFocus:function(){_this.setState({hasFocus:true});}});};SegmentedBase.prototype._updated=function(){if(!this._isMultiple){var cont=closest(this._el,".mbsc-segmented");var index=-1;var selectedIndex=-1;if(cont){var items=cont.querySelectorAll('.mbsc-segmented-input[name="'+this._name+'"]');for(var i=0;i<items.length;i++){if(items[i]===this._el){index=i;}if(items[i].checked){selectedIndex=i;}}}if(this._index!==index&&selectedIndex!==-1){setSelectedIndex(this._name,selectedIndex);}if(this._selectedIndex!==-1){this._box.style.transform="translateX("+(this.s.rtl?-1:1)*(this._selectedIndex-index)*100+"%)";this._animate=true;}if(index!==-1){this._index=index;}}};SegmentedBase.prototype._destroy=function(){unsubscribeRadio(this._name,this._unsubscribe);unlisten(this._el,CLICK,this._onChange);this._unlisten();};SegmentedBase.defaults={select:"single"};SegmentedBase._name="Segmented";SegmentedBase.decorators=[{type:core.Directive,args:[{selector:"[mbsc-seg-b]"}]}];return SegmentedBase}(BaseComponent);var MbscRadioService=/*#__PURE__*/function(){function MbscRadioService(){}MbscRadioService.decorators=[{type:core.Injectable}];return MbscRadioService}();var MbscSegmentedGroup=/*#__PURE__*/function(_super){__extends(MbscSegmentedGroup,_super);function MbscSegmentedGroup(){return _super!==null&&_super.apply(this,arguments)||this}MbscSegmentedGroup.prototype._onValueChange=function(value){this._radioService.value=value;setRadio(this._radioService.name,value);};MbscSegmentedGroup.prototype._ctor=function(){this._radioService=this._injector.get(MbscRadioService);};MbscSegmentedGroup.prototype._render=function(s){_super.prototype._render.call(this,s);var rs=this._radioService;rs.color=s.color;rs.disabled=s.disabled;rs.name=this._name;rs.select=s.select;rs.value=this.value;rs.onChange=this._onChange;};MbscSegmentedGroup.decorators=[{type:core.Component,args:[{changeDetection:core.ChangeDetectionStrategy.OnPush,encapsulation:core.ViewEncapsulation.None,host:{"[class]":"_groupClass"},providers:[MbscRadioService],selector:"mbsc-segmented-group",template:"<ng-content></ng-content>"}]}];MbscSegmentedGroup.propDecorators={color:[{type:core.Input}],disabled:[{type:core.Input}],name:[{type:core.Input}],select:[{type:core.Input}]};MbscSegmentedGroup=__decorate([FormControl],MbscSegmentedGroup);return MbscSegmentedGroup}(SegmentedGroupBase);var MbscSegmented=/*#__PURE__*/function(_super){__extends(MbscSegmented,_super);function MbscSegmented(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.checkedChange=new core.EventEmitter;return _this}Object.defineProperty(MbscSegmented.prototype,"checked",{get:function(){return this._check},set:function(val){var rs=this._radioService;if(this._check!==val){if(this._isMultiple){this._onFormChange(val);}else if(val){if(rs){rs.value=this.value;}this._onFormChange(this.value);}this.props.checked=val;this._check=val;this.setState({selected:val});}},enumerable:true,configurable:true});MbscSegmented.prototype.registerOnChange=function(fn){this._onFormChange=fn;};MbscSegmented.prototype.registerOnTouched=function(fn){this._onFormTouch=fn;};MbscSegmented.prototype.setDisabledState=function(disabled){this.setState({disabled:disabled});};MbscSegmented.prototype.writeValue=function(val){this.checked=this._isMultiple?val:this.value===val;};MbscSegmented.prototype._ctor=function(){var rs;this._radioService=rs=this._injector.get(MbscRadioService,null);var select=rs&&rs.select||this.select;this._isMultiple=select==="multiple";};MbscSegmented.prototype._change=function(checked){this.checked=checked;};MbscSegmented.prototype._render=function(s,state){this._groupOptions(this._radioService||{});_super.prototype._render.call(this,s,state);};MbscSegmented.prototype._mounted=function(){this._el=this.vInput.nativeElement;this._box=this.vBox.nativeElement;_super.prototype._mounted.call(this);};MbscSegmented.decorators=[{type:core.Component,args:[{changeDetection:core.ChangeDetectionStrategy.OnPush,encapsulation:core.ViewEncapsulation.None,host:{"[class]":"_cssClass"},selector:"mbsc-segmented",template:'\n    <label class="mbsc-segmented-label">\n      <div #box [class]="\'mbsc-segmented-selectbox\' + _theme +\n        (_animate ? \' mbsc-segmented-selectbox-animate\' : \'\') +\n        (_checked ? \' mbsc-selected\': \'\')">\n        <div [class]="\'mbsc-segmented-selectbox-inner\' +\n          (_index === _selectedIndex || _checked ? \' mbsc-segmented-selectbox-inner-visible\' : \'\') +\n          (_checked ? \' mbsc-selected\' : \'\') + _theme">\n        </div>\n      </div>\n      <input #input\n        [attr.aria-labelledby]="_id"\n        [class]="\'mbsc-segmented-input mbsc-reset\' + _theme + (_checked ? \' mbsc-selected\' : \'\')"\n        [checked]="_checked"\n        [disabled]="_disabled"\n        [name]="_isMultiple ? (s.name === undefined ? \'\' : s.name) : _name"\n        [type]="_isMultiple ? \'checkbox\' : \'radio\'"\n        [value]="_value" />\n      <mbsc-button\n        aria-hidden="true"\n        [ariaLabel]="s.ariaLabel"\n        [class]="\'mbsc-segmented-button\' + (_checked ? \' mbsc-selected\' : \'\') + (state.hasFocus ? \' mbsc-focus\' : \'\')"\n        [color]="_color"\n        [disabled]="_disabled"\n        [endIcon]="s.endIcon"\n        [endIconSrc]="s.endIconSrc"\n        [endIconSvg]="s.endIconSvg"\n        [icon]="s.icon"\n        [iconSrc]="s.iconSrc"\n        [iconSvg]="s.iconSvg"\n        [id]="_id"\n        [ripple]="s.ripple"\n        [rtl]="s.rtl"\n        role="none"\n        [startIcon]="s.startIcon"\n        [startIconSrc]="s.startIconSrc"\n        [startIconSvg]="s.startIconSvg"\n        [tabIndex]="-1"\n        [theme]="s.theme"\n        [themeVariant]="s.themeVariant">\n        <ng-content></ng-content>\n      </mbsc-button>\n    </label>\n  '}]}];MbscSegmented.propDecorators={vInput:[{type:core.ViewChild,args:["input",{static:false}]}],vBox:[{type:core.ViewChild,args:["box",{static:false}]}],ariaLabel:[{type:core.Input}],color:[{type:core.Input}],checked:[{type:core.Input}],disabled:[{type:core.Input}],endIcon:[{type:core.Input}],endIconSrc:[{type:core.Input}],endIconSvg:[{type:core.Input}],icon:[{type:core.Input}],iconSvg:[{type:core.Input}],iconSrc:[{type:core.Input}],name:[{type:core.Input}],ripple:[{type:core.Input}],startIcon:[{type:core.Input}],startIconSrc:[{type:core.Input}],startIconSvg:[{type:core.Input}],select:[{type:core.Input}],checkedChange:[{type:core.Output}]};return MbscSegmented}(SegmentedBase);var MbscSegmentedModule=/*#__PURE__*/function(){function MbscSegmentedModule(){}MbscSegmentedModule.decorators=[{type:core.NgModule,args:[{declarations:[SegmentedBase,SegmentedGroupBase,MbscSegmented,MbscSegmentedGroup],exports:[MbscSegmented,MbscSegmentedGroup],imports:[common.CommonModule,MbscButtonModule]}]}];return MbscSegmentedModule}();var MbscTimegridModule=/*#__PURE__*/function(){function MbscTimegridModule(){}MbscTimegridModule.decorators=[{type:core.NgModule,args:[{declarations:[MbscTimeBox,TimegridBase,MbscTimegrid],entryComponents:[MbscTimegrid],exports:[MbscTimegrid],imports:[common.CommonModule]}]}];return MbscTimegridModule}();var id$1=0;function jsonp$1(url,callback){if(win){var script_1=doc.createElement("script");var unique_1="mbscjsonp"+ ++id$1;win[unique_1]=function(data){script_1.parentNode.removeChild(script_1);delete win[unique_1];if(!data){return}callback(data);};script_1.src=url+(url.indexOf("?")>=0?"&":"?")+"callback="+unique_1;doc.body.appendChild(script_1);}}function ajaxGet(url,callback){var request=new XMLHttpRequest;request.open("GET",url,true);request.onload=function(){if(request.status>=200&&request.status<400){callback(JSON.parse(request.response));}};request.onerror=function(){};request.send();}function getJson(url,callback,type){if(type==="jsonp"){jsonp$1(url,callback);}else {ajaxGet(url,callback);}}var http={getJson:getJson};util.http=http;var MbscDatepickerModule=/*#__PURE__*/function(){function MbscDatepickerModule(){}MbscDatepickerModule.decorators=[{type:core.NgModule,args:[{declarations:[DatepickerBase,MbscDatepicker,MbscDatepickerBase,MbscDatepickerDirective],entryComponents:[MbscDatepicker],exports:[MbscDatepicker,MbscDatepickerDirective,MbscCalendarHeaderModule],imports:[common.CommonModule,forms.FormsModule,MbscCalendarModule,MbscDatetimeModule,MbscIconModule,MbscInputModule,MbscPickerModule,MbscPopupModule,MbscSegmentedModule,MbscTimegridModule]}]}];return MbscDatepickerModule}();var DELIMITER=", ";var DEF_GROUP="group_0";function createDisabledMap(optionList,invalids){var map=new Map;if(optionList){optionList.forEach((function(item){if(item.disabled){map.set(item.value,true);}}));}if(invalids){invalids.forEach((function(value){map.set(value,true);}));}return map}function createDisabledGroupsMap(disabledMap,optionList){var map=new Map;if(optionList){optionList.forEach((function(_a){var group=_a.group,value=_a.value;if(group){if(!map.has(group)){map.set(group,true);}if(!disabledMap.get(value)){map.set(group,false);}}}));}return map}function filterOptions(optionList,filterText){if(!filterText){return optionList}var escapedText=filterText.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&");var filterRegExp=new RegExp(escapedText,"i");var filtered=optionList.filter((function(item){return filterRegExp.test(item.text)}));return filtered}var SelectBase=/*#__PURE__*/function(_super){__extends(SelectBase,_super);function SelectBase(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this._options=[];_this._selectMap=new Map;_this._onFilterChange=function(e){var filterText=e.target.value;clearTimeout(_this._debounce);_this._filterInput.value=filterText;_this._debounce=setTimeout((function(){_this._filter(filterText);}),300);};_this._onFilterClear=function(){var input=_this._filterInput;if(input){input.value="";}_this._filter("");};_this._shouldValidate=function(s,prevS){var res=s.selectMultiple!==prevS.selectMultiple||!s.filter&&s.data!==prevS.data||_this._groupChanged;_this._groupChanged=false;return res};_this._writeValue=function(elm,text,value){var oldValue=elm.value;elm.value=text;if(_this._isSelect){if(!isArray(value)){value=[value];}var select=_this.s.selectElement;var options=select.options;var changed=false;for(var i=0;i<options.length;i++){var opt=options[i];var wasSelected=opt.selected;opt.selected=value.indexOf(opt.value)>-1;if(wasSelected!==opt.selected){changed=true;}}if(changed){trigger(select,CHANGE);}return changed}else {return oldValue!==text}};_this._onResize=function(args){_this.setState({width:args.windowWidth});};_this._onChange=function(args){var vals=args.value;_this._parsedValue=vals;_this._saveSelected(vals);_this._hook("onChange",args);};_this._format=function(valueRep){var optionWheelIndex=_this.s.showGroupWheel?1:0;var value=valueRep[optionWheelIndex];var values=_this.s.selectMultiple?value:[value];var labels=values.map&&values.map((function(v){if(_this._map){return _this._map.get(v)}return UNDEFINED}));return (labels||[]).join(DELIMITER)};_this._parse=function(value){var map=_this._map;var reMap=_this._reMap;var isMultiple=_this.s.selectMultiple;var defSel=_this.s.defaultSelection;var defValue=isMultiple?defSel?defSel.length!==UNDEFINED?defSel:defSel.slice():[]:defSel!==UNDEFINED?defSel:null;var parsedValue;_this._parsedValue=value;if(map){if(isMultiple&&!isEmpty(value)){var representation=[];if(value.length===UNDEFINED){representation.push(value);}else {if(isString(value)){var labels=value.split(DELIMITER);for(var _i=0,labels_1=labels;_i<labels_1.length;_i++){var label=labels_1[_i];var valueFromLabel=reMap.get(label);if(valueFromLabel!==UNDEFINED){representation.push(valueFromLabel);}}}else {for(var _a=0,value_1=value;_a<value_1.length;_a++){var iValue=value_1[_a];if(map.has(iValue)){representation.push(iValue);}}}}parsedValue=representation;}else {if(map.has(value)){parsedValue=value;}else if(isString(value)&&reMap.has(value)){parsedValue=reMap.get(value);}}}if(parsedValue===UNDEFINED){parsedValue=defValue;}if(_this.s.showGroupWheel){var firstValue_1=isMultiple?parsedValue[0]:parsedValue;var selectedItem=find(_this._options,(function(item){return item.value===firstValue_1}));return [selectedItem&&selectedItem.group,parsedValue]}return [parsedValue]};_this._get=function(valueRep){var optWheelIndex=_this.s.showGroupWheel?1:0;var values=valueRep[optWheelIndex];return _this.s.selectMultiple?values||[]:values};_this._valueEquals=function(v1,v2){if(_this.s.selectMultiple){return arrayContentEquals(v1||[],v2||[])}else {return v1===v2}};_this._onWheelMove=function(_a){var wheelIndex=_a.wheelIndex,selection=_a.selection,dataItem=_a.dataItem;if(!_this._selectOnScroll&&!selection&&wheelIndex===1){var opt=find(_this._options,(function(o){return o.value===dataItem.value}));var group=dataItem.isGroup?dataItem.value:opt.group;return [group]}return};_this._validate=function(_a){var values=_a.values,direction=_a.direction,wheels=_a.wheels,index=_a.index;var disabledMap=_this._disabled;var selectOnScroll=_this._selectOnScroll;var isMulti=_this.s.selectMultiple;var groupWheels=_this.s.showGroupWheel;var disabled=groupWheels?[_this._disabledGroups,disabledMap]:[disabledMap];var optWheelIndex=groupWheels?1:0;var val=_this._get(values);var ret={disabled:disabled};if(index===optWheelIndex||index===UNDEFINED){if(isMulti){var valid_1=[];val.forEach((function(selectedValue){if(!disabledMap.get(selectedValue)){valid_1.push(selectedValue);}}));ret.valid=_this._parse(valid_1);if(index!==UNDEFINED){ret.valid[0]=values[0];}}else {if(isEmpty(val)&&!selectOnScroll){ret.valid=groupWheels?[null,null]:[null];return ret}var validValue_1=getValid(wheels[optWheelIndex],values[optWheelIndex],disabledMap,direction);if(groupWheels){var item=find(_this._options,(function(o){return o.value===validValue_1}));ret.valid=[item.group,validValue_1];}else {ret.valid=[validValue_1];}}}else {var validGroup_1=getValid(wheels[0],values[0],disabled[0],direction);var firstValidItem=find(_this._options,(function(o){return o.group===validGroup_1&&(!selectOnScroll||!disabledMap.get(o.value))}));var itemOrHeaderValue=_this._touchUi||firstValidItem.group===UNDEFINED?firstValidItem.value:firstValidItem.group;if(selectOnScroll){ret.valid=[validGroup_1,itemOrHeaderValue];}else {ret.valid=[validGroup_1,values[1]];var first=isMulti?[itemOrHeaderValue]:itemOrHeaderValue;var group=_this._touchUi?validGroup_1:UNDEFINED;ret.indexes=[group,first];}}return ret};_this._onClose=function(args){_this._hook("onClose",args);if(_this._filterText){setTimeout((function(){return _this._onFilterClear()}),100);}};_this._saveSelected=function(values){if(_this.s.selectMultiple){var selectMap_1=new Map;forEach(values,(function(value){var label=_this._map.get(value);selectMap_1.set(value,label);}));_this._selectMap=selectMap_1;}};return _this}SelectBase.prototype.reloadOptionElements=function(){var _this=this;this._optionsReloaded=true;this._setOptionsFromElm();setTimeout((function(){_this.forceUpdate();}));};SelectBase.prototype.setVal=function(value){this._proxy("setVal",[value]);};SelectBase.prototype.getVal=function(){return isEmpty(this._parsedValue)?this._parsedValue:this._proxy("getVal")};SelectBase.prototype.setTempVal=function(value){this._proxy("setTempVal",[value]);};SelectBase.prototype.getTempVal=function(){return this._proxy("getTempVal")};SelectBase.prototype.open=function(){this._proxy("open");};SelectBase.prototype.close=function(){this._proxy("close");};SelectBase.prototype._render=function(s){var prevS=this._prevS;var spaceAround=this._touchUi&&(!s.selectMultiple||(s.baseTheme||s.theme)==="ios");var selectOnScroll=this._touchUi&&!s.selectMultiple;var elementChanged=s.element!==prevS.element||s.selectElement!==prevS.selectElement;var dataChanged=s.data!==prevS.data;var dataReloaded=dataChanged||this._optionsReloaded;var placeholder=s.placeholder;var checkEmptyOption=s.display!==prevS.display||placeholder!==prevS.placeholder||selectOnScroll!==this._selectOnScroll;var disabledChanged=dataReloaded||elementChanged||s.invalid!==prevS.invalid||this._selectOnScroll!==selectOnScroll;this._selectOnScroll=selectOnScroll;if(s.showGroupWheel!==prevS.showGroupWheel){this._groupChanged=true;}if(elementChanged||checkEmptyOption){this._isSelect=s.selectElement!==UNDEFINED;if(this._isSelect){this._setOptionsFromElm();}else if(!s.element){this._options=[];}}if((dataChanged||checkEmptyOption)&&s.data){this._createOptionList(s.data);}if(disabledChanged){this._disabled=createDisabledMap(this._options,s.invalid);this._disabledGroups=createDisabledGroupsMap(this._disabled,selectOnScroll?this._options:UNDEFINED);}if(disabledChanged||spaceAround!==this._spaceAround||this._groupChanged||s.filter!==prevS.filter||s.selectMultiple!==prevS.selectMultiple){this._createWheels(this._filterText,spaceAround);}if(dataReloaded||s.filter!==prevS.filter||s.touchUi!==prevS.touchUi||s.rows!==prevS.rows){var dataLength=s.filter?Infinity:this._wheels[0][s.showGroupWheel?1:0].data.length;var respRows=(this._respProps||{}).rows;var propRows=this.props.rows;var defRows=this._touchUi?s.rows:Math.min(respRows||propRows||7,dataLength);this._rows=propRows||defRows;}if(this._groupChanged||s.wheelWidth!==prevS.wheelWidth||s.filter!==prevS.filter){this._wheelWidth=s.wheelWidth||(s.filter?s.showGroupWheel?[150,250]:400:UNDEFINED);}this._spaceAround=spaceAround;this._optionsReloaded=false;};SelectBase.prototype._createOptionList=function(data){var s=this.s;var text=s.placeholder;var options=[];var map=new Map;var reMap=new Map;this._selectMap.forEach((function(label,value){map.set(value,label);}));var hasEmpty=false;var addOption=function(item,index){if(!item||item.value===UNDEFINED){item={text:item,value:item};}if(isEmpty(item.value)){hasEmpty=true;}if(s.showGroupWheel&&item.group===UNDEFINED){item.group=DEF_GROUP;}map.set(item.value,item.text);reMap.set(item.text,item.value);options.splice(index,0,item);};data.forEach(addOption);if(s.display==="inline"&&this._selectOnScroll&&text&&!hasEmpty){addOption({value:"",text:text},0);}this._map=map;this._reMap=reMap;this._options=options;};SelectBase.prototype._proxy=function(method,args){var inst=this._inst||this._scroller;if(inst){return inst[method].apply(inst,args)}};SelectBase.prototype._createWheels=function(filterText,spaceAround){var _this=this;var s=this.s;var isMultiple=s.selectMultiple;var options=s.filter&&filterText?filterOptions(this._options,filterText):this._options;var data=[];var groupData=[];var groupMap=new Map;options.forEach((function(option){var group=option.group;var groupName=!group||group===DEF_GROUP?"":group;var groupOptions=groupMap.get(groupName);var item={display:option.text,value:option.value,data:option};if(groupOptions){groupOptions.push(item);}else {groupMap.set(groupName,[item]);}}));var ungroupedOptions=groupMap.get("");if(ungroupedOptions){data.push.apply(data,ungroupedOptions);if(this._selectOnScroll){groupData.push({display:"",value:DEF_GROUP});}}groupMap.forEach((function(groupOptions,key){if(key){data.push({display:key,isGroup:true,value:key});data.push.apply(data,groupOptions);groupData.push({display:key,value:key});_this._disabled.set(key,true);}}));var optWheel={checkmark:true,circular:false,closeOnTap:!isMultiple,data:data,multiple:isMultiple,spaceAround:spaceAround};var groupWheel={checkmark:false,circular:false,cssClass:"mbsc-select-group-wheel"+(isMultiple?" mbsc-select-group-wheel-multi":""),data:groupData,multiple:false,spaceAround:spaceAround};this._noResults=s.filter&&!options.length;this._wheels=s.showGroupWheel?[[groupWheel,optWheel]]:[[optWheel]];};SelectBase.prototype._setOptionsFromElm=function(){var select=this.s.selectElement;var options=select.options;var data=[];var hasEmpty=false;var hasSelected=false;for(var i=0;i<options.length;i++){var opt=options[i];var parent_1=opt.parentElement;var group=parent_1.nodeName.toLowerCase()==="optgroup"?parent_1.label:UNDEFINED;if(opt.value!==""){data.push({disabled:opt.disabled,group:group,text:opt.text,value:opt.value});}else {hasEmpty=true;}if(opt.defaultSelected){hasSelected=true;}}if(!hasEmpty){select.insertBefore(new Option(""),select.childNodes[0]||null);if(!hasSelected){select.value="";}}this._createOptionList(data);};SelectBase.prototype._filter=function(filterText){var ret=this._hook("onFilter",{filterText:filterText});if(ret!==false){this._filterText=filterText;this._createWheels(filterText,this._spaceAround);}this.forceUpdate();};SelectBase.defaults=__assign({},PickerBase.defaults,{dropdown:true,filterEmptyText:"No results",filterPlaceholderText:"Search",rows:5});SelectBase._name="Select";SelectBase.decorators=[{type:core.Directive,args:[{selector:"[mbsc-sel-b]"}]}];return SelectBase}(BaseComponent);var MbscSelectOptionDirective=/*#__PURE__*/function(){function MbscSelectOptionDirective(){}MbscSelectOptionDirective.decorators=[{type:core.Directive,args:[{selector:"[mbsc-select-option]"}]}];return MbscSelectOptionDirective}();var MbscSelectOptionComponent=/*#__PURE__*/function(){function MbscSelectOptionComponent(host){this.host=host;}MbscSelectOptionComponent.prototype.ngAfterViewInit=function(){this.text=this.host.nativeElement.textContent||"";};MbscSelectOptionComponent.decorators=[{type:core.Component,args:[{selector:"mbsc-select-option",template:"<ng-content></ng-content>"}]}];MbscSelectOptionComponent.ctorParameters=function(){return [{type:core.ElementRef}]};MbscSelectOptionComponent.propDecorators={value:[{type:core.Input}],group:[{type:core.Input}],disabled:[{type:core.Input}]};return MbscSelectOptionComponent}();var MbscSelectBase=/*#__PURE__*/function(_super){__extends(MbscSelectBase,_super);function MbscSelectBase(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.onCancel=new core.EventEmitter;_this.onChange=new core.EventEmitter;_this.onClose=new core.EventEmitter;_this.onFilter=new core.EventEmitter;_this.onOpen=new core.EventEmitter;_this.onTempChange=new core.EventEmitter;return _this}Object.defineProperty(MbscSelectBase.prototype,"vInput",{set:function(input){this._filterInput=input&&input.nativeElement;},enumerable:true,configurable:true});MbscSelectBase.prototype._onValueChange=function(value){this.setState({value:value});};MbscSelectBase.decorators=[{type:core.Directive,args:[{selector:"[mbsc-sel-b]"}]}];MbscSelectBase.propDecorators={vInput:[{type:core.ViewChild,args:["input",{static:false}]}],clearIcon:[{type:core.Input}],data:[{type:core.Input}],defaultSelection:[{type:core.Input}],filter:[{type:core.Input}],showGroupWheel:[{type:core.Input}],circular:[{type:core.Input}],displayStyle:[{type:core.Input}],formatValue:[{type:core.Input}],getValue:[{type:core.Input}],maxWheelWidth:[{type:core.Input}],minWheelWidth:[{type:core.Input}],selectMultiple:[{type:core.Input}],itemHeight:[{type:core.Input}],itemTemplate:[{type:core.Input}],parseValue:[{type:core.Input}],rows:[{type:core.Input}],rtl:[{type:core.Input}],showOnClick:[{type:core.Input}],showOnFocus:[{type:core.Input}],valueEquality:[{type:core.Input}],wheels:[{type:core.Input}],wheelWidth:[{type:core.Input}],disabled:[{type:core.Input}],dropdown:[{type:core.Input}],endIcon:[{type:core.Input}],endIconSrc:[{type:core.Input}],endIconSvg:[{type:core.Input}],error:[{type:core.Input}],errorMessage:[{type:core.Input}],inputStyle:[{type:core.Input}],label:[{type:core.Input}],labelStyle:[{type:core.Input}],name:[{type:core.Input}],placeholder:[{type:core.Input}],startIcon:[{type:core.Input}],startIconSrc:[{type:core.Input}],startIconSvg:[{type:core.Input}],tagInput:[{type:core.Input}],anchor:[{type:core.Input}],animation:[{type:core.Input}],buttons:[{type:core.Input}],cancelText:[{type:core.Input}],clearText:[{type:core.Input}],closeOnEsc:[{type:core.Input}],closeOnOverlayClick:[{type:core.Input}],closeText:[{type:core.Input}],context:[{type:core.Input}],display:[{type:core.Input}],focusOnClose:[{type:core.Input}],focusTrap:[{type:core.Input}],headerText:[{type:core.Input}],height:[{type:core.Input}],setText:[{type:core.Input}],showArrow:[{type:core.Input}],showInput:[{type:core.Input}],showOverlay:[{type:core.Input}],width:[{type:core.Input}],filterEmptyText:[{type:core.Input}],filterPlaceholderText:[{type:core.Input}],onCancel:[{type:core.Output}],onChange:[{type:core.Output}],onClose:[{type:core.Output}],onFilter:[{type:core.Output}],onOpen:[{type:core.Output}],onTempChange:[{type:core.Output}]};MbscSelectBase=__decorate([FormControl],MbscSelectBase);return MbscSelectBase}(SelectBase);var MbscSelect=/*#__PURE__*/function(_super){__extends(MbscSelect,_super);function MbscSelect(){return _super!==null&&_super.apply(this,arguments)||this}Object.defineProperty(MbscSelect.prototype,"vScroller",{set:function(scroller){this._scroller=scroller;},enumerable:true,configurable:true});MbscSelect.prototype.updateOptionlist=function(){var _this=this;var data=this.optionComponents.map((function(ch){return {disabled:ch.disabled,group:ch.group,text:ch.text,value:ch.value}}));this._createOptionList(data);this._optionsReloaded=true;setTimeout((function(){_this.forceUpdate();}));};MbscSelect.prototype._mounted=function(){var _this=this;_super.prototype._mounted.call(this);if(this.optionComponents.length){this.updateOptionlist();}this.optionComponents.changes.subscribe((function(children){setTimeout((function(){_this.updateOptionlist();}));}));};MbscSelect.prototype.valueSet=function(event){this.value=event.value;this._saveSelected(event.value);this._hook("onChange",event);};MbscSelect.decorators=[{type:core.Component,args:[{changeDetection:core.ChangeDetectionStrategy.OnPush,encapsulation:core.ViewEncapsulation.None,selector:"mbsc-select",template:'\n    <input [hidden]="s.element || !s.selectElement || s.display === \'inline\'" #defaultInput type="text" />\n    <ng-template #filterInputTemplate let-inst="data">\n      <div [class]="\'mbsc-select-filter-cont\' + inst._theme + inst._rtl">\n        <mbsc-input #input\n          autocomplete="off"\n          class="mbsc-select-filter"\n          (input)="inst._onFilterChange($event)"\n          inputClass="mbsc-select-filter-input"\n          inputStyle="box"\n          [placeholder]="inst.s.filterPlaceholderText"\n          [rtl]="inst.s.rtl"\n          [theme]="inst.s.theme"\n        >\n        </mbsc-input>\n        <mbsc-icon *ngIf="inst._filterText"\n          [class]="\'mbsc-select-filter-clear\' + inst._rtl"\n          (click)="inst._onFilterClear()"\n          [svg]="inst.s.clearIcon"\n          [theme]="inst.s.theme"></mbsc-icon>\n      </div>\n    </ng-template>\n    <ng-template #filterEmptyTemplate let-inst="data">\n      <div *ngIf="inst._noResults" [class]="\'mbsc-select-empty-text\' + inst._theme">{{inst.s.filterEmptyText}}</div>\n    </ng-template>\n    <mbsc-scroller #scroller\n      [class]="(s.cssClass || s.class || \'\') +\n       (_noResults ? \' mbsc-select-empty\': \'\') +\n       \' mbsc-select-scroller mbsc-select-scroller-\' + s.display"\n      [disabled]="s.disabled"\n      [dropdown]="s.dropdown"\n      [endIcon]="s.endIcon"\n      [endIconSrc]="s.endIconSrc"\n      [endIconSvg]="s.endIconSvg"\n      [error]="s.error"\n      [errorMessage]="s.errorMessage"\n      [inputStyle]="s.inputStyle"\n      [label]="s.label"\n      [labelStyle]="s.labelStyle"\n      [placeholder]="s.placeholder"\n      [name]="s.name"\n      [startIcon]="s.startIcon"\n      [startIconSrc]="s.startIconSrc"\n      [startIconSvg]="s.startIconSvg"\n\n      [activeElm]="s.filter ? \'.mbsc-select-filter-input\' : undefined"\n      [anchor]="s.anchor"\n      [animation]="s.animation"\n      [buttons]="s.buttons"\n      [cancelText]="s.cancelText"\n      [clearText]="s.clearText"\n      [closeOnEsc]="s.closeOnEsc"\n      [closeOnOverlayClick]="s.closeOnOverlayClick"\n      [closeText]="s.closeText"\n      [context]="s.context"\n      [display]="s.display"\n      [focusOnClose]="s.focusOnClose"\n      [focusTrap]="s.focusTrap"\n      [headerText]="s.headerText"\n      [height]="s.height"\n      [setText]="s.setText"\n      [showArrow]="s.showArrow"\n      [showInput]="s.showInput"\n      [showOverlay]="s.showOverlay"\n      [width]="s.width"\n\n      [circular]="s.circular"\n      [data]="s.data"\n      [displayStyle]="s.displayStyle"\n      [filter]="s.filter"\n      [formatValue]="_format"\n      [getValue]="_get"\n      [itemTemplate]="s.itemTemplate"\n      [itemHeight]="s.itemHeight"\n      [maxWheelWidth]="s.maxWheelWidth"\n      [minWheelWidth]="s.minWheelWidth"\n      [onWheelMove]="_onWheelMove"\n      [value]="value"\n      [parseValue]="_parse"\n      [rows]="_rows"\n      [rtl]="s.rtl"\n      [selectMultiple]="s.selectMultiple"\n      [shouldValidate]="_shouldValidate"\n      [element]="s.element || (s.selectElement ? defaultInput : undefined)"\n      [writeValue]="_writeValue"\n\n      [selectOnScroll]="_selectOnScroll"\n      [showOnClick]="s.showOnClick"\n      [showOnFocus]="s.showOnFocus"\n      [theme]="s.theme"\n      [themeVariant]="s.themeVariant"\n      [touchUi]="_touchUi"\n\n      [validate]="_validate"\n      [valueEquality]="_valueEquals"\n      [valueMap]="_map"\n      [wheels]="_wheels"\n      [wheelWidth]="_wheelWidth"\n\n      [inContentTemplate]="filterEmptyTemplate"\n      [preContentTemplate]="s.filter && filterInputTemplate"\n      [preContentData]="this"\n\n      (onCancel)="_hook(\'onCancel\', $event)"\n      (onChange)="valueSet($event)"\n      (onClose)="_onClose($event)"\n      (onOpen)="_hook(\'onOpen\', $event)"\n      (onTempChange)="_hook(\'onTempChange\', $event)"\n      (onResize)="_onResize($event)"\n    ></mbsc-scroller>\n  '}]}];MbscSelect.propDecorators={vScroller:[{type:core.ViewChild,args:["scroller",{static:false}]}],optionComponents:[{type:core.ContentChildren,args:[MbscSelectOptionComponent]}]};MbscSelect=__decorate([FormControl],MbscSelect);return MbscSelect}(MbscSelectBase);var MbscSelectDirective=/*#__PURE__*/function(_super){__extends(MbscSelectDirective,_super);function MbscSelectDirective(){return _super!==null&&_super.apply(this,arguments)||this}MbscSelectDirective.prototype._ctor=function(){this._cfr=this._injector.get(core.ComponentFactoryResolver);};MbscSelectDirective.prototype._init=function(){var _this=this;var componentFactory=this._cfr.resolveComponentFactory(MbscSelect);this._ref=this._vcf.createComponent(componentFactory);this._inst=this._ref.instance;var inst=this._inst;var _loop_1=function(prop){if(prop!=="onInit"&&prop!=="onDestroy"&&inst[prop]instanceof core.EventEmitter){inst[prop].subscribe((function(args){if(prop==="onClose"){_this._onFormTouch();}if(prop==="onChange"){_this.value=inst.value;}_this[prop].emit(args);}));}};for(var prop in inst){_loop_1(prop);}_super.prototype._init.call(this);};MbscSelectDirective.prototype._destroy=function(){_super.prototype._destroy.call(this);if(this._ref){this._ref.destroy();}};MbscSelectDirective.prototype._render=function(s){_super.prototype._render.call(this,s);var inst=this._ref.instance;inst.value=this.value;inst.props=s;inst.props.rows=this.props.rows;var el=this._elr.nativeElement;if(el.nodeName.toLowerCase()==="select"){el.style.display="none";inst.props.selectElement=el;if(s.inputElement){inst.props.element=s.inputElement;}}else {inst.props.element=el;}inst.forceUpdate();};MbscSelectDirective.prototype._mounted=function(){var _this=this;_super.prototype._mounted.call(this);if(this.optionElements&&this.optionElements.changes){this.optionElements.changes.subscribe((function(){var inst=_this._ref.instance;inst.reloadOptionElements();}));}};MbscSelectDirective.decorators=[{type:core.Directive,args:[{exportAs:"mobiscroll",selector:"[mbsc-select]"}]}];MbscSelectDirective.propDecorators={optionElements:[{type:core.ContentChildren,args:[MbscSelectOptionDirective,{read:core.ElementRef}]}],options:[{type:core.Input,args:["mbscOptions"]}],inputElement:[{type:core.Input}]};return MbscSelectDirective}(MbscSelectBase);var MbscSelectModule=/*#__PURE__*/function(){function MbscSelectModule(){}MbscSelectModule.decorators=[{type:core.NgModule,args:[{declarations:[SelectBase,MbscSelect,MbscSelectBase,MbscSelectDirective,MbscSelectOptionDirective,MbscSelectOptionComponent],entryComponents:[MbscSelect],exports:[MbscSelect,MbscSelectDirective,MbscSelectOptionDirective,MbscSelectOptionComponent],imports:[common.CommonModule,forms.FormsModule,MbscScrollerModule,MbscIconModule,MbscInputModule]}]}];return MbscSelectModule}();var dragObservable=new Observable;function subscribeExternalDrag(handler){return dragObservable.subscribe(handler)}function unsubscribeExternalDrag(key){dragObservable.unsubscribe(key);}var DraggableBase=/*#__PURE__*/function(_super){__extends(DraggableBase,_super);function DraggableBase(){return _super!==null&&_super.apply(this,arguments)||this}DraggableBase.prototype._render=function(s){if(s.dragData!==this._prevS.dragData){this._dragData=isString(s.dragData)?JSON.parse(s.dragData.toString()):s.dragData;}};DraggableBase.prototype._updated=function(){var _this=this;var el=this.s.element||this._el;if(this._unlisten===UNDEFINED&&el){el.classList.add("mbsc-draggable");var clone_1;var isDrag_1;var touchTimer_1;var body_1=getDocument(el).body;var moveClone_1=function(ev){clone_1.style.left=ev.endX+"px";clone_1.style.top=ev.endY+"px";};this._unlisten=gestureListener(el,{onEnd:function(ev){if(isDrag_1){var args=__assign({},ev);args.domEvent.preventDefault();args.action="externalDrop";args.event=_this._dragData;args.create=true;args.eventName="onDragEnd";dragObservable.next(args);isDrag_1=false;body_1.removeChild(clone_1);}clearTimeout(touchTimer_1);},onMove:function(ev){var args=__assign({},ev);args.event=_this._dragData;args.clone=clone_1;args.create=true;args.external=true;if(isDrag_1||!args.isTouch){args.domEvent.preventDefault();}if(isDrag_1){moveClone_1(ev);args.eventName="onDragMove";dragObservable.next(args);}else if(Math.abs(args.deltaX)>7||Math.abs(args.deltaY)>7){clearTimeout(touchTimer_1);if(!args.isTouch){moveClone_1(ev);body_1.appendChild(clone_1);args.eventName="onDragStart";dragObservable.next(args);isDrag_1=true;}}},onStart:function(ev){var args=__assign({},ev);if(!isDrag_1){clone_1=el.cloneNode(true);clone_1.classList.add("mbsc-drag-clone");args.event=_this._dragData;args.create=true;args.external=true;if(args.isTouch){touchTimer_1=setTimeout((function(){moveClone_1(ev);body_1.appendChild(clone_1);args.clone=clone_1;args.eventName="onDragModeOn";dragObservable.next(args);args.eventName="onDragStart";dragObservable.next(args);isDrag_1=true;}),350);}}}});}};DraggableBase.prototype._destroy=function(){if(this._unlisten){this._unlisten();}};DraggableBase.decorators=[{type:core.Directive,args:[{selector:"[mbsc-drag]"}]}];return DraggableBase}(BaseComponent);var uid=1;function getDataInRange(data,s,firstDay,lastDay,start,end){var startDate=firstDay;var endDate=lastDay;var map=new Map;var dataInRange=[];if(start){startDate=makeDate(start,s);}if(end){endDate=makeDate(end,s);}else if(start){endDate=addDays(startDate,1);}var events=getEventMap(data,startDate,endDate,s);for(var date in events){if(date){for(var _i=0,_a=events[date];_i<_a.length;_i++){var event_1=_a[_i];var eventStart=makeDate(event_1.start,s);var eventEnd=makeDate(event_1.end,s)||eventStart;if(!event_1.start){dataInRange.push(event_1);}else if(!map.has(event_1)&&checkDateRangeOverlap(startDate,endDate,eventStart,eventEnd)){var eventCopy=__assign({},event_1);if(s.dataTimezone||s.displayTimezone){eventCopy.start=eventStart.toISOString();eventCopy.end=eventEnd.toISOString();}map.set(event_1,true);dataInRange.push(eventCopy);}}}}return dataInRange}function getEventId(){return "mbsc_"+uid++}function getEventData(s,event,eventDay,colorEvent,timeFormat,allDayText,toText,resource,isList,isTimeline,skipLabels){var color=event.color||resource&&resource.color;var st=event.start||event.date;var origStart=event.recurring?event.original.start:event.start;var allDay=event.allDay||!origStart;var start=st?makeDate(st,allDay?UNDEFINED:s):null;var end=event.end?makeDate(event.end,allDay?UNDEFINED:s):null;var endDate=getEndDate(s,event.allDay,start,end,isList);var isMultiDay=start&&endDate&&!isSameDay(start,endDate);var isFirstDay=isMultiDay?isSameDay(start,eventDay):true;var isLastDay=isMultiDay?isSameDay(endDate,eventDay):true;var fillsAllDay=allDay||!isTimeline&&isMultiDay&&!isFirstDay&&!isLastDay;var startTime=!skipLabels&&start&&!allDay?formatDate(timeFormat,start,s):"";var endTime=!skipLabels&&end&&!allDay?formatDate(timeFormat,end,s):"";var eventStart=!skipLabels&&!fillsAllDay&&(isFirstDay||isTimeline)?startTime:"";var eventEnd=!skipLabels&&!fillsAllDay&&(isLastDay||isTimeline)?endTime:"";var html=event.title||event.text||"";var title=html;var tooltip=title+(fillsAllDay?"":", "+eventStart+" - "+eventEnd);var format="DDDD, MMMM D, YYYY";var startStr=!skipLabels&&start?", "+s.fromText+": "+formatDate(format,start,s)+(allDay?"":", "+startTime):"";var endStr=!skipLabels&&end?", "+s.toText+": "+formatDate(format,end,s)+(allDay?"":", "+endTime):"";var resourceStr=resource&&resource.name?", "+resource.name:"";return {allDay:allDay,allDayText:fillsAllDay?allDayText:"",ariaLabel:title+resourceStr+startStr+endStr,color:color,currentResource:resource,date:+eventDay,end:eventEnd,endDate:end?end:start?new Date(start):null,html:html,id:event.id,isMultiDay:isMultiDay,lastDay:!fillsAllDay&&isMultiDay&&isLastDay?toText:"",original:event,position:{},resource:event.resource,slot:event.slot,start:eventStart,startDate:start,style:{background:color,color:colorEvent&&color?getTextColor(color):""},title:title,tooltip:s.showEventTooltip?event.tooltip||tooltip:UNDEFINED,uid:event.occurrenceId?event.occurrenceId:event.id}}function prepareEvents(events){var data=[];if(events){for(var _i=0,events_1=events;_i<events_1.length;_i++){var event_2=events_1[_i];if(event_2.id===UNDEFINED){event_2.id=getEventId();}data.push(event_2);}}return data}function checkInvalidCollision(s,invalids,valids,start,end,min,max,invalidateEvent,exclusiveEndDates){if(invalidateEvent==="start-end"){var invalidStart=isInvalid(s,start,invalids,valids,min,max);var invalidEnd=isInvalid(s,end,invalids,valids,min,max);if(invalidStart){return invalidStart}if(invalidEnd){return invalidEnd}}else {var until=exclusiveEndDates?end:getDateOnly(addDays(end,1));for(var d=getDateOnly(start);d<until;d.setDate(d.getDate()+1)){var invalid=isInvalid(s,d,invalids,valids,min,max);if(invalid){return invalid}}}return false}var EventcalendarBase=/*#__PURE__*/function(_super){__extends(EventcalendarBase,_super);function EventcalendarBase(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.state={activeDate:UNDEFINED,eventList:[],popoverList:[],selectedDate:UNDEFINED};_this.print=noop;_this._pageLoad=0;_this._selectedDates={};_this._shouldScrollSchedule=0;_this._update=0;_this._onScroll=throttle((function(){if(!_this._isListScrolling&&!_this._viewChanged){for(var timestamp in _this._listDays){if(_this._listDays[timestamp]){var day=_this._listDays[timestamp];var bottom=day.offsetTop+day.offsetHeight-_this._list.scrollTop;if(bottom>0){if(+timestamp!==_this._selected){_this._shouldSkipScroll=true;_this.setState({selectedDate:+timestamp});_this._selectedChange(new Date(+timestamp));}break}}}}}));_this._isListScrolling=0;_this._remote=0;_this._onWeekDayClick=function(d){if(d!==_this._selected){_this._skipScheduleScroll=true;_this.setState({selectedDate:d});_this._selectedChange(new Date(d));}};_this._onDayClick=function(args){var date=args.date;var d=+date;var key=getDateStr(date);var state=_this.state;var events=sortEvents(_this._eventMap[key],_this.s.eventOrder);var showEventPopover=_this._showEventPopover;var computed=showEventPopover===UNDEFINED?!_this._showEventLabels&&!_this._showEventList&&!_this._showSchedule:showEventPopover;var showMore=showEventPopover!==false&&_this._moreLabelClicked;var showPopover=(computed||showMore)&&(!state.showPopover||state.showPopover&&d!==state.popoverDate)&&events&&events.length>0;args.events=events;if(!_this._isEventClick){_this._resetSelection();}_this._hook("onCellClick",args);_this._moreLabelClicked=false;if(!args.disabled){_this.setState({selectedDate:d});if(d!==_this._selected){_this._skipScheduleScroll=true;_this._selectedChange(date);}}if(showPopover){setTimeout((function(){_this._anchor=args.target;_this._popoverClass=_this._popoverClass.replace(" mbsc-popover-hidden","");_this.setState({popoverDate:d,popoverList:events.map((function(event){return _this._getEventData(event,date)})),showPopover:true});}));}_this._isEventClick=false;};_this._onActiveChange=function(args){var d=_this._getValidDay(args.date,args.dir);var newState={activeDate:d};_this._active=d;_this._update++;_this._skipScheduleScroll=args.pageChange&&!args.nav;if(args.pageChange||args.today){newState.selectedDate=d;_this._selectedChange(new Date(d));}_this.setState(newState);};_this._onGestureStart=function(args){_this._hidePopover();};_this._onDayDoubleClick=function(args){_this._dayClick("onCellDoubleClick",args);};_this._onDayRightClick=function(args){_this._dayClick("onCellRightClick",args);};_this._onCellHoverIn=function(args){args.events=_this._eventMap[getDateStr(args.date)];_this._hook("onCellHoverIn",args);};_this._onCellHoverOut=function(args){args.events=_this._eventMap[getDateStr(args.date)];_this._hook("onCellHoverOut",args);};_this._onEventHoverIn=function(args){_this._hoverTimer=setTimeout((function(){_this._isHover=true;_this._eventClick("onEventHoverIn",args);}),150);};_this._onEventHoverOut=function(args){clearTimeout(_this._hoverTimer);if(_this._isHover){_this._isHover=false;_this._eventClick("onEventHoverOut",args);}};_this._onEventClick=function(args){var s=_this.s;_this._handleMultipleSelect(args);var close=_this._eventClick("onEventClick",args);if(close!==false&&!(s.selectMultipleEvents||s.eventDelete||(s.dragToCreate||s.clickToCreate)&&!s.eventDelete)){_this._hidePopover();}};_this._onEventDoubleClick=function(args){_this._eventClick("onEventDoubleClick",args);};_this._onEventRightClick=function(args){_this._eventClick("onEventRightClick",args);};_this._onEventDragEnd=function(args){_this._hook("onEventDragEnd",args);};_this._onEventDragStart=function(args){_this._hook("onEventDragStart",args);};_this._onLabelHoverIn=function(args){_this._hoverTimer=setTimeout((function(){_this._isHover=true;_this._labelClick("onEventHoverIn",args);}),150);};_this._onLabelHoverOut=function(args){clearTimeout(_this._hoverTimer);if(_this._isHover){_this._isHover=false;_this._labelClick("onEventHoverOut",args);}};_this._onLabelClick=function(args){_this._handleMultipleSelect(args);_this._hook("onLabelClick",args);_this._labelClick("onEventClick",args);_this._isEventClick=true;if(!args.label){_this._moreLabelClicked=true;}};_this._onLabelDoubleClick=function(args){_this._labelClick("onEventDoubleClick",args);};_this._onLabelRightClick=function(args){_this._labelClick("onEventRightClick",args);};_this._onCellClick=function(args){_this._resetSelection();_this._cellClick("onCellClick",args);};_this._onCellDoubleClick=function(args){_this._cellClick("onCellDoubleClick",args);};_this._onCellRightClick=function(args){_this._cellClick("onCellRightClick",args);};_this._onPageChange=function(args){setTimeout((function(){_this._hidePopover();}));_this._isPageChange=true;_this._hook("onPageChange",args);};_this._onPageLoading=function(args){var s=_this.s;var eventMap=getEventMap(_this._events,args.viewStart,args.viewEnd,s);_this._colorsMap=getEventMap(s.colors,args.viewStart,args.viewEnd,s);_this._invalidsMap=getEventMap(s.invalid,args.viewStart,args.viewEnd,s,true);_this._validsMap=getEventMap(s.valid,args.viewStart,args.viewEnd,s,true);_this._eventMap=eventMap;_this._firstDay=getFirstDayOfWeek(args.firstDay,s,_this._firstWeekDay);_this._lastDay=args.lastDay;if(!s.labels&&(_this._showEventLabels||_this._showEventCount)){args.inst._labelsMap=eventMap;}else if(!s.marked){args.inst._marksMap=eventMap;}if(args.viewChanged){_this._hook("onPageLoading",args);}};_this._onPageLoaded=function(args){_this._shouldAnimateScroll=_this._isPageChange;_this._isPageChange=false;var setEvents=_this._showEventList||_this._showSchedule||_this._showTimeline;var viewType=_this._showSchedule?_this._scheduleType:_this._showTimeline?_this._timelineType:_this._eventListType;if(setEvents&&!(_this._showCalendar&&viewType==="day")){var s=_this.s;var month=args.month;var isMonthList=_this._showEventList&&month&&viewType==="month";var firstDay=isMonthList?month:args.firstDay;var lastDay=isMonthList?s.getDate(s.getYear(month),s.getMonth(month)+_this._eventListSize,1):args.lastDay;_this._setEventList(firstDay,lastDay);}_this._hook("onPageLoaded",args);};_this._onPopoverClose=function(){_this._hidePopover();};_this._onResize=function(ev){var isListScrollable;if(_this._showEventList&&isBrowser){var cal=ev.target;var height=cal.offsetHeight;var calTop=cal.getBoundingClientRect().top;var listTop=_this._list.getBoundingClientRect().top;isListScrollable=height-listTop+calTop>170;}_this.setState({height:ev.height,isListScrollable:isListScrollable,width:ev.width});};_this._onSelectedEventsChange=function(events){_this._emit("selectedEventsChange",events);_this._hook("onSelectedEventsChange",{events:events});};_this._getDragDates=function(start,end,event){var draggedDates={};var firstWeekDay=_this._firstWeekDay;var endDate=getEndDate(_this.s,event.allDay,start,end,true);var until=getDateOnly(addDays(endDate,1));for(var d=getDateOnly(start);d<until;d.setDate(d.getDate()+1)){var weekDay=d.getDay();var offset=firstWeekDay-weekDay>0?7:0;if(isSameDay(start,d)||weekDay===firstWeekDay){draggedDates[getDateStr(d)]={event:event,width:Math.min(getDayDiff(d,endDate)+1,7+firstWeekDay-weekDay-offset)*100};}else {draggedDates[getDateStr(d)]={};}}return draggedDates};_this._onLabelUpdateModeOn=function(args){var event=args.create?_this._tempEvent:args.data;if(event){var start=makeDate(event.start);var end=makeDate(event.end||start);_this.setState({isTouchDrag:true,labelDragData:{draggedEvent:event,originDates:args.external?UNDEFINED:_this._getDragDates(start,end,event)}});}};_this._onLabelUpdateModeOff=function(args){var event=args.create?_this._tempEvent:args.data;_this._hook("onEventDragEnd",{domEvent:args.domEvent,event:event,source:"calendar"});_this.setState({isTouchDrag:false,labelDragData:UNDEFINED});};_this._onLabelUpdateStart=function(args){var s=_this.s;var el=_this._el;var weekNumWidth=_this._showWeekNumbers?el.querySelector(".mbsc-calendar-week-nr").getBoundingClientRect().width:0;var slide=el.querySelectorAll(".mbsc-calendar-slide")[_this._calendarLabelList==="all"||isNumeric(_this._calendarLabelList)?0:1];var slideRect=slide.getBoundingClientRect();var weeksCont=el.querySelector(".mbsc-calendar-week-days");var rows=slide.querySelectorAll(".mbsc-calendar-row");var isClick=/click/.test(args.domEvent.type);_this._areaTop=0;if(weeksCont){var weeksRect=weeksCont.getBoundingClientRect();_this._areaTop=weeksRect.top+weeksRect.height;}_this._areaLeft=slideRect.left+(s.rtl?0:weekNumWidth);_this._areaBottom=slideRect.top+slideRect.height;_this._areaRight=_this._areaLeft+slideRect.width-(s.rtl?weekNumWidth:0);_this._calCellWidth=(_this._areaRight-_this._areaLeft)/7;var newWeek=0;_this._rowTops=[];rows.forEach((function(r,i){var rowTop=r.getBoundingClientRect().top-_this._areaTop;_this._rowTops.push(rowTop);if(args.endY-_this._areaTop>rowTop){newWeek=i;}}));if(args.create){var newDay=floor((s.rtl?_this._areaRight-args.endX:args.endX-_this._areaLeft)/_this._calCellWidth);var newStartDay=addDays(_this._firstDay,newWeek*7+newDay);var newStart=new Date(newStartDay.getFullYear(),newStartDay.getMonth(),newStartDay.getDate());var nextDay=addDays(newStart,1);var newEnd=s.exclusiveEndDates?nextDay:new Date(+nextDay-1);var eventData=s.extendDefaultEvent?s.extendDefaultEvent({start:newStart}):UNDEFINED;_this._tempEvent=__assign({allDay:true,end:newEnd,id:getEventId(),start:newStart,title:s.newEventText},args.event,eventData);}if(!isClick){_this._hook("onEventDragStart",{domEvent:args.domEvent,event:args.create?_this._tempEvent:args.data,source:"calendar"});}};_this._onLabelUpdateMove=function(args){var s=_this.s;var event=args.create?_this._tempEvent:args.data;var tzOpt=event.allDay?UNDEFINED:s;if(args.endY>_this._areaTop&&args.endY<_this._areaBottom&&args.endX>_this._areaLeft&&args.endX<_this._areaRight){var labelDragData=_this.state.labelDragData;var newDay=floor((s.rtl?_this._areaRight-args.endX:args.endX-_this._areaLeft)/_this._calCellWidth);var oldDay=floor((s.rtl?_this._areaRight-args.startX:args.startX-_this._areaLeft)/_this._calCellWidth);var newWeek_1=0;var oldWeek_1=0;_this._rowTops.forEach((function(rowTop,i){if(args.startY-_this._areaTop>rowTop){oldWeek_1=i;}if(args.endY-_this._areaTop>rowTop){newWeek_1=i;}}));var dayDelta=(newWeek_1-oldWeek_1)*7+(newDay-oldDay);if(newDay!==_this._tempDay||newWeek_1!==_this._tempWeek){var start=makeDate(event.start,tzOpt);var end=makeDate(event.end,tzOpt)||start;var draggedEvent=__assign({},event);var newStart=start;var newEnd=end;if(args.external){var ms=getDayMilliseconds(start);var duration=+end-+start;newStart=createDate(s,+addDays(_this._firstDay,newWeek_1*7+newDay)+ms);newEnd=createDate(s,+newStart+duration);}else if(args.drag){newStart=addDays(start,dayDelta);newEnd=addDays(end,dayDelta);}else {var rtl=s.rtl?-1:1;var endResize=args.create?newWeek_1===oldWeek_1?args.deltaX*rtl>0:dayDelta>0:args.direction==="end";var days=getDayDiff(start,end);if(endResize){newEnd=addDays(end,Math.max(-days,dayDelta));}else {newStart=addDays(start,Math.min(days,dayDelta));}if(newEnd<newStart){if(endResize){newEnd=createDate(tzOpt,newStart);}else {newStart=createDate(tzOpt,newEnd);}}}draggedEvent.start=newStart;draggedEvent.end=newEnd;if(!/mbsc-popover-hidden/.test(_this._popoverClass)){_this._popoverClass=_this._popoverClass+" mbsc-popover-hidden";}_this.setState({labelDragData:{draggedDates:_this._getDragDates(newStart,newEnd,draggedEvent),draggedEvent:draggedEvent,originDates:labelDragData&&labelDragData.originDates}});_this._tempDay=newDay;_this._tempWeek=newWeek_1;}}};_this._onLabelUpdateEnd=function(args){var state=_this.state;var isCreating=args.create;var dragData=state.labelDragData||{};var event=isCreating?_this._tempEvent:args.data;var draggedEvent=dragData.draggedEvent||event;var origStart=makeDate(event.start);var origEnd=makeDate(event.end);var newStart=makeDate(draggedEvent.start);var newEnd=makeDate(draggedEvent.end);var changed=isCreating||+origStart!==+newStart||+origEnd!==+newEnd;var draggedEventData={allDay:event.allDay,endDate:newEnd,original:event,startDate:newStart};var action=args.action||(dragData.draggedEvent?"drag":"click");var allowUpdate=changed?_this._onEventDragStop({action:action,collision:checkInvalidCollision(_this.s,_this._invalidsMap,_this._validsMap,newStart,newEnd,_this._minDate,_this._maxDate,_this.s.invalidateEvent,_this.s.exclusiveEndDates),create:isCreating,domEvent:args.domEvent,event:draggedEventData,source:"calendar"}):true;var keepDragMode=state.isTouchDrag&&(!isCreating||allowUpdate);if(!keepDragMode&&action!=="click"){_this._hook("onEventDragEnd",{domEvent:args.domEvent,event:event,source:"calendar"});}_this.setState({isTouchDrag:keepDragMode,labelDragData:keepDragMode?{draggedEvent:draggedEvent,originDates:allowUpdate?_this._getDragDates(newStart,newEnd,draggedEventData.original):dragData.originDates}:{}});if(args.drag){_this._hidePopover();}_this._tempWeek=-1;_this._tempDay=-1;};_this._onEventDragStop=function(args){var s=_this.s;var action=args.action;var resource=args.resource;var slot=args.slot;var invalidCollision=args.collision;var isCreating=args.create;var source=args.source;var draggedEvent=args.event;var event=draggedEvent.original;var originalEvent=event.recurring?event.original:event;var oldEvent=__assign({},originalEvent);var eventCopy=__assign({},originalEvent);var origStart=convertTimezone(event.start,s);var start=convertTimezone(draggedEvent.startDate,s);var end=convertTimezone(draggedEvent.endDate,s);var allDay=draggedEvent.allDay;var isRecurring=eventCopy.recurring;if(isRecurring){eventCopy.recurringException=getExceptionList(eventCopy.recurringException).concat([origStart]);}else {eventCopy.allDay=allDay;eventCopy.start=start;eventCopy.end=end;if(resource!==UNDEFINED){eventCopy.resource=resource;}if(slot!==UNDEFINED){eventCopy.slot=slot;}}var allowUpdate=false;var newEvent=isRecurring?__assign({},originalEvent):originalEvent;if(isCreating||isRecurring){if(isRecurring){delete newEvent.recurring;}if(isRecurring||newEvent.id===UNDEFINED){newEvent.id=getEventId();}if(resource!==UNDEFINED){newEvent.resource=resource;}if(slot!==UNDEFINED){newEvent.slot=slot;}newEvent.start=start;newEvent.end=end;newEvent.allDay=allDay;allowUpdate=_this._hook("onEventCreate",__assign({action:action,domEvent:args.domEvent,event:newEvent,source:source},isRecurring&&{originEvent:event}))!==false;if(invalidCollision!==false){allowUpdate=false;_this._hook("onEventCreateFailed",__assign({action:action,event:newEvent,invalid:invalidCollision,source:source},isRecurring&&{originEvent:event}));}}if(!isCreating||isRecurring){allowUpdate=_this._hook("onEventUpdate",__assign({domEvent:args.domEvent,event:eventCopy,oldEvent:oldEvent,source:source},isRecurring&&{newEvent:newEvent,oldEventOccurrence:event}))!==false;if(invalidCollision!==false){allowUpdate=false;_this._hook("onEventUpdateFailed",__assign({event:eventCopy,invalid:invalidCollision,oldEvent:oldEvent,source:source},isRecurring&&{newEvent:newEvent,oldEventOccurrence:event}));}}if(allowUpdate){if(isCreating||isRecurring){_this._events.push(newEvent);_this._triggerCreated={action:action,event:newEvent,source:source};}if(!isCreating||isRecurring){if(isRecurring){draggedEvent.id=newEvent.id;draggedEvent.original=newEvent;originalEvent.recurringException=eventCopy.recurringException;}else {originalEvent.start=start;originalEvent.end=end;originalEvent.allDay=allDay;if(resource!==UNDEFINED){originalEvent.resource=resource;}if(slot!==UNDEFINED){originalEvent.slot=slot;}}_this._triggerUpdated={event:originalEvent,oldEvent:oldEvent,source:source};}_this._refresh=true;if(source!=="calendar"){var firstDay=void 0;var lastDay=void 0;if(_this._showCalendar&&_this._scheduleType==="day"){firstDay=new Date(_this._selected);lastDay=getDateOnly(addDays(firstDay,1));}else {firstDay=_this._firstDay;lastDay=_this._lastDay;}_this._eventMap=getEventMap(_this._events,firstDay,lastDay,s);_this.forceUpdate();}}return allowUpdate};_this._onExternalDrag=function(args){if(_this.s.externalDrop&&_this._showCalendar){switch(args.eventName){case"onDragModeOff":_this._onLabelUpdateModeOff(args);break;case"onDragModeOn":_this._onLabelUpdateModeOn(args);break;case"onDragStart":_this._onLabelUpdateStart(args);break;case"onDragMove":var clone=args.clone;if(args.endY>_this._areaTop&&args.endY<_this._areaBottom&&args.endX>_this._areaLeft&&args.endX<_this._areaRight){clone.style.display="none";_this._onLabelUpdateMove(args);_this._onCalendar=true;}else if(_this._onCalendar){clone.style.display="table";_this.setState({labelDragData:{}});_this._tempWeek=-1;_this._tempDay=-1;_this._onCalendar=false;}break;case"onDragEnd":if(!(args.endY>_this._areaTop&&args.endY<_this._areaBottom&&args.endX>_this._areaLeft&&args.endX<_this._areaRight)){_this.setState({labelDragData:UNDEFINED});_this._hook("onEventDragEnd",{domEvent:args.domEvent,event:args.event,source:"calendar"});}else {_this._onLabelUpdateEnd(args);}break}}};_this._onEventDelete=function(args){var _a;var s=_this.s;if(s.eventDelete===UNDEFINED&&!s.dragToCreate&&!s.clickToCreate||s.eventDelete===false){return}var changed=false;var hasRecurring=false;var hasNonRecurring=false;var originalEvent;var oldEvent;var eventCopy;var event=args.event;var isMultiple=s.selectMultipleEvents;var selectedEventsMap=isMultiple?_this._selectedEventsMap:(_a={},_a[event.id]=event,_a);var selectedEvents=toArray(selectedEventsMap);var oldEvents=[];var recurringEvents=[];var updatedEvents=[];var updatedEventsMap={};var events=[];for(var _i=0,selectedEvents_1=selectedEvents;_i<selectedEvents_1.length;_i++){var selectedEvent=selectedEvents_1[_i];if(selectedEvent.recurring){originalEvent=selectedEvent.original;hasRecurring=true;var id=originalEvent.id;if(updatedEventsMap[id]){eventCopy=updatedEventsMap[id];}else {oldEvent=__assign({},originalEvent);eventCopy=__assign({},originalEvent);recurringEvents.push(originalEvent);oldEvents.push(oldEvent);updatedEvents.push(eventCopy);updatedEventsMap[id]=eventCopy;}var origStart=convertTimezone(selectedEvent.start,s);eventCopy.recurringException=getExceptionList(eventCopy.recurringException).concat([origStart]);}else {hasNonRecurring=true;event=selectedEvent;events.push(selectedEvent);}}if(hasRecurring){var allowUpdate=_this._hook("onEventUpdate",{domEvent:args.domEvent,event:eventCopy,events:isMultiple?updatedEvents:UNDEFINED,isDelete:true,oldEvent:isMultiple?UNDEFINED:oldEvent,oldEvents:isMultiple?oldEvents:UNDEFINED})!==false;if(allowUpdate){changed=true;for(var _b=0,recurringEvents_1=recurringEvents;_b<recurringEvents_1.length;_b++){var recurringEvent=recurringEvents_1[_b];var updatedEvent=updatedEventsMap[recurringEvent.id];recurringEvent.recurringException=updatedEvent.recurringException;}_this._triggerUpdated={event:originalEvent,events:isMultiple?recurringEvents:UNDEFINED,oldEvent:isMultiple?UNDEFINED:oldEvent,oldEvents:isMultiple?oldEvents:UNDEFINED,source:args.source};}}if(hasNonRecurring){var allowDelete=_this._hook("onEventDelete",{domEvent:args.domEvent,event:event,events:isMultiple?events:UNDEFINED})!==false;if(allowDelete){changed=true;_this._events=_this._events.filter((function(e){return !selectedEventsMap[e.id]}));_this._selectedEventsMap={};_this._triggerDeleted={event:event,events:isMultiple?events:UNDEFINED,source:args.source};}}if(changed){_this._hidePopover();_this.refresh();}};_this._onKeyDown=function(ev){if(ev.keyCode===TAB){_this._resetSelection();}};return _this}EventcalendarBase.prototype.addEvent=function(events){var eventsToAdd=isArray(events)?events:[events];var ids=[];var data=prepareEvents(eventsToAdd);for(var _i=0,data_1=data;_i<data_1.length;_i++){var event_1=data_1[_i];ids.push(""+event_1.id);this._events.push(event_1);}this.refresh();return ids};EventcalendarBase.prototype.getEvents=function(start,end){return getDataInRange(this._events,this.s,this._firstDay,this._lastDay,start,end)};EventcalendarBase.prototype.getInvalids=function(start,end){return getDataInRange(this.s.invalid,this.s,this._firstDay,this._lastDay,start,end)};EventcalendarBase.prototype.getSelectedEvents=function(){return toArray(this._selectedEventsMap)};EventcalendarBase.prototype.setEvents=function(events){var ids=[];var data=prepareEvents(events);for(var _i=0,data_2=data;_i<data_2.length;_i++){var event_2=data_2[_i];ids.push(""+event_2.id);}this._events=data;this.refresh();return ids};EventcalendarBase.prototype.setSelectedEvents=function(selectedEvents){this._selectedEventsMap=(selectedEvents||[]).reduce((function(map,ev){if(ev.occurrenceId){map[ev.occurrenceId]=ev;}else {map[ev.id]=ev;}return map}),{});this.forceUpdate();};EventcalendarBase.prototype.removeEvent=function(events){var eventsToRemove=isArray(events)?events:[events];var data=this._events;var len=data.length;for(var _i=0,eventsToRemove_1=eventsToRemove;_i<eventsToRemove_1.length;_i++){var eventToRemove=eventsToRemove_1[_i];var found=false;var i=0;while(!found&&i<len){var event_3=data[i];if(event_3.id===eventToRemove||event_3.id===eventToRemove.id){found=true;data.splice(i,1);}i++;}}this.refresh();};EventcalendarBase.prototype.navigate=function(date,animate){var d=+makeDate(date);var changed=d!==this._selectedDateTime;if(changed){this._shouldAnimateScroll=!!animate;}if(this.s.selectedDate===UNDEFINED){if((this._showSchedule||this._showTimeline)&&!changed){this._shouldScrollSchedule++;this.forceUpdate();}else {this.setState({selectedDate:d});}}else if(changed){this._selectedChange(date);}};EventcalendarBase.prototype.updateEvent=function(events){var eventsToUpdate=isArray(events)?events:[events];var data=this._events;var len=data.length;for(var _i=0,eventsToUpdate_1=eventsToUpdate;_i<eventsToUpdate_1.length;_i++){var eventToUpdate=eventsToUpdate_1[_i];var found=false;var i=0;while(!found&&i<len){var event_4=data[i];if(event_4.id===eventToUpdate.id){found=true;data.splice(i,1,__assign({},eventToUpdate));}i++;}}this.refresh();};EventcalendarBase.prototype.refresh=function(){this._refresh=true;this.forceUpdate();};EventcalendarBase.prototype._render=function(s,state){var _this=this;var prevProps=this._prevS;var showDate=this._showDate;var timezonesChanged=s.displayTimezone!==prevProps.displayTimezone||s.dataTimezone!==prevProps.dataTimezone;var renderList=false;var selected;var selectedDateTime;var selectedDate;this._colorEventList=s.eventTemplate!==UNDEFINED||s.renderEvent!==UNDEFINED?false:s.colorEventList;if(s.exclusiveEndDates===UNDEFINED){s.exclusiveEndDates=!!s.displayTimezone;}if(!isEmpty(s.min)){if(prevProps.min!==s.min){this._minDate=+makeDate(s.min);}}else {this._minDate=-Infinity;}if(!isEmpty(s.max)){if(prevProps.max!==s.max){this._maxDate=+makeDate(s.max);}}else {this._maxDate=Infinity;}if(s.selectedDate!==UNDEFINED){selectedDateTime=+makeDate(s.selectedDate);}else {if(!this._defaultDate){this._defaultDate=+(s.defaultSelectedDate!==UNDEFINED?makeDate(s.defaultSelectedDate):removeTimezone(createDate(s)));}selectedDateTime=state.selectedDate||this._defaultDate;}this.eventList=state.eventList;if(s.data!==prevProps.data){this._events=prepareEvents(s.data);this._refresh=true;}if(s.invalid!==prevProps.invalid||s.colors!==prevProps.colors||timezonesChanged){this._refresh=true;}if(JSON.stringify(s.view)!==JSON.stringify(prevProps.view)||s.firstDay!==prevProps.firstDay){var config={c:"eventcalendar",eventListSize:this._eventListSize,eventListType:this._eventListType,firstDay:s.firstDay,resourcesLength:s.resources?s.resources.length:0,scheduleEndDay:this._scheduleEndDay,scheduleEndTime:this._scheduleEndTime,scheduleStartDay:this._scheduleStartDay,scheduleStartTime:this._scheduleStartTime,scheduleTimeCellStep:this._scheduleTimeCellStep,scheduleTimeLabelStep:this._scheduleTimeLabelStep,scheduleTimezones:this._scheduleTimezones,scheduleType:this._scheduleType,showCalendar:this._showCalendar,showEventCount:this._showEventCount,showEventLabels:this._showEventLabels,showEventList:this._showEventList,showMarked:!!s.marked,showSchedule:this._showSchedule,showScheduleDays:this._showScheduleDays,slotsLength:s.slots?s.slots.length:0,timelineEndDay:this._timelineEndDay,timelineEndTime:this._timelineEndTime,timelineListing:this._timelineListing,timelineStartTime:this._timelineStartTime,timelineTimeCellStep:this._timelineTimeCellStep,timelineTimeLabelStep:this._timelineTimeLabelStep,timelineType:this._timelineType,v:version$1,view:s.view};this._remote++;sendLog(this);jsonp("remote",this,config,(function(data){_this._remote--;if(!_this._remote){for(var key in data){if(data.hasOwnProperty(key)){_this[key]=data[key];}}showMessage(data.notification);_this._viewChanged=true;_this.forceUpdate();}}),"comp_"+this._uid);}this._showDate=!this._showScheduleDays&&(this._showSchedule&&this._scheduleType==="day"||this._showEventList&&this._eventListType==="day"&&this._eventListSize<2);this._firstWeekDay=this._showSchedule?this._scheduleStartDay:this._showTimeline?this._timelineStartDay:s.firstDay;if(this._refresh||s.locale!==prevProps.locale||s.theme!==prevProps.theme){renderList=true;this._pageLoad++;}if(s.resources!==prevProps.resources){this._resourcesMap=(s.resources||[]).reduce((function(map,res){map[res.id]=res;return map}),{});}if(s.selectMultipleEvents){if(s.selectedEvents!==prevProps.selectedEvents){this._selectedEventsMap=(s.selectedEvents||[]).reduce((function(map,ev){if(ev.occurrenceId){map[ev.occurrenceId]=ev;}else {map[ev.id]=ev;}return map}),{});}}if(this._selectedEventsMap===UNDEFINED){this._selectedEventsMap={};}if(s.refDate!==prevProps.refDate){this._refDate=makeDate(s.refDate);}if(!this._refDate&&!this._showCalendar&&(this._showSchedule||this._showTimeline)){this._refDate=getDateOnly(new Date);}if(selectedDateTime!==this._selectedDateTime||this._viewChanged){var validated=this._showCalendar&&(this._showSchedule||this._showTimeline||this._showEventList)?+getClosestValidDate(new Date(selectedDateTime),s,this._minDate,this._maxDate,UNDEFINED,UNDEFINED,1):constrain(selectedDateTime,this._minDate,this._maxDate);validated=this._getValidDay(validated);if(selectedDateTime!==validated){selectedDateTime=validated;setTimeout((function(){_this._selectedChange(new Date(selectedDateTime));}));}if(!this._skipScheduleScroll&&selectedDateTime!==this._selectedDateTime){this._shouldScrollSchedule++;}this._selectedDateTime=selectedDateTime;}selectedDate=getDateOnly(new Date(selectedDateTime));selected=+selectedDate;if(selected!==this._selected||showDate!==this._showDate||s.locale!==prevProps.locale||prevProps.dateFormatLong!==s.dateFormatLong){this._selectedDateHeader=this._showDate?formatDate(s.dateFormatLong,selectedDate,s):"";}if(selected!==this._selected||s.dataTimezone!==prevProps.dataTimezone||s.displayTimezone!==prevProps.displayTimezone){this._shouldScroll=!this._isPageChange&&!this._shouldSkipScroll;this._shouldAnimateScroll=this._shouldAnimateScroll!==UNDEFINED?this._shouldAnimateScroll:this._selected!==UNDEFINED;this._selected=selected;this._selectedDates={};this._selectedDates[+addTimezone(s,new Date(selected))]=true;this._active=selected;renderList=true;}if(renderList&&this._showCalendar&&(this._eventListType==="day"||this._scheduleType==="day"||this._timelineType==="day")){this._setEventList(selectedDate,addDays(selectedDate,1));}if(this._refresh&&state.showPopover){setTimeout((function(){_this._hidePopover();}));}this._refresh=false;this._cssClass=this._className+" mbsc-eventcalendar"+(this._showEventList?" mbsc-eventcalendar-agenda":"")+(this._showSchedule?" mbsc-eventcalendar-schedule":"")+(this._showTimeline?" mbsc-eventcalendar-timeline":"");};EventcalendarBase.prototype._mounted=function(){this._unsubscribe=subscribeExternalDrag(this._onExternalDrag);listen(this._el,KEY_DOWN,this._onKeyDown);};EventcalendarBase.prototype._updated=function(){var _this=this;if(this._shouldScroll&&this.state.isListScrollable){this._scrollToDay();this._shouldScroll=false;this._shouldAnimateScroll=UNDEFINED;}if(this._shouldLoadDays){this._shouldLoadDays=false;forEach(this._list.querySelectorAll("[mbsc-timestamp]"),(function(listItem){_this._listDays[listItem.getAttribute("mbsc-timestamp")]=listItem;}));}if(this._shouldEnhance){this._shouldEnhance=this._shouldEnhance==="popover"?this._popoverList:this._list;}if(this._triggerCreated){var created=this._triggerCreated;var target=created.source==="calendar"?this._calendarView._body.querySelector('.mbsc-calendar-table-active .mbsc-calendar-text[data-id="'+created.event.id+'"]'):this._el.querySelector('.mbsc-schedule-event[data-id="'+created.event.id+'"]');this._hook("onEventCreated",__assign({},this._triggerCreated,{target:target}));this._triggerCreated=null;}if(this._triggerUpdated){var updated=this._triggerUpdated;var target=updated.source==="calendar"?this._calendarView._body.querySelector('.mbsc-calendar-table-active .mbsc-calendar-text[data-id="'+updated.event.id+'"]'):this._el.querySelector('.mbsc-schedule-event[data-id="'+updated.event.id+'"]');this._hook("onEventUpdated",__assign({},this._triggerUpdated,{target:target}));this._triggerUpdated=null;}if(this._triggerDeleted){this._hook("onEventDeleted",__assign({},this._triggerDeleted));this._triggerDeleted=null;}if(this._viewChanged){setTimeout((function(){_this._viewChanged=false;}),10);}if(this._shouldSkipScroll){setTimeout((function(){_this._shouldSkipScroll=false;}));}this._skipScheduleScroll=false;};EventcalendarBase.prototype._destroy=function(){unsubscribeExternalDrag(this._unsubscribe);unlisten(this._el,KEY_DOWN,this._onKeyDown);};EventcalendarBase.prototype._resetSelection=function(){if(this.s.selectMultipleEvents&&Object.keys(this._selectedEventsMap).length>0){this._selectedEventsMap={};this._onSelectedEventsChange([]);this.forceUpdate();}};EventcalendarBase.prototype._getAgendaEvents=function(firstDay,lastDay,eventMap){var _this=this;var events=[];var s=this.s;if(eventMap&&this._showEventList){var _loop_1=function(d){var eventsForDay=eventMap[getDateStr(d)];if(eventsForDay&&eventsForDay.length){var sorted=sortEvents(eventsForDay,s.eventOrder);events.push({date:formatDate(s.dateFormatLong,d,s),events:sorted.map((function(event){return _this._getEventData(event,d)})),timestamp:+d});}};for(var d=getDateOnly(firstDay);d<lastDay;d.setDate(d.getDate()+1)){_loop_1(d);}}return events};EventcalendarBase.prototype._getEventData=function(event,d){var s=this.s;var res;if(!event.color&&event.resource){var resItem=isArray(event.resource)?event.resource:[event.resource];res=(this._resourcesMap||{})[resItem[0]];}var ev=getEventData(s,event,d,this._colorEventList,s.timeFormat,s.allDayText,s.toText,res,true);ev.html=this._safeHtml(ev.html);return ev};EventcalendarBase.prototype._getValidDay=function(timestamp,dir){if(dir===void 0){dir=1;}var startDay=this._rangeStartDay;var endDay=this._rangeEndDay;if(!this._showCalendar&&this._rangeType==="day"&&startDay!==UNDEFINED&&endDay!==UNDEFINED){var date=new Date(timestamp);var day=date.getDay();var diff=0;if(endDay<startDay?day>endDay&&day<startDay:day>endDay||day<startDay){diff=dir<0?endDay-day:startDay-day;}if(diff){diff+=dir<0?diff>0?-7:0:diff<0?7:0;return +addDays(date,diff)}}return timestamp};EventcalendarBase.prototype._setEventList=function(firstDay,lastDay){var _this=this;setTimeout((function(){_this._eventListHTML=UNDEFINED;_this._shouldScroll=true;_this._listDays=null;_this._scrollToDay(0);_this.setState({eventList:_this._getAgendaEvents(firstDay,lastDay,_this._eventMap)});}));};EventcalendarBase.prototype._hidePopover=function(){if(this.state.showPopover){this.setState({showPopover:false});}};EventcalendarBase.prototype._scrollToDay=function(pos){var _this=this;if(this._list){var to=pos;var animate=void 0;if(pos===UNDEFINED&&this._listDays){var day=this._listDays[this._selected];if(day){to=day.offsetTop;animate=this._shouldAnimateScroll;}}if(to!==UNDEFINED){this._isListScrolling++;smoothScroll(this._list,UNDEFINED,to,animate,false,(function(){setTimeout((function(){_this._isListScrolling--;}),150);}));}}};EventcalendarBase.prototype._selectedChange=function(d){this._emit("selectedDateChange",d);this._hook("onSelectedDateChange",{date:d});};EventcalendarBase.prototype._cellClick=function(name,args){this._hook(name,__assign({target:args.domEvent.currentTarget},args));};EventcalendarBase.prototype._dayClick=function(name,args){var d=getDateStr(args.date);var events=sortEvents(this._eventMap[d],this.s.eventOrder);args.events=events;this._hook(name,args);};EventcalendarBase.prototype._labelClick=function(name,args){if(args.label){this._hook(name,{date:args.date,domEvent:args.domEvent,event:args.label,source:"calendar"});}};EventcalendarBase.prototype._eventClick=function(name,args){args.date=new Date(args.date);return this._hook(name,args)};EventcalendarBase.prototype._handleMultipleSelect=function(args){var event=args.label||args.event;if(event&&this.s.selectMultipleEvents){var domEvent=args.domEvent;var selectedEvents=!domEvent.shiftKey&&!domEvent.ctrlKey&&!domEvent.metaKey?{}:this._selectedEventsMap;var eventId=event.occurrenceId||event.id;if(selectedEvents[eventId]){delete selectedEvents[eventId];}else {selectedEvents[eventId]=event;}this._selectedEventsMap=__assign({},selectedEvents);this._onSelectedEventsChange(toArray(selectedEvents));if(this.s.selectedEvents===UNDEFINED){this.forceUpdate();}}};EventcalendarBase.defaults=__assign({},calendarViewDefaults,{actionableEvents:true,allDayText:"All-day",data:[],dragTimeStep:15,newEventText:"New event",noEventsText:"No events",showControls:true,showEventTooltip:true,view:{calendar:{type:"month"}}});EventcalendarBase._name="Eventcalendar";EventcalendarBase.decorators=[{type:core.Directive,args:[{selector:"[mbsc-ec-b]"}]}];return EventcalendarBase}(BaseComponent);var DEF_ID="mbsc-def";function checkInvalidCollision$1(invalids,start,end,allDay,invalidateEvent,exclusiveEndDates){var onlyStartEnd=invalidateEvent==="start-end";var until=exclusiveEndDates?end:getDateOnly(addDays(end,1));for(var _i=0,_a=Object.keys(invalids);_i<_a.length;_i++){var r=_a[_i];var invalidMap=invalids[r];for(var d=getDateOnly(start);d<until;d.setDate(d.getDate()+1)){var invalidsForDay=invalidMap[getDateStr(d)];if(invalidsForDay){if(invalidsForDay.allDay&&(!onlyStartEnd||isSameDay(d,start)||isSameDay(d,end))){return invalidsForDay.allDay}if(!allDay){for(var _b=0,_c=invalidsForDay.invalids;_b<_c.length;_b++){var inv=_c[_b];if(onlyStartEnd){if(checkDateRangeOverlap(inv.startDate,inv.endDate,start,start,true)){return inv.original}if(checkDateRangeOverlap(inv.startDate,inv.endDate,end,end)){return inv.original}}else if(checkDateRangeOverlap(inv.startDate,inv.endDate,start,end)){return inv.original}}}}}}return false}function calcLayout(s,groups,event,next,isListing){var eventAllDay=event.allDay||isListing;var eStart=event.startDate;var eEnd=eventAllDay?getEndDate(s,eventAllDay,eStart,event.endDate):event.endDate;var eventStart=eventAllDay?createDate(s,eStart.getFullYear(),eStart.getMonth(),eStart.getDate()):eStart;var eventEnd=eventAllDay?createDate(s,eEnd.getFullYear(),eEnd.getMonth(),eEnd.getDate(),23,59,59,999):eEnd;var pushed=false;for(var _i=0,groups_1=groups;_i<groups_1.length;_i++){var group=groups_1[_i];var i=0;var groupOverlap=false;var groupLevel=void 0;for(var _a=0,group_1=group;_a<group_1.length;_a++){var level=group_1[_a];var overlap=false;for(var _b=0,level_1=level;_b<level_1.length;_b++){var item=level_1[_b];var itemAllDay=item.allDay;var iStart=item.startDate;var iEnd=itemAllDay?getEndDate(s,itemAllDay,iStart,item.endDate):item.endDate;var itemStart=itemAllDay?createDate(s,iStart.getFullYear(),iStart.getMonth(),iStart.getDate()):iStart;var itemEnd=itemAllDay?createDate(s,iEnd.getFullYear(),iEnd.getMonth(),iEnd.getDate(),23,59,59,999):iEnd;if(checkDateRangeOverlap(itemStart,itemEnd,eventStart,eventEnd,true)){overlap=true;groupOverlap=true;if(groupLevel){next[event.uid]=next[event.uid]||i;}else {next[item.uid]=i+1;}}}if(!overlap&&!groupLevel){groupLevel=level;}i++;}if(groupOverlap){if(groupLevel){groupLevel.push(event);}else {group.push([event]);}pushed=true;}}if(!pushed){next[event.uid]=0;groups.push([[event]]);}}function roundStep(v){v=Math.abs(round(v));if(v>60){return round(v/60)*60}if(60%v===0){return v}return [6,10,12,15,20,30].reduce((function(a,b){return Math.abs(b-v)<Math.abs(a-v)?b:a}))}function getEventHeight(startDate,endDate,displayedTime,startTime,endTime){var start=getDayMilliseconds(startDate);var end=getDayMilliseconds(endDate);if(startTime>start){start=startTime;}if(endTime<end){end=endTime;}return (end-start)*100/displayedTime}function getEventWidth(startDate,endDate,displayedTime,viewStart,viewEnd,startTime,endTime,startDay,endDay,fullDay){var startD=startDate;var endD=endDate;if(startD<viewStart){startD=viewStart;}if(endD>viewEnd){endD=viewEnd;}var start=getDayMilliseconds(startD);var end=getDayMilliseconds(endD);if(startTime>start){start=startTime;}if(endTime<end){end=endTime;}if(!isSameDay(startD,endD)){if(start>endTime){start=endTime;}if(end<startTime){end=startTime;}}var time=0;if(isSameDay(startD,endD)){time=fullDay?displayedTime:end-start;}else {for(var d=getDateOnly(startD);d<=endD;d.setDate(d.getDate()+1)){if(isInWeek(d.getDay(),startDay,endDay)){if(!fullDay&&isSameDay(d,startD)){time+=displayedTime-start+startTime;}else if(!fullDay&&isSameDay(d,endD)){time+=end-startTime;}else {time+=displayedTime;}}}}return time*100/displayedTime}function getEventStart(startDate,startTime,displayedTime,viewStart,startDay,endDay){if(viewStart&&viewStart>startDate){startDate=viewStart;}var start=getDayMilliseconds(startDate);if(startTime>start||startDay!==UNDEFINED&&endDay!==UNDEFINED&&!isInWeek(startDate.getDay(),startDay,endDay)){start=startTime;}return (start-startTime)*100/displayedTime}function getResourceMap(eventsMap,resources,slots,hasResources,hasSlots){eventsMap=eventsMap||{};var eventKeys=Object.keys(eventsMap);var resourceMap={};var resourceIds=resources.map((function(resource){return resource.id}));var slotIds=slots.map((function(s){return s.id}));resourceIds.forEach((function(rid){resourceMap[rid]={};slotIds.forEach((function(sid){resourceMap[rid][sid]={};}));}));var _loop_1=function(timestamp){var events=eventsMap[timestamp];var _loop_2=function(event_1){var eventResource=event_1.resource;var eventSlot=event_1.slot;var res=eventResource===UNDEFINED||!hasResources?resourceIds:isArray(eventResource)?eventResource:[eventResource];var slot=eventSlot===UNDEFINED||!hasSlots?slotIds:[eventSlot];res.forEach((function(rid){var map=resourceMap[rid];if(map){slot.forEach((function(sid){var slotMap=map[sid];if(slotMap){if(!slotMap[timestamp]){slotMap[timestamp]=[];}slotMap[timestamp].push(event_1);}}));}}));};for(var _i=0,events_1=events;_i<events_1.length;_i++){var event_1=events_1[_i];_loop_2(event_1);}};for(var _i=0,eventKeys_1=eventKeys;_i<eventKeys_1.length;_i++){var timestamp=eventKeys_1[_i];_loop_1(timestamp);}return resourceMap}function getCellDate(timestamp,ms){var d=new Date(timestamp);var time=new Date(+REF_DATE+ms);return new Date(d.getFullYear(),d.getMonth(),d.getDate(),time.getHours(),time.getMinutes())}var STBase=/*#__PURE__*/function(_super){__extends(STBase,_super);function STBase(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this._onScroll=function(){};_this._onEventDragModeOn=function(args){var event=args.create?_this._tempEvent:args.event;var resource=args.create?_this._tempResource:args.resource;var slot=args.create?_this._tempSlot:args.slot;_this.setState({dragData:{draggedEvent:event,originDates:args.external?UNDEFINED:_this._getDragDates(event,resource,slot),resource:resource},isTouchDrag:true});};_this._onEventDragModeOff=function(args){_this._hook("onEventDragEnd",{domEvent:args.domEvent,event:args.event,resource:args.resource,slot:args.slot,source:args.source});_this.setState({dragData:UNDEFINED,isTouchDrag:false});};_this._onEventDragStart=function(args){var s=_this.s;var isClick=args.click;var isListing=s.eventList;var isTimeline=_this._isTimeline;var resources=_this._visibleResources;var slots=_this._slots;var timeStep=s.dragTimeStep;var grid=_this._gridCont;var startX=args.startX;var startY=args.startY;var groupByResource=_this._groupByResource;var groupCount=groupByResource?_this._daysNr:_this._hasSlots?_this._slots.length:resources.length;_this._resWidth=_this._resCont?_this._resCont.offsetWidth:0;_this._scrollY=0;_this._scrollX=0;_this._calcGridDimensions();var posX=s.rtl?_this._gridRight-startX:startX-_this._gridLeft;var posY=constrain(startY-_this._gridTop,8,_this._colHeight-9);var colIndex=floor(posX/_this._colWidth);var resourceIndex=0;var dayIndex=colIndex;var slotIndex=0;if(!isTimeline){var allDayCont=_this._el.querySelector(".mbsc-schedule-all-day-wrapper");var allDayRect=allDayCont&&allDayCont.getBoundingClientRect();_this._allDayTop=allDayRect?allDayRect.top:_this._gridContTop;resourceIndex=groupByResource?floor(colIndex/groupCount):colIndex%groupCount;dayIndex=groupByResource?colIndex%groupCount:floor(colIndex/groupCount);}else {var rows=grid.querySelectorAll(".mbsc-timeline-row");_this._rowTops=[];slotIndex=floor(posX/(_this._colWidth/slots.length))%slots.length;rows.forEach((function(r,i){var rowTop=r.getBoundingClientRect().top-_this._gridTop;_this._rowTops.push(rowTop);if(posY>rowTop){resourceIndex=(_this._rowStartIndex||0)+i;}}));}var resource=args.external?UNDEFINED:resources[resourceIndex];var resourceId=resource?resource.id:UNDEFINED;var slot=args.external?UNDEFINED:slots[slotIndex];var slotId=slot?slot.id:UNDEFINED;if(args.create){dayIndex=constrain(dayIndex,0,_this._daysNr-1);var allDay=!isTimeline&&s.showAllDay&&args.endY<_this._gridContTop;var eventDay=s.type==="day"&&s.size===1?_this._firstDay:_this._days[dayIndex].date;var eventLength=!isListing&&(args.external||isClick)?_this._stepCell:timeStep*ONE_MIN;var gridTime=_this._getGridTime(eventDay,posX,posY,dayIndex,isClick?_this._stepCell/ONE_MIN:timeStep);var newStart=allDay||isListing?eventDay:gridTime;var nextDay=addDays(newStart,1);var allDayEnd=s.exclusiveEndDates?nextDay:new Date(+nextDay-1);var newEnd=allDay||isListing?allDayEnd:roundTime(createDate(s,+newStart+eventLength),isClick?1:timeStep);var eventData=s.extendDefaultEvent?s.extendDefaultEvent({resource:resourceId,slot:slotId,start:newStart}):UNDEFINED;var newEvent=__assign({allDay:allDay,end:newEnd,id:getEventId(),resource:resource&&resourceId!==DEF_ID?resourceId:UNDEFINED,slot:slot&&slotId!==DEF_ID?slotId:UNDEFINED,start:newStart,title:s.newEventText},eventData,args.event);var ev=_this._getEventData(newEvent,eventDay,resource);if(args.event){var eventDuration=+ev.endDate-+ev.startDate;ev.startDate=eventDay;ev.endDate=new Date(+eventDay+eventDuration);}_this._tempEvent=ev;_this._tempResource=resourceId;_this._tempSlot=slotId;}if(!isClick){_this._hook("onEventDragStart",{domEvent:args.domEvent,event:(args.create?_this._tempEvent:args.event).original,resource:resourceId,slot:slotId,source:isTimeline?"timeline":"schedule"});}};_this._onEventDragMove=function(args){clearTimeout(_this._scrollTimer);var s=_this.s;var rtl=s.rtl;var rtlNr=rtl?-1:1;var isTimeline=_this._isTimeline;var daysNr=_this._daysNr;var slots=_this._slots;var groupByResource=_this._groupByResource;var dragData=_this.state.dragData;var timeStep=s.dragTimeStep;var timeFormat=s.timeFormat;var isListing=s.eventList;var startX=args.startX;var endX=constrain(args.endX,_this._gridContLeft,_this._gridContRight-1);var endY=constrain(args.endY,_this._gridContTop,_this._gridContBottom-1);var deltaY=endY-args.startY+_this._scrollY;var deltaX=rtl?startX-endX+_this._scrollX:endX-startX+_this._scrollX;var delta=isTimeline?deltaX:deltaY;var daySize=isTimeline?_this._colWidth:_this._colHeight-16;var posX=constrain(rtl?_this._gridRight+_this._scrollX-endX:endX-_this._gridLeft+_this._scrollX,0,_this._gridRight-_this._gridLeft-1);var posY=constrain(endY-_this._gridTop+_this._scrollY,8,_this._colHeight-9);var oldIndex=floor((rtl?_this._gridRight-startX:startX-_this._gridLeft)/_this._colWidth);var newIndex=floor(posX/_this._colWidth);var inAllDay=s.showAllDay&&args.endY<_this._gridContTop;var scrollCont=_this._scrollCont;var oldDayIndex=oldIndex;var newDayIndex=newIndex;var resourceIndex=0;var slotIndex=0;var hasScroll=false;var distBottom=_this._gridContBottom-args.endY;var distTop=args.endY-_this._gridContTop;var distLeft=args.endX-_this._gridContLeft;var distRight=_this._gridContRight-args.endX;var maxScrollH=(scrollCont.scrollWidth-scrollCont.clientWidth)*rtlNr;var rightLimit=rtl?0:maxScrollH;var leftLimit=rtl?maxScrollH:0;if(distBottom<30&&scrollCont.scrollTop<scrollCont.scrollHeight-scrollCont.clientHeight){scrollCont.scrollTop+=5;_this._scrollY+=5;hasScroll=true;}if(distTop<30&&!inAllDay&&scrollCont.scrollTop>0){scrollCont.scrollTop-=5;_this._scrollY-=5;hasScroll=true;}if(distLeft<30+(rtl?0:_this._resWidth)&&scrollCont.scrollLeft>leftLimit){scrollCont.scrollLeft-=5;_this._scrollX-=5*rtlNr;hasScroll=true;}if(distRight<30+(rtl?_this._resWidth:0)&&scrollCont.scrollLeft<rightLimit){scrollCont.scrollLeft+=5;_this._scrollX+=5*rtlNr;hasScroll=true;}if(hasScroll){_this._scrollTimer=setTimeout((function(){_this._onEventDragMove(args);}),20);}if(!isTimeline){var groupCount=groupByResource?daysNr:_this._resources.length;oldDayIndex=groupByResource?oldIndex%groupCount:floor(oldIndex/groupCount);newDayIndex=groupByResource?newIndex%groupCount:floor(newIndex/groupCount);resourceIndex=groupByResource?floor(newIndex/groupCount):newIndex%groupCount;}else {slotIndex=floor(posX/(_this._colWidth/slots.length))%slots.length;_this._rowTops.forEach((function(rowTop,i){if(posY>rowTop){resourceIndex=(_this._rowStartIndex||0)+i;}}));}oldDayIndex=constrain(oldDayIndex,0,daysNr-1);newDayIndex=constrain(newDayIndex,0,daysNr-1);var event=args.create?_this._tempEvent:args.event;var start=event.startDate;var end=event.endDate;var duration=+end-+start;var ms=_this._time;var timeDelta=floor(ms*delta/daySize);var slotId=slots[slotIndex].id;var resourceId=_this._visibleResources[resourceIndex].id;var allDay=event.allDay;var tzOpt=allDay?UNDEFINED:s;var addDayOnly=allDay||isListing;var newStart=start;var newEnd=end;var newDate;var oldDay=_this._days[oldDayIndex].date;var newDay=_this._days[newDayIndex].date;var dayDelta=s.type==="day"&&s.size===1?0:getDayDiff(oldDay,newDay);var deltaDiff=dayDelta-newDayIndex+oldDayIndex;if(args.drag||args.external){allDay=inAllDay||isTimeline&&event.allDay;addDayOnly=inAllDay||isListing||isTimeline&&event.allDay;tzOpt=allDay?UNDEFINED:s;if(event.allDay&&!isTimeline&&!inAllDay||args.external&&!inAllDay){var day=getDateOnly(addDays(start,dayDelta));newStart=_this._getGridTime(day,posX,posY,newDayIndex,timeStep);}else {if(isTimeline&&!addDayOnly){newStart=roundTime(createDate(s,+start+timeDelta+(ONE_DAY-ms)*dayDelta+ms*deltaDiff),timeStep);}else {newDate=addDays(start,dayDelta);newStart=addDayOnly?newDate:roundTime(createDate(tzOpt,+newDate+timeDelta),timeStep);}}newEnd=createDate(tzOpt,+newStart+duration);}else {var gridDelta=isTimeline?0:newIndex-oldIndex;var endResize=args.create?gridDelta?gridDelta>0:delta>0:args.direction==="end";var days=getDayDiff(start,end);var startResource=args.create?_this._tempResource:args.resource;if(!isTimeline&&groupByResource&&startResource!==resourceId&&dragData&&dragData.draggedEvent){dayDelta=getDayDiff(dragData.draggedEvent.startDate,dragData.draggedEvent.endDate)*(endResize?1:-1);}if(endResize){if(isTimeline&&!addDayOnly){newEnd=roundTime(createDate(s,+end+timeDelta+dayDelta*(ONE_DAY-ms)+ms*deltaDiff),timeStep);}else {newDate=addDays(end,Math.max(-days,dayDelta));newEnd=addDayOnly?newDate:roundTime(createDate(tzOpt,+newDate+timeDelta),timeStep);if(!addDayOnly&&(getDayMilliseconds(newEnd)>_this._endTime+1||newEnd>=addDays(getDateOnly(newDate),1))){newEnd=createDate(s,+getDateOnly(newDate)+_this._endTime+1);}}}else {if(isTimeline&&!addDayOnly){newStart=roundTime(createDate(s,+start+timeDelta+dayDelta*(ONE_DAY-ms)+ms*deltaDiff),timeStep);}else {newDate=addDays(start,Math.min(days,dayDelta));newStart=addDayOnly?newDate:roundTime(createDate(tzOpt,+newDate+timeDelta),timeStep);if(!addDayOnly&&(getDayMilliseconds(newStart)<_this._startTime||newStart<getDateOnly(newDate))){newStart=createDate(s,+getDateOnly(newDate)+_this._startTime);}}}resourceId=startResource;if(addDayOnly&&newEnd<newStart){if(endResize){newEnd=createDate(s,newStart);}else {newStart=createDate(s,newEnd);}}if(!addDayOnly&&(newEnd<newStart||Math.abs(+newEnd-+newStart)<timeStep*ONE_MIN)){if(endResize){newEnd=createDate(s,+newStart+timeStep*ONE_MIN);}else {newStart=createDate(s,+newEnd-timeStep*ONE_MIN);}}}if(_this._tempStart!==+newStart||_this._tempEnd!==+newEnd||_this._tempAllDay!==allDay||_this._tempResource!==resourceId||_this._tempSlot!==slotId){var draggedEvent=__assign({},event);draggedEvent.startDate=newStart;draggedEvent.endDate=newEnd;draggedEvent.start=formatDate(timeFormat,newStart,s);draggedEvent.end=formatDate(timeFormat,newEnd,s);draggedEvent.allDay=allDay;_this._tempStart=+newStart;_this._tempEnd=+newEnd;_this._tempAllDay=allDay;_this._tempResource=resourceId;_this._tempSlot=slotId;_this.setState({dragData:{draggedDates:_this._getDragDates(draggedEvent,resourceId,slotId),draggedEvent:draggedEvent,originDates:dragData&&dragData.originDates,resource:resourceId,slot:slotId}});}};_this._onEventDragEnd=function(args){clearTimeout(_this._scrollTimer);var s=_this.s;var isCreating=args.create;var state=_this.state;var dragData=state.dragData;if(isCreating&&!dragData){dragData={};dragData.draggedEvent=_this._tempEvent;}if(dragData&&dragData.draggedEvent){var event_2=args.event;var draggedEvent=dragData.draggedEvent;var newStart=draggedEvent.startDate;var newEnd=draggedEvent.endDate;var allDay=draggedEvent.allDay;var origEvent=draggedEvent.original;var oldResource=args.resource;var newResource_1=dragData.resource===UNDEFINED?oldResource:dragData.resource;var eventResource=origEvent.resource===UNDEFINED?newResource_1:origEvent.resource;var oldSlot=isCreating?_this._tempSlot:args.slot;var newSlot=dragData.slot===UNDEFINED?oldSlot:dragData.slot;var invalids={};var source=_this._isTimeline?"timeline":"schedule";var changed=isCreating||+newStart!==+event_2.startDate||+newEnd!==+event_2.endDate||allDay!==event_2.allDay||oldResource!==newResource_1||oldSlot!==newSlot;var updatedResource=eventResource;var invalidResources=void 0;if(oldResource!==newResource_1&&!isCreating&&!_this._isSingleResource){if(isArray(eventResource)&&eventResource.length&&newResource_1){var indx=eventResource.indexOf(oldResource);if(eventResource.indexOf(newResource_1)===-1){updatedResource=eventResource.slice();updatedResource.splice(indx,1,newResource_1);}}else {updatedResource=newResource_1;}}if(!updatedResource||!s.resources){invalidResources=_this._resources.map((function(r){return r.id}));}else {invalidResources=isArray(updatedResource)?updatedResource:[updatedResource];}for(var _i=0,invalidResources_1=invalidResources;_i<invalidResources_1.length;_i++){var r=invalidResources_1[_i];if(_this._invalids[r]){invalids[r]=_this._invalids[r][newSlot];}}var action=args.action||(state.dragData?"drag":"click");var allowUpdate=changed?s.eventDragEnd({action:action,collision:checkInvalidCollision$1(invalids,newStart,newEnd,allDay,s.invalidateEvent,s.exclusiveEndDates),create:isCreating,domEvent:args.domEvent,event:draggedEvent,resource:updatedResource!==DEF_ID?updatedResource:UNDEFINED,slot:newSlot!==DEF_ID?newSlot:UNDEFINED,source:source}):true;var keepDragMode=state.isTouchDrag&&(!isCreating||allowUpdate);if(allowUpdate&&keepDragMode&&oldResource!==newResource_1&&!origEvent.color){var newRes=find(_this._resources,(function(r){return r.id===newResource_1}));var resColor=newRes&&newRes.color;if(resColor){draggedEvent.color=resColor;draggedEvent.style.background=resColor;draggedEvent.style.color=getTextColor(resColor);}else {draggedEvent.color=UNDEFINED;draggedEvent.style={};}}if(!keepDragMode&&action!=="click"){_this._hook("onEventDragEnd",{domEvent:args.domEvent,event:(isCreating?_this._tempEvent:args.event).original,resource:newResource_1,slot:newSlot,source:source});}_this.setState({dragData:keepDragMode?{draggedEvent:draggedEvent,originDates:allowUpdate?_this._getDragDates(draggedEvent,newResource_1,newSlot):dragData.originDates}:UNDEFINED,isTouchDrag:keepDragMode});_this._tempStart=0;_this._tempEnd=0;_this._tempAllDay=UNDEFINED;}};_this._onExternalDrag=function(args){if(_this.s.externalDrop){var isInArea=args.endY<_this._gridContBottom&&args.endY>_this._allDayTop&&args.endX>_this._gridContLeft&&args.endX<_this._gridContRight;switch(args.eventName){case"onDragModeOff":_this._onEventDragModeOff(args);break;case"onDragModeOn":_this._onEventDragModeOn(args);break;case"onDragStart":_this._onEventDragStart(args);break;case"onDragMove":var clone=args.clone;if(isInArea){clone.style.display="none";_this._onEventDragMove(args);_this._onCalendar=true;}else if(_this._onCalendar){clearTimeout(_this._scrollTimer);clone.style.display="table";_this.setState({dragData:{}});_this._tempStart=0;_this._tempEnd=0;_this._tempAllDay=UNDEFINED;_this._onCalendar=false;}break;case"onDragEnd":if(isInArea){_this._onEventDragEnd(args);}else {_this.setState({dragData:UNDEFINED,isTouchDrag:false});_this._hook("onEventDragEnd",{domEvent:args.domEvent,event:args.event,resource:args.resource,slot:args.slot,source:args.source});}break}}};_this._calcGridDimensions=function(){var s=_this.s;var resources=_this._resources;var isTimeline=_this._isTimeline;var daysNr=_this._daysNr*(isTimeline?1:resources.length);var grid=_this._gridCont;var scrollCont=_this._scrollCont;var rect=grid.getBoundingClientRect();var gridRect=scrollCont.getBoundingClientRect();var gridWidth=isTimeline?rect.width:grid.scrollWidth;_this._gridLeft=s.rtl?rect.right-gridWidth:rect.left;_this._gridRight=s.rtl?rect.right:rect.left+gridWidth;_this._gridTop=rect.top;_this._gridContTop=gridRect.top;_this._gridContBottom=gridRect.bottom;_this._gridContLeft=gridRect.left;_this._gridContRight=gridRect.right;_this._allDayTop=_this._gridContTop;_this._colWidth=gridWidth/daysNr;_this._colHeight=rect.height;};return _this}STBase.prototype._isToday=function(d){return isSameDay(new Date(d),createDate(this.s))};STBase.prototype._formatTime=function(v,timezone){var s=this.s;var format=s.timeFormat;var timeFormat=/a/i.test(format)&&this._stepLabel===ONE_HOUR&&v%ONE_HOUR===0?format.replace(/.[m]+/i,""):format;var d=new Date(+REF_DATE+v);var dd=createDate(s,d.getFullYear(),d.getMonth(),d.getDate(),d.getHours(),d.getMinutes());if(isMBSCDate(dd)&&timezone){dd.setTimezone(timezone);}return formatDate(timeFormat,dd,s)};STBase.prototype._getEventPos=function(event,day,dateKey,displayedMap){var s=this.s;var tzOpt=event.allDay?UNDEFINED:s;var d=createDate(tzOpt,day.getFullYear(),day.getMonth(),day.getDate());var dayIndex=this._dayIndexMap[dateKey];var nextDay=getDateOnly(addDays(d,1));var firstDay=tzOpt?this._firstDayTz:this._firstDay;var lastDay=tzOpt?this._lastDayTz:this._lastDay;var isTimeline=this._isTimeline;var groupByDate=!isTimeline&&!this._groupByResource;var isAllDay=event.allDay;var startTime=this._startTime;var endTime=this._endTime+1;var displayedTime=this._time;var hasSlots=this._hasSlots;var origEndDate=event.endDate;var start=event.start;var startDate=event.startDate;var end=event.end;var endDate=getEndDate(s,isAllDay,startDate,origEndDate);var adjust=+startDate===+endDate?1:0;if(isAllDay||isTimeline){if(!displayedMap.get(event.original)||hasSlots||groupByDate){var startDay=s.startDay;var endDay=s.endDay;var isListing=s.eventList;var isFullDay=isAllDay||isListing;var isMultiDay=!isSameDay(startDate,endDate);var daysNr=this._daysNr;if(isTimeline&&isMultiDay&&getDayMilliseconds(startDate)>=endTime){startDate=createDate(s,+getDateOnly(startDate)+endTime);}var endD=isFullDay?endDate:origEndDate;var leftPos=getEventStart(startDate,startTime,displayedTime,firstDay,startDay,endDay);var width=getEventWidth(startDate,endD,displayedTime,firstDay,lastDay,startTime,endTime,startDay,endDay,isFullDay);if(isTimeline){width=width/daysNr;leftPos=(leftPos+dayIndex*100)/daysNr;}var position=isTimeline?isFullDay?{left:s.rtl?"":(hasSlots?0:dayIndex*100/daysNr)+"%",right:s.rtl?(hasSlots?0:dayIndex*100/daysNr)+"%":"",width:(hasSlots?100:width)+"%"}:{height:this._setRowHeight?"":"100%",left:s.rtl?"":leftPos+"%",right:s.rtl?leftPos+"%":"",top:"0",width:width+"%"}:{width:(isMultiDay&&!groupByDate?width:100)+"%"};var isStartInView=getDayMilliseconds(startDate)<endTime&&endDate>firstDay;var isEndInView=getDayMilliseconds(endDate)+adjust>startTime;if(isFullDay||isMultiDay&&width>0||isStartInView&&isEndInView){displayedMap.set(event.original,true);return {end:end,endDate:endDate,position:position,start:start,startDate:startDate}}}}else {if(startDate<d){start="";startDate=createDate(s,d);}if(endDate>=nextDay){end="";endDate=createDate(s,+nextDay-1);}if(origEndDate>=nextDay){origEndDate=createDate(s,+nextDay-1);}if(getDayMilliseconds(startDate)<endTime&&getDayMilliseconds(endDate)+adjust>startTime&&endDate>=startDate){var eventHeight=getEventHeight(startDate,origEndDate,displayedTime,startTime,endTime);return {cssClass:eventHeight<2?" mbsc-schedule-event-small-height":"",end:end,endDate:endDate,position:{height:eventHeight+"%",top:getEventStart(startDate,startTime,displayedTime)+"%",width:"100%"},start:start,startDate:startDate}}}return};STBase.prototype._getEventData=function(event,d,resource,skipLabels){var s=this.s;var ev=getEventData(s,event,d,true,s.timeFormat,s.allDayText,"",resource,false,this._isTimeline,skipLabels);if(event.allDay&&s.exclusiveEndDates&&+ev.endDate===+ev.startDate){ev.endDate=getDateOnly(addDays(ev.startDate,1));}return ev};STBase.prototype._getEvents=function(eventMap){var _this=this;var s=this.s;var resources=this._resources;var slots=this._slots;var hasSlots=this._hasSlots;var isTimeline=this._isTimeline;var isSchedule=!isTimeline;var events={};var eventMaps=getResourceMap(eventMap,resources,slots,!!s.resources,!!s.slots);var eventLabels={};var firstDay=this._firstDay;var lastDay=this._lastDay;var _loop_3=function(resource){var resourceId=resource.id;var eventDisplayMap=new Map;var eventsForRange=[];var eventRows=0;events[resourceId]={};var _loop_4=function(slot){var slotId=slot.id;var eventsForSlot=eventMaps[resourceId][slotId];var eventKeys=Object.keys(eventsForSlot).sort();events[resourceId][slotId]={all:{allDay:[],events:[]}};if(isSchedule){eventLabels[slotId]=getLabels(s,eventsForSlot,firstDay,lastDay,-1,this_1._daysNr,true,s.startDay,false,s.eventOrder);}var _loop_6=function(dateKey){var d=eventMap[dateKey].date;if(this_1._dayIndexMap[dateKey]!==UNDEFINED&&isInWeek(d.getDay(),s.startDay,s.endDay)){var eventsForDay=sortEvents(eventsForSlot[dateKey])||[];var groups=[];var next_1={};var key_1=!hasSlots&&isTimeline?"all":dateKey;var eventNr=0;if(isSchedule||hasSlots){events[resourceId][slotId][key_1]={allDay:[],events:[]};}for(var _i=0,eventsForDay_1=eventsForDay;_i<eventsForDay_1.length;_i++){var ev=eventsForDay_1[_i];if(!ev.allDay||isTimeline){var event_3=this_1._getEventData(ev,d,resource);var pos=this_1._getEventPos(event_3,d,dateKey,eventDisplayMap);if(pos){event_3.cssClass=pos.cssClass;event_3.position=pos.position;if(isSchedule){event_3.showText=true;calcLayout(s,groups,event_3,next_1,s.eventList);}events[resourceId][slotId][key_1].events.push(event_3);eventsForRange.push(event_3);eventNr++;}}}if(hasSlots&&eventNr>eventRows){eventRows=eventNr;}if(isSchedule){if(eventLabels[slotId][dateKey]){eventLabels[slotId][dateKey].data.forEach((function(_a){var event=_a.event,width=_a.width;if(event){var ev=_this._getEventData(event,d,resource);var pos=_this._getEventPos(ev,d,dateKey,eventDisplayMap);ev.position={width:pos?pos.position.width:width};ev.showText=!!pos;events[resourceId][slotId][key_1].allDay.push(ev);}}));}var _loop_7=function(group){var nr=group.length;group.forEach((function(level,i){for(var _i=0,level_2=level;_i<level_2.length;_i++){var event_4=level_2[_i];var dimension=((next_1[event_4.uid]||nr)-i)/nr*100;event_4.position.width=dimension+"%";event_4.position[s.rtl?"right":"left"]=i*100/nr+"%";event_4.position[s.rtl?"left":"right"]="auto";}}));};for(var _a=0,groups_3=groups;_a<groups_3.length;_a++){var group=groups_3[_a];_loop_7(group);}}}};for(var _i=0,eventKeys_2=eventKeys;_i<eventKeys_2.length;_i++){var dateKey=eventKeys_2[_i];_loop_6(dateKey);}};for(var _i=0,slots_1=slots;_i<slots_1.length;_i++){var slot=slots_1[_i];_loop_4(slot);}if(isTimeline&&!hasSlots){var groups=[];var next_2={};var variableRow_1=this_1._setRowHeight;for(var _a=0,eventsForRange_1=eventsForRange;_a<eventsForRange_1.length;_a++){var event_5=eventsForRange_1[_a];calcLayout(s,groups,event_5,next_2,s.eventList);}var _loop_5=function(group){var nr=group.length;if(variableRow_1&&nr>eventRows){eventRows=nr;}group.forEach((function(level,i){for(var _i=0,level_3=level;_i<level_3.length;_i++){var event_6=level_3[_i];var dimension=((next_2[event_6.uid]||nr)-i)/nr*100;event_6.position.height=variableRow_1?"":dimension+"%";event_6.position.top=variableRow_1?i:i*100/nr+"%";}}));};for(var _b=0,groups_2=groups;_b<groups_2.length;_b++){var group=groups_2[_b];_loop_5(group);}}this_1._eventRows[resourceId]=eventRows||1;};var this_1=this;for(var _i=0,resources_1=resources;_i<resources_1.length;_i++){var resource=resources_1[_i];_loop_3(resource);}return events};STBase.prototype._getInvalids=function(invalidMap){var _a;var s=this.s;var isListing=s.eventList;var invalids={};var invalidMaps=getResourceMap(invalidMap,this._resources,this._slots,!!s.resources,!!s.slots);var invalidKeys=Object.keys(invalidMap||{}).sort();var minDate=isListing?getDateOnly(new Date(s.minDate)):new Date(s.minDate);var maxDate=isListing?getDateOnly(addDays(new Date(s.maxDate),1)):new Date(s.maxDate);var isTimeline=this._isTimeline;for(var _i=0,_b=this._resources;_i<_b.length;_i++){var resource=_b[_i];var resourceId=resource.id;var invalidDisplayedMap=new Map;invalids[resourceId]={};for(var _c=0,_d=this._slots;_c<_d.length;_c++){var slot=_d[_c];var slotId=slot.id;var allInvalids={invalids:[]};invalids[resourceId][slotId]={all:allInvalids};for(var _e=0,invalidKeys_1=invalidKeys;_e<invalidKeys_1.length;_e++){var dateKey=invalidKeys_1[_e];var d=makeDate(dateKey);if(isInWeek(d.getDay(),s.startDay,s.endDay)){var invalidsForDay=invalidMaps[resourceId][slotId][dateKey]||[];var allDailyInvalids={invalids:[]};var dailyInvalids=[];invalids[resourceId][slotId][dateKey]=allDailyInvalids;if(d<minDate){invalidsForDay.push({end:minDate,start:new Date(d)});}if(d>=getDateOnly(maxDate)){invalidsForDay.push({end:new Date(this._lastDay),start:maxDate});}for(var _f=0,invalidsForDay_1=invalidsForDay;_f<invalidsForDay_1.length;_f++){var invalid=invalidsForDay_1[_f];if(isString(invalid)||isDate(invalid)){var start=makeDate(invalid);var end=new Date(start);invalid={allDay:true,end:end,start:start};}var invalidData=this._getEventData(invalid,d,resource,true);invalidData.cssClass="";invalidData.position=UNDEFINED;var pos=this._getEventPos(invalidData,d,dateKey,invalidDisplayedMap);if(pos){if(!isTimeline&&getDayMilliseconds(pos.startDate)===0&&new Date(+pos.endDate+1)>=addDays(d,1)){invalidData.allDay=true;}else {invalidData.position=pos.position;if(getDayMilliseconds(pos.startDate)<=this._startTime){invalidData.cssClass+=" mbsc-schedule-invalid-start";}if(getDayMilliseconds(pos.endDate)>=this._endTime){invalidData.cssClass+=" mbsc-schedule-invalid-end";}}dailyInvalids.push(invalidData);}allDailyInvalids.invalids.push(invalidData);if(invalidData.allDay){if(!isTimeline){invalidData.position={};}allDailyInvalids.allDay=invalidData;allDailyInvalids.invalids=[invalidData];dailyInvalids=[invalidData];break}}(_a=allInvalids.invalids).push.apply(_a,dailyInvalids);}}}}return invalids};STBase.prototype._getColors=function(colorMap){var s=this.s;var colors={};var colorMaps=getResourceMap(colorMap,this._resources,this._slots,!!s.resources,!!s.slots);var colorKeys=Object.keys(colorMap||{}).sort();var hasSlots=this._hasSlots;var isTimeline=this._isTimeline;for(var _i=0,_a=this._resources;_i<_a.length;_i++){var resource=_a[_i];var resourceId=resource.id;var colorDisplayedMap=new Map;colors[resourceId]={};for(var _b=0,_c=this._slots;_b<_c.length;_b++){var slot=_c[_b];var slotId=slot.id;colors[resourceId][slotId]={all:{colors:[]}};for(var _d=0,colorKeys_1=colorKeys;_d<colorKeys_1.length;_d++){var dateKey=colorKeys_1[_d];var d=makeDate(dateKey);if(isInWeek(d.getDay(),s.startDay,s.endDay)){var colorsForDay=colorMaps[resourceId][slotId][dateKey]||[];var key=!hasSlots&&isTimeline?"all":dateKey;if(!isTimeline||hasSlots){colors[resourceId][slotId][key]={colors:[]};}var dailyColors=colors[resourceId][slotId][key];for(var _e=0,colorsForDay_1=colorsForDay;_e<colorsForDay_1.length;_e++){var color=colorsForDay_1[_e];var colorData=this._getEventData(color,d,resource,true);if(colorData.allDay&&!isTimeline){dailyColors.allDay=colorData;}else {var pos=this._getEventPos(colorData,d,dateKey,colorDisplayedMap);if(pos){colorData.position=pos.position;colorData.cssClass="";if(getDayMilliseconds(pos.startDate)<=this._startTime){colorData.cssClass+=" mbsc-schedule-color-start";}if(getDayMilliseconds(pos.endDate)>=this._endTime){colorData.cssClass+=" mbsc-schedule-color-end";}dailyColors.colors.push(colorData);}}colorData.position.background=color.background;colorData.position.color=color.textColor?color.textColor:getTextColor(color.background);}}}}}return colors};STBase.prototype._flattenResources=function(resources,flat,depth,all){var res=resources&&resources.length?resources:[{id:DEF_ID}];for(var _i=0,res_1=res;_i<res_1.length;_i++){var r=res_1[_i];r.depth=depth;flat.push(r);if(r.children){this._hasHierarchy=true;if(!r.collapsed||all){this._flattenResources(r.children,flat,depth+1,all);}}}return flat};STBase.prototype._render=function(s,state){var _this=this;var prevS=this._prevS;var isTimeline=this._isTimeline;var selected=new Date(s.selected);var size=+s.size;var stepLabel=roundStep(s.timeLabelStep);var stepCell=roundStep(s.timeCellStep);var firstDay=s.firstDay;var startDay=s.startDay;var endDay=s.endDay;var resources=s.resources;var slots=s.slots;var resourceChange=s.groupBy!==prevS.groupBy||resources!==prevS.resources;var reloadData=s.rtl!==prevS.rtl||resourceChange;var startTime=this._startTime;var endTime=this._endTime;if(s.startTime!==prevS.startTime||s.endTime!==prevS.endTime||s.timeLabelStep!==prevS.timeLabelStep||s.timeCellStep!==prevS.timeCellStep||s.timeFormat!==prevS.timeFormat||this._startTime===UNDEFINED||this._endTime===UNDEFINED){var start=makeDate(s.startTime||"00:00");var end=new Date(+makeDate(s.endTime||"00:00")-1);this._startTime=startTime=getDayMilliseconds(start);this._endTime=endTime=getDayMilliseconds(end);this._time=endTime-startTime+1;this._timesBetween=getArray(floor(stepCell/stepLabel)-1);this._times=[];this._timeLabels={};var timeStep=stepCell*ONE_MIN;var timesFrom=floor(startTime/timeStep)*timeStep;var _loop_8=function(d){this_2._times.push(d);if(isTimeline){var first=d===timesFrom;this_2._timeLabels[d]=first||d%(stepLabel*ONE_MIN)===0?this_2._formatTime(first?startTime:d):"";this_2._timesBetween.forEach((function(i){var ms=d+(i+1)*stepLabel*ONE_MIN;_this._timeLabels[ms]=_this._formatTime(ms);}));}};var this_2=this;for(var d=timesFrom;d<=endTime;d+=timeStep){_loop_8(d);}reloadData=true;}if(resourceChange||startDay!==prevS.startDay||endDay!==prevS.endDay||slots!==prevS.slots||s.dayNames!==prevS.dayNames||s.eventList!==prevS.eventList||s.getDay!==prevS.getDay||s.refDate!==prevS.refDate||s.rowHeight!==prevS.rowHeight||s.selected!==prevS.selected||s.size!==prevS.size||s.showDays!==prevS.showDays||s.type!==prevS.type||s.weekNumbers!==prevS.weekNumbers){var now=removeTimezone(createDate(s));var isDaily=s.type==="day";var isMonthly=s.type==="month";var isYearly=s.type==="year";var firstGridDay=void 0;var lastGridDay=void 0;var firstHeaderDay=void 0;var lastHeaderDay=void 0;if(size>1||isYearly||isMonthly){var opt={eventRange:s.type,eventRangeSize:size,firstDay:firstDay,getDate:s.getDate,getDay:s.getDay,getMonth:s.getMonth,getYear:s.getYear,refDate:s.refDate};var pageIndex=getPageIndex(selected,opt);firstGridDay=getFirstPageDay(pageIndex,opt);lastGridDay=getFirstPageDay(pageIndex+1,opt);if(s.type==="week"){firstGridDay=addDays(firstGridDay,startDay-firstDay+(startDay<firstDay?7:0));lastGridDay=addDays(firstGridDay,7*size+endDay-startDay+1-(endDay<startDay?0:7));}firstHeaderDay=firstGridDay;lastHeaderDay=lastGridDay;}else {var firstWeekDay=getFirstDayOfWeek(selected,s);firstHeaderDay=addDays(firstWeekDay,startDay-firstDay+(startDay<firstDay?7:0));lastHeaderDay=addDays(firstHeaderDay,endDay-startDay+1+(endDay<startDay?7:0));firstGridDay=isDaily?getDateOnly(selected):firstHeaderDay;lastGridDay=isDaily?addDays(firstGridDay,1):lastHeaderDay;}this._isMulti=size>1||isYearly;this._hasHierarchy=false;this._resources=this._flattenResources(resources,[],0,true);this._visibleResources=this._flattenResources(resources,[],0);this._hasSlots=isTimeline&&(!!slots&&slots.length>0);this._slots=slots&&slots.length?slots:[{id:DEF_ID}];this._isSingleResource=this._resources.length===1;this._groupByResource=s.groupBy!=="date"&&!(isDaily&&size<2)||this._isSingleResource;this._firstDay=firstGridDay;this._lastDay=lastGridDay;this._firstDayTz=createDate(s,firstGridDay.getFullYear(),firstGridDay.getMonth(),firstGridDay.getDate());this._lastDayTz=createDate(s,lastGridDay.getFullYear(),lastGridDay.getMonth(),lastGridDay.getDate());this._selectedDay=+getDateOnly(selected);this._setRowHeight=s.eventList||s.rowHeight!=="equal";this._shouldAnimateScroll=prevS.selected!==UNDEFINED;this._showTimeIndicator=(!isTimeline||isTimeline&&!isMonthly&&!isYearly)&&!s.eventList&&(isDaily&&size<2?isSameDay(now,selected):firstGridDay<=now&&lastGridDay>=now);this._dayIndexMap={};this._days=[];this._headerDays=[];var i=0;var month=-1;var monthIndex=-1;var monthText="";var week=-1;var weekIndex=-1;var weekText="";var first=firstGridDay;var last=lastGridDay;var isDayViewOnly=isDaily&&size<2;var monthPos=s.dateFormat.search(/m/i);var yearPos=s.dateFormat.search(/y/i);var yearFirst=yearPos<monthPos;if(!isTimeline&&isDayViewOnly){first=firstHeaderDay;last=lastHeaderDay;}for(var d=getDateOnly(first);d<getDateOnly(last);d.setDate(d.getDate()+1)){if(isInWeek(d.getDay(),startDay,endDay)){var dateKey=getDateStr(d);var monthTitle="";var weekTitle="";if(isTimeline){var newWeek=s.getWeekNumber(addDays(d,(7-firstDay+1)%7));var newMonth=s.getMonth(d);if(month!==newMonth){monthIndex=i;month=newMonth;var year=s.getYear(d);var monthName=s.monthNames[month];monthText=yearFirst?year+" "+monthName:monthName+" "+year;monthTitle=monthText;if(i>0){this._days[i-1].lastOfMonth=true;}}if(week!==newWeek){weekIndex=i;week=newWeek;weekText=s.weekText.replace(/{count}/,week);weekTitle=weekText;if(i>0){this._days[i-1].lastOfWeek=true;}}}var dayData={date:new Date(d),dateIndex:i,dateKey:dateKey,dateText:formatDate(isMonthly||this._isMulti?"D DDD":s.dateFormatLong,d,s),day:s.getDay(d),label:formatDate("DDDD, MMMM D, YYYY",d,s),monthIndex:monthIndex,monthText:monthText,monthTitle:monthTitle,timestamp:+getDateOnly(d),weekIndex:weekIndex,weekText:weekText,weekTitle:weekTitle};if(isDayViewOnly){this._headerDays.push(dayData);}if(!isDayViewOnly||this._selectedDay===+d){this._days.push(dayData);}this._dayIndexMap[dateKey]=i;i++;}}this._daysNr=isDayViewOnly?1:i;reloadData=true;}if(s.colorsMap!==prevS.colorsMap||reloadData){this._colors=this._getColors(s.colorsMap);}if(s.eventMap!==prevS.eventMap||reloadData||!this._events){this._eventRows={};this._events=this._getEvents(s.eventMap);}if(s.invalidsMap!==prevS.invalidsMap||reloadData){this._invalids=this._getInvalids(s.invalidsMap);}var checkEventHeight=isTimeline&&s.eventMap!==prevS.eventMap;if(s.height!==prevS.height||s.width!==prevS.width||checkEventHeight||reloadData){this._shouldCheckSize=isBrowser&&!!s.height&&!!s.width;}if(s.scroll!==prevS.scroll){this._shouldScroll=true;}this._hasSideSticky=hasSticky&&!s.rtl;this._hasSticky=hasSticky;this._stepCell=stepCell*ONE_MIN;this._stepLabel=stepLabel*ONE_MIN;this._dayNames=state.dayNameWidth>49?s.dayNamesShort:s.dayNamesMin;this._displayTime=stepLabel<1440;this._eventHeight=s.eventList?(state.eventHeight||18)+2:state.eventHeight||42;this._headerClass=" mbsc-timeline-header-placeholder mbsc-timeline-header-row-"+(1+(this._isMulti?1:0)+(this._displayTime||this._hasSlots?1:0)+(s.weekNumbers?1:0));if(isTimeline){var daysBatch=[];var daysBatchNr=this._daysBatchNr===UNDEFINED?constrain(floor(this._stepCell/(this._time/30)),1,30):this._daysBatchNr;var dayIndex=this._dayIndexMap[getDateStr(selected)]||0;var batchIndexX=state.batchIndexX!==UNDEFINED?state.batchIndexX:round(dayIndex/daysBatchNr);var batchDayIndex=Math.min(batchIndexX*daysBatchNr,this._daysNr-1);var batchStart=Math.max(0,batchDayIndex-floor(daysBatchNr*3/2));var batchEnd=Math.min(batchStart+3*daysBatchNr,this._daysNr);var batchStartDay=this._days[batchStart].date;var batchEndDay=addDays(this._days[batchEnd-1].date,1);for(var i=batchStart;i<batchEnd;i++){daysBatch.push(this._days[i]);}this._batchStart=createDate(s,batchStartDay.getFullYear(),batchStartDay.getMonth(),batchStartDay.getDate());this._batchEnd=createDate(s,batchEndDay.getFullYear(),batchEndDay.getMonth(),batchEndDay.getDate());this._daysBatch=daysBatch;this._daysBatchNr=daysBatchNr;this._placeholderSizeX=state.dayWidth*round(Math.max(0,batchDayIndex-daysBatchNr*3/2))||0;var gridContHeight_1=(state.scrollContHeight||0)-(state.headerHeight||0);var rowHeight_1=state.rowHeight||52;var resourcesBatch=[];var batchIndexY=state.batchIndexY||0;var visibleResources=this._visibleResources;var virtualPagesY_1=[];var pageIndex_1=-1;var gridHeight_1=0;if(gridContHeight_1){visibleResources.forEach((function(r,i){var resHeight=_this._setRowHeight?Math.max(_this._eventRows[r.id]*_this._eventHeight+10,52):rowHeight_1;var currPageIndex=floor(gridHeight_1/gridContHeight_1);if(currPageIndex!==pageIndex_1){virtualPagesY_1.push({startIndex:i,top:gridHeight_1});pageIndex_1=currPageIndex;}gridHeight_1+=resHeight;}));}var startPage=virtualPagesY_1[batchIndexY-1];var endPage=virtualPagesY_1[batchIndexY+2];var batchStartY=startPage?startPage.startIndex:0;var batchEndY=endPage?endPage.startIndex:gridHeight_1?visibleResources.length:30;if(gridHeight_1&&!state.hasScrollY){batchStartY=0;batchEndY=visibleResources.length;}for(var i=batchStartY;i<batchEndY;i++){var res=visibleResources[i];if(res){resourcesBatch.push(res);}}this._gridHeight=gridHeight_1;this._virtualPagesY=virtualPagesY_1;this._resourcesBatch=resourcesBatch;this._rowStartIndex=batchStartY;this._placeholderSizeY=startPage?startPage.top:0;}};STBase.prototype._mounted=function(){var _this=this;var allowCreate;var allowStart;var validTarget;this._unlisten=gestureListener(this._el,{onDoubleClick:function(args){var s=_this.s;if(validTarget&&s.clickToCreate&&s.clickToCreate!=="single"){args.click=true;_this._onEventDragStart(args);_this._onEventDragEnd(args);}},onEnd:function(args){if(!allowCreate&&allowStart&&_this.s.clickToCreate==="single"){allowCreate=true;args.click=true;_this._onEventDragStart(args);}if(allowCreate){args.domEvent.preventDefault();_this._onEventDragEnd(args);}clearTimeout(_this._touchTimer);allowCreate=false;allowStart=false;},onMove:function(args){var s=_this.s;if(allowCreate&&s.dragToCreate){args.domEvent.preventDefault();_this._onEventDragMove(args);}else if(allowStart&&s.dragToCreate&&(Math.abs(args.deltaX)>7||Math.abs(args.deltaY)>7)){allowCreate=true;_this._onEventDragStart(args);}else {clearTimeout(_this._touchTimer);}},onStart:function(args){var s=_this.s;args.create=true;args.click=false;if(!allowCreate&&(s.dragToCreate||s.clickToCreate)){var targetClasses=args.domEvent.target&&args.domEvent.target.classList||[];validTarget=targetClasses.contains("mbsc-schedule-item")||targetClasses.contains("mbsc-schedule-all-day-item")||targetClasses.contains("mbsc-timeline-column");if(validTarget){if(args.isTouch&&s.dragToCreate){_this._touchTimer=setTimeout((function(){_this._onEventDragStart(args);_this._onEventDragModeOn(args);allowCreate=true;}),350);}else {allowStart=!args.isTouch;}}}}});this._unsubscribe=subscribeExternalDrag(this._onExternalDrag);};STBase.prototype._updated=function(){var _this=this;if(this._shouldCheckSize){ngSetTimeout(this,(function(){var resCont=_this._resCont;var resContWidth=resCont?resCont.offsetWidth:0;var headerCont=_this._headerCont;var headerHeight=headerCont.offsetHeight;var scrollCont=_this._scrollCont;var scrollContWidth=scrollCont.offsetWidth;var scrollContHeight=scrollCont.offsetHeight;var scrollClientWidth=scrollCont.clientWidth;var scrollClientHeight=scrollCont.clientHeight;var scrollBarSizeY=scrollContWidth-scrollClientWidth;var scrollBarSizeX=scrollContHeight-scrollClientHeight;var gridContWidth=scrollContWidth-resContWidth;var gridContHeight=scrollContHeight-headerHeight;var hasScrollY=scrollCont.scrollHeight>scrollClientHeight;var hasScrollX=scrollCont.scrollWidth>scrollClientWidth;var cellHeight;var cellWidth;var dayWidth;var dayNameWidth;var gridWidth;var rowHeight;var eventHeight=_this.state.eventHeight;if(_this._isTimeline){var day=scrollCont.querySelector(".mbsc-timeline-day");var gridRow=scrollCont.querySelector(".mbsc-timeline-row");dayWidth=day?day.offsetWidth:64;rowHeight=gridRow?gridRow.offsetHeight:52;if(dayWidth*_this._daysNr<gridContWidth){hasScrollX=false;}if(_this._gridHeight&&_this._gridHeight<gridContHeight){hasScrollY=false;}dayWidth=hasScrollX?dayWidth:round(gridContWidth/_this._daysNr);gridWidth=hasScrollX?dayWidth*_this._daysNr:gridContWidth;cellWidth=_this._stepCell*dayWidth/_this._time;_this._gridWidth=gridWidth;_this._daysBatchNr=Math.max(1,Math.ceil(gridContWidth/dayWidth));if(!_this._hasSticky){headerCont.style[_this.s.rtl?"left":"right"]=scrollBarSizeY+"px";}if(!_this._hasSideSticky&&resCont){resCont.style.bottom=scrollBarSizeX+"px";}if(_this._setRowHeight){var event_7=scrollCont.querySelector(".mbsc-schedule-event");if(event_7){eventHeight=event_7.clientHeight;}}}else {var gridCol=_this._el.querySelector(".mbsc-schedule-column-inner");var dayName=_this._el.querySelector(".mbsc-schedule-header-item");cellHeight=_this._stepCell*gridCol.offsetHeight/_this._time;dayNameWidth=dayName?dayName.offsetWidth:0;}_this._onScroll();_this._shouldCheckSize=false;_this.setState({cellHeight:cellHeight,cellWidth:cellWidth,dayNameWidth:dayNameWidth,dayWidth:dayWidth,eventHeight:eventHeight,hasScrollX:hasScrollX,hasScrollY:hasScrollY,headerHeight:headerHeight,rowHeight:rowHeight,scrollContHeight:hasScrollX?scrollClientHeight:scrollContHeight});}));}if(this._shouldScroll&&(this.state.dayWidth||!this._isTimeline)){ngSetTimeout(this,(function(){_this._scrollToTime(_this._shouldAnimateScroll);}));this._shouldScroll=false;}};STBase.prototype._destroy=function(){this._unlisten();unsubscribeExternalDrag(this._unsubscribe);};STBase.prototype._getDragDates=function(event,resourceId,slotId){var s=this.s;var dates={};var dragDisplayedMap=new Map;var first=event.allDay?this._firstDay:this._firstDayTz;var start=event.startDate;var end=event.endDate;start=getDateOnly(start);start=start<first?first:start;end=getEndDate(s,event.allDay||s.eventList,start,end);while(start<=end){var eventForDay=__assign({},event);var dateKey=getDateStr(start);var pos=isInWeek(start.getDay(),s.startDay,s.endDay)&&this._getEventPos(event,start,dateKey,dragDisplayedMap);if(pos){var key=this._isTimeline&&!this._hasSlots?"all":dateKey;eventForDay.date=+getDateOnly(start,true);eventForDay.cssClass=pos.cssClass;eventForDay.start=pos.start;eventForDay.end=pos.end;eventForDay.position=pos.position;dates[resourceId+"__"+(this._isTimeline?slotId+"__":"")+key]=eventForDay;}start=addDays(start,1);}return dates};STBase.prototype._getGridTime=function(day,posX,posY,dayIndex,timeStep){var ms=step(this._isTimeline?floor(this._time*(posX-dayIndex*this._colWidth)/this._colWidth):floor(this._time*(posY-8)/(this._colHeight-16)),timeStep*ONE_MIN);var time=new Date(+REF_DATE+this._startTime+ms);return createDate(this.s,day.getFullYear(),day.getMonth(),day.getDate(),time.getHours(),time.getMinutes())};STBase.prototype._scrollToTime=function(animate){var el=this._scrollCont;var gridCont=this._gridCont;var isTimeline=this._isTimeline;if(el){var s=this.s;var targetDate=createDate(s,s.selected);targetDate.setHours(s.eventList?0:targetDate.getHours(),0);var eventStart=getEventStart(targetDate,this._startTime,this._time*(isTimeline?this._daysNr:1));var left=getGridDayDiff(this._firstDay,targetDate,s.startDay,s.endDay)*100/this._daysNr;var width=isTimeline?gridCont.offsetWidth:gridCont.scrollWidth;var newScrollPosX=width*(left+(isTimeline?eventStart:0))/100;var newScrollPosY=void 0;if(!isTimeline){var gridCol=el.querySelector(".mbsc-schedule-column-inner");newScrollPosY=gridCol.offsetHeight*eventStart/100;if(this._groupByResource&&!this._isSingleResource){newScrollPosX=UNDEFINED;}}smoothScroll(el,newScrollPosX,newScrollPosY,animate,s.rtl);}};STBase.decorators=[{type:core.Directive,args:[{selector:"[mbsc-st-b]"}]}];return STBase}(BaseComponent);var stateObservables$1={};var ScheduleEventBase=/*#__PURE__*/function(_super){__extends(ScheduleEventBase,_super);function ScheduleEventBase(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this._onClick=function(ev){_this._triggerClick("onClick",ev);var s=_this.s;var observable=stateObservables$1[s.event.uid];if(observable&&s.selected){observable.next({hasFocus:false});}};_this._onRightClick=function(ev){_this._triggerClick("onRightClick",ev);};_this._onDocTouch=function(ev){unlisten(_this._doc,TOUCH_START,_this._onDocTouch);unlisten(_this._doc,MOUSE_DOWN,_this._onDocTouch);_this._isDrag=false;_this._hook("onDragModeOff",{event:_this.s.event.original});};_this._updateState=function(args){_this.setState(args);};return _this}ScheduleEventBase.prototype._render=function(s,state){var event=s.event;var day=new Date(event.date);var pos=event.position;var startDate=event.startDate;var endDate=getEndDate(s,event.allDay,startDate,event.endDate);var isTimeline=s.isTimeline;var isTimelineListing=s.isListing;var isAllDay=isTimelineListing||event.allDay;var isMultiDay=!isSameDay(startDate,endDate);var isMultiDayStart=isMultiDay&&isSameDay(startDate,day);var isMultiDayEnd=isMultiDay&&isSameDay(endDate,day);var allDayStyle=isAllDay&&(!isTimeline||isTimelineListing);var host=isTimeline?"timeline":"schedule";var gridStartTime=s.gridStartTime;var gridEndTime=s.gridEndTime;var startTime=getDayMilliseconds(startDate);var endTime=getDayMilliseconds(endDate);var hasSlots=isTimeline&&s.slot!==DEF_ID;var lastDay=s.singleDay?addDays(day,1):new Date(s.lastDay);var isEndInWeek=isInWeek(endDate.getDay(),s.startDay,s.endDay);this._isStart=hasSlots||!isMultiDay||isMultiDayStart;this._isEnd=hasSlots||!isMultiDay||(isAllDay||isTimeline?endDate<lastDay&&isEndInWeek:isMultiDayEnd);if(!hasSlots&&!isAllDay&&(gridStartTime>startTime||gridEndTime<startTime)){this._isStart=false;}if(!hasSlots&&!isAllDay&&(gridEndTime<endTime||gridStartTime>endTime)){this._isEnd=false;}this._isDrag=this._isDrag||s.isDrag;this._content=UNDEFINED;this._rangeText=event.start+" - "+event.end;this._isAllDay=allDayStyle;this._host=host;if(event.allDay||!isTimeline&&isMultiDay&&!isMultiDayStart&&!isMultiDayEnd){this._rangeText=event.allDayText;}this._cssClass="mbsc-schedule-event"+this._theme+this._rtl+(isTimeline?" mbsc-timeline-event":"")+(isTimelineListing?" mbsc-timeline-event-listing":"")+(this._isStart?" mbsc-"+host+"-event-start":"")+(this._isEnd?" mbsc-"+host+"-event-end":"")+(allDayStyle?" mbsc-schedule-event-all-day":"")+(hasSlots?" mbsc-timeline-event-slot":"")+(state.hasFocus&&!s.inactive&&!s.selected||s.selected?" mbsc-schedule-event-active":"")+(state.hasHover&&!s.inactive&&!this._isDrag?" mbsc-schedule-event-hover":"")+(s.isDrag?" mbsc-schedule-event-dragging"+(isTimeline?" mbsc-timeline-event-dragging":""):"")+(s.hidden?" mbsc-schedule-event-hidden":"")+(s.inactive?" mbsc-schedule-event-inactive":"")+(event.original.editable===false?" mbsc-readonly-event":"");this._style=__assign({},pos,{color:event.color,top:s.eventHeight&&pos.top!==UNDEFINED?pos.top*s.eventHeight+"px":pos.top});var renderer=s.render||s.renderContent;var text;if(renderer){var content=renderer(event);if(isString(content)){text=content;}else {this._content=content;}}else if(!s.contentTemplate){text=event.html;}if(text!==this._text){this._text=text;this._html=text?this._safeHtml(text):UNDEFINED;this._shouldEnhance=text&&!!renderer;}};ScheduleEventBase.prototype._mounted=function(){var _this=this;var id=this.s.event.uid;var resizeDir;var observable=stateObservables$1[id];var touchTimer;if(!observable){observable=new Observable;stateObservables$1[id]=observable;}this._unsubscribe=observable.subscribe(this._updateState);this._doc=getDocument(this._el);this._unlisten=gestureListener(this._el,{keepFocus:true,onBlur:function(){observable.next({hasFocus:false});},onDoubleClick:function(ev){ev.domEvent.stopPropagation();_this._triggerClick("onDoubleClick",ev.domEvent);},onEnd:function(ev){if(_this._isDrag){var s=_this.s;var args=__assign({},ev);args.domEvent.preventDefault();args.event=s.event;args.resource=s.resource;args.slot=s.slot;if(s.resize&&resizeDir){args.resize=true;args.direction=resizeDir;}else if(s.drag){args.drag=true;}_this._hook("onDragEnd",args);if(!s.isDrag){_this._isDrag=false;}if(_this._el&&args.moved){_this._el.blur();}}clearTimeout(touchTimer);resizeDir=UNDEFINED;},onFocus:function(){observable.next({hasFocus:true});},onHoverIn:function(ev){observable.next({hasHover:true});_this._triggerClick("onHoverIn",ev);},onHoverOut:function(ev){observable.next({hasHover:false});_this._triggerClick("onHoverOut",ev);},onKeyDown:function(ev){var event=_this.s.event.original;switch(ev.keyCode){case ENTER:case SPACE:_this._el.click();ev.preventDefault();break;case BACKSPACE:case DELETE:if(event.editable!==false){_this._hook("onDelete",{domEvent:ev,event:event,source:_this._host});}break}},onMove:function(ev){var s=_this.s;var args=__assign({},ev);args.event=s.event;args.resource=s.resource;args.slot=s.slot;if(resizeDir){args.resize=true;args.direction=resizeDir;}else if(s.drag){args.drag=true;}else {return}if(s.event.original.editable===false){return}if(_this._isDrag||!args.isTouch){args.domEvent.preventDefault();}if(_this._isDrag){_this._hook("onDragMove",args);}else if(Math.abs(args.deltaX)>7||Math.abs(args.deltaY)>7){clearTimeout(touchTimer);if(!args.isTouch){_this._isDrag=true;_this._hook("onDragStart",args);}}},onStart:function(ev){var s=_this.s;var args=__assign({},ev);var target=args.domEvent.target;args.event=s.event;args.resource=s.resource;args.slot=s.slot;if(s.resize&&target.classList.contains("mbsc-schedule-event-resize")){resizeDir=target.classList.contains("mbsc-schedule-event-resize-start")?"start":"end";args.resize=true;args.direction=resizeDir;}else if(s.drag){args.drag=true;}else {return}if(s.event.original.editable===false){return}if(_this._isDrag){args.domEvent.stopPropagation();_this._hook("onDragStart",args);}else if(args.isTouch){touchTimer=setTimeout((function(){_this._hook("onDragModeOn",args);_this._hook("onDragStart",args);_this._isDrag=true;}),350);}}});if(this._isDrag){listen(this._doc,TOUCH_START,this._onDocTouch);listen(this._doc,MOUSE_DOWN,this._onDocTouch);}};ScheduleEventBase.prototype._destroy=function(){if(this._el){this._el.blur();}if(this._unsubscribe){var id=this.s.event.uid;var observable=stateObservables$1[id];if(observable){observable.unsubscribe(this._unsubscribe);if(!observable.nr){delete stateObservables$1[id];}}}if(this._unlisten){this._unlisten();}unlisten(this._doc,TOUCH_START,this._onDocTouch);unlisten(this._doc,MOUSE_DOWN,this._onDocTouch);};ScheduleEventBase.prototype._triggerClick=function(name,domEvent){var s=this.s;this._hook(name,{date:s.event.date,domEvent:domEvent,event:s.event.original,resource:s.resource,slot:s.slot,source:this._host});};ScheduleEventBase.decorators=[{type:core.Directive,args:[{selector:"[mbsc-sch-ev-b]"}]}];return ScheduleEventBase}(BaseComponent);var SchedulerBase=/*#__PURE__*/function(_super){__extends(SchedulerBase,_super);function SchedulerBase(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this._onScroll=function(){var grid=_this._scrollCont;if(grid){var scrollTop=grid.scrollTop;var scrollLeft="translateX("+-grid.scrollLeft+"px)";var timeCont=_this._timeCont;var allDay=_this._allDayCont;var header=_this._headerCont;var transform=(jsPrefix?jsPrefix+"T":"t")+"ransform";if(allDay){allDay.style[transform]=scrollLeft;}if(timeCont){timeCont.style.marginTop=-scrollTop+"px";}if(header){header.style[transform]=scrollLeft;}if(scrollTop===0){_this.setState({showShadow:false});}else if(!_this.state.showShadow){_this.setState({showShadow:true});}}};return _this}SchedulerBase.prototype._render=function(s,state){_super.prototype._render.call(this,s,state);var prevS=this._prevS;var timezones=s.timezones;var stepCell=this._stepCell/ONE_MIN;var startMinutes=floor(this._startTime/ONE_MIN)%stepCell;var endMinutes=floor(this._endTime/ONE_MIN)%stepCell+1;if(timezones!==prevS.timezones){this._timeWidth=timezones?{width:timezones.length*4.25+"em"}:UNDEFINED;this._timezones=UNDEFINED;if(timezones){var tz=[];for(var _i=0,timezones_1=timezones;_i<timezones_1.length;_i++){var t=timezones_1[_i];var tzProps=void 0;if(isString(t)){var d=createDate(s,1970,0,1);if(isMBSCDate(d)){d.setTimezone(t);}var offset=d.getTimezoneOffset()/60*-1;tzProps={label:"UTC"+(offset>0?"+":"")+offset,timezone:t};}else {tzProps=t;}tz.push(tzProps);}this._timezones=tz;}}this._largeDayNames=state.dayNameWidth>99;this._startCellStyle=startMinutes%stepCell!==0?{height:(state.cellHeight||50)*((stepCell-startMinutes)%stepCell/stepCell)+"px"}:UNDEFINED;this._endCellStyle=endMinutes%stepCell!==0?{height:(state.cellHeight||50)*(endMinutes%stepCell)/stepCell+"px"}:UNDEFINED;};SchedulerBase.decorators=[{type:core.Directive,args:[{selector:"[mbsc-sch-b]"}]}];return SchedulerBase}(STBase);var TimeIndicatorBase=/*#__PURE__*/function(_super){__extends(TimeIndicatorBase,_super);function TimeIndicatorBase(){return _super!==null&&_super.apply(this,arguments)||this}TimeIndicatorBase.prototype._mounted=function(){var _this=this;clearInterval(this._timer);this._timer=setInterval((function(){if(_this._zone){_this._zone.runOutsideAngular((function(){_this.forceUpdate();}));}else {_this.forceUpdate();}}),1e4);};TimeIndicatorBase.prototype._destroy=function(){clearInterval(this._timer);};TimeIndicatorBase.prototype._render=function(s){var now=createDate(s);var rtl=s.rtl;var displayedDays=s.displayedDays;var displayedTime=s.displayedTime;var startTime=s.startTime;var time=floor(getDayMilliseconds(now)/ONE_MIN)*ONE_MIN;var timezones=s.timezones;var formatOpt={amText:s.amText,pmText:s.pmText};if(timezones&&isMBSCDate(now)){this._times=[];for(var _i=0,timezones_1=timezones;_i<timezones_1.length;_i++){var t=timezones_1[_i];var tzNow=now.clone();tzNow.setTimezone(t.timezone);this._times.push(formatDate(s.timeFormat,tzNow,formatOpt));}}else {this._time=formatDate(s.timeFormat,now,formatOpt);}this._cssClass="mbsc-schedule-time-indicator mbsc-schedule-time-indicator-"+s.orientation+this._theme+this._rtl+" "+(time<startTime||time>startTime+displayedTime||!isInWeek(now.getDay(),s.startDay,s.endDay)?" mbsc-hidden":"");var dayIndex=getGridDayDiff(s.firstDay,now,s.startDay,s.endDay);if(s.orientation==="x"){var horiz=dayIndex*100/displayedDays+"%";var multiPos=timezones&&4.25*timezones.length+"em";this._pos={left:timezones&&!rtl?multiPos:UNDEFINED,right:timezones&&rtl?multiPos:UNDEFINED,top:(time-startTime)*100/displayedTime+"%"};this._dayPos={left:rtl?"":horiz,right:rtl?horiz:"",width:100/displayedDays+"%"};}else {var pos=(dayIndex*displayedTime+time-startTime)*100/(displayedDays*displayedTime)+"%";this._pos={left:rtl?"":pos,right:rtl?pos:""};}};TimeIndicatorBase.decorators=[{type:core.Directive,args:[{selector:"[mbsc-ti-b]"}]}];return TimeIndicatorBase}(BaseComponent);var WeekDayBase=/*#__PURE__*/function(_super){__extends(WeekDayBase,_super);function WeekDayBase(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this._onClick=function(){var s=_this.s;if(s.selectable){s.onClick(s.timestamp);}};return _this}WeekDayBase.prototype._render=function(s,state){var date=new Date(s.timestamp);this._cssClass="mbsc-schedule-header-item "+this._className+this._theme+this._rtl+this._hb+(s.largeNames?" mbsc-schedule-header-item-large":"")+(s.selected?" mbsc-selected":"")+(state.hasHover?" mbsc-hover":"");this._data={date:date,events:s.events,resource:s.resource,selected:s.selected};this._day=date.getDay();};WeekDayBase.prototype._mounted=function(){var _this=this;this._unlisten=gestureListener(this._el,{onHoverIn:function(){if(_this.s.selectable){_this.setState({hasHover:true});}},onHoverOut:function(){if(_this.s.selectable){_this.setState({hasHover:false});}}});};WeekDayBase.prototype._destroy=function(){if(this._unlisten){this._unlisten();}};WeekDayBase.decorators=[{type:core.Directive,args:[{selector:"[mbsc-wd-b]"}]}];return WeekDayBase}(BaseComponent);var TimelineBase=/*#__PURE__*/function(_super){__extends(TimelineBase,_super);function TimelineBase(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this._isTimeline=true;_this._onScroll=function(){var s=_this.s;var isRtl=s.rtl;var state=_this.state;var gridWidth=_this._gridWidth;var scrollCont=_this._scrollCont;var scrollTop=scrollCont.scrollTop;var scrollLeft=scrollCont.scrollLeft;var resCont=_this._resCont;var header=_this._headerCont;var stickyHeader=_this._stickyHeader;var daysNr=_this._daysNr;var rtl=isRtl?-1:1;var margin=isRtl?"marginRight":"marginLeft";var batchIndexX=round(scrollLeft*rtl*(daysNr/_this._daysBatchNr)/gridWidth);var virtualPagesY=_this._virtualPagesY||[];var batchIndexY=0;var i=0;while(i<virtualPagesY.length&&virtualPagesY[i].top<=scrollTop){batchIndexY=i;i++;}if(resCont&&(!hasSticky||isRtl)){resCont.scrollTop=scrollTop;}if(stickyHeader&&hasSticky){var headerStyle=stickyHeader.style;headerStyle.marginTop=scrollTop<0?-scrollTop+"px":"";headerStyle[margin]=scrollLeft*rtl<0?-scrollLeft*rtl+"px":"";}if(header&&gridWidth){var days_1=_this._days;var dayWidth_1=gridWidth/daysNr;var dayIndex_1=constrain(floor(scrollLeft*rtl/dayWidth_1),0,daysNr-1);var updateStickyLabel=function(label,key){if(label&&dayWidth_1){label.textContent=days_1[dayIndex_1][key+"Text"];var labelWidth=label.offsetWidth;var labelStyle=label.style;var nextDayIndex=constrain(floor((scrollLeft*rtl+labelWidth)/dayWidth_1),0,daysNr-1);if(days_1[dayIndex_1][key+"Index"]!==days_1[nextDayIndex][key+"Index"]){labelStyle[margin]=-(scrollLeft*rtl+labelWidth-days_1[nextDayIndex][key+"Index"]*dayWidth_1+1)+"px";}else {labelStyle[margin]="";}}};updateStickyLabel(_this._stickyDate,"date");updateStickyLabel(_this._stickyMonth,"month");updateStickyLabel(_this._stickyWeek,"week");if(!hasSticky){header.scrollLeft=scrollLeft;}}if(gridWidth&&(batchIndexX!==state.batchIndexX||batchIndexY!==state.batchIndexY)){_this.setState({batchIndexX:batchIndexX,batchIndexY:batchIndexY});}};return _this}TimelineBase.prototype._onParentClick=function(resource){resource.collapsed=!resource.collapsed;this._visibleResources=this._flattenResources(this.s.resources,[],0);this._shouldCheckSize=true;this.forceUpdate();};TimelineBase.prototype._render=function(s,state){_super.prototype._render.call(this,s,state);var stepCell=this._stepCell/ONE_MIN;var startMinutes=floor(this._startTime/ONE_MIN)%stepCell;var endMinutes=floor(this._endTime/ONE_MIN)%stepCell+1;this._startCellStyle=this._displayTime&&startMinutes%stepCell!==0?{width:(state.cellWidth||64)*((stepCell-startMinutes)%stepCell/stepCell)+"px"}:UNDEFINED;this._endCellStyle=this._displayTime&&endMinutes%stepCell!==0?{width:(state.cellWidth||64)*(endMinutes%stepCell)/stepCell+"px"}:UNDEFINED;};TimelineBase.decorators=[{type:core.Directive,args:[{selector:"[mbsc-tml-b]"}]}];return TimelineBase}(STBase);var DraggableDirective=/*#__PURE__*/function(_super){__extends(DraggableDirective,_super);function DraggableDirective(){return _super!==null&&_super.apply(this,arguments)||this}DraggableDirective.decorators=[{type:core.Directive,args:[{selector:"[mbsc-draggable]"}]}];DraggableDirective.propDecorators={dragData:[{type:core.Input}]};return DraggableDirective}(DraggableBase);var MbscDraggableModule=/*#__PURE__*/function(){function MbscDraggableModule(){}MbscDraggableModule.decorators=[{type:core.NgModule,args:[{declarations:[DraggableBase,DraggableDirective],exports:[DraggableDirective],imports:[common.CommonModule]}]}];return MbscDraggableModule}();var ListItemBase=/*#__PURE__*/function(_super){__extends(ListItemBase,_super);function ListItemBase(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this._onClick=function(ev){_this._hook("onClick",{domEvent:ev});if(_this.s.selected){_this.setState({hasFocus:false});}};return _this}ListItemBase.prototype._mounted=function(){var _this=this;var isDrag;var touchTimer;this._unlisten=gestureListener(this._el,{click:true,keepFocus:true,onBlur:function(){_this.setState({hasFocus:false});},onEnd:function(ev){if(isDrag){var args=__assign({},ev);args.domEvent.preventDefault();args.data=_this.s.data;args.drag=true;_this._hook("onDragEnd",args);isDrag=false;}clearTimeout(touchTimer);},onFocus:function(){_this.setState({hasFocus:true});},onHoverIn:function(ev){if(_this.s.actionable){_this.setState({hasHover:true});}_this._hook("onHoverIn",{domEvent:ev});},onHoverOut:function(ev){_this.setState({hasHover:false});_this._hook("onHoverOut",{domEvent:ev});},onKeyDown:function(ev){var event=_this.s.data;switch(ev.keyCode){case ENTER:case SPACE:_this._el.click();ev.preventDefault();break;case BACKSPACE:case DELETE:if(event&&event.editable!==false){_this._hook("onDelete",{domEvent:ev,event:event,source:"agenda"});}break}},onMove:function(ev){var s=_this.s;var args=__assign({},ev);args.data=s.data;args.drag=true;args.external=true;if(isDrag||!args.isTouch){args.domEvent.preventDefault();}if(isDrag){_this._hook("onDragMove",args);}else if(Math.abs(args.deltaX)>7||Math.abs(args.deltaY)>7){clearTimeout(touchTimer);if(!args.isTouch&&s.drag&&s.data.editable!==false){isDrag=true;_this._hook("onDragStart",args);}}},onPress:function(){if(_this.s.actionable){_this.setState({isActive:true});}},onRelease:function(){_this.setState({isActive:false});},onStart:function(ev){var s=_this.s;if(ev.isTouch&&s.drag&&s.data.editable!==false&&!isDrag){touchTimer=setTimeout((function(){var args=__assign({},ev);args.data=s.data;args.drag=true;_this._hook("onDragModeOn",args);_this._hook("onDragStart",args);isDrag=true;}),350);}return {ripple:s.actionable&&s.ripple}}});};ListItemBase.prototype._render=function(s,state){this._cssClass=this._className+" mbsc-list-item"+this._theme+this._hb+this._rtl+(s.actionable?" mbsc-list-item-actionable":"")+(state.hasFocus?" mbsc-focus":"")+(state.hasHover?" mbsc-hover":"")+(state.isActive?" mbsc-active":"")+(s.selected?" mbsc-selected":"");};ListItemBase.prototype._destroy=function(){this._unlisten();};ListItemBase.defaults={actionable:true,ripple:false};ListItemBase._name="ListItem";ListItemBase.decorators=[{type:core.Directive,args:[{selector:"[mbsc-li-b]"}]}];return ListItemBase}(BaseComponent);var MbscListItem=/*#__PURE__*/function(_super){__extends(MbscListItem,_super);function MbscListItem(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.onHoverIn=new core.EventEmitter;_this.onHoverOut=new core.EventEmitter;_this.onDragEnd=new core.EventEmitter;_this.onDragModeOff=new core.EventEmitter;_this.onDragModeOn=new core.EventEmitter;_this.onDragMove=new core.EventEmitter;_this.onDragStart=new core.EventEmitter;return _this}MbscListItem.decorators=[{type:core.Component,args:[{changeDetection:core.ChangeDetectionStrategy.OnPush,encapsulation:core.ViewEncapsulation.None,host:{"[class]":"_cssClass",tabindex:"0"},selector:"mbsc-list-item",template:'<div [innerHTML]="textParam"></div><ng-content></ng-content>'}]}];MbscListItem.propDecorators={actionable:[{type:core.Input}],data:[{type:core.Input}],drag:[{type:core.Input}],onHoverIn:[{type:core.Output}],onHoverOut:[{type:core.Output}],onDragEnd:[{type:core.Output}],onDragModeOff:[{type:core.Output}],onDragModeOn:[{type:core.Output}],onDragMove:[{type:core.Output}],onDragStart:[{type:core.Output}]};return MbscListItem}(ListItemBase);var MbscEventListService=/*#__PURE__*/function(){function MbscEventListService(){}MbscEventListService.decorators=[{type:core.Injectable}];return MbscEventListService}();var MbscEventListDayDirective=/*#__PURE__*/function(){function MbscEventListDayDirective(el,els){this.el=el;this.els=els;}MbscEventListDayDirective.prototype.ngOnInit=function(){if(this.els&&this.els.days){this.els.days[this.timestamp]=this.el.nativeElement;}};MbscEventListDayDirective.decorators=[{type:core.Directive,args:[{selector:"[mbsc-event-list-day]"}]}];MbscEventListDayDirective.ctorParameters=function(){return [{type:core.ElementRef},{type:MbscEventListService,decorators:[{type:core.Optional}]}]};MbscEventListDayDirective.propDecorators={timestamp:[{type:core.Input}]};return MbscEventListDayDirective}();var MbscEventListItem=/*#__PURE__*/function(_super){__extends(MbscEventListItem,_super);function MbscEventListItem(){return _super!==null&&_super.apply(this,arguments)||this}MbscEventListItem.decorators=[{type:core.Component,args:[{changeDetection:core.ChangeDetectionStrategy.OnPush,host:{"[class]":'(showColor ? "" : "mbsc-colored-event ") + _cssClass',"[style.background]":'showColor ? "" : eventData.style.background',"[style.color]":'showColor ? "" : eventData.style.color',tabindex:"0"},selector:"mbsc-event-list-item",template:'\n    <ng-template #def>\n      <div *ngIf="showColor" [class]="\'mbsc-event-color\' + _theme" [ngStyle]="eventData.style"></div>\n      <div [class]="\'mbsc-event-content\' + _theme">\n        <ng-template [ngTemplateOutlet]="eventContentTemplate || defaultEventContent"\n          [ngTemplateOutletContext]="{ $implicit: eventData }"></ng-template>\n      </div>\n      <div [class]="\'mbsc-event-time\' + _theme + _rtl">\n        <div *ngIf="eventData.allDayText" [class]="\'mbsc-event-all-day\' + _theme">{{eventData.allDayText}}</div>\n        <div *ngIf="eventData.lastDay" [class]="\'mbsc-event-until\' + _theme">{{eventData.lastDay}}</div>\n        <div *ngIf="eventData.start" [class]="\'mbsc-event-start\' + _theme">{{eventData.start}}</div>\n        <div *ngIf="eventData.start && eventData.end" [class]="\'mbsc-event-sep\' + _theme">-</div>\n        <div *ngIf="eventData.end" [class]="\'mbsc-event-end\' + _theme">{{eventData.end}}</div>\n      </div>\n    </ng-template>\n    <ng-template #defaultEventContent>\n      <div [class]="\'mbsc-event-text\' + _theme" [title]="eventData.tooltip" [innerHTML]="eventData.html"></div>\n    </ng-template>\n    <ng-template [ngTemplateOutlet]="template || def" [ngTemplateOutletContext]="{ $implicit: eventData }">\n    </ng-template>\n    <div [class]="\'mbsc-list-item-background\' + _theme"></div>\n  '}]}];MbscEventListItem.propDecorators={eventData:[{type:core.Input}],selected:[{type:core.Input}],showColor:[{type:core.Input}],template:[{type:core.Input}],eventContentTemplate:[{type:core.Input}]};return MbscEventListItem}(MbscListItem);var MbscEventcalendar=/*#__PURE__*/function(_super){__extends(MbscEventcalendar,_super);function MbscEventcalendar(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this._hours=ARRAY24;_this.selectedDateChange=new core.EventEmitter;_this.selectedEventsChange=new core.EventEmitter;_this.onCellClick=new core.EventEmitter;_this.onCellDoubleClick=new core.EventEmitter;_this.onCellRightClick=new core.EventEmitter;_this.onCellHoverIn=new core.EventEmitter;_this.onCellHoverOut=new core.EventEmitter;_this.onEventClick=new core.EventEmitter;_this.onEventDoubleClick=new core.EventEmitter;_this.onEventRightClick=new core.EventEmitter;_this.onEventHoverIn=new core.EventEmitter;_this.onEventHoverOut=new core.EventEmitter;_this.onEventCreate=new core.EventEmitter;_this.onEventCreated=new core.EventEmitter;_this.onEventDelete=new core.EventEmitter;_this.onEventDeleted=new core.EventEmitter;_this.onEventDragEnd=new core.EventEmitter;_this.onEventDragStart=new core.EventEmitter;_this.onEventUpdate=new core.EventEmitter;_this.onEventUpdated=new core.EventEmitter;_this.onEventCreateFailed=new core.EventEmitter;_this.onEventUpdateFailed=new core.EventEmitter;_this.onLabelClick=new core.EventEmitter;_this.onSelectedEventsChange=new core.EventEmitter;_this.onPageChange=new core.EventEmitter;_this.onPageLoaded=new core.EventEmitter;_this.onPageLoading=new core.EventEmitter;_this.onSelectedDateChange=new core.EventEmitter;return _this}MbscEventcalendar.prototype._getEventArgs=function(eventList,$event,event){return {date:eventList.timestamp,domEvent:$event,event:event.original,source:"agenda"}};MbscEventcalendar.prototype._getPopoverEventArgs=function(state,$event,event){return {date:state.popoverDate,domEvent:$event,event:event.original,source:"popover"}};MbscEventcalendar.prototype._ctor=function(){this._els=this._injector.get(MbscEventListService);this._instanceService=this._injector.get(MbscInstanceService);};MbscEventcalendar.prototype._mounted=function(){this._instanceService.instance=this;_super.prototype._mounted.call(this);};MbscEventcalendar.prototype._render=function(s,state){if(!this._listDays){this._listDays={};this._els.days=this._listDays;}_super.prototype._render.call(this,s,state);};MbscEventcalendar.prototype._updated=function(){this._list=this.vList&&this.vList.nativeElement;_super.prototype._updated.call(this);};MbscEventcalendar.decorators=[{type:core.Component,args:[{changeDetection:core.ChangeDetectionStrategy.OnPush,encapsulation:core.ViewEncapsulation.None,providers:[MbscEventListService,MbscInstanceService],selector:"mbsc-eventcalendar",template:'\n    <mbsc-calendar-view #calendar\n      [activeDate]="_active"\n      [amText]="s.amText"\n      [calendarScroll]="_calendarScroll"\n      [calendarType]="_calendarType"\n      [clickToCreate]="s.clickToCreate"\n      [colors]="s.colors"\n      [context]="s.context"\n      [cssClass]="_cssClass"\n      [dataTimezone]="s.dataTimezone"\n      [dayTemplate]="dayTemplate"\n      [dayContentTemplate]="dayContentTemplate"\n      [displayTimezone]="s.displayTimezone"\n      [downIcon]="s.downIcon"\n      [dragData]="state.labelDragData"\n      [dragToCreate]="s.dragToCreate"\n      [dragToMove]="s.dragToMove"\n      [dragToResize]="s.dragToResize"\n      [endDay]="_rangeEndDay"\n      [eventOrder]="s.eventOrder"\n      [eventRange]="_rangeType"\n      [eventRangeSize]="_showSchedule ? _scheduleSize : (_showTimeline ? _timelineSize : _eventListSize)"\n      [exclusiveEndDates]="s.exclusiveEndDates"\n      [hasContent]="_showEventList || _showSchedule || _showTimeline"\n      [hasPicker]="true"\n      [headerTemplate]="headerTemplate"\n      [height]="s.height"\n      [invalid]="s.invalid"\n      [instanceService]="_instanceService"\n      [labels]="s.labels"\n      [labelList]="_calendarLabelList"\n      [labelTemplate]="labelTemplate"\n      [labelContentTemplate]="labelContentTemplate"\n      [marked]="s.marked"\n      [max]="s.max"\n      [min]="s.min"\n      [mouseSwipe]="(!s.dragToCreate && s.clickToCreate !== \'single\') || (!_showEventLabels && !_showEventCount)"\n      [mousewheel]="s.mousewheel"\n      [nextIconH]="s.nextIconH"\n      [nextIconV]="s.nextIconV"\n      [nextPageText]="s.nextPageText"\n      [noOuterChange]="!_showEventList"\n      [onActiveChange]="_onActiveChange"\n      [onCellHoverIn]="_onCellHoverIn"\n      [onCellHoverOut]="_onCellHoverOut"\n      [onDayClick]="_onDayClick"\n      [onDayDoubleClick]="_onDayDoubleClick"\n      [onDayRightClick]="_onDayRightClick"\n      [onGestureStart]="_onGestureStart"\n      [onLabelClick]="_onLabelClick"\n      [onLabelDoubleClick]="_onLabelDoubleClick"\n      [onLabelRightClick]="_onLabelRightClick"\n      [onLabelHoverIn]="_onLabelHoverIn"\n      [onLabelHoverOut]="_onLabelHoverOut"\n      [onLabelDelete]="_onEventDelete"\n      [onLabelUpdateStart]="_onLabelUpdateStart"\n      [onLabelUpdateMove]="_onLabelUpdateMove"\n      [onLabelUpdateEnd]="_onLabelUpdateEnd"\n      [onLabelUpdateModeOn]="_onLabelUpdateModeOn"\n      [onLabelUpdateModeOff]="_onLabelUpdateModeOff"\n      [onPageChange]="_onPageChange"\n      [onPageLoaded]="_onPageLoaded"\n      [onPageLoading]="_onPageLoading"\n      [onResize]="_onResize"\n      [pageLoad]="_pageLoad"\n      [pmText]="s.pmText"\n      [prevIconH]="s.prevIconH"\n      [prevIconV]="s.prevIconV"\n      [prevPageText]="s.prevPageText"\n      [refDate]="_refDate"\n      [resourcesMap]="_resourcesMap"\n      [responsiveStyle]="true"\n      [rtl]="s.rtl"\n      [selectedDates]="_selectedDates"\n      [selectedEventsMap]="_selectedEventsMap"\n      selectView="month"\n      [showCalendar]="_showCalendar"\n      [showControls]="s.showControls"\n      [showEventTooltip]="s.showEventTooltip"\n      [showLabelCount]="_showEventCount"\n      [showOuterDays]="_showOuterDays"\n      [showSchedule]="_showSchedule || _showTimeline"\n      [showToday]="s.showToday"\n      [showWeekNumbers]="_showWeekNumbers"\n      [size]="_calendarSize"\n      [startDay]="_rangeStartDay"\n      [swipe]="!state.isTouchDrag"\n      [theme]="s.theme"\n      [themeVariant]="s.themeVariant"\n      [timeFormat]="s.timeFormat"\n      [timezonePlugin]="s.timezonePlugin"\n      [update]="_update"\n      [upIcon]="s.upIcon"\n      [valid]="s.valid"\n      [weeks]="_calendarSize"\n      [width]="s.width"\n      [getDate]="s.getDate"\n      [getDay]="s.getDay"\n      [getMaxDayOfMonth]="s.getMaxDayOfMonth"\n      [getMonth]="s.getMonth"\n      [getWeekNumber]="s.getWeekNumber"\n      [getYear]="s.getYear"\n      [dateFormat]="s.dateFormat"\n      [dayNames]="s.dayNames"\n      [dayNamesMin]="s.dayNamesMin"\n      [dayNamesShort]="s.dayNamesShort"\n      [eventText]="s.eventText"\n      [eventsText]="s.eventsText"\n      [firstDay]="s.firstDay"\n      [fromText]="s.fromText"\n      [monthNames]="s.monthNames"\n      [monthNamesShort]="s.monthNamesShort"\n      [moreEventsPluralText]="s.moreEventsPluralText"\n      [moreEventsText]="s.moreEventsText"\n      [todayText]="s.todayText"\n      [toText]="s.toText"\n      [weekText]="s.weekText"\n      [yearSuffix]="s.yearSuffix"\n    >\n      <div *ngIf="_showDate" [class]="\'mbsc-schedule-date-header mbsc-flex\' + _theme + _hb">\n        <div *ngIf="_showSchedule && !_showCalendar && s.resources" class="mbsc-schedule-time-col"></div>\n        <div [class]="\'mbsc-schedule-date-header-text mbsc-flex-1-1\' + _theme">{{_selectedDateHeader}}</div>\n        <div *ngIf="_showSchedule && !_showCalendar && s.resources" class="mbsc-schedule-fake-scroll-y"></div>\n      </div>\n      <div *ngIf="_showEventList"\n        [class]="\'mbsc-event-list\' + (state.isListScrollable ? \' mbsc-event-list-scroll\' : \'\')"\n        (scroll)="_onScroll()" #list>\n        <ng-template #def>\n          <mbsc-list [rtl]="s.rtl" [theme]="s.theme" [themeVariant]="s.themeVariant">\n            <div *ngIf="!eventList.length" [class]="\'mbsc-event-list-empty\' + _theme">\n              {{s.noEventsText}}\n            </div>\n            <div *ngFor="let eventList of state.eventList" mbsc-event-list-day\n              [class]="\'mbsc-event-group\' + _theme"\n              [timestamp]="eventList.timestamp"\n            >\n              <mbsc-list-header *ngIf="_eventListType !== \'day\' || _eventListSize > 1"\n                class="mbsc-event-day"\n                [theme]="s.theme"\n                [themeVariant]="s.themeVariant"\n              >\n                {{eventList.date}}\n              </mbsc-list-header>\n              <mbsc-event-list-item *ngFor="let event of eventList.events"\n                [actionable]="s.actionableEvents"\n                class="mbsc-event"\n                [eventContentTemplate]="eventContentTemplate"\n                [eventData]="event"\n                [rtl]="s.rtl"\n                [selected]="_selectedEventsMap[event.uid!] || _selectedEventsMap[event.id]"\n                [showColor]="!_colorEventList"\n                [template]="eventTemplate"\n                [theme]="s.theme"\n                [themeVariant]="s.themeVariant"\n                (onHoverIn)="_onEventHoverIn(_getEventArgs(eventList, $event.domEvent, event))"\n                (onHoverOut)="_onEventHoverOut(_getEventArgs(eventList, $event.domEvent, event))"\n                (click)="_onEventClick(_getEventArgs(eventList, $event, event))"\n                (dblclick)="_onEventDoubleClick(_getEventArgs(eventList, $event, event))"\n                (contextmenu)="_onEventRightClick(_getEventArgs(eventList, $event, event))"\n              >\n              </mbsc-event-list-item>\n            </div>\n          </mbsc-list>\n        </ng-template>\n        <ng-container [ngTemplateOutlet]="agendaTemplate || def" [ngTemplateOutletContext]="{ $implicit: state.eventList }">\n        </ng-container>\n      </div>\n\n      <mbsc-scheduler *ngIf="_showSchedule"\n        [allDayText]="s.allDayText"\n        [amText]="s.amText"\n        [clickToCreate]="s.clickToCreate"\n        [colorsMap]="_colorsMap"\n        [dataTimezone]="s.dataTimezone"\n        [dateFormat]="s.dateFormat"\n        [dateFormatLong]="s.dateFormatLong"\n        [dayNames]="s.dayNames"\n        [dayNamesMin]="s.dayNamesMin"\n        [dayNamesShort]="s.dayNamesShort"\n        [dayTemplate]="dayTemplate"\n        [dayContentTemplate]="dayContentTemplate"\n        [displayTimezone]="s.displayTimezone"\n        [dragTimeStep]="s.dragTimeStep"\n        [dragToCreate]="s.dragToCreate"\n        [dragToMove]="s.dragToMove"\n        [dragToResize]="s.dragToResize"\n        [endDay]="_scheduleEndDay"\n        [endTime]="_scheduleEndTime"\n        [eventContentTemplate]="scheduleEventContentTemplate"\n        [eventDragEnd]="_onEventDragStop"\n        [eventMap]="_eventMap"\n        [eventOrder]="s.eventOrder"\n        [eventTemplate]="scheduleEventTemplate"\n        [exclusiveEndDates]="s.exclusiveEndDates"\n        [extendDefaultEvent]="s.extendDefaultEvent"\n        [externalDrop]="s.externalDrop"\n        [firstDay]="s.firstDay"\n        [fromText]="s.fromText"\n        [getDay]="s.getDay"\n        [getDate]="s.getDate"\n        [getMonth]="s.getMonth"\n        [getYear]="s.getYear"\n        [groupBy]="s.groupBy"\n        [height]="state.height"\n        [invalidateEvent]="s.invalidateEvent"\n        [invalidsMap]="_invalidsMap"\n        [maxDate]="_maxDate"\n        [minDate]="_minDate"\n        [monthNames]="s.monthNames"\n        [monthNamesShort]="s.monthNamesShort"\n        [newEventText]="s.newEventText"\n        [pmText]="s.pmText"\n        [refDate]="_refDate"\n        [resources]="s.resources"\n        [resourceTemplate]="resourceTemplate"\n        [rtl]="s.rtl"\n        [scroll]="_shouldScrollSchedule"\n        [selected]="_selectedDateTime"\n        [selectedEventsMap]="_selectedEventsMap"\n        [showAllDay]="_showScheduleAllDay"\n        [showDays]="_showScheduleDays"\n        [showEventTooltip]="s.showEventTooltip"\n        [size]="_scheduleSize"\n        [startDay]="_scheduleStartDay"\n        [startTime]="_scheduleStartTime"\n        [timeCellStep]="_scheduleTimeCellStep"\n        [timeFormat]="s.timeFormat"\n        [timeLabelStep]="_scheduleTimeLabelStep"\n        [timezonePlugin]="s.timezonePlugin"\n        [timezones]="_scheduleTimezones"\n        [theme]="s.theme"\n        [themeVariant]="s.themeVariant"\n        [toText]="s.toText"\n        [type]="_scheduleType"\n        [width]="state.width"\n        [onCellClick]="_onCellClick"\n        [onCellDoubleClick]="_onCellDoubleClick"\n        [onCellRightClick]="_onCellRightClick"\n        [onEventClick]="_onEventClick"\n        [onEventDoubleClick]="_onEventDoubleClick"\n        [onEventRightClick]="_onEventRightClick"\n        [onEventHoverIn]="_onEventHoverIn"\n        [onEventHoverOut]="_onEventHoverOut"\n        [onEventDelete]="_onEventDelete"\n        [onEventDragEnd]="_onEventDragEnd"\n        [onEventDragStart]="_onEventDragStart"\n        [onWeekDayClick]="_onWeekDayClick"\n      >\n      </mbsc-scheduler>\n\n      <mbsc-timeline *ngIf="_showTimeline"\n        [allDayText]="s.allDayText"\n        [amText]="s.amText"\n        [clickToCreate]="s.clickToCreate"\n        [colorsMap]="_colorsMap"\n        [dataTimezone]="s.dataTimezone"\n        [dateFormat]="s.dateFormat"\n        [dateFormatLong]="s.dateFormatLong"\n        [dayNames]="s.dayNames"\n        [dayNamesMin]="s.dayNamesMin"\n        [dayNamesShort]="s.dayNamesShort"\n        [displayTimezone]="s.displayTimezone"\n        [dragTimeStep]="s.dragTimeStep"\n        [dragToCreate]="slots ? false : s.dragToCreate"\n        [dragToMove]="s.dragToMove"\n        [dragToResize]="slots ? false : s.dragToResize"\n        [downIcon]="s.chevronIconDown"\n        [endDay]="_timelineEndDay"\n        [endTime]="_timelineEndTime"\n        [eventList]="_timelineListing"\n        [eventDragEnd]="_onEventDragStop"\n        [eventContentTemplate]="scheduleEventContentTemplate"\n        [eventMap]="_eventMap"\n        [eventOrder]="s.eventOrder"\n        [eventTemplate]="scheduleEventTemplate"\n        [exclusiveEndDates]="s.exclusiveEndDates"\n        [extendDefaultEvent]="s.extendDefaultEvent"\n        [externalDrop]="s.externalDrop"\n        [firstDay]="s.firstDay"\n        [fromText]="s.fromText"\n        [getDay]="s.getDay"\n        [getDate]="s.getDate"\n        [getMonth]="s.getMonth"\n        [getWeekNumber]="s.getWeekNumber"\n        [getYear]="s.getYear"\n        [groupBy]="s.groupBy"\n        [height]="state.height"\n        [invalidateEvent]="s.invalidateEvent"\n        [invalidsMap]="_invalidsMap"\n        [maxDate]="_maxDate"\n        [minDate]="_minDate"\n        [monthNames]="s.monthNames"\n        [monthNamesShort]="s.monthNamesShort"\n        [newEventText]="s.newEventText"\n        [nextIcon]="s.nextIconH"\n        [nextIconRtl]="s.nextIconV"\n        [pmText]="s.pmText"\n        [refDate]="_refDate"\n        [resources]="s.resources"\n        [resourceHeaderTemplate]="resourceHeaderTemplate"\n        [resourceTemplate]="resourceTemplate"\n        [rtl]="s.rtl"\n        [rowHeight]="_timelineRowHeight"\n        [scroll]="_shouldScrollSchedule"\n        [showEventTooltip]="s.showEventTooltip"\n        [slots]="s.slots"\n        [slotTemplate]="slotTemplate"\n        [selected]="_selectedDateTime"\n        [selectedEventsMap]="_selectedEventsMap"\n        [size]="_timelineSize"\n        [startDay]="_timelineStartDay"\n        [startTime]="_timelineStartTime"\n        [timeCellStep]="_timelineTimeCellStep"\n        [timeFormat]="s.timeFormat"\n        [timeLabelStep]="_timelineTimeLabelStep"\n        [timezonePlugin]="s.timezonePlugin"\n        [theme]="s.theme"\n        [themeVariant]="s.themeVariant"\n        [toText]="s.toText"\n        [type]="_timelineType"\n        [weekNumbers]="_showTimelineWeekNumbers"\n        [weekText]="s.weekText"\n        [width]="state.width"\n        [onCellClick]="_onCellClick"\n        [onCellDoubleClick]="_onCellDoubleClick"\n        [onCellRightClick]="_onCellRightClick"\n        [onEventClick]="_onEventClick"\n        [onEventDoubleClick]="_onEventDoubleClick"\n        [onEventRightClick]="_onEventRightClick"\n        [onEventHoverIn]="_onEventHoverIn"\n        [onEventHoverOut]="_onEventHoverOut"\n        [onEventDelete]="_onEventDelete"\n        [onEventDragEnd]="_onEventDragEnd"\n        [onEventDragStart]="_onEventDragStart"\n      >\n      </mbsc-timeline>\n\n      <mbsc-popup\n        [anchor]="_anchor"\n        [closeOnScroll]="true"\n        [contentPadding]="false"\n        [context]="s.context"\n        [cssClass]="\'mbsc-calendar-popup \' + _popoverClass"\n        display="anchored"\n        [isOpen]="state.showPopover"\n        [locale]="s.locale"\n        maxHeight="24em"\n        [rtl]="s.rtl"\n        [scrollLock]="false"\n        [showOverlay]="false"\n        [theme]="s.theme"\n        [themeVariant]="s.themeVariant"\n        (onClose)="_onPopoverClose()">\n        <mbsc-list class="mbsc-popover-list" [rtl]="s.rtl" [theme]="s.theme" [themeVariant]="s.themeVariant">\n          <mbsc-event-list-item *ngFor="let event of state.popoverList"\n            [actionable]="s.actionableEvents"\n            class="mbsc-event"\n            [eventContentTemplate]="eventContentTemplate"\n            [eventData]="event"\n            [rtl]="s.rtl"\n            [selected]="event && this._selectedEventsMap && (this._selectedEventsMap[event.id] !== undefined)"\n            [showColor]="!_colorEventList"\n            [template]="eventTemplate"\n            [theme]="s.theme"\n            [themeVariant]="s.themeVariant"\n            [data]="event.original"\n            [drag]="_showEventLabels && s.dragToMove"\n            (onHoverIn)="_onEventHoverIn(_getPopoverEventArgs(state, $event.domEvent, event))"\n            (onHoverOut)="_onEventHoverOut(_getPopoverEventArgs(state, $event.domEvent, event))"\n            (click)="_onEventClick(_getPopoverEventArgs(state, $event, event))"\n            (dblclick)="_onEventDoubleClick(_getPopoverEventArgs(state, $event, event))"\n            (contextmenu)="_onEventRightClick(_getPopoverEventArgs(state, $event, event))"\n            (onDragEnd)="_onLabelUpdateEnd($event)"\n            (onDragModeOff)="_onLabelUpdateModeOff($event)"\n            (onDragModeOn)="_onLabelUpdateModeOn($event)"\n            (onDragMove)="_onLabelUpdateMove($event)"\n            (onDragStart)="_onLabelUpdateStart($event)">\n          </mbsc-event-list-item>\n        </mbsc-list>\n      </mbsc-popup>\n      <div *ngIf="state.labelDragData && state.labelDragData.draggedEvent && !state.isTouchDrag" class="mbsc-calendar-dragging"></div>\n    </mbsc-calendar-view>\n  '}]}];MbscEventcalendar.propDecorators={vList:[{type:core.ViewChild,args:["list",{static:false,read:core.ElementRef}]}],_calendarView:[{type:core.ViewChild,args:["calendar",{static:true}]}],actionableEvents:[{type:core.Input}],agendaTemplate:[{type:core.Input}],calendarSystem:[{type:core.Input}],clickToCreate:[{type:core.Input}],colors:[{type:core.Input}],data:[{type:core.Input}],dayTemplate:[{type:core.Input}],dayContentTemplate:[{type:core.Input}],dataTimezone:[{type:core.Input}],displayTimezone:[{type:core.Input}],dragTimeStep:[{type:core.Input}],dragToCreate:[{type:core.Input}],dragToResize:[{type:core.Input}],dragToMove:[{type:core.Input}],eventContentTemplate:[{type:core.Input}],eventDelete:[{type:core.Input}],eventOrder:[{type:core.Input}],eventTemplate:[{type:core.Input}],exclusiveEndDates:[{type:core.Input}],extendDefaultEvent:[{type:core.Input}],externalDrop:[{type:core.Input}],groupBy:[{type:core.Input}],headerTemplate:[{type:core.Input}],height:[{type:core.Input}],invalid:[{type:core.Input}],invalidateEvent:[{type:core.Input}],labelContentTemplate:[{type:core.Input}],labels:[{type:core.Input}],labelTemplate:[{type:core.Input}],marked:[{type:core.Input}],max:[{type:core.Input}],min:[{type:core.Input}],mousewheel:[{type:core.Input}],refDate:[{type:core.Input}],resources:[{type:core.Input}],resourceHeaderTemplate:[{type:core.Input}],resourceTemplate:[{type:core.Input}],slots:[{type:core.Input}],slotTemplate:[{type:core.Input}],scheduleEventContentTemplate:[{type:core.Input}],scheduleEventTemplate:[{type:core.Input}],selectedDate:[{type:core.Input}],selectedDateChange:[{type:core.Output}],selectedEvents:[{type:core.Input}],selectedEventsChange:[{type:core.Output}],selectMultipleEvents:[{type:core.Input}],showControls:[{type:core.Input}],showEventTooltip:[{type:core.Input}],valid:[{type:core.Input}],view:[{type:core.Input}],width:[{type:core.Input}],allDayText:[{type:core.Input}],amText:[{type:core.Input}],dateFormat:[{type:core.Input}],dateFormatLong:[{type:core.Input}],dayNames:[{type:core.Input}],dayNamesMin:[{type:core.Input}],dayNamesShort:[{type:core.Input}],eventsText:[{type:core.Input}],eventText:[{type:core.Input}],firstDay:[{type:core.Input}],monthNames:[{type:core.Input}],monthNamesShort:[{type:core.Input}],moreEventsPluralText:[{type:core.Input}],moreEventsText:[{type:core.Input}],newEventText:[{type:core.Input}],nextPageText:[{type:core.Input}],noEventsText:[{type:core.Input}],pmText:[{type:core.Input}],prevPageText:[{type:core.Input}],timeFormat:[{type:core.Input}],timezonePlugin:[{type:core.Input}],onCellClick:[{type:core.Output}],onCellDoubleClick:[{type:core.Output}],onCellRightClick:[{type:core.Output}],onCellHoverIn:[{type:core.Output}],onCellHoverOut:[{type:core.Output}],onEventClick:[{type:core.Output}],onEventDoubleClick:[{type:core.Output}],onEventRightClick:[{type:core.Output}],onEventHoverIn:[{type:core.Output}],onEventHoverOut:[{type:core.Output}],onEventCreate:[{type:core.Output}],onEventCreated:[{type:core.Output}],onEventDelete:[{type:core.Output}],onEventDeleted:[{type:core.Output}],onEventDragEnd:[{type:core.Output}],onEventDragStart:[{type:core.Output}],onEventUpdate:[{type:core.Output}],onEventUpdated:[{type:core.Output}],onEventCreateFailed:[{type:core.Output}],onEventUpdateFailed:[{type:core.Output}],onLabelClick:[{type:core.Output}],onSelectedEventsChange:[{type:core.Output}],onPageChange:[{type:core.Output}],onPageLoaded:[{type:core.Output}],onPageLoading:[{type:core.Output}],onSelectedDateChange:[{type:core.Output}]};return MbscEventcalendar}(EventcalendarBase);var ListBase=/*#__PURE__*/function(_super){__extends(ListBase,_super);function ListBase(){return _super!==null&&_super.apply(this,arguments)||this}ListBase.prototype._render=function(s){this._cssClass=this._className+this._rtl+" mbsc-font mbsc-list"+this._theme;};ListBase.decorators=[{type:core.Directive,args:[{selector:"[mbsc-l-b]"}]}];return ListBase}(BaseComponent);var ListHeaderBase=/*#__PURE__*/function(_super){__extends(ListHeaderBase,_super);function ListHeaderBase(){return _super!==null&&_super.apply(this,arguments)||this}ListHeaderBase.prototype._render=function(s){this._cssClass=this._className+" mbsc-list-header"+this._theme+this._hb;};ListHeaderBase.decorators=[{type:core.Directive,args:[{selector:"[mbsc-lh-b]"}]}];return ListHeaderBase}(BaseComponent);var MbscList=/*#__PURE__*/function(_super){__extends(MbscList,_super);function MbscList(){return _super!==null&&_super.apply(this,arguments)||this}MbscList.decorators=[{type:core.Component,args:[{changeDetection:core.ChangeDetectionStrategy.OnPush,encapsulation:core.ViewEncapsulation.None,host:{"[class]":"_cssClass"},selector:"mbsc-list",template:"<ng-content></ng-content>"}]}];return MbscList}(ListBase);var MbscListHeader=/*#__PURE__*/function(_super){__extends(MbscListHeader,_super);function MbscListHeader(){return _super!==null&&_super.apply(this,arguments)||this}MbscListHeader.decorators=[{type:core.Component,args:[{changeDetection:core.ChangeDetectionStrategy.OnPush,encapsulation:core.ViewEncapsulation.None,host:{"[class]":"_cssClass"},selector:"mbsc-list-header",template:"<ng-content></ng-content>"}]}];return MbscListHeader}(ListHeaderBase);var MbscListModule=/*#__PURE__*/function(){function MbscListModule(){}MbscListModule.decorators=[{type:core.NgModule,args:[{declarations:[ListBase,ListHeaderBase,ListItemBase,MbscList,MbscListHeader,MbscListItem],exports:[MbscList,MbscListHeader,MbscListItem],imports:[common.CommonModule]}]}];return MbscListModule}();var MbscScheduleEvent=/*#__PURE__*/function(_super){__extends(MbscScheduleEvent,_super);function MbscScheduleEvent(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.onClick=new core.EventEmitter;_this.onDoubleClick=new core.EventEmitter;_this.onRightClick=new core.EventEmitter;_this.onHoverIn=new core.EventEmitter;_this.onHoverOut=new core.EventEmitter;_this.onDelete=new core.EventEmitter;_this.onDragEnd=new core.EventEmitter;_this.onDragModeOff=new core.EventEmitter;_this.onDragModeOn=new core.EventEmitter;_this.onDragMove=new core.EventEmitter;_this.onDragStart=new core.EventEmitter;return _this}MbscScheduleEvent.decorators=[{type:core.Component,args:[{changeDetection:core.ChangeDetectionStrategy.OnPush,encapsulation:core.ViewEncapsulation.None,host:{"(click)":"_onClick($event)","(contextmenu)":"_onRightClick($event)","[attr.data-id]":"event.id","[attr.tabindex]":"0","[attr.title]":"event.tooltip","[class]":"_cssClass","[style.color]":"_style.color","[style.height]":"_style.height","[style.left]":"_style.left","[style.right]":"_style.right","[style.top]":"_style.top","[style.width]":"_style.width"},selector:"mbsc-schedule-event",template:"\n      <div *ngIf=\"_isStart && resize && event.original.editable !== false\"\n        [class]=\"'mbsc-schedule-event-resize mbsc-schedule-event-resize-start' + _rtl +\n          (isDrag ? ' mbsc-schedule-event-resize-start-touch' : '') + (isTimeline ? ' mbsc-timeline-event-resize' : '')\">\n      </div>\n      <div *ngIf=\"_isEnd && resize && event.original.editable !== false\"\n        [class]=\"'mbsc-schedule-event-resize mbsc-schedule-event-resize-end' + _rtl +\n          (isDrag ? ' mbsc-schedule-event-resize-start-touch' : '') + (isTimeline ? ' mbsc-timeline-event-resize' : '')\">\n      </div>\n      <ng-template #default>\n        <div *ngIf=\"!_isAllDay && !isTimeline\" [class]=\"'mbsc-schedule-event-bar' + _theme + _rtl\" ></div>\n        <div\n          [class]=\"'mbsc-schedule-event-background' + (isTimeline ? ' mbsc-timeline-event-background' : '') +\n            (_isAllDay ? ' mbsc-schedule-event-all-day-background' : '') + _theme\"\n          [style.background]=\"event.style.background\"\n        ></div>\n        <div aria-hidden=\"true\"\n          [class]=\"'mbsc-schedule-event-inner' + _theme +\n            (_isAllDay ? ' mbsc-schedule-event-all-day-inner' : '') +\n            (event.cssClass || '')\"\n          [style.color]=\"event.style.color\"\n        >\n          <div [class]=\"'mbsc-schedule-event-title' + (_isAllDay ? ' mbsc-schedule-event-all-day-title' : '') + _theme\">\n            <div *ngIf=\"!contentTemplate\" [innerHTML]=\"_html\"></div>\n            <ng-template *ngIf=\"contentTemplate\"\n              [ngTemplateOutlet]=\"contentTemplate\"\n              [ngTemplateOutletContext]=\"{ $implicit: event }\">\n            </ng-template>\n          </div>\n          <div *ngIf=\"!_isAllDay\" [class]=\"'mbsc-schedule-event-range' + _theme\">\n            {{_rangeText}}\n          </div>\n        </div>\n        <div *ngIf=\"event.ariaLabel\" class=\"mbsc-hidden-content\">{{event.ariaLabel}}</div>\n      </ng-template>\n      <ng-template\n        [ngTemplateOutlet]=\"template || default\"\n        [ngTemplateOutletContext]=\"{ $implicit: event }\">\n      </ng-template>\n      <div [innerHTML]=\"textParam\"></div>\n  "}]}];MbscScheduleEvent.propDecorators={contentTemplate:[{type:core.Input}],displayTimezone:[{type:core.Input}],drag:[{type:core.Input}],event:[{type:core.Input}],endDay:[{type:core.Input}],eventHeight:[{type:core.Input}],exclusiveEndDates:[{type:core.Input}],gridEndTime:[{type:core.Input}],gridStartTime:[{type:core.Input}],hidden:[{type:core.Input}],inactive:[{type:core.Input}],isDrag:[{type:core.Input}],isListing:[{type:core.Input}],isTimeline:[{type:core.Input}],lastDay:[{type:core.Input}],resize:[{type:core.Input}],resource:[{type:core.Input}],rtl:[{type:core.Input}],selected:[{type:core.Input}],singleDay:[{type:core.Input}],slot:[{type:core.Input}],startDay:[{type:core.Input}],template:[{type:core.Input}],theme:[{type:core.Input}],timezonePlugin:[{type:core.Input}],onClick:[{type:core.Output}],onDoubleClick:[{type:core.Output}],onRightClick:[{type:core.Output}],onHoverIn:[{type:core.Output}],onHoverOut:[{type:core.Output}],onDelete:[{type:core.Output}],onDragEnd:[{type:core.Output}],onDragModeOff:[{type:core.Output}],onDragModeOn:[{type:core.Output}],onDragMove:[{type:core.Output}],onDragStart:[{type:core.Output}]};return MbscScheduleEvent}(ScheduleEventBase);var MbscWeekDay=/*#__PURE__*/function(_super){__extends(MbscWeekDay,_super);function MbscWeekDay(){return _super!==null&&_super.apply(this,arguments)||this}MbscWeekDay.decorators=[{type:core.Component,args:[{changeDetection:core.ChangeDetectionStrategy.OnPush,encapsulation:core.ViewEncapsulation.None,host:{"(click)":"_onClick()","[class]":"_cssClass"},selector:"mbsc-week-day",template:'\n    <ng-template *ngIf="dayTemplate" [ngTemplateOutlet]="dayTemplate" [ngTemplateOutletContext]="{ $implicit: _data }"></ng-template>\n    <div aria-hidden="true" *ngIf="!dayTemplate" [class]="\'mbsc-schedule-header-dayname\' + _theme +\n      (s.selected ? \' mbsc-selected\' : \'\' ) +\n      (s.isToday ? \' mbsc-schedule-header-dayname-curr\' : \'\')">\n      {{dayNames[_day]}}\n    </div>\n    <div aria-hidden="true" *ngIf="!dayTemplate" [class]="\'mbsc-schedule-header-day\' + _theme  + _rtl +\n      (s.selected ? \' mbsc-selected\' : \'\' ) +\n      (s.isToday ? \' mbsc-schedule-header-day-today\' : \'\') +\n      (state.hasHover ? \' mbsc-hover\' : \'\')">\n      {{day}}\n    </div>\n    <div *ngIf="label" class="mbsc-hidden-content"\n      [attr.role]="s.selectable ? \'button\' : null"\n      [attr.aria-pressed]="s.selectable ? (s.selected ? \'true\' : \'false\') : null"\n    >\n      {{label}}\n    </div>\n    <ng-template *ngIf="dayContentTemplate" [ngTemplateOutlet]="dayContentTemplate" [ngTemplateOutletContext]="{ $implicit: _data }">\n    </ng-template>\n  '}]}];MbscWeekDay.propDecorators={day:[{type:core.Input}],dayNames:[{type:core.Input}],dayTemplate:[{type:core.Input}],dayContentTemplate:[{type:core.Input}],events:[{type:core.Input}],isToday:[{type:core.Input}],label:[{type:core.Input}],largeNames:[{type:core.Input}],resource:[{type:core.Input}],rtl:[{type:core.Input}],selectable:[{type:core.Input}],selected:[{type:core.Input}],theme:[{type:core.Input}],timestamp:[{type:core.Input}],onClick:[{type:core.Input}]};return MbscWeekDay}(WeekDayBase);var MbscScheduler=/*#__PURE__*/function(_super){__extends(MbscScheduler,_super);function MbscScheduler(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this._defId=DEF_ID;return _this}MbscScheduler.prototype._getEventArgs=function(timestamp,v,event,resource){return {date:getCellDate(timestamp,v),domEvent:event,resource:resource,source:"timeline"}};MbscScheduler.prototype._getDayKey=function(index,day){return day.timestamp};MbscScheduler.prototype._getEventKey=function(index,event){return event.uid};MbscScheduler.prototype._getDragKey=function(resourceId,dateKey){return resourceId+"__"+dateKey};MbscScheduler.prototype._getId=function(index,data){return data.id};MbscScheduler.prototype._mounted=function(){this._scrollCont=this.vScrollCont&&this.vScrollCont.nativeElement;this._gridCont=this.vGridCont&&this.vGridCont.nativeElement;this._headerCont=this.vHeaderCont&&this.vHeaderCont.nativeElement;this._timeCont=this.vTimeCont&&this.vTimeCont.nativeElement;this._allDayCont=this.vAllDayCont&&this.vAllDayCont.nativeElement;_super.prototype._mounted.call(this);};MbscScheduler.decorators=[{type:core.Component,args:[{changeDetection:core.ChangeDetectionStrategy.OnPush,encapsulation:core.ViewEncapsulation.None,host:{"[class]":'"mbsc-flex-col mbsc-flex-1-1 mbsc-schedule-wrapper" + _theme + (_daysNr > 7 ? " mbsc-schedule-wrapper-multi" : "")'},selector:"mbsc-scheduler",template:'\n    <ng-template #tplEvents\n      let-allDay="allDay"\n      let-events="events"\n      let-dateKey="dateKey"\n      let-dragData="dragData"\n      let-dragKey="dragKey"\n      let-resource="resource"\n    >\n      <ng-container *ngIf="events">\n        <ng-container *ngFor="let event of events; trackBy: _getEventKey;">\n          <mbsc-schedule-event *ngIf="event.showText"\n            [contentTemplate]="eventContentTemplate"\n            [displayTimezone]="displayTimezone"\n            [drag]="dragToMove"\n            [event]="event"\n            [endDay]="endDay"\n            [exclusiveEndDates]="exclusiveEndDates"\n            [gridEndTime]="_endTime"\n            [gridStartTime]="_startTime"\n            [inactive]="dragData && dragData.draggedEvent && dragData.draggedEvent.id === event.id"\n            [lastDay]="_lastDay"\n            [resize]="dragToResize"\n            [resource]="resource"\n            [rtl]="rtl"\n            [singleDay]="!_groupByResource"\n            [selected]="selectedEventsMap[event.uid] || selectedEventsMap[event.id]"\n            [startDay]="startDay"\n            [theme]="theme"\n            [template]="eventTemplate"\n            [timezonePlugin]="timezonePlugin"\n            (onClick)="onEventClick($event)"\n            (onDoubleClick)="onEventDoubleClick($event)"\n            (onRightClick)="onEventRightClick($event)"\n            (onHoverIn)="onEventHoverIn($event)"\n            (onHoverOut)="onEventHoverOut($event)"\n            (onDelete)="onEventDelete($event)"\n            (onDragStart)="_onEventDragStart($event)"\n            (onDragMove)="_onEventDragMove($event)"\n            (onDragEnd)="_onEventDragEnd($event)"\n            (onDragModeOn)="_onEventDragModeOn($event)"\n            (onDragModeOff)="_onEventDragModeOff($event)"\n          >\n          </mbsc-schedule-event>\n          <div *ngIf="!event.showText"\n            class="mbsc-schedule-event mbsc-schedule-event-all-day mbsc-schedule-event-all-day-placeholder">\n            <div [class]="\'mbsc-schedule-event-all-day-inner\' + _theme"></div>\n          </div>\n        </ng-container>\n      </ng-container>\n      <mbsc-schedule-event\n        *ngIf="dragData && dragData.originDates && dragData.originDates[dragKey] && !!dragData.originDates[dragKey].allDay === allDay"\n        [contentTemplate]="eventContentTemplate"\n        [displayTimezone]="displayTimezone"\n        [drag]="dragToMove"\n        [event]="dragData.originDates[dragKey]"\n        [endDay]="endDay"\n        [exclusiveEndDates]="exclusiveEndDates"\n        [gridEndTime]="_endTime"\n        [gridStartTime]="_startTime"\n        [hidden]="!!dragData.draggedDates"\n        [isDrag]="true"\n        [lastDay]="_lastDay"\n        [resize]="dragToResize"\n        [resource]="resource"\n        [rtl]="rtl"\n        [singleDay]="!_groupByResource"\n        [startDay]="startDay"\n        [theme]="theme"\n        [template]="eventTemplate"\n        [timezonePlugin]="timezonePlugin"\n        (onDragStart)="_onEventDragStart($event)"\n        (onDragMove)="_onEventDragMove($event)"\n        (onDragEnd)="_onEventDragEnd($event)"\n        (onDragModeOff)="_onEventDragModeOff($event)"\n      >\n      </mbsc-schedule-event>\n      <mbsc-schedule-event\n        *ngIf="dragData && dragData.draggedDates && dragData.draggedDates[dragKey] && !!dragData.draggedDates[dragKey].allDay === allDay"\n        [contentTemplate]="eventContentTemplate"\n        [displayTimezone]="displayTimezone"\n        [drag]="dragToMove"\n        [event]="dragData.draggedDates[dragKey]"\n        [endDay]="endDay"\n        [exclusiveEndDates]="exclusiveEndDates"\n        [gridEndTime]="_endTime"\n        [gridStartTime]="_startTime"\n        [isDrag]="true"\n        [lastDay]="_lastDay"\n        [resize]="dragToResize"\n        [resource]="resource"\n        [rtl]="rtl"\n        [singleDay]="!_groupByResource"\n        [startDay]="startDay"\n        [theme]="theme"\n        [template]="eventTemplate"\n        [timezonePlugin]="timezonePlugin"\n      >\n      </mbsc-schedule-event>\n    </ng-template>\n\n    <ng-template #tplAllDay let-dateKey="dateKey" let-resource="resource">\n      <div [class]="\'mbsc-schedule-all-day-item mbsc-schedule-col-width mbsc-flex-1-0\' + _theme + _rtl + _hb">\n        <ng-container [ngTemplateOutlet]="tplEvents" [ngTemplateOutletContext]="{\n          allDay: true,\n          dateKey: dateKey,\n          dragData: state.dragData,\n          dragKey: _getDragKey(resource, dateKey),\n          events: _events[resource][_defId][dateKey] && _events[resource][_defId][dateKey].allDay,\n          resource: resource\n        }">\n        </ng-container>\n        <div *ngIf="_invalids[resource][_defId][dateKey] && _invalids[resource][_defId][dateKey].allDay"\n          [class]="\'mbsc-schedule-invalid mbsc-schedule-invalid-all-day\' + _theme"\n        >\n          <div class="mbsc-schedule-invalid-text">\n            {{_invalids[resource][_defId][dateKey].allDay.title}}\n          </div>\n        </div>\n        <div *ngIf="_colors[resource][_defId][dateKey] && _colors[resource][_defId][dateKey].allDay"\n          [class]="\'mbsc-schedule-color mbsc-schedule-color-all-day\' + _theme"\n          [ngStyle]="_colors[resource][_defId][dateKey].allDay.position"\n        >\n          <div class="mbsc-schedule-color-text">\n            {{_colors[resource][_defId][dateKey].allDay.title}}\n          </div>\n        </div>\n      </div>\n    </ng-template>\n\n    <ng-template #tplDay let-dateKey="dateKey" let-resource="resource" let-timestamp="timestamp">\n      <div [class]="\'mbsc-flex-col mbsc-flex-1-0 mbsc-schedule-column mbsc-schedule-col-width\' + _theme + _rtl + _hb">\n        <div [class]="\'mbsc-flex-col mbsc-flex-1-1 mbsc-schedule-column-inner\' + _theme + _rtl + _hb">\n          <div [class]="\'mbsc-schedule-events\' + _rtl">\n            <ng-container [ngTemplateOutlet]="tplEvents" [ngTemplateOutletContext]="{\n              allDay: false,\n              dateKey: dateKey,\n              dragData: state.dragData,\n              dragKey: _getDragKey(resource, dateKey),\n              events: _events[resource][_defId][dateKey] && _events[resource][_defId][dateKey].events,\n              resource: resource\n            }">\n            </ng-container>\n          </div>\n\n          <ng-container *ngIf="_invalids[resource][_defId][dateKey]">\n            <ng-container *ngFor="let invalid of _invalids[resource][_defId][dateKey].invalids; trackBy: _getKey;">\n              <div *ngIf="invalid.position"\n                [class]="\'mbsc-schedule-invalid\' + invalid.cssClass + _theme"\n                [ngStyle]="invalid.position"\n              >\n                <div class="mbsc-schedule-invalid-text">{{invalid.allDay ? \'\' : invalid.title}}</div>\n              </div>\n            </ng-container>\n          </ng-container>\n\n          <ng-container *ngIf="_colors[resource][_defId][dateKey]">\n            <div *ngFor="let color of _colors[resource][_defId][dateKey].colors; trackBy: _getKey;"\n              [class]="\'mbsc-schedule-color\' + color.cssClass + _theme"\n              [ngStyle]="color.position"\n            >\n              <div class="mbsc-schedule-color-text">{{color.title}}</div>\n            </div>\n          </ng-container>\n\n          <div *ngFor="let v of _times; let first = first; let last = last; trackBy: _getKey;"\n            (click)="onCellClick(_getEventArgs(timestamp, v, $event, resource))"\n            (dblclick)="onCellDoubleClick(_getEventArgs(timestamp, v, $event, resource))"\n            (contextmenu)="onCellRightClick(_getEventArgs(timestamp, v, $event, resource))"\n            [class]="\'mbsc-schedule-item mbsc-flex-1-0\' + _theme + _hb +\n              (last ? \' mbsc-schedule-item-last\' : \'\') +\n              (first && _startCellStyle || last && _endCellStyle ? \' mbsc-flex-none\' : \'\')"\n            [ngStyle]="first ? _startCellStyle : last ? _endCellStyle : {}"\n          >\n          </div>\n        </div>\n      </div>\n    </ng-template>\n\n    <ng-template #tplTimes let-tz="tz">\n      <div *ngFor="let v of _times; let i = index; let first = first; let last = last; trackBy: _getKey;"\n        [class]="\'mbsc-flex-col mbsc-flex-1-0 mbsc-schedule-time-wrapper\' + _theme + _rtl +\n          (last ? \' mbsc-schedule-time-wrapper-end\' : \'\') +\n          (first && _startCellStyle || last && _endCellStyle ? \' mbsc-flex-none\' : \'\')"\n        [ngStyle]="first ? _startCellStyle : last ? _endCellStyle : {}"\n      >\n        <div [class]="\'mbsc-flex-1-1 mbsc-schedule-time\' + _theme + _rtl">\n            {{first || v % _stepLabel === 0 ? _formatTime(first ? _startTime : v, tz ? tz.timezone : \'\') : \'\'}}\n        </div>\n\n        <ng-container *ngFor="let t of _timesBetween; let j = index; trackBy: _getKey">\n          <div *ngIf="v + (j + 1) * _stepLabel > _startTime && v + (j + 1) * _stepLabel < _endTime"\n            [class]="\'mbsc-flex-1-1 mbsc-schedule-time\' + _theme + _rtl">\n            {{_formatTime(v + (j + 1) * _stepLabel, tz ? tz.timezone : \'\')}}\n          </div>\n        </ng-container>\n\n        <div *ngIf="last" [class]="\'mbsc-schedule-time mbsc-schedule-time-end\' + _theme + _rtl">\n          {{_formatTime(_endTime + 1, tz ? tz.timezone : tz)}}\n        </div>\n      </div>\n    </ng-template>\n\n    <div [class]="\'mbsc-schedule-header mbsc-flex mbsc-flex-none\' + _theme + _hb">\n      <div [class]="\'mbsc-schedule-time-col mbsc-schedule-time-col-empty\' + _theme + _rtl + _hb" [ngStyle]="_timeWidth"></div>\n      <div class="mbsc-flex-1-1 mbsc-schedule-header-wrapper">\n        <div #headerCont class="mbsc-flex">\n          <div *ngIf="type === \'day\' && size === 1" class="mbsc-flex-1-0 mbsc-schedule-resource-group">\n            <div *ngIf="showDays" class="mbsc-flex">\n              <mbsc-week-day *ngFor="let dayData of _headerDays; trackBy: _getDayKey;"\n                class="mbsc-flex-1-1"\n                [day]="dayData.day"\n                [dayNames]="_dayNames"\n                [dayTemplate]="dayTemplate"\n                [dayContentTemplate]="dayContentTemplate"\n                [events]="eventMap[dayData.dateKey]"\n                [isToday]="_isToday(dayData.timestamp)"\n                [label]="dayData.label"\n                [largeNames]="_largeDayNames"\n                [onClick]="onWeekDayClick"\n                [rtl]="rtl"\n                [selectable]="true"\n                [selected]="_selectedDay === dayData.timestamp"\n                [theme]="theme"\n                [timestamp]="dayData.timestamp"\n              >\n              </mbsc-week-day>\n            </div>\n            <div *ngIf="resources" class="mbsc-flex">\n              <ng-container *ngFor="let resource of _resources; trackBy: _getId;">\n                <div *ngIf="resource.name || resourceTemplate"\n                  [class]="\'mbsc-schedule-resource mbsc-flex-1-0 mbsc-schedule-col-width\' + _theme + _rtl + _hb"\n                >\n                  <div class="mbsc-schedule-resource-title">\n                    <ng-template #default>\n                      {{resource.name}}\n                    </ng-template>\n                    <ng-template\n                      [ngTemplateOutlet]="resourceTemplate || default"\n                      [ngTemplateOutletContext]="{ $implicit: resource }">\n                    </ng-template>\n                  </div>\n                </div>\n              </ng-container>\n            </div>\n          </div>\n          <ng-container *ngIf="type !== \'day\' || size !== 1">\n            <ng-container *ngIf="_groupByResource">\n              <div *ngFor="let resource of _resources; trackBy: _getId;"\n                [class]="\'mbsc-flex-1-0 mbsc-schedule-resource-group\' + _theme + _rtl"\n              >\n                <div *ngIf="resource.name || resourceTemplate"\n                  [class]="\'mbsc-schedule-resource\' + _theme + _rtl + _hb"\n                >\n                  <div class="mbsc-schedule-resource-title">\n                    <ng-template #default>\n                      {{resource.name}}\n                    </ng-template>\n                    <ng-template\n                      [ngTemplateOutlet]="resourceTemplate || default"\n                      [ngTemplateOutletContext]="{ $implicit: resource }">\n                    </ng-template>\n                  </div>\n                </div>\n                <div *ngIf="showDays" class="mbsc-flex">\n                  <mbsc-week-day *ngFor="let dayData of _days; trackBy: _getDayKey;"\n                    class="mbsc-flex-1-0 mbsc-schedule-col-width"\n                    [day]="dayData.day"\n                    [dayNames]="_dayNames"\n                    [dayTemplate]="dayTemplate"\n                    [dayContentTemplate]="dayContentTemplate"\n                    [events]="eventMap[dayData.dateKey]"\n                    [isToday]="_isSingleResource &&_isToday(dayData.timestamp)"\n                    [label]="dayData.label"\n                    [largeNames]="_largeDayNames"\n                    [onClick]="onWeekDayClick"\n                    [rtl]="rtl"\n                    [selectable]="false"\n                    [selected]="_isSingleResource && _isToday(dayData.timestamp)"\n                    [theme]="theme"\n                    [timestamp]="dayData.timestamp"\n                  >\n                  </mbsc-week-day>\n                </div>\n              </div>\n            </ng-container>\n            <ng-container *ngIf="!_groupByResource">\n              <div *ngFor="let dayData of _days; trackBy: _getDayKey;"\n                [class]="\' mbsc-flex-1-0 mbsc-schedule-resource-group\' + _theme + _rtl"\n              >\n                <mbsc-week-day *ngIf="showDays"\n                  [day]="dayData.day"\n                  [dayNames]="_dayNames"\n                  [dayTemplate]="dayTemplate"\n                  [dayContentTemplate]="dayContentTemplate"\n                  [events]="eventMap[dayData.dateKey]"\n                  [isToday]="_isSingleResource && _isToday(dayData.timestamp)"\n                  [label]="dayData.label"\n                  [largeNames]="_largeDayNames"\n                  [onClick]="onWeekDayClick"\n                  [rtl]="rtl"\n                  [selectable]="false"\n                  [selected]="_isToday(dayData.timestamp)"\n                  [theme]="theme"\n                  [timestamp]="dayData.timestamp"\n                >\n                </mbsc-week-day>\n                <div *ngIf="resources" class="mbsc-flex">\n                  <ng-container *ngFor="let resource of _resources; trackBy: _getId;">\n                    <div *ngIf="resource.name || resourceTemplate"\n                      [class]="\'mbsc-schedule-resource mbsc-flex-1-0 mbsc-schedule-col-width\' + _theme + _rtl + _hb"\n                    >\n                      <div class="mbsc-schedule-resource-title">\n                        <ng-template #default>\n                          {{resource.name}}\n                        </ng-template>\n                        <ng-template\n                          [ngTemplateOutlet]="resourceTemplate || default"\n                          [ngTemplateOutletContext]="{ $implicit: resource }">\n                        </ng-template>\n                      </div>\n                    </div>\n                  </ng-container>\n                </div>\n              </div>\n            </ng-container>\n          </ng-container>\n        </div>\n      </div>\n      <div class="mbsc-schedule-fake-scroll-y"></div>\n    </div>\n    <div [class]="\'mbsc-schedule-all-day-cont\' + (state.showShadow ? \' mbsc-schedule-all-day-wrapper-shadow\' : \'\') + _theme">\n      <div *ngIf="timezones" class="mbsc-flex mbsc-schedule-timezone-labels" [ngStyle]="_timeWidth">\n        <div *ngFor="let tz of _timezones; trackBy: _getKey;"\n          [class]="\'mbsc-flex-1-0-0 mbsc-schedule-timezone-label\' + _theme + _rtl"\n        >\n          {{tz.label}}\n        </div>\n      </div>\n      <div *ngIf="showAllDay" [class]="\'mbsc-schedule-all-day-wrapper mbsc-flex-none\' + _theme + _hb">\n        <div [class]="\'mbsc-flex mbsc-schedule-all-day\' + _theme">\n          <div [class]="\'mbsc-schedule-time-col\' + _theme + _rtl" [ngStyle]="_timeWidth">\n            <div *ngIf="!timezones" [class]="\'mbsc-schedule-all-day-text\' + _theme">{{allDayText}}</div>\n          </div>\n          <div class="mbsc-flex-col mbsc-flex-1-1 mbsc-schedule-all-day-group-wrapper">\n            <div #allDayCont class="mbsc-flex mbsc-flex-1-1">\n              <ng-container *ngIf="_groupByResource">\n                <div *ngFor="let r of _resources; trackBy: _getId;"\n                  [class]="\'mbsc-flex mbsc-flex-1-0 mbsc-schedule-resource-group\' + _theme + _rtl"\n                >\n                  <ng-container *ngFor="let dayData of _days; trackBy: _getDayKey;"\n                    [ngTemplateOutlet]="tplAllDay"\n                    [ngTemplateOutletContext]="{\n                      dateKey: dayData.dateKey,\n                      resource: r.id,\n                      timestamp: dayData.timestamp\n                    }"\n                  >\n                  </ng-container>\n                </div>\n              </ng-container>\n              <ng-container *ngIf="!_groupByResource">\n                <div *ngFor="let dayData of _days; trackBy: _getDayKey;"\n                  [class]="\'mbsc-flex mbsc-flex-1-0 mbsc-schedule-resource-group\' + _theme + _rtl"\n                >\n                  <ng-container *ngFor="let r of _resources; trackBy: _getId;"\n                    [ngTemplateOutlet]="tplAllDay"\n                    [ngTemplateOutletContext]="{\n                      dateKey: dayData.dateKey,\n                      resource: r.id,\n                      timestamp: dayData.timestamp\n                    }"\n                  >\n                  </ng-container>\n                </div>\n              </ng-container>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n    <div [class]="\'mbsc-flex mbsc-flex-1-1 mbsc-schedule-grid-wrapper\' + _theme"><div [innerHTML]="textParam"></div>\n      <div #timeCont aria-hidden="true"\n        [class]="\'mbsc-flex-col mbsc-schedule-time-col mbsc-schedule-time-cont\' + _theme + _rtl"\n        [ngStyle]="_timeWidth"\n      >\n        <div class="mbsc-flex mbsc-schedule-time-cont-inner">\n          <div class="mbsc-flex-col mbsc-flex-1-1">\n            <div [class]="\'mbsc-flex-1-1 mbsc-schedule-time-cont-pos\' + _theme +\n              (timezones ? \' mbsc-flex \' : \' mbsc-flex-col mbsc-schedule-time-col-last\')"\n            >\n              <div *ngFor="let tz of _timezones; let last = last; trackBy: _getKey;"\n                [class]="\'mbsc-flex-col\' + _theme + (last ? \' mbsc-schedule-time-col-last\' : \'\')"\n              >\n                <ng-container *ngIf="timezones" [ngTemplateOutlet]="tplTimes" [ngTemplateOutletContext]="{ tz: tz }">\n                </ng-container>\n              </div>\n              <ng-container *ngIf="!timezones" [ngTemplateOutlet]="tplTimes">\n              </ng-container>\n              <mbsc-time-indicator *ngIf="_showTimeIndicator"\n                [amText]="s.amText"\n                [displayedTime]="_time"\n                [displayedDays]="_days"\n                [displayTimezone]="displayTimezone"\n                [endDay]="endDay"\n                [firstDay]="_firstDayTz"\n                orientation="x"\n                [pmText]="s.pmText"\n                [rtl]="rtl"\n                [showDayIndicator]="_isSingleResource && !_isMulti && type === \'week\'"\n                [startDay]="startDay"\n                [startTime]="_startTime"\n                [theme]="theme"\n                [timeFormat]="timeFormat"\n                [timezones]="_timezones"\n                [timezonePlugin]="timezonePlugin">\n              </mbsc-time-indicator>\n            </div>\n            <div *ngIf="state.hasScrollX" class="mbsc-schedule-fake-scroll-x"></div>\n          </div>\n          <div class="mbsc-schedule-fake-scroll-y"></div>\n        </div>\n      </div>\n      <div #scrollCont [class]="\'mbsc-flex-col mbsc-flex-1-1 mbsc-schedule-grid-scroll\' + _theme" (scroll)="_onScroll()">\n        \x3c!-- The extra flex div is needed for the div width to expand correctly --\x3e\n        <div class="mbsc-flex mbsc-flex-1-1">\n          <div #gridCont class="mbsc-flex mbsc-schedule-grid">\n            <ng-container *ngIf="_groupByResource">\n              <div *ngFor="let r of _resources; trackBy: _getId;"\n                [class]="\'mbsc-flex mbsc-flex-1-0 mbsc-schedule-resource-group\' + _theme + _rtl"\n              >\n                <ng-container *ngFor="let dayData of _days; trackBy: _getDayKey;">\n                  <ng-container\n                    [ngTemplateOutlet]="tplDay"\n                    [ngTemplateOutletContext]="{\n                      dateKey: dayData.dateKey,\n                      resource: r.id,\n                      timestamp: dayData.timestamp\n                    }"\n                  >\n                  </ng-container>\n                </ng-container>\n              </div>\n            </ng-container>\n            <ng-container *ngIf="!_groupByResource">\n              <div *ngFor="let dayData of _days; trackBy: _getDayKey;"\n                [class]="\'mbsc-flex mbsc-flex-1-0 mbsc-schedule-resource-group\' + _theme + _rtl"\n              >\n                <ng-container *ngFor="let r of _resources; trackBy: _getId;">\n                  <ng-container\n                    [ngTemplateOutlet]="tplDay"\n                    [ngTemplateOutletContext]="{\n                      dateKey: dayData.dateKey,\n                      resource: r.id,\n                      timestamp: dayData.timestamp\n                    }"\n                  >\n                  </ng-container>\n                </ng-container>\n              </div>\n            </ng-container>\n          </div>\n        </div>\n      </div>\n    </div>\n    <div *ngIf="state.dragData && !state.isTouchDrag" class="mbsc-calendar-dragging"></div>\n  '}]}];MbscScheduler.propDecorators={vScrollCont:[{type:core.ViewChild,args:["scrollCont",{static:true,read:core.ElementRef}]}],vGridCont:[{type:core.ViewChild,args:["gridCont",{static:true,read:core.ElementRef}]}],vHeaderCont:[{type:core.ViewChild,args:["headerCont",{static:false,read:core.ElementRef}]}],vAllDayCont:[{type:core.ViewChild,args:["allDayCont",{static:false,read:core.ElementRef}]}],vTimeCont:[{type:core.ViewChild,args:["timeCont",{static:true,read:core.ElementRef}]}],allDayText:[{type:core.Input}],amText:[{type:core.Input}],clickToCreate:[{type:core.Input}],colorsMap:[{type:core.Input}],dataTimezone:[{type:core.Input}],dateFormat:[{type:core.Input}],dateFormatLong:[{type:core.Input}],dayNames:[{type:core.Input}],dayNamesMin:[{type:core.Input}],dayNamesShort:[{type:core.Input}],dayTemplate:[{type:core.Input}],dayContentTemplate:[{type:core.Input}],events:[{type:core.Input}],displayTimezone:[{type:core.Input}],dragTimeStep:[{type:core.Input}],dragToCreate:[{type:core.Input}],dragToMove:[{type:core.Input}],dragToResize:[{type:core.Input}],endDay:[{type:core.Input}],endTime:[{type:core.Input}],eventDragEnd:[{type:core.Input}],eventMap:[{type:core.Input}],eventContentTemplate:[{type:core.Input}],eventOrder:[{type:core.Input}],eventTemplate:[{type:core.Input}],exclusiveEndDates:[{type:core.Input}],extendDefaultEvent:[{type:core.Input}],externalDrop:[{type:core.Input}],firstDay:[{type:core.Input}],fromText:[{type:core.Input}],getDay:[{type:core.Input}],getDate:[{type:core.Input}],getMonth:[{type:core.Input}],getYear:[{type:core.Input}],groupBy:[{type:core.Input}],height:[{type:core.Input}],invalidateEvent:[{type:core.Input}],invalidsMap:[{type:core.Input}],maxDate:[{type:core.Input}],minDate:[{type:core.Input}],monthNames:[{type:core.Input}],monthNamesShort:[{type:core.Input}],newEventText:[{type:core.Input}],pmText:[{type:core.Input}],refDate:[{type:core.Input}],resources:[{type:core.Input}],resourceTemplate:[{type:core.Input}],scroll:[{type:core.Input}],selected:[{type:core.Input}],selectedEventsMap:[{type:core.Input}],showAllDay:[{type:core.Input}],showDays:[{type:core.Input}],showEventTooltip:[{type:core.Input}],size:[{type:core.Input}],startDay:[{type:core.Input}],startTime:[{type:core.Input}],timeCellStep:[{type:core.Input}],timeFormat:[{type:core.Input}],timeLabelStep:[{type:core.Input}],timezonePlugin:[{type:core.Input}],timezones:[{type:core.Input}],toText:[{type:core.Input}],type:[{type:core.Input}],width:[{type:core.Input}],onCellClick:[{type:core.Input}],onCellDoubleClick:[{type:core.Input}],onCellRightClick:[{type:core.Input}],onEventClick:[{type:core.Input}],onEventDoubleClick:[{type:core.Input}],onEventRightClick:[{type:core.Input}],onEventHoverIn:[{type:core.Input}],onEventHoverOut:[{type:core.Input}],onEventDelete:[{type:core.Input}],onEventDragEnd:[{type:core.Input}],onEventDragStart:[{type:core.Input}],onWeekDayClick:[{type:core.Input}]};return MbscScheduler}(SchedulerBase);var MbscTimeIndicator=/*#__PURE__*/function(_super){__extends(MbscTimeIndicator,_super);function MbscTimeIndicator(){return _super!==null&&_super.apply(this,arguments)||this}MbscTimeIndicator.decorators=[{type:core.Component,args:[{changeDetection:core.ChangeDetectionStrategy.OnPush,encapsulation:core.ViewEncapsulation.None,selector:"mbsc-time-indicator",template:'\n    <div aria-hidden="true" [class]="_cssClass" [ngStyle]="_pos">\n      <div [class]="(timezones ? \'mbsc-flex \' : \'\') + \'mbsc-schedule-time-indicator-time mbsc-schedule-time-indicator-time-\' +\n        orientation + _theme + _rtl"\n      >\n        <ng-container *ngIf="timezones">\n          <div *ngFor="let t of timezones; let i = index; trackBy: _getKey;"\n            [class]="\'mbsc-schedule-time-indicator-tz\' + _theme + _rtl"\n          >\n            {{_times[i]}}\n          </div>\n        </ng-container>\n        <ng-container *ngIf="!timezones">\n          {{_time}}\n        </ng-container>\n      </div>\n      <div *ngIf="showDayIndicator"\n        [class]="\'mbsc-schedule-time-indicator-day\' + _theme"\n        [ngStyle]="_dayPos"\n      ></div>\n    </div>\n  '}]}];MbscTimeIndicator.propDecorators={amText:[{type:core.Input}],displayedTime:[{type:core.Input}],displayedDays:[{type:core.Input}],displayTimezone:[{type:core.Input}],endDay:[{type:core.Input}],firstDay:[{type:core.Input}],orientation:[{type:core.Input}],pmText:[{type:core.Input}],rtl:[{type:core.Input}],showDayIndicator:[{type:core.Input}],startDay:[{type:core.Input}],startTime:[{type:core.Input}],theme:[{type:core.Input}],timeFormat:[{type:core.Input}],timezones:[{type:core.Input}],timezonePlugin:[{type:core.Input}]};return MbscTimeIndicator}(TimeIndicatorBase);var MbscTimeline=/*#__PURE__*/function(_super){__extends(MbscTimeline,_super);function MbscTimeline(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this._defId=DEF_ID;_this._oneDay=ONE_DAY;return _this}MbscTimeline.prototype._checkDisplay=function(event){return checkDateRangeOverlap(this._batchStart,this._batchEnd,event.startDate,event.endDate,true)};MbscTimeline.prototype._getDayKey=function(index,day){return day.timestamp};MbscTimeline.prototype._getEventArgs=function(dayEvents,slot,v,event,resource){return {date:getCellDate(dayEvents.timestamp,v),domEvent:event,resource:resource,slot:slot.id,source:"timeline"}};MbscTimeline.prototype._getEventKey=function(index,data){return data.uid};MbscTimeline.prototype._getDragKey=function(resourceId,slotId,dateKey){return resourceId+"__"+slotId+"__"+dateKey};MbscTimeline.prototype._getId=function(index,data){return data.id};MbscTimeline.prototype._mounted=function(){this._headerCont=this.vHeaderCont&&this.vHeaderCont.nativeElement;this._scrollCont=this.vScrollCont&&this.vScrollCont.nativeElement;this._gridCont=this.vGridCont&&this.vGridCont.nativeElement;this._resCont=this.vResCont&&this.vResCont.nativeElement;this._stickyDate=this.vStickyDate&&this.vStickyDate.nativeElement;this._stickyHeader=this.vStickyHeader&&this.vStickyHeader.nativeElement;this._stickyMonth=this.vStickyMonth&&this.vStickyMonth.nativeElement;this._stickyWeek=this.vStickyWeek&&this.vStickyWeek.nativeElement;_super.prototype._mounted.call(this);};MbscTimeline.decorators=[{type:core.Component,args:[{changeDetection:core.ChangeDetectionStrategy.OnPush,encapsulation:core.ViewEncapsulation.None,host:{"[class]":'"mbsc-timeline mbsc-flex-1-1 mbsc-flex-col" +\n      (state.cellWidth ? "" : " mbsc-hidden") +\n      (resources ? "" : " mbsc-timeline-no-resource") + _theme + _rtl'},selector:"mbsc-timeline",template:'\n    <ng-template #tplResource let-res="res">\n      <div [class]="\'mbsc-timeline-resource\' + _theme + _rtl + _hb + (res.children ? \' mbsc-timeline-parent mbsc-flex\' : \'\')"\n        [style.minHeight.px]="_setRowHeight ? _eventRows[res.id] * _eventHeight + 10 : undefined"\n        [style.paddingLeft.em]="rtl ? undefined : res.depth * 1.75"\n        [style.paddingRight.em]="rtl ? res.depth * 1.75 : undefined"\n      >\n        <mbsc-icon *ngIf="res.children"\n          [class]="\'mbsc-timeline-resource-icon\' + _rtl + _hb"\n          [svg]="res.collapsed ? (rtl ? nextIconRtl : nextIcon) : downIcon"\n          [theme]="theme"\n          (click)="_onParentClick(res)"\n        >\n        </mbsc-icon>\n        <div [class]="\'mbsc-timeline-resource-title\' + (res.children ? \' mbsc-flex-1-1\' : \'\')">\n          <ng-template #default>{{res.name}}</ng-template>\n          <ng-template [ngTemplateOutlet]="resourceTemplate || default" [ngTemplateOutletContext]="{ $implicit: res }">\n          </ng-template>\n        </div>\n      </div>\n    </ng-template>\n\n    <ng-template #tplRow let-res="res">\n      <div\n        [class]="\'mbsc-flex mbsc-timeline-row\' + _theme + _hb + (res.children ? \' mbsc-timeline-parent\' : \'\')"\n        [style.minHeight.px]="_setRowHeight ? _eventRows[res.id] * _eventHeight + 10 : undefined"\n      >\n        <ng-container *ngIf="!_hasSlots" [ngTemplateOutlet]="tplDayData" [ngTemplateOutletContext]="{\n          dateKey: \'all\',\n          dragData: state.dragData,\n          dragKey: _getDragKey(res.id, _defId, \'all\'),\n          resource: res.id,\n          slot: _defId\n        }">\n        </ng-container>\n\n        <div [style.width.px]="_placeholderSizeX" class="mbsc-flex-none"></div>\n\n        <div *ngFor="let dayData of _daysBatch; trackBy: _getDayKey;"\n          [class]="\'mbsc-timeline-day mbsc-flex\' + _theme + _rtl + _hb +\n            ((dayData.dateIndex < this._daysNr - 1 && _stepCell < _oneDay) || dayData.lastOfMonth ? \' mbsc-timeline-day-border\' : \'\') +\n            (state.hasScrollX ? \' mbsc-flex-none\' : \' mbsc-flex-1-1\') +\n            (type === \'month\' || _isMulti ? \' mbsc-timeline-day-month\' : \'\')"\n        >\n          <div *ngFor="let slot of _slots; trackBy: _getId;" [class]="\'mbsc-flex mbsc-flex-1-1\' + (_hasSlots ? \' mbsc-timeline-slot\' : \'\')">\n            <ng-container *ngIf="_hasSlots" [ngTemplateOutlet]="tplDayData" [ngTemplateOutletContext]="{\n              dateKey: dayData.dateKey,\n              dragData: state.dragData,\n              dragKey: _getDragKey(res.id, slot.id, dayData.dateKey),\n              resource: res.id,\n              slot: slot.id\n            }">\n            </ng-container>\n            <div *ngFor="let v of _times; let first = first; let last = last; trackBy: _getKey;"\n              [class]="\'mbsc-timeline-column mbsc-flex-1-1\' + _theme + _rtl + _hb +\n                (first && _startCellStyle || last && _endCellStyle ? \' mbsc-flex-none\' : \'\')"\n              (click)="onCellClick(_getEventArgs(dayData, slot, v, $event, res.id))"\n              (dblclick)="onCellDoubleClick(_getEventArgs(dayData, slot, v, $event, res.id))"\n              (contextmenu)="onCellRightClick(_getEventArgs(dayData, slot, v, $event, res.id))"\n              [ngStyle]="first && !last ? _startCellStyle : last && !first ? _endCellStyle : {}"\n            >\n            </div>\n          </div>\n        </div>\n      </div>\n    </ng-template>\n\n    <ng-template #tplDayData let-dateKey="dateKey" let-dragData="dragData" let-dragKey="dragKey" let-resource="resource" let-slot="slot">\n      <div class="mbsc-timeline-events">\n        <ng-container *ngIf="_events[resource][slot][dateKey]">\n          <ng-container *ngFor="let event of _events[resource][slot][dateKey].events; trackBy: _getEventKey;">\n            <mbsc-schedule-event *ngIf="_checkDisplay(event)"\n              [contentTemplate]="eventContentTemplate"\n              [displayTimezone]="displayTimezone"\n              [drag]="dragToMove"\n              [event]="event"\n              [endDay]="endDay"\n              [eventHeight]="_setRowHeight ? _eventHeight : undefined"\n              [exclusiveEndDates]="exclusiveEndDates"\n              [gridEndTime]="_endTime"\n              [gridStartTime]="_startTime"\n              [inactive]="dragData && dragData.draggedEvent && dragData.draggedEvent.id === event.id"\n              [isTimeline]="true"\n              [isListing]="eventList"\n              [lastDay]="_lastDay"\n              [resize]="dragToResize"\n              [resource]="resource"\n              [rtl]="rtl"\n              [selected]="selectedEventsMap[event.uid] || selectedEventsMap[event.id]"\n              [slot]="slot"\n              [startDay]="startDay"\n              [theme]="theme"\n              [template]="eventTemplate"\n              [timezonePlugin]="timezonePlugin"\n              (onClick)="onEventClick($event)"\n              (onDoubleClick)="onEventDoubleClick($event)"\n              (onRightClick)="onEventRightClick($event)"\n              (onHoverIn)="onEventHoverIn($event)"\n              (onHoverOut)="onEventHoverOut($event)"\n              (onDelete)="onEventDelete($event)"\n              (onDragStart)="_onEventDragStart($event)"\n              (onDragMove)="_onEventDragMove($event)"\n              (onDragEnd)="_onEventDragEnd($event)"\n              (onDragModeOn)="_onEventDragModeOn($event)"\n              (onDragModeOff)="_onEventDragModeOff($event)"\n            >\n            </mbsc-schedule-event>\n          </ng-container>\n        </ng-container>\n        <mbsc-schedule-event *ngIf="dragData && dragData.originDates && dragData.originDates[dragKey]"\n          [contentTemplate]="eventContentTemplate"\n          [displayTimezone]="displayTimezone"\n          [drag]="dragToMove"\n          [event]="dragData.originDates[dragKey]"\n          [endDay]="endDay"\n          [exclusiveEndDates]="exclusiveEndDates"\n          [gridEndTime]="_endTime"\n          [gridStartTime]="_startTime"\n          [hidden]="!!dragData.draggedDates"\n          [isDrag]="true"\n          [isTimeline]="true"\n          [isListing]="eventList"\n          [lastDay]="_lastDay"\n          [resize]="dragToResize"\n          [resource]="resource"\n          [rtl]="rtl"\n          [slot]="slot"\n          [startDay]="startDay"\n          [theme]="theme"\n          [template]="eventTemplate"\n          [timezonePlugin]="timezonePlugin"\n          (onDragStart)="_onEventDragStart($event)"\n          (onDragMove)="_onEventDragMove($event)"\n          (onDragEnd)="_onEventDragEnd($event)"\n          (onDragModeOff)="_onEventDragModeOff($event)"\n        >\n        </mbsc-schedule-event>\n        <mbsc-schedule-event *ngIf="dragData && dragData.draggedDates && dragData.draggedDates[dragKey]"\n          [contentTemplate]="eventContentTemplate"\n          [displayTimezone]="displayTimezone"\n          [drag]="dragToMove"\n          [event]="dragData.draggedDates[dragKey]"\n          [endDay]="endDay"\n          [exclusiveEndDates]="exclusiveEndDates"\n          [gridEndTime]="_endTime"\n          [gridStartTime]="_startTime"\n          [isDrag]="true"\n          [isTimeline]="true"\n          [isListing]="eventList"\n          [lastDay]="_lastDay"\n          [resize]="dragToResize"\n          [resource]="resource"\n          [rtl]="rtl"\n          [slot]="slot"\n          [startDay]="startDay"\n          [theme]="theme"\n          [template]="eventTemplate"\n          [timezonePlugin]="timezonePlugin"\n        >\n        </mbsc-schedule-event>\n      </div>\n      <ng-container *ngIf="_invalids[resource][slot][dateKey]">\n        <ng-container *ngFor="let invalid of _invalids[resource][slot][dateKey].invalids; trackBy: _getKey;">\n          <div *ngIf="invalid.position && _checkDisplay(invalid)"\n            [class]="\'mbsc-schedule-invalid mbsc-timeline-invalid\' + invalid.cssClass + _theme"\n            [ngStyle]="invalid.position"\n          >\n            <div class="mbsc-schedule-invalid-text">{{invalid.title}}</div>\n          </div>\n        </ng-container>\n      </ng-container>\n      <ng-container *ngIf="_colors[resource][slot][dateKey]">\n        <ng-container *ngFor="let color of _colors[resource][slot][dateKey].colors; trackBy: _getKey;">\n          <div *ngIf="_checkDisplay(color)"\n            [class]="\'mbsc-schedule-color mbsc-timeline-color\' + color.cssClass + _theme"\n            [ngStyle]="color.position"\n          >\n            <div class="mbsc-schedule-color-text">{{color.title}}</div>\n          </div>\n        </ng-container>\n      </ng-container>\n    </ng-template>\n\n    <div [innerHTML]="textParam"></div>\n    <div #stickyHeader class="mbsc-timeline-header-sticky mbsc-flex">\n      <div *ngIf="!!resources" [class]="\'mbsc-timeline-resource-empty mbsc-timeline-resource-col\' + _headerClass + _theme + _rtl + _hb">\n          <div class="mbsc-timeline-resource-header">\n            <ng-template [ngTemplateOutlet]="resourceHeaderTemplate"></ng-template>\n          </div>\n      </div>\n      <div class="mbsc-flex-1-1">\n        <div *ngIf="_isMulti" [class]="\'mbsc-timeline-header-month\' + _theme + _rtl + _hb">\n          <div #stickyMonth [class]="\'mbsc-timeline-header-text mbsc-timeline-header-month-text\' + _theme"></div>\n        </div>\n        <div *ngIf="weekNumbers" [class]="\'mbsc-timeline-header-week\' + _theme + _rtl + _hb">\n          <div #stickyWeek [class]="\'mbsc-timeline-header-text mbsc-timeline-header-week-text\' + _theme"></div>\n        </div>\n        <div *ngIf="_hasSlots || _stepCell < _oneDay" [class]="\'mbsc-timeline-header-date\' + _theme + _rtl + _hb">\n          <div #stickyDate [class]="\'mbsc-timeline-header-text mbsc-timeline-header-date-text\' + _theme"></div>\n        </div>\n      </div>\n      <div *ngIf="state.hasScrollY" class="mbsc-schedule-fake-scroll-y"></div>\n    </div>\n    <div #scrollCont [class]="\'mbsc-timeline-grid-scroll mbsc-flex-col mbsc-flex-1-1\' + _theme + _rtl + _hb" (scroll)="_onScroll()">\n      <div *ngIf="!_hasSticky" [class]="\'mbsc-flex-none\' + _headerClass"></div>\n      <div #headerCont [class]="\'mbsc-timeline-header mbsc-flex\' + _theme + _rtl + _hb">\n        <div *ngIf="!!resources"\n          [class]="\'mbsc-timeline-resource-empty mbsc-timeline-resource-col\' + _headerClass + _theme + _rtl + _hb">\n        </div>\n        <div [class]="\'mbsc-timeline-header-bg mbsc-flex-1-1 mbsc-flex\' + _theme">\n          <div *ngIf="_showTimeIndicator" class="mbsc-timeline-time-indicator-cont"\n            [style.height.px]="(state.scrollContHeight || 0) - (state.headerHeight || 0)"\n            [style.width.px]="state.hasScrollX ? this._gridWidth : undefined"\n          >\n            <mbsc-time-indicator\n              [amText]="s.amText"\n              [displayedTime]="_time"\n              [displayedDays]="_daysNr"\n              [displayTimezone]="displayTimezone"\n              [endDay]="endDay"\n              [firstDay]="_firstDayTz"\n              orientation="y"\n              [pmText]="s.pmText"\n              [rtl]="rtl"\n              [startDay]="startDay"\n              [startTime]="_startTime"\n              [theme]="theme"\n              [timeFormat]="timeFormat"\n              [timezonePlugin]="timezonePlugin"\n              >\n            </mbsc-time-indicator>\n          </div>\n          <div [style.width.px]="_placeholderSizeX" class="mbsc-flex-none"></div>\n          <div [class]="state.hasScrollX ? \'mbsc-flex-none\' : \'mbsc-flex-1-1\'">\n            <div *ngIf="_isMulti" class="mbsc-flex">\n              <div *ngFor="let d of _daysBatch; trackBy: _getDayKey;" [class]="\'mbsc-timeline-month mbsc-flex-1-0-0\' + _theme + _rtl + _hb +\n                (d.lastOfMonth ? \' mbsc-timeline-day mbsc-timeline-day-border\' : \'\')">\n                <div [class]="\'mbsc-timeline-header-month\' + _theme + _rtl + _hb +\n                  (d.lastOfMonth ? \' mbsc-timeline-header-month-last\' : \'\')"\n                >\n                  <div [class]="\'mbsc-timeline-header-month-text\' + _theme +\n                    (d.lastOfMonth ? \' mbsc-timeline-header-month-text-last\' : \'\')"\n                  >\n                    {{d.monthTitle}}\n                  </div>\n                </div>\n              </div>\n            </div>\n            <div *ngIf="s.weekNumbers" class="mbsc-flex">\n              <div *ngFor="let d of _daysBatch; trackBy: _getDayKey;" [class]="\'mbsc-timeline-month mbsc-flex-1-0-0\' + _theme + _rtl + _hb +\n                (d.lastOfWeek && (_stepCell < _oneDay || d.lastOfMonth) ? \' mbsc-timeline-day mbsc-timeline-day-border\' : \'\')">\n                <div [class]="\'mbsc-timeline-header-week\' + _theme + _rtl + _hb +\n                  (d.lastOfWeek ? \' mbsc-timeline-header-week-last\' : \'\')"\n                >\n                  <div [class]="\'mbsc-timeline-header-week-text\' + _theme +\n                    (d.lastOfWeek ? \' mbsc-timeline-header-week-text-last\' : \'\')"\n                  >\n                    {{d.weekTitle}}\n                  </div>\n                </div>\n              </div>\n            </div>\n            <div class="mbsc-flex">\n              <div *ngFor="let d of _daysBatch; trackBy: _getDayKey;"\n                [class]="\'mbsc-timeline-day mbsc-flex-1-0-0\' + _theme + _rtl + _hb +\n                  ((d.dateIndex < _daysNr - 1 && _stepCell < _oneDay) || d.lastOfMonth ? \' mbsc-timeline-day-border\' : \'\') +\n                  (type === \'month\' || _isMulti ? \' mbsc-timeline-day-month\' : \'\')"\n              >\n                <div [class]="\'mbsc-timeline-header-date\' + _theme + _rtl + _hb">\n                  <div aria-hidden="true" [class]="\'mbsc-timeline-header-date-text\'">\n                    {{d.dateText}}\n                  </div>\n                  <div *ngIf="d.label" class="mbsc-hidden-content">{{d.label}}</div>\n                </div>\n                <div *ngIf="_hasSlots" [class]="\'mbsc-flex mbsc-timeline-slots\' + _theme">\n                  <div *ngFor="let slot of _slots; trackBy: _getId;"\n                    [class]="\'mbsc-timeline-slot mbsc-timeline-slot-header\' + _rtl + _theme"\n                  >\n                    <div class="mbsc-timeline-slot-title">\n                      <ng-template #defaultSlot>\n                          {{slot.name}}\n                        </ng-template>\n                        <ng-template\n                          [ngTemplateOutlet]="slotTemplate || defaultSlot"\n                          [ngTemplateOutletContext]="{ $implicit: { slot: slot, date: d.date }}">\n                        </ng-template>\n                      </div>\n                  </div>\n                </div>\n                <div aria-hidden="true" class="mbsc-flex">\n                  <div *ngFor="let t of _times; let i = index; let first = first; let last = last; trackBy: _getKey;"\n                    [ngStyle]="first && !last ? _startCellStyle : last && !first ? _endCellStyle : {}"\n                    [class]="\'mbsc-flex mbsc-flex-1-1 mbsc-timeline-header-column\' + _theme + _rtl + _hb +\n                      (!_displayTime || _hasSlots ? \' mbsc-timeline-no-height\' : \'\') +\n                      (_stepLabel > _stepCell && (_times[i + 1] % _stepLabel) ? \' mbsc-timeline-no-border\' : \'\') +\n                      ((first && _startCellStyle) || (last && _endCellStyle) ? \' mbsc-flex-none\' : \'\')"\n                  >\n                    <div [class]="\'mbsc-timeline-header-time mbsc-flex-1-1 \' + _theme">\n                      {{_displayTime ? _timeLabels[t] : \'\'}}\n                    </div>\n                    <ng-container *ngFor="let j of _timesBetween; trackBy: _getKey">\n                      <div *ngIf="t + (j + 1) * _stepLabel > _startTime && t + (j + 1) * _stepLabel < _endTime"\n                        [class]="\'mbsc-timeline-header-time mbsc-flex-1-1\' + _theme">\n                        {{_timeLabels[t + (j + 1) * _stepLabel]}}\n                      </div>\n                    </ng-container>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n      <div class="mbsc-flex mbsc-flex-1-1">\n        \x3c!-- The extra flex div is needed for the div height to expand correctly --\x3e\n        <div class="mbsc-flex mbsc-flex-1-1">\n          <div *ngIf="!!resources" #resCont [class]="\'mbsc-timeline-resources mbsc-timeline-resource-col mbsc-flex-col\' + _theme + _rtl">\n            <div *ngIf="!_hasSideSticky" [class]="\'mbsc-flex-none\' + _headerClass"></div>\n            <div [class]="\'mbsc-timeline-resource-bg mbsc-flex-1-1\' + (_hasHierarchy || state.hasScrollY ? \'\' : \' mbsc-flex-col\') + _theme">\n              <div [style.height.px]="_placeholderSizeY" class="mbsc-flex-none"></div>\n              <ng-template *ngFor="let r of _resourcesBatch; trackBy: _getId;"\n                [ngTemplateOutlet]="tplResource"\n                [ngTemplateOutletContext]="{ res: r }"\n              >\n              </ng-template>\n            </div>\n          </div>\n          <div *ngIf="!_hasSideSticky && !!resources" class="mbsc-timeline-resource-col"></div>\n          <div #gridCont [class]="\'mbsc-timeline-grid mbsc-flex-1-1\' + (_hasHierarchy || state.hasScrollY ? \'\' : \' mbsc-flex-col\')"\n            [style.width.px]="state.hasScrollX ? _gridWidth : undefined"\n            [style.height.px]="state.hasScrollY ? _gridHeight : undefined"\n          >\n            <div [style.height.px]="_placeholderSizeY" class="mbsc-flex-none"></div>\n            <ng-template *ngFor="let r of _resourcesBatch; trackBy: _getId;"\n              [ngTemplateOutlet]="tplRow"\n              [ngTemplateOutletContext]="{ res: r }"\n            >\n            </ng-template>\n          </div>\n        </div>\n      </div>\n    </div>\n    <div *ngIf="state.dragData && !state.isTouchDrag" class="mbsc-calendar-dragging"></div>\n  '}]}];MbscTimeline.propDecorators={vScrollCont:[{type:core.ViewChild,args:["scrollCont",{static:true,read:core.ElementRef}]}],vGridCont:[{type:core.ViewChild,args:["gridCont",{static:true,read:core.ElementRef}]}],vHeaderCont:[{type:core.ViewChild,args:["headerCont",{static:true,read:core.ElementRef}]}],vResCont:[{type:core.ViewChild,args:["resCont",{static:false,read:core.ElementRef}]}],vStickyHeader:[{type:core.ViewChild,args:["stickyHeader",{static:false,read:core.ElementRef}]}],vStickyDate:[{type:core.ViewChild,args:["stickyDate",{static:false,read:core.ElementRef}]}],vStickyMonth:[{type:core.ViewChild,args:["stickyMonth",{static:false,read:core.ElementRef}]}],vStickyWeek:[{type:core.ViewChild,args:["stickyWeek",{static:false,read:core.ElementRef}]}],allDayText:[{type:core.Input}],amText:[{type:core.Input}],clickToCreate:[{type:core.Input}],colorsMap:[{type:core.Input}],dateFormat:[{type:core.Input}],dateFormatLong:[{type:core.Input}],dataTimezone:[{type:core.Input}],dayNames:[{type:core.Input}],dayNamesMin:[{type:core.Input}],dayNamesShort:[{type:core.Input}],displayTimezone:[{type:core.Input}],dragTimeStep:[{type:core.Input}],dragToCreate:[{type:core.Input}],dragToMove:[{type:core.Input}],dragToResize:[{type:core.Input}],endDay:[{type:core.Input}],endTime:[{type:core.Input}],eventDragEnd:[{type:core.Input}],eventMap:[{type:core.Input}],eventContentTemplate:[{type:core.Input}],eventOrder:[{type:core.Input}],eventTemplate:[{type:core.Input}],exclusiveEndDates:[{type:core.Input}],extendDefaultEvent:[{type:core.Input}],externalDrop:[{type:core.Input}],eventList:[{type:core.Input}],firstDay:[{type:core.Input}],fromText:[{type:core.Input}],getDay:[{type:core.Input}],getDate:[{type:core.Input}],getMonth:[{type:core.Input}],getWeekNumber:[{type:core.Input}],getYear:[{type:core.Input}],groupBy:[{type:core.Input}],height:[{type:core.Input}],invalidateEvent:[{type:core.Input}],invalidsMap:[{type:core.Input}],maxDate:[{type:core.Input}],minDate:[{type:core.Input}],monthNames:[{type:core.Input}],monthNamesShort:[{type:core.Input}],newEventText:[{type:core.Input}],nextIcon:[{type:core.Input}],nextIconRtl:[{type:core.Input}],downIcon:[{type:core.Input}],pmText:[{type:core.Input}],refDate:[{type:core.Input}],resources:[{type:core.Input}],resourceHeaderTemplate:[{type:core.Input}],resourceTemplate:[{type:core.Input}],rowHeight:[{type:core.Input}],scroll:[{type:core.Input}],selected:[{type:core.Input}],selectedEventsMap:[{type:core.Input}],showAllDay:[{type:core.Input}],showDays:[{type:core.Input}],showEventTooltip:[{type:core.Input}],size:[{type:core.Input}],slots:[{type:core.Input}],slotTemplate:[{type:core.Input}],startDay:[{type:core.Input}],startTime:[{type:core.Input}],timeCellStep:[{type:core.Input}],timeFormat:[{type:core.Input}],timeLabelStep:[{type:core.Input}],timezonePlugin:[{type:core.Input}],toText:[{type:core.Input}],type:[{type:core.Input}],weekNumbers:[{type:core.Input}],weekText:[{type:core.Input}],width:[{type:core.Input}],onCellClick:[{type:core.Input}],onCellDoubleClick:[{type:core.Input}],onCellRightClick:[{type:core.Input}],onEventClick:[{type:core.Input}],onEventDoubleClick:[{type:core.Input}],onEventRightClick:[{type:core.Input}],onEventHoverIn:[{type:core.Input}],onEventHoverOut:[{type:core.Input}],onEventDelete:[{type:core.Input}],onEventDragEnd:[{type:core.Input}],onEventDragStart:[{type:core.Input}],onWeekDayClick:[{type:core.Input}]};return MbscTimeline}(TimelineBase);var MbscEventcalendarModule=/*#__PURE__*/function(){function MbscEventcalendarModule(){}MbscEventcalendarModule.decorators=[{type:core.NgModule,args:[{declarations:[EventcalendarBase,MbscEventcalendar,MbscEventListDayDirective,MbscEventListItem,MbscScheduleEvent,MbscScheduler,MbscTimeline,MbscWeekDay,MbscTimeIndicator,ScheduleEventBase,SchedulerBase,STBase,TimeIndicatorBase,TimelineBase,WeekDayBase],exports:[MbscEventcalendar,MbscEventListDayDirective,MbscEventListItem,MbscCalendarHeaderModule,MbscDraggableModule],imports:[common.CommonModule,MbscCalendarHeaderModule,MbscCalendarViewModule,MbscIconModule,MbscListModule,MbscPopupModule]}]}];return MbscEventcalendarModule}();var CheckboxBase=/*#__PURE__*/function(_super){__extends(CheckboxBase,_super);function CheckboxBase(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this._onChange=function(ev){var s=_this.s;var checked=ev.target.checked;if(s.checked===UNDEFINED){_this.setState({checked:checked});}_this._change(checked);if(s.onChange){s.onChange(ev);}};return _this}CheckboxBase.prototype._mounted=function(){var _this=this;this._unlisten=gestureListener(this._input,{click:true,onBlur:function(){_this.setState({hasFocus:false});},onFocus:function(){_this.setState({hasFocus:true});},onPress:function(){_this.setState({isActive:true});},onRelease:function(){_this.setState({isActive:false});}});};CheckboxBase.prototype._change=function(checked){};CheckboxBase.prototype._render=function(s,state){var disabled=s.disabled===UNDEFINED?state.disabled:emptyOrTrue(s.disabled);var position=s.position==="start"?s.rtl?"right":"left":s.rtl?"left":"right";this._disabled=disabled;this._checked=s.checked!==UNDEFINED?emptyOrTrue(s.checked):state.checked===UNDEFINED?emptyOrTrue(s.defaultChecked):state.checked;this._cssClass="mbsc-checkbox mbsc-form-control-wrapper mbsc-font "+this._className+this._theme+this._rtl+this._hb+" mbsc-checkbox-"+position+(disabled?" mbsc-disabled":"");this._boxClass="mbsc-checkbox-box"+this._theme+" mbsc-checkbox-box-"+position+(state.hasFocus&&!disabled?" mbsc-focus":"")+(state.isActive&&!disabled?" mbsc-active":"")+(s.color?" mbsc-checkbox-box-"+s.color:"")+(disabled?" mbsc-disabled":"")+(this._checked?" mbsc-checked":"");};CheckboxBase.prototype._destroy=function(){this._unlisten();};CheckboxBase.defaults={position:"start"};CheckboxBase._name="Checkbox";CheckboxBase.decorators=[{type:core.Directive,args:[{selector:"[mbsc-cb-b]"}]}];return CheckboxBase}(BaseComponent);var MbscCheckbox=/*#__PURE__*/function(_super){__extends(MbscCheckbox,_super);function MbscCheckbox(){return _super!==null&&_super.apply(this,arguments)||this}Object.defineProperty(MbscCheckbox.prototype,"checked",{get:function(){return this._check},set:function(val){if(this._check!==val){this.props.checked=val;this._onFormChange(val);this._check=val;this.setState({checked:val});}},enumerable:true,configurable:true});MbscCheckbox.prototype.registerOnChange=function(fn){this._onFormChange=fn;};MbscCheckbox.prototype.registerOnTouched=function(fn){this._onFormTouch=fn;};MbscCheckbox.prototype.setDisabledState=function(disabled){this.setState({disabled:disabled});};MbscCheckbox.prototype.writeValue=function(val){this.checked=val;};MbscCheckbox.prototype._change=function(checked){this.checked=checked;};MbscCheckbox.prototype._mounted=function(){this._input=this.vInput.nativeElement;_super.prototype._mounted.call(this);};MbscCheckbox.decorators=[{type:core.Component,args:[{changeDetection:core.ChangeDetectionStrategy.OnPush,encapsulation:core.ViewEncapsulation.None,host:{"[class]":"_cssClass"},selector:"mbsc-checkbox",template:'\n    <input #input\n      type="checkbox"\n      class="mbsc-form-control-input mbsc-reset"\n      (blur)="_onFormTouch($event)"\n      (change)="_onChange($event)"\n      [checked]="_checked"\n      [disabled]="_disabled"\n      [name]="name || \'\'"\n    />\n    <span [class]="_boxClass"></span>\n    <span *ngIf="s.label" [class]="\'mbsc-form-control-label\' + _theme + (_disabled ? \' mbsc-disabled\' : \'\')">{{s.label}}</span>\n    <span *ngIf="s.description" [class]="\'mbsc-description\' + _theme + (_disabled ? \' mbsc-disabled\' : \'\')">{{s.description}}</span>\n    <ng-content></ng-content>\n  '}]}];MbscCheckbox.propDecorators={vInput:[{type:core.ViewChild,args:["input",{static:false}]}],checked:[{type:core.Input}],color:[{type:core.Input}],defaultChecked:[{type:core.Input}],description:[{type:core.Input}],disabled:[{type:core.Input}],inputStyle:[{type:core.Input}],label:[{type:core.Input}],name:[{type:core.Input}],position:[{type:core.Input}]};return MbscCheckbox}(CheckboxBase);var MbscCheckboxModule=/*#__PURE__*/function(){function MbscCheckboxModule(){}MbscCheckboxModule.decorators=[{type:core.NgModule,args:[{declarations:[CheckboxBase,MbscCheckbox],exports:[MbscCheckbox],imports:[common.CommonModule]}]}];return MbscCheckboxModule}();var popupQueue=[];var notificationQueue=[];var hasPromise=isBrowser&&!!win.Promise;function getOptions(queue,options,more,destroy,resolve){return __assign({closeOnOverlayClick:false,context:options.context,cssClass:"mbsc-alert",display:options.display||"center",onClose:function(){queue.shift();},onClosed:function(){handleClose(options,destroy,resolve);},theme:options.theme,themeVariant:options.themeVariant},more)}function getToastSnackbarOptions(options,destroy,resolve,isToast){return getOptions(notificationQueue,options,{animation:options.animation||(isToast?"pop":UNDEFINED),buttons:[],closeOnOverlayClick:false,contentPadding:isToast,cssClass:"mbsc-"+(isToast?"toast":"snackbar")+" mbsc-"+(options.color?options.color:"color-none")+" "+(options.cssClass||""),display:options.display||"bottom",focusOnClose:false,focusOnOpen:false,focusTrap:false,onOpen:function(ev,inst){handleOpen(options,inst);},scrollLock:false,showOverlay:false,touchUi:true},destroy,resolve)}function handleClose(options,destroy,resolve,result){resolve(result);if(options.callback){options.callback(result);}if(popupQueue.length){popupQueue[0].open();}else if(notificationQueue.length){notificationQueue[0].open();}destroy();}function handleOpen(options,inst){if(options.duration!==false){setTimeout((function(){inst.close();}),options.duration||3e3);}}function getToastOptions(options,destroy,resolve){return getToastSnackbarOptions(options,destroy,resolve,true)}function getSnackbarOptions(options,destroy,resolve){return getToastSnackbarOptions(options,destroy,resolve,false)}function getAlertOptions(options,destroy,resolve){return getOptions(popupQueue,options,{buttons:["ok"],cssClass:"mbsc-alert "+(options.cssClass||""),okText:options.okText||"OK"},destroy,resolve)}function getConfirmOptions(options,destroy,resolve){var result=false;return getOptions(popupQueue,options,{buttons:["cancel","ok"],cancelText:options.cancelText||"Cancel",cssClass:"mbsc-confirm "+(options.cssClass||""),okText:options.okText||"OK",onButtonClick:function(ev){if(ev.button.name==="ok"){result=true;}},onClosed:function(){handleClose(options,destroy,resolve,result);}},destroy,resolve)}function getPromptOptions(options,destroy,resolve,getValue){var okClicked;return getOptions(popupQueue,options,{activeElm:"input",buttons:["cancel","ok"],cancelText:options.cancelText||"Cancel",cssClass:"mbsc-prompt "+(options.cssClass||""),okText:options.okText||"OK",onButtonClick:function(ev){if(ev.button.name==="ok"){okClicked=true;}},onClosed:function(){handleClose(options,destroy,resolve,okClicked?getValue():null);}},destroy,resolve)}function showModal(popup){if(!popupQueue.length){popup.open();}popupQueue.push(popup);}function showNotification(notification){var activeNotification=notificationQueue[0];notificationQueue.push(notification);if(!popupQueue.length){if(activeNotification){activeNotification.close();}else {notification.open();}}}function promise(func,options){var p;if(hasPromise){p=new Promise((function(resolve){func(options,resolve);}));}else {func(options,noop);}return p}function getAlertElm(options){var elm=doc.createElement("div");elm.className="mbsc-alert-content";elm.innerHTML='<h2 class="mbsc-alert-title">'+options.title+'</h2><p class="mbsc-alert-message">'+options.message+"</p>";return elm}var Notifications=/*#__PURE__*/function(){function Notifications(_injector,_cfr,_app){var _this=this;this._injector=_injector;this._cfr=_cfr;this._app=_app;this._showToast=function(options,resolve){var elm=doc.createElement("div");elm.className="mbsc-toast-background mbsc-toast-message";elm.innerText=options.message;var instance=_this._createPopup(MbscPopup,options,getToastOptions,resolve,elm);showNotification(instance);};this._showSnackbar=function(options,resolve){var instance=_this._createPopup(MbscSnackbar,options,getSnackbarOptions,resolve);instance.button=options.button;instance.message=options.message;setTimeout((function(){showNotification(instance.popup);}));};this._showAlert=function(options,resolve){var elm=getAlertElm(options);var instance=_this._createPopup(MbscPopup,options,getAlertOptions,resolve,elm);showModal(instance);};this._showConfirm=function(options,resolve){var elm=getAlertElm(options);var instance=_this._createPopup(MbscPopup,options,getConfirmOptions,resolve,elm);showModal(instance);};this._showPrompt=function(options,resolve){var instance=_this._createPopup(MbscPrompt,options,getPromptOptions,resolve,UNDEFINED,(function(){return instance.value}));instance.inputType=options.inputType;instance.label=options.label;instance.message=options.message;instance.placeholder=options.placeholder;instance.title=options.title;setTimeout((function(){showModal(instance.popup);}));};this._cfr=this._injector.get(core.ComponentFactoryResolver);}Notifications.prototype.toast=function(options){return promise(this._showToast,options)};Notifications.prototype.snackbar=function(options){return promise(this._showSnackbar,options)};Notifications.prototype.alert=function(options){return promise(this._showAlert,options)};Notifications.prototype.confirm=function(options){return promise(this._showConfirm,options)};Notifications.prototype.prompt=function(options){return promise(this._showPrompt,options)};Notifications.prototype._createPopup=function(Comp,options,getPopupOptions,resolve,body,getValue){var componentFactory=this._cfr.resolveComponentFactory(Comp);var host=doc.createElement("div");var ref=componentFactory.create(this._injector,[[body]],host);var instance=ref.instance;var destroy=function(){ref.destroy();};instance.props=getPopupOptions(options,destroy,resolve,getValue);this._app.attachView(ref.hostView);return instance};Notifications.decorators=[{type:core.Injectable}];Notifications.ctorParameters=function(){return [{type:core.Injector},{type:core.ComponentFactoryResolver},{type:core.ApplicationRef}]};return Notifications}();var MbscNotificationsModule=/*#__PURE__*/function(){function MbscNotificationsModule(){}MbscNotificationsModule.decorators=[{type:core.NgModule,args:[{imports:[MbscInputModule,MbscPopupModule],providers:[Notifications]}]}];return MbscNotificationsModule}();var PageBase=/*#__PURE__*/function(_super){__extends(PageBase,_super);function PageBase(){return _super!==null&&_super.apply(this,arguments)||this}PageBase.prototype._render=function(s){this._cssClass="mbsc-page mbsc-font "+this._className+this._theme+this._rtl;};PageBase.defaults={};PageBase._name="Page";PageBase.decorators=[{type:core.Directive,args:[{selector:"[mbsc-page-b]"}]}];return PageBase}(BaseComponent);var MbscPage=/*#__PURE__*/function(_super){__extends(MbscPage,_super);function MbscPage(){return _super!==null&&_super.apply(this,arguments)||this}MbscPage.decorators=[{type:core.Component,args:[{changeDetection:core.ChangeDetectionStrategy.OnPush,encapsulation:core.ViewEncapsulation.None,host:{"[class]":"_cssClass"},selector:"mbsc-page",template:"<ng-content></ng-content>"}]}];return MbscPage}(PageBase);var MbscPageModule=/*#__PURE__*/function(){function MbscPageModule(){}MbscPageModule.decorators=[{type:core.NgModule,args:[{declarations:[MbscPage,PageBase],exports:[MbscPage],imports:[common.CommonModule]}]}];return MbscPageModule}();var guid$4=1;var RadioBase=/*#__PURE__*/function(_super){__extends(RadioBase,_super);function RadioBase(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this._id="mbsc-radio-"+guid$4++;_this._onChange=function(ev){var s=_this.s;var checked=ev.target.checked;_this._change(checked);if(_this._onGroupChange){_this._onGroupChange(ev,_this._value);}_this._toggle(checked);if(s.onChange){s.onChange(ev);}};_this._onValueChange=function(value){var s=_this.s;var checked=value===_this._value;if(s.checked===UNDEFINED){_this.setState({checked:checked});}_this._change(checked);};return _this}RadioBase.prototype._mounted=function(){var _this=this;this._unlisten=gestureListener(this._input,{click:true,onBlur:function(){_this.setState({hasFocus:false});},onFocus:function(){_this.setState({hasFocus:true});},onPress:function(){_this.setState({isActive:true});},onRelease:function(){_this.setState({isActive:false});}});};RadioBase.prototype._change=function(checked){};RadioBase.prototype._toggle=function(checked){if(this.s.checked===UNDEFINED){this.setState({checked:checked});}if(checked){setRadio(this._name,this._value);}};RadioBase.prototype._groupOptions=function(_a){var color=_a.color,disabled=_a.disabled,name=_a.name,onChange=_a.onChange,position=_a.position,rtl=_a.rtl,value=_a.value;var s=this.s;var state=this.state;var isRtl=rtl===UNDEFINED?s.rtl:rtl;var col=color===UNDEFINED?s.color:color;var p=position===UNDEFINED?s.position:position;var pos=p==="start"?s.rtl?"right":"left":s.rtl?"left":"right";var dis=disabled===UNDEFINED?s.disabled===UNDEFINED?state.disabled:emptyOrTrue(s.disabled):emptyOrTrue(disabled);var checked=s.checked!==UNDEFINED?emptyOrTrue(s.checked):state.checked===UNDEFINED?emptyOrTrue(s.defaultChecked):state.checked;this._value=s.value===UNDEFINED?this._id:s.value;this._onGroupChange=onChange;this._name=name===UNDEFINED?s.name:name;this._rtl=isRtl?" mbsc-rtl":" mbsc-ltr";this._checked=value===UNDEFINED?checked:value===this._value;this._disabled=dis;this._cssClass="mbsc-radio mbsc-form-control-wrapper mbsc-font "+this._className+this._theme+this._rtl+this._hb+" mbsc-radio-"+pos+(dis?" mbsc-disabled":"");this._boxClass="mbsc-radio-box"+this._theme+" mbsc-radio-box-"+pos+(state.hasFocus&&!dis?" mbsc-focus":"")+(state.isActive&&!dis?" mbsc-active":"")+(col?" mbsc-radio-box-"+col:"")+(dis?" mbsc-disabled":"")+(this._checked?" mbsc-checked":"");};RadioBase.prototype._updated=function(){if(this._name&&!this._unsubscribe){this._unsubscribe=subscribeRadio(this._name,this._onValueChange);}};RadioBase.prototype._destroy=function(){unsubscribeRadio(this._name,this._unsubscribe);this._unlisten();};RadioBase.defaults={position:"start"};RadioBase._name="Radio";RadioBase.decorators=[{type:core.Directive,args:[{selector:"[mbsc-radio-b]"}]}];return RadioBase}(BaseComponent);var guid$5=1;var RadioGroupBase=/*#__PURE__*/function(_super){__extends(RadioGroupBase,_super);function RadioGroupBase(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this._id="mbsc-radio-group"+guid$5++;_this._onChange=function(ev,val){var s=_this.s;_this.value=val;if(s.onChange){s.onChange(ev);}};return _this}RadioGroupBase.prototype._render=function(s){this._name=s.name===UNDEFINED?this._id:s.name;this._groupClass="mbsc-radio-group"+this._theme+this._rtl;};RadioGroupBase.defaults={};RadioGroupBase.decorators=[{type:core.Directive,args:[{selector:"[mbsc-rg-b]"}]}];return RadioGroupBase}(BaseComponent);var MbscRadio=/*#__PURE__*/function(_super){__extends(MbscRadio,_super);function MbscRadio(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.checkedChange=new core.EventEmitter;return _this}Object.defineProperty(MbscRadio.prototype,"checked",{get:function(){return this._check},set:function(val){var rs=this._radioService;if(this._check!==val){if(val){if(rs){rs.value=this.value;}this._onFormChange(this.value);}this.props.checked=val;this._check=val;this.setState({checked:val});}},enumerable:true,configurable:true});MbscRadio.prototype.registerOnChange=function(fn){this._onFormChange=fn;};MbscRadio.prototype.registerOnTouched=function(fn){this._onFormTouch=fn;};MbscRadio.prototype.setDisabledState=function(disabled){this.setState({disabled:disabled});};MbscRadio.prototype.writeValue=function(val){this.checked=this.value===val;};MbscRadio.prototype._ctor=function(){this._radioService=this._injector.get(MbscRadioService,null);};MbscRadio.prototype._change=function(checked){this.checked=checked;};MbscRadio.prototype._mounted=function(){this._input=this.vInput.nativeElement;_super.prototype._mounted.call(this);};MbscRadio.prototype._render=function(s,state){this._groupOptions(this._radioService||{});_super.prototype._render.call(this,s,state);};MbscRadio.decorators=[{type:core.Component,args:[{changeDetection:core.ChangeDetectionStrategy.OnPush,encapsulation:core.ViewEncapsulation.None,host:{"[class]":"_cssClass"},selector:"mbsc-radio",template:'\n    <input #input\n      type="radio"\n      class="mbsc-form-control-input mbsc-reset"\n      (blur)="_onFormTouch($event)"\n      (change)="_onChange($event)"\n      [checked]="_checked"\n      [disabled]="_disabled"\n      [name]="_name"\n      [value]="_value"\n    />\n    <span [class]="_boxClass"></span>\n    <span *ngIf="s.label" [class]="\'mbsc-form-control-label\' + _theme + (_disabled ? \' mbsc-disabled\' : \'\')">{{s.label}}</span>\n    <span *ngIf="s.description" [class]="\'mbsc-description\' + _theme + (_disabled ? \' mbsc-disabled\' : \'\')">{{s.description}}</span>\n    <ng-content></ng-content>\n  '}]}];MbscRadio.propDecorators={vInput:[{type:core.ViewChild,args:["input",{static:false}]}],color:[{type:core.Input}],checked:[{type:core.Input}],description:[{type:core.Input}],disabled:[{type:core.Input}],label:[{type:core.Input}],name:[{type:core.Input}],position:[{type:core.Input}],checkedChange:[{type:core.Output}]};return MbscRadio}(RadioBase);var MbscRadioGroup=/*#__PURE__*/function(_super){__extends(MbscRadioGroup,_super);function MbscRadioGroup(){return _super!==null&&_super.apply(this,arguments)||this}MbscRadioGroup.prototype._onValueChange=function(value){this._radioService.value=value;setRadio(this._radioService.name,value);};MbscRadioGroup.prototype._ctor=function(){this._radioService=this._injector.get(MbscRadioService);};MbscRadioGroup.prototype._render=function(s){_super.prototype._render.call(this,s);var rs=this._radioService;rs.color=s.color;rs.disabled=s.disabled;rs.name=this._name;rs.value=this.value;rs.onChange=this._onChange;rs.position=s.position;};MbscRadioGroup.decorators=[{type:core.Component,args:[{changeDetection:core.ChangeDetectionStrategy.OnPush,encapsulation:core.ViewEncapsulation.None,host:{"[class]":"_groupClass"},providers:[MbscRadioService],selector:"mbsc-radio-group",template:"<ng-content></ng-content>"}]}];MbscRadioGroup.propDecorators={color:[{type:core.Input}],disabled:[{type:core.Input}],name:[{type:core.Input}],position:[{type:core.Input}]};MbscRadioGroup=__decorate([FormControl],MbscRadioGroup);return MbscRadioGroup}(RadioGroupBase);var MbscRadioModule=/*#__PURE__*/function(){function MbscRadioModule(){}MbscRadioModule.decorators=[{type:core.NgModule,args:[{declarations:[RadioBase,RadioGroupBase,MbscRadio,MbscRadioGroup],exports:[MbscRadio,MbscRadioGroup],imports:[common.CommonModule]}]}];return MbscRadioModule}();var StepperBase=/*#__PURE__*/function(_super){__extends(StepperBase,_super);function StepperBase(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this._onChange=function(ev){var s=_this.s;var val=_this._round(+ev.target.value);ev.target.value=val+"";if(s.value===UNDEFINED){_this.setState({value:val});}_this._change(val);if(s.onChange){s.onChange(ev);}};_this._onMinusClick=function(){_this._setValue(_this._value-_this._step);};_this._onPlusClick=function(){_this._setValue(_this._value+_this._step);};return _this}StepperBase.prototype._change=function(val){};StepperBase.prototype._mounted=function(){listen(this._input,CHANGE,this._onChange);};StepperBase.prototype._render=function(s,state){this._max=isEmpty(s.max)?100:+s.max;this._min=isEmpty(s.min)?0:+s.min;this._step=isEmpty(s.step)?1:+s.step;var disabled=s.disabled===UNDEFINED?state.disabled:emptyOrTrue(s.disabled);var defVal=s.defaultValue!==UNDEFINED?s.defaultValue:this._min||0;var val=s.value!==UNDEFINED?s.value:state.value!==UNDEFINED?state.value:defVal;this._value=this._round(val);this._changed=this._value!==+val;this._disabled=disabled;this._disabledMinus=this._value===this._min||disabled;this._disabledPlus=this._value===this._max||disabled;this._cssClass="mbsc-stepper mbsc-form-control-wrapper mbsc-font mbsc-"+(s.color||"color-none")+this._theme+this._rtl+this._hb+" mbsc-stepper-"+s.inputPosition+(disabled?" mbsc-disabled":"");};StepperBase.prototype._updated=function(){this._input.value=this._value+"";if(this._changed){trigger(this._input,CHANGE);this._changed=false;}};StepperBase.prototype._destroy=function(){unlisten(this._input,CHANGE,this._onChange);};StepperBase.prototype._round=function(v){var step=this._step;var scale=Math.abs(step)<1?(step+"").split(".")[1].length:0;return +Math.min(this._max,Math.max(Math.round(v/step)*step,this._min)).toFixed(scale)};StepperBase.prototype._setValue=function(val){var oldValue=+this._input.value;var newValue=this._round(val);if(oldValue!==newValue){this._input.value=newValue+"";trigger(this._input,CHANGE);}};StepperBase.defaults={inputPosition:"center"};StepperBase._name="Stepper";StepperBase.decorators=[{type:core.Directive,args:[{selector:"[mbsc-stepper]"}]}];return StepperBase}(BaseComponent);var guid$6=0;var MbscStepper=/*#__PURE__*/function(_super){__extends(MbscStepper,_super);function MbscStepper(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.onChange=new core.EventEmitter;_this._id="mbsc-stepper-"+guid$6++;return _this}MbscStepper.prototype._change=function(value){this.value=value;};MbscStepper.prototype._mounted=function(){this._input=this.vInput.nativeElement;_super.prototype._mounted.call(this);};MbscStepper.decorators=[{type:core.Component,args:[{changeDetection:core.ChangeDetectionStrategy.OnPush,encapsulation:core.ViewEncapsulation.None,host:{"[class]":"_cssClass"},selector:"mbsc-stepper",template:'\n    <label class="mbsc-stepper-content" [for]="id || _id">\n      <span *ngIf="s.label" [class]="\'mbsc-stepper-label\' + _theme + (_disabled ? \' mbsc-disabled\' : \'\')">{{s.label}}</span>\n      <span *ngIf="s.description" [class]="\'mbsc-description\' + _theme + (_disabled ? \' mbsc-disabled\' : \'\')">{{s.description}}</span>\n    </label>\n    <div [class]="\'mbsc-stepper-control\' + _theme + _rtl">\n      <mbsc-button\n        class="mbsc-stepper-minus mbsc-stepper-button"\n        (click)="_onMinusClick()"\n        [disabled]="_disabledMinus"\n        [theme]="s.theme"\n        [theme]="s.themeVariant"\n      >\n        <span [class]="\'mbsc-stepper-inner\' + _theme">&ndash;</span>\n      </mbsc-button>\n      <input #input\n        [attr.name]="name"\n        [class]="\'mbsc-stepper-input\' + (_disabled ? \' mbsc-disabled\' : \'\') + _theme"\n        [disabled]="_disabled"\n        [id]="id || _id"\n        [max]="_max"\n        [min]="_min"\n        [readonly]="readonly"\n        [step]="_step"\n        type="number"\n      />\n      <mbsc-button\n        class="mbsc-stepper-plus mbsc-stepper-button"\n        (click)="_onPlusClick()"\n        [disabled]="_disabledPlus"\n        [theme]="s.theme"\n        [theme]="s.themeVariant"\n      >\n        <span [class]="\'mbsc-stepper-inner\' + _theme">+</span>\n      </mbsc-button>\n    </div>\n  '}]}];MbscStepper.propDecorators={vInput:[{type:core.ViewChild,args:["input",{static:false}]}],color:[{type:core.Input}],defaultValue:[{type:core.Input}],description:[{type:core.Input}],disabled:[{type:core.Input}],id:[{type:core.Input}],inputPosition:[{type:core.Input}],label:[{type:core.Input}],min:[{type:core.Input}],max:[{type:core.Input}],name:[{type:core.Input}],readonly:[{type:core.Input}],step:[{type:core.Input}],onChange:[{type:core.Output}]};MbscStepper=__decorate([FormControl],MbscStepper);return MbscStepper}(StepperBase);var MbscStepperModule=/*#__PURE__*/function(){function MbscStepperModule(){}MbscStepperModule.decorators=[{type:core.NgModule,args:[{declarations:[StepperBase,MbscStepper],exports:[MbscStepper],imports:[common.CommonModule,MbscButtonModule]}]}];return MbscStepperModule}();var CLICK_MOVE_THRESHOLD=3;var CLICK_HOLD_THRESHOLD=300;var SwitchBase=/*#__PURE__*/function(_super){__extends(SwitchBase,_super);function SwitchBase(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this._onChange=function(ev){var s=_this.s;var checked=ev.target.checked;ev.stopPropagation();if(s.checked===UNDEFINED){_this.setState({checked:checked});}_this._change(checked);if(s.onChange){s.onChange(ev);}};_this._onLabelClick=function(ev){ev.preventDefault();};return _this}SwitchBase.prototype._change=function(checked){};SwitchBase.prototype._setHandleLeft=function(left){this._handle.style.left=left+"%";};SwitchBase.prototype._mounted=function(){var _this=this;var handleContWidth;var handleContLeft;var gestureStart;var isHandle;var isNativeScroll;listen(this._input,CLICK,this._onChange);this._inputUnlisten=gestureListener(this._input,{onBlur:function(){_this.setState({hasFocus:false});},onFocus:function(){if(!_this._disabled){_this.setState({hasFocus:true});}}});this._unlisten=gestureListener(this._el,{click:false,onEnd:function(ev){if(!_this._disabled&&!isNativeScroll){if(isHandle){var noMovement=Math.abs(ev.deltaX)<CLICK_MOVE_THRESHOLD&&Math.abs(ev.deltaY)<CLICK_MOVE_THRESHOLD;var longHold=+new Date-gestureStart>CLICK_HOLD_THRESHOLD;var newChecked=noMovement&&!longHold?!_this._checked:_this._handleLeft>=50;if(newChecked!==_this._checked){_this._input.click();_this._change(newChecked);}isHandle=false;}_this.setState({dragging:false,isActive:false});}},onMove:function(ev){var domEvent=ev.domEvent;var dragging=_this.state.dragging;if(!_this._disabled&&!isNativeScroll&&isHandle&&handleContWidth){if(Math.abs(ev.deltaX)>5){dragging=true;_this.setState({dragging:true});}if(dragging){if(domEvent.cancelable){domEvent.preventDefault();}var offset=(ev.startX-handleContLeft)/handleContWidth*100;var cappedOffset=Math.max(Math.min(offset,100),0);var left=cappedOffset+ev.deltaX/handleContWidth*100;var capped=Math.max(Math.min(left,100),0);_this._handleLeft=capped;_this._setHandleLeft(capped);}}if(!dragging&&!isNativeScroll&&Math.abs(ev.deltaY)>7&&domEvent.type===TOUCH_MOVE){isNativeScroll=true;_this.setState({isActive:false});}},onStart:function(ev){if(!_this._disabled){isNativeScroll=false;handleContWidth=_this._handleCont.clientWidth;handleContLeft=getOffset(_this._handleCont).left;gestureStart=+new Date;if(ev.domEvent.target===_this._handleCont||_this._handleCont.contains(ev.domEvent.target)){isHandle=true;}_this.setState({isActive:true});}}});this._setHandleLeft(this._handleLeft);};SwitchBase.prototype._render=function(s,state){var disabled=s.disabled===UNDEFINED?state.disabled:emptyOrTrue(s.disabled);var position=s.position==="start"?s.rtl?"right":"left":s.rtl?"left":"right";var colorClass=s.color!==UNDEFINED?" mbsc-switch-"+s.color:"";this._disabled=disabled;this._checked=s.checked!==UNDEFINED?emptyOrTrue(s.checked):state.checked!==UNDEFINED?state.checked:emptyOrTrue(s.defaultChecked);this._cssClass="mbsc-switch mbsc-form-control-wrapper mbsc-font "+this._className+this._theme+this._rtl+this._hb+" mbsc-switch-"+position+(disabled?" mbsc-disabled":"");if(!state.dragging){var hl=this._checked?100:0;if(hl!==this._handleLeft&&this._handle){this._setHandleLeft(hl);}this._handleLeft=hl;}this._handleContClass="mbsc-switch-track mbsc-switch-track-"+position+this._theme+colorClass+(this._checked?" mbsc-checked":"")+(disabled?" mbsc-disabled":"")+(state.hasFocus?" mbsc-focus":"")+(state.isActive?" mbsc-active":"");this._handleClass="mbsc-switch-handle"+this._theme+colorClass+(state.dragging?"":" mbsc-switch-handle-animate")+(this._checked?" mbsc-checked":"")+(this.state.isActive?" mbsc-active":"")+(disabled?" mbsc-disabled":"")+(this.state.hasFocus?" mbsc-focus":"");};SwitchBase.prototype._destroy=function(){this._unlisten();this._inputUnlisten();unlisten(this._input,CLICK,this._onChange);};SwitchBase.defaults={position:"end"};SwitchBase._name="Switch";SwitchBase.decorators=[{type:core.Directive,args:[{selector:"[mbsc-sw-b]"}]}];return SwitchBase}(BaseComponent);var guid$7=0;var MbscSwitch=/*#__PURE__*/function(_super){__extends(MbscSwitch,_super);function MbscSwitch(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this._id="mbsc-switch-"+guid$7++;return _this}Object.defineProperty(MbscSwitch.prototype,"checked",{get:function(){return this._check},set:function(val){if(this._check!==val){this.props.checked=val;this._onFormChange(val);this._check=val;this.setState({checked:val});}},enumerable:true,configurable:true});MbscSwitch.prototype.registerOnChange=function(fn){this._onFormChange=fn;};MbscSwitch.prototype.registerOnTouched=function(fn){this._onFormTouch=fn;};MbscSwitch.prototype.setDisabledState=function(disabled){this.setState({disabled:disabled});};MbscSwitch.prototype.writeValue=function(val){this.checked=val;};MbscSwitch.prototype._change=function(checked){this.checked=checked;};MbscSwitch.prototype._mounted=function(){this._input=this.vInput.nativeElement;this._handle=this.vHandle.nativeElement;this._handleCont=this.vHandleCont.nativeElement;_super.prototype._mounted.call(this);};MbscSwitch.decorators=[{type:core.Component,args:[{changeDetection:core.ChangeDetectionStrategy.OnPush,encapsulation:core.ViewEncapsulation.None,host:{"[class]":"_cssClass"},selector:"mbsc-switch",template:'\n    <label *ngIf="s.label" [for]="id || _id"\n      [class]="\'mbsc-form-control-label\' + _theme + (_disabled ? \' mbsc-disabled\' : \'\')">{{s.label}}\n      <span *ngIf="s.description" [class]="\'mbsc-description\' + _theme + (_disabled ? \' mbsc-disabled\' : \'\')">{{s.description}}</span>\n    </label>\n\n    <input #input\n      type="checkbox"\n      class="mbsc-form-control-input mbsc-reset"\n      [id]="id || _id"\n      [checked]="_checked"\n      [disabled]="_disabled"\n      [readonly]="readonly"\n    />\n\n    <span [class]="_handleContClass" #handleCont>\n      <span [class]="_handleClass" #handle></span>\n    </span>\n\n    <ng-content></ng-content>\n  '}]}];MbscSwitch.propDecorators={vInput:[{type:core.ViewChild,args:["input",{static:false}]}],vHandle:[{type:core.ViewChild,args:["handle",{static:false}]}],vHandleCont:[{type:core.ViewChild,args:["handleCont",{static:false}]}],checked:[{type:core.Input}],color:[{type:core.Input}],description:[{type:core.Input}],disabled:[{type:core.Input}],id:[{type:core.Input}],label:[{type:core.Input}],position:[{type:core.Input}],readonly:[{type:core.Input}]};return MbscSwitch}(SwitchBase);var MbscSwitchModule=/*#__PURE__*/function(){function MbscSwitchModule(){}MbscSwitchModule.decorators=[{type:core.NgModule,args:[{declarations:[SwitchBase,MbscSwitch],exports:[MbscSwitch],imports:[common.CommonModule]}]}];return MbscSwitchModule}();var MbscFormsModule=/*#__PURE__*/function(){function MbscFormsModule(){}MbscFormsModule.decorators=[{type:core.NgModule,args:[{exports:[MbscButtonModule,MbscCheckboxModule,MbscInputModule,MbscPageModule,MbscRadioModule,MbscSegmentedModule,MbscStepperModule,MbscSwitchModule,MbscNotificationsModule],imports:[common.CommonModule,MbscButtonModule,MbscCheckboxModule,MbscInputModule,MbscPageModule,MbscRadioModule,MbscSegmentedModule,MbscStepperModule,MbscSwitchModule]}]}];return MbscFormsModule}();var MbscOptionsProviderComponent=/*#__PURE__*/function(){function MbscOptionsProviderComponent(_opt){this._opt=_opt;}MbscOptionsProviderComponent.prototype.ngOnChanges=function(changes){if(changes.options){this._opt.setOptions(changes.options.currentValue);}};MbscOptionsProviderComponent.decorators=[{type:core.Component,args:[{changeDetection:core.ChangeDetectionStrategy.OnPush,encapsulation:core.ViewEncapsulation.None,providers:[{provide:MbscOptionsService,useClass:MbscOptionsService}],selector:"mbsc-options-provider",template:"<ng-content></ng-content>"}]}];MbscOptionsProviderComponent.ctorParameters=function(){return [{type:MbscOptionsService}]};MbscOptionsProviderComponent.propDecorators={options:[{type:core.Input}]};return MbscOptionsProviderComponent}();var MbscOptionsModule=/*#__PURE__*/function(){function MbscOptionsModule(){}MbscOptionsModule.decorators=[{type:core.NgModule,args:[{declarations:[MbscOptionsProviderComponent],exports:[MbscOptionsProviderComponent]}]}];return MbscOptionsModule}();var MbscBaseModule=/*#__PURE__*/function(){function MbscBaseModule(){}MbscBaseModule.decorators=[{type:core.NgModule,args:[{declarations:[Base,BaseComponent]}]}];return MbscBaseModule}();var MbscModule=/*#__PURE__*/function(){function MbscModule(){}MbscModule.decorators=[{type:core.NgModule,args:[{exports:[MbscCalendarModule,MbscDatepickerModule,MbscDatetimeModule,MbscEventcalendarModule,MbscFormsModule,MbscIconModule,MbscOptionsModule,MbscPopupModule,MbscScrollerModule,MbscSelectModule,MbscTimegridModule],imports:[MbscCalendarModule,MbscBaseModule,MbscDatepickerModule,MbscDatetimeModule,MbscEventcalendarModule,MbscFormsModule,MbscIconModule,MbscOptionsModule,MbscPopupModule,MbscScrollerModule,MbscSelectModule,MbscTimegridModule]}]}];return MbscModule}();remote.fw="angular";

exports.MBSC_OPTIONS = MBSC_OPTIONS;
exports.MbscButton = MbscButton;
exports.MbscButtonModule = MbscButtonModule;
exports.MbscCheckbox = MbscCheckbox;
exports.MbscCheckboxModule = MbscCheckboxModule;
exports.MbscDatepicker = MbscDatepicker;
exports.MbscDatepickerModule = MbscDatepickerModule;
exports.MbscDropdown = MbscDropdown;
exports.MbscEventcalendar = MbscEventcalendar;
exports.MbscEventcalendarModule = MbscEventcalendarModule;
exports.MbscFormsModule = MbscFormsModule;
exports.MbscInput = MbscInput;
exports.MbscInputModule = MbscInputModule;
exports.MbscModule = MbscModule;
exports.MbscNotificationsModule = MbscNotificationsModule;
exports.MbscOptionsModule = MbscOptionsModule;
exports.MbscOptionsService = MbscOptionsService;
exports.MbscPage = MbscPage;
exports.MbscPageModule = MbscPageModule;
exports.MbscPopup = MbscPopup;
exports.MbscPopupModule = MbscPopupModule;
exports.MbscRadio = MbscRadio;
exports.MbscRadioGroup = MbscRadioGroup;
exports.MbscRadioModule = MbscRadioModule;
exports.MbscSegmented = MbscSegmented;
exports.MbscSegmentedGroup = MbscSegmentedGroup;
exports.MbscSegmentedModule = MbscSegmentedModule;
exports.MbscSelect = MbscSelect;
exports.MbscSelectModule = MbscSelectModule;
exports.MbscStepper = MbscStepper;
exports.MbscStepperModule = MbscStepperModule;
exports.MbscSwitch = MbscSwitch;
exports.MbscSwitchModule = MbscSwitchModule;
exports.MbscTextarea = MbscTextarea;
exports.Notifications = Notifications;
exports.autoDetect = autoDetect;
exports.createCustomTheme = createCustomTheme;
exports.formatDate = formatDatePublic;
exports.getAutoTheme = getAutoTheme;
exports.getJson = getJson;
exports.globalChanges = globalChanges;
exports.hijriCalendar = hijriCalendar;
exports.jalaliCalendar = jalaliCalendar;
exports.locale = locale;
exports.localeAr = ar;
exports.localeBg = bg;
exports.localeCa = ca;
exports.localeCs = cs;
exports.localeDa = da;
exports.localeDe = de;
exports.localeEl = el;
exports.localeEn = localeEn;
exports.localeEnGB = enGB;
exports.localeEs = es;
exports.localeFa = fa;
exports.localeFi = fi;
exports.localeFr = fr;
exports.localeHe = he;
exports.localeHi = hi;
exports.localeHr = hr;
exports.localeHu = hu;
exports.localeIt = it;
exports.localeJa = ja;
exports.localeKo = ko;
exports.localeLt = lt;
exports.localeNl = nl;
exports.localeNo = no;
exports.localePl = pl;
exports.localePtBR = ptBR;
exports.localePtPT = ptPT;
exports.localeRo = ro;
exports.localeRu = ru;
exports.localeRuUA = ruUA;
exports.localeSk = sk;
exports.localeSr = sr;
exports.localeSv = sv;
exports.localeTh = th;
exports.localeTr = tr;
exports.localeUa = ua;
exports.localeVi = vi;
exports.localeZh = zh;
exports.luxonTimezone = luxonTimezone;
exports.momentTimezone = momentTimezone;
exports.options = options;
exports.parseDate = parseDate;
exports.platform = platform$1;
exports.remote = remote;
exports.setOptions = setOptions;
exports.themes = themes;
exports.updateRecurringEvent = updateRecurringEvent;
exports.util = util;
exports.ɵa = MbscDatepickerBase;
exports.ɵb = MbscDatepickerDirective;
exports.ɵbb = PickerBase;
exports.ɵbc = BaseComponent;
exports.ɵbd = Base;
exports.ɵbe = FormControl;
exports.ɵbf = MbscInstanceService;
exports.ɵbg = InstanceServiceBase;
exports.ɵbh = getPickerTemplate;
exports.ɵbi = MbscCalendarHeaderModule;
exports.ɵbj = CalendarSubscriber;
exports.ɵbk = MbscCalendarPrev;
exports.ɵbl = MbscCalendarNext;
exports.ɵbm = MbscCalendarToday;
exports.ɵbn = MbscCalendarNav;
exports.ɵbo = MbscCustomIcon;
exports.ɵbp = MbscCustomStartIcon;
exports.ɵbq = MbscCustomEndIcon;
exports.ɵbr = MbscIcon;
exports.ɵbs = MbscIconModule;
exports.ɵbt = IconBase;
exports.ɵbu = MbscCalendar;
exports.ɵbv = MbscCalendarModule;
exports.ɵbw = CalendarBase;
exports.ɵbx = MbscCalendarViewModule;
exports.ɵby = CalendarDayBase;
exports.ɵbz = CalendarLabelBase;
exports.ɵc = DatepickerBase;
exports.ɵca = CalendarViewBase;
exports.ɵcb = MbscCalendarDay;
exports.ɵcc = MbscCalendarLabel;
exports.ɵcd = MbscCalendarView;
exports.ɵce = MbscCalendarWeekDays;
exports.ɵcf = MbscMonthView;
exports.ɵcg = MonthViewBase;
exports.ɵch = MbscMultiYearView;
exports.ɵci = MbscYearView;
exports.ɵcj = MbscPrompt;
exports.ɵck = MbscSnackbar;
exports.ɵcl = MbscScrollviewBaseModule;
exports.ɵcm = MbscScrollviewBase;
exports.ɵcn = ScrollviewBase;
exports.ɵco = MbscDateBase;
exports.ɵcp = MbscDate;
exports.ɵcq = MbscDatetime;
exports.ɵcr = MbscTime;
exports.ɵcs = MbscDatetimeModule;
exports.ɵct = DatetimeBase;
exports.ɵcu = MbscScroller;
exports.ɵcv = MbscScrollerModule;
exports.ɵcw = ScrollerBase;
exports.ɵcx = MbscWheelItem;
exports.ɵcy = WheelItemBase;
exports.ɵcz = MbscWheel;
exports.ɵd = PopupBase;
exports.ɵda = WheelBase;
exports.ɵdb = MbscPickerModule;
exports.ɵdc = MbscRadioService;
exports.ɵdd = MbscTimeBox;
exports.ɵde = MbscTimegrid;
exports.ɵdf = MbscTimegridModule;
exports.ɵdg = TimegridBase;
exports.ɵdh = UNDEFINED;
exports.ɵdi = MbscListItem;
exports.ɵdj = ListItemBase;
exports.ɵdk = MbscScheduleEvent;
exports.ɵdl = ScheduleEventBase;
exports.ɵdm = MbscScheduler;
exports.ɵdn = SchedulerBase;
exports.ɵdo = STBase;
exports.ɵdp = MbscTimeline;
exports.ɵdq = TimelineBase;
exports.ɵdr = MbscWeekDay;
exports.ɵds = WeekDayBase;
exports.ɵdt = MbscTimeIndicator;
exports.ɵdu = TimeIndicatorBase;
exports.ɵdv = DraggableDirective;
exports.ɵdw = MbscDraggableModule;
exports.ɵdx = DraggableBase;
exports.ɵdy = MbscList;
exports.ɵdz = MbscListHeader;
exports.ɵe = MbscSelectOptionDirective;
exports.ɵea = MbscListModule;
exports.ɵeb = ListBase;
exports.ɵec = ListHeaderBase;
exports.ɵed = MbscOptionsProviderComponent;
exports.ɵee = MbscBaseModule;
exports.ɵf = MbscSelectOptionComponent;
exports.ɵg = MbscSelectBase;
exports.ɵh = MbscSelectDirective;
exports.ɵi = SelectBase;
exports.ɵj = MbscEventListService;
exports.ɵk = MbscEventListDayDirective;
exports.ɵl = MbscEventListItem;
exports.ɵm = EventcalendarBase;
exports.ɵn = ButtonBase;
exports.ɵo = CheckboxBase;
exports.ɵp = InputBase;
exports.ɵq = PageBase;
exports.ɵr = RadioBase;
exports.ɵs = RadioGroupBase;
exports.ɵt = SegmentedBase;
exports.ɵu = SegmentedGroupBase;
exports.ɵv = StepperBase;
exports.ɵw = SwitchBase;
exports.ɵx = Observable;

Object.defineProperty(exports, '__esModule', { value: true });

})));
